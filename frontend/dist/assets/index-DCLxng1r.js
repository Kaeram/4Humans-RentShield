function xE(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Pw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var sm={exports:{}},ru={},om={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xx;function yE(){if(xx)return Gt;xx=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),x=Symbol.iterator;function w(j){return j===null||typeof j!="object"?null:(j=x&&j[x]||j["@@iterator"],typeof j=="function"?j:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,P={};function b(j,he,De){this.props=j,this.context=he,this.refs=P,this.updater=De||E}b.prototype.isReactComponent={},b.prototype.setState=function(j,he){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,he,"setState")},b.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function M(){}M.prototype=b.prototype;function O(j,he,De){this.props=j,this.context=he,this.refs=P,this.updater=De||E}var U=O.prototype=new M;U.constructor=O,A(U,b.prototype),U.isPureReactComponent=!0;var k=Array.isArray,B=Object.prototype.hasOwnProperty,H={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function $(j,he,De){var je,ke={},oe=null,be=null;if(he!=null)for(je in he.ref!==void 0&&(be=he.ref),he.key!==void 0&&(oe=""+he.key),he)B.call(he,je)&&!G.hasOwnProperty(je)&&(ke[je]=he[je]);var Re=arguments.length-2;if(Re===1)ke.children=De;else if(1<Re){for(var nt=Array(Re),qe=0;qe<Re;qe++)nt[qe]=arguments[qe+2];ke.children=nt}if(j&&j.defaultProps)for(je in Re=j.defaultProps,Re)ke[je]===void 0&&(ke[je]=Re[je]);return{$$typeof:n,type:j,key:oe,ref:be,props:ke,_owner:H.current}}function I(j,he){return{$$typeof:n,type:j.type,key:he,ref:j.ref,props:j.props,_owner:j._owner}}function z(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function q(j){var he={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(De){return he[De]})}var re=/\/+/g;function ue(j,he){return typeof j=="object"&&j!==null&&j.key!=null?q(""+j.key):he.toString(36)}function ge(j,he,De,je,ke){var oe=typeof j;(oe==="undefined"||oe==="boolean")&&(j=null);var be=!1;if(j===null)be=!0;else switch(oe){case"string":case"number":be=!0;break;case"object":switch(j.$$typeof){case n:case e:be=!0}}if(be)return be=j,ke=ke(be),j=je===""?"."+ue(be,0):je,k(ke)?(De="",j!=null&&(De=j.replace(re,"$&/")+"/"),ge(ke,he,De,"",function(qe){return qe})):ke!=null&&(z(ke)&&(ke=I(ke,De+(!ke.key||be&&be.key===ke.key?"":(""+ke.key).replace(re,"$&/")+"/")+j)),he.push(ke)),1;if(be=0,je=je===""?".":je+":",k(j))for(var Re=0;Re<j.length;Re++){oe=j[Re];var nt=je+ue(oe,Re);be+=ge(oe,he,De,nt,ke)}else if(nt=w(j),typeof nt=="function")for(j=nt.call(j),Re=0;!(oe=j.next()).done;)oe=oe.value,nt=je+ue(oe,Re++),be+=ge(oe,he,De,nt,ke);else if(oe==="object")throw he=String(j),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.");return be}function Se(j,he,De){if(j==null)return j;var je=[],ke=0;return ge(j,je,"","",function(oe){return he.call(De,oe,ke++)}),je}function ae(j){if(j._status===-1){var he=j._result;he=he(),he.then(function(De){(j._status===0||j._status===-1)&&(j._status=1,j._result=De)},function(De){(j._status===0||j._status===-1)&&(j._status=2,j._result=De)}),j._status===-1&&(j._status=0,j._result=he)}if(j._status===1)return j._result.default;throw j._result}var te={current:null},X={transition:null},we={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:X,ReactCurrentOwner:H};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Gt.Children={map:Se,forEach:function(j,he,De){Se(j,function(){he.apply(this,arguments)},De)},count:function(j){var he=0;return Se(j,function(){he++}),he},toArray:function(j){return Se(j,function(he){return he})||[]},only:function(j){if(!z(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Gt.Component=b,Gt.Fragment=t,Gt.Profiler=o,Gt.PureComponent=O,Gt.StrictMode=i,Gt.Suspense=f,Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=we,Gt.act=Q,Gt.cloneElement=function(j,he,De){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var je=A({},j.props),ke=j.key,oe=j.ref,be=j._owner;if(he!=null){if(he.ref!==void 0&&(oe=he.ref,be=H.current),he.key!==void 0&&(ke=""+he.key),j.type&&j.type.defaultProps)var Re=j.type.defaultProps;for(nt in he)B.call(he,nt)&&!G.hasOwnProperty(nt)&&(je[nt]=he[nt]===void 0&&Re!==void 0?Re[nt]:he[nt])}var nt=arguments.length-2;if(nt===1)je.children=De;else if(1<nt){Re=Array(nt);for(var qe=0;qe<nt;qe++)Re[qe]=arguments[qe+2];je.children=Re}return{$$typeof:n,type:j.type,key:ke,ref:oe,props:je,_owner:be}},Gt.createContext=function(j){return j={$$typeof:u,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},Gt.createElement=$,Gt.createFactory=function(j){var he=$.bind(null,j);return he.type=j,he},Gt.createRef=function(){return{current:null}},Gt.forwardRef=function(j){return{$$typeof:h,render:j}},Gt.isValidElement=z,Gt.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:ae}},Gt.memo=function(j,he){return{$$typeof:m,type:j,compare:he===void 0?null:he}},Gt.startTransition=function(j){var he=X.transition;X.transition={};try{j()}finally{X.transition=he}},Gt.unstable_act=Q,Gt.useCallback=function(j,he){return te.current.useCallback(j,he)},Gt.useContext=function(j){return te.current.useContext(j)},Gt.useDebugValue=function(){},Gt.useDeferredValue=function(j){return te.current.useDeferredValue(j)},Gt.useEffect=function(j,he){return te.current.useEffect(j,he)},Gt.useId=function(){return te.current.useId()},Gt.useImperativeHandle=function(j,he,De){return te.current.useImperativeHandle(j,he,De)},Gt.useInsertionEffect=function(j,he){return te.current.useInsertionEffect(j,he)},Gt.useLayoutEffect=function(j,he){return te.current.useLayoutEffect(j,he)},Gt.useMemo=function(j,he){return te.current.useMemo(j,he)},Gt.useReducer=function(j,he,De){return te.current.useReducer(j,he,De)},Gt.useRef=function(j){return te.current.useRef(j)},Gt.useState=function(j){return te.current.useState(j)},Gt.useSyncExternalStore=function(j,he,De){return te.current.useSyncExternalStore(j,he,De)},Gt.useTransition=function(){return te.current.useTransition()},Gt.version="18.3.1",Gt}var yx;function D0(){return yx||(yx=1,om.exports=yE()),om.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx;function SE(){if(Sx)return ru;Sx=1;var n=D0(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,m){var _,x={},w=null,E=null;m!==void 0&&(w=""+m),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(E=f.ref);for(_ in f)i.call(f,_)&&!l.hasOwnProperty(_)&&(x[_]=f[_]);if(h&&h.defaultProps)for(_ in f=h.defaultProps,f)x[_]===void 0&&(x[_]=f[_]);return{$$typeof:e,type:h,key:w,ref:E,props:x,_owner:o.current}}return ru.Fragment=t,ru.jsx=u,ru.jsxs=u,ru}var wx;function wE(){return wx||(wx=1,sm.exports=SE()),sm.exports}var v=wE(),ne=D0();const bE=Pw(ne),ME=xE({__proto__:null,default:bE},[ne]);var uh={},am={exports:{}},ki={},lm={exports:{}},cm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bx;function EE(){return bx||(bx=1,(function(n){function e(X,we){var Q=X.length;X.push(we);e:for(;0<Q;){var j=Q-1>>>1,he=X[j];if(0<o(he,we))X[j]=we,X[Q]=he,Q=j;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var we=X[0],Q=X.pop();if(Q!==we){X[0]=Q;e:for(var j=0,he=X.length,De=he>>>1;j<De;){var je=2*(j+1)-1,ke=X[je],oe=je+1,be=X[oe];if(0>o(ke,Q))oe<he&&0>o(be,ke)?(X[j]=be,X[oe]=Q,j=oe):(X[j]=ke,X[je]=Q,j=je);else if(oe<he&&0>o(be,Q))X[j]=be,X[oe]=Q,j=oe;else break e}}return we}function o(X,we){var Q=X.sortIndex-we.sortIndex;return Q!==0?Q:X.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],m=[],_=1,x=null,w=3,E=!1,A=!1,P=!1,b=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(X){for(var we=t(m);we!==null;){if(we.callback===null)i(m);else if(we.startTime<=X)i(m),we.sortIndex=we.expirationTime,e(f,we);else break;we=t(m)}}function k(X){if(P=!1,U(X),!A)if(t(f)!==null)A=!0,ae(B);else{var we=t(m);we!==null&&te(k,we.startTime-X)}}function B(X,we){A=!1,P&&(P=!1,M($),$=-1),E=!0;var Q=w;try{for(U(we),x=t(f);x!==null&&(!(x.expirationTime>we)||X&&!q());){var j=x.callback;if(typeof j=="function"){x.callback=null,w=x.priorityLevel;var he=j(x.expirationTime<=we);we=n.unstable_now(),typeof he=="function"?x.callback=he:x===t(f)&&i(f),U(we)}else i(f);x=t(f)}if(x!==null)var De=!0;else{var je=t(m);je!==null&&te(k,je.startTime-we),De=!1}return De}finally{x=null,w=Q,E=!1}}var H=!1,G=null,$=-1,I=5,z=-1;function q(){return!(n.unstable_now()-z<I)}function re(){if(G!==null){var X=n.unstable_now();z=X;var we=!0;try{we=G(!0,X)}finally{we?ue():(H=!1,G=null)}}else H=!1}var ue;if(typeof O=="function")ue=function(){O(re)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Se=ge.port2;ge.port1.onmessage=re,ue=function(){Se.postMessage(null)}}else ue=function(){b(re,0)};function ae(X){G=X,H||(H=!0,ue())}function te(X,we){$=b(function(){X(n.unstable_now())},we)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){A||E||(A=!0,ae(B))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(X){switch(w){case 1:case 2:case 3:var we=3;break;default:we=w}var Q=w;w=we;try{return X()}finally{w=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,we){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Q=w;w=X;try{return we()}finally{w=Q}},n.unstable_scheduleCallback=function(X,we,Q){var j=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?j+Q:j):Q=j,X){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Q+he,X={id:_++,callback:we,priorityLevel:X,startTime:Q,expirationTime:he,sortIndex:-1},Q>j?(X.sortIndex=Q,e(m,X),t(f)===null&&X===t(m)&&(P?(M($),$=-1):P=!0,te(k,Q-j))):(X.sortIndex=he,e(f,X),A||E||(A=!0,ae(B))),X},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(X){var we=w;return function(){var Q=w;w=we;try{return X.apply(this,arguments)}finally{w=Q}}}})(cm)),cm}var Mx;function TE(){return Mx||(Mx=1,lm.exports=EE()),lm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ex;function AE(){if(Ex)return ki;Ex=1;var n=D0(),e=TE();function t(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,a){u(r,a),u(r+"Capture",a)}function u(r,a){for(o[r]=a,r=0;r<a.length;r++)i.add(a[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},x={};function w(r){return f.call(x,r)?!0:f.call(_,r)?!1:m.test(r)?x[r]=!0:(_[r]=!0,!1)}function E(r,a,d,g){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function A(r,a,d,g){if(a===null||typeof a>"u"||E(r,a,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function P(r,a,d,g,S,T,N){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=g,this.attributeNamespace=S,this.mustUseProperty=d,this.propertyName=r,this.type=a,this.sanitizeURL=T,this.removeEmptyString=N}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){b[r]=new P(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var a=r[0];b[a]=new P(a,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){b[r]=new P(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){b[r]=new P(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){b[r]=new P(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){b[r]=new P(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){b[r]=new P(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){b[r]=new P(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){b[r]=new P(r,5,!1,r.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function O(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var a=r.replace(M,O);b[a]=new P(a,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var a=r.replace(M,O);b[a]=new P(a,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var a=r.replace(M,O);b[a]=new P(a,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){b[r]=new P(r,1,!1,r.toLowerCase(),null,!1,!1)}),b.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){b[r]=new P(r,1,!1,r.toLowerCase(),null,!0,!0)});function U(r,a,d,g){var S=b.hasOwnProperty(a)?b[a]:null;(S!==null?S.type!==0:g||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(A(a,d,S,g)&&(d=null),g||S===null?w(a)&&(d===null?r.removeAttribute(a):r.setAttribute(a,""+d)):S.mustUseProperty?r[S.propertyName]=d===null?S.type===3?!1:"":d:(a=S.attributeName,g=S.attributeNamespace,d===null?r.removeAttribute(a):(S=S.type,d=S===3||S===4&&d===!0?"":""+d,g?r.setAttributeNS(g,a,d):r.setAttribute(a,d))))}var k=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),H=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),q=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),X=Symbol.iterator;function we(r){return r===null||typeof r!="object"?null:(r=X&&r[X]||r["@@iterator"],typeof r=="function"?r:null)}var Q=Object.assign,j;function he(r){if(j===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);j=a&&a[1]||""}return`
`+j+r}var De=!1;function je(r,a){if(!r||De)return"";De=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(ve){var g=ve}Reflect.construct(r,[],a)}else{try{a.call()}catch(ve){g=ve}r.call(a.prototype)}else{try{throw Error()}catch(ve){g=ve}r()}}catch(ve){if(ve&&g&&typeof ve.stack=="string"){for(var S=ve.stack.split(`
`),T=g.stack.split(`
`),N=S.length-1,W=T.length-1;1<=N&&0<=W&&S[N]!==T[W];)W--;for(;1<=N&&0<=W;N--,W--)if(S[N]!==T[W]){if(N!==1||W!==1)do if(N--,W--,0>W||S[N]!==T[W]){var K=`
`+S[N].replace(" at new "," at ");return r.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",r.displayName)),K}while(1<=N&&0<=W);break}}}finally{De=!1,Error.prepareStackTrace=d}return(r=r?r.displayName||r.name:"")?he(r):""}function ke(r){switch(r.tag){case 5:return he(r.type);case 16:return he("Lazy");case 13:return he("Suspense");case 19:return he("SuspenseList");case 0:case 2:case 15:return r=je(r.type,!1),r;case 11:return r=je(r.type.render,!1),r;case 1:return r=je(r.type,!0),r;default:return""}}function oe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case G:return"Fragment";case H:return"Portal";case I:return"Profiler";case $:return"StrictMode";case ue:return"Suspense";case ge:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case q:return(r.displayName||"Context")+".Consumer";case z:return(r._context.displayName||"Context")+".Provider";case re:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Se:return a=r.displayName||null,a!==null?a:oe(r.type)||"Memo";case ae:a=r._payload,r=r._init;try{return oe(r(a))}catch{}}return null}function be(r){var a=r.type;switch(r.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=a.render,r=r.displayName||r.name||"",a.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(a);case 8:return a===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Re(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function nt(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function qe(r){var a=nt(r)?"checked":"value",d=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),g=""+r[a];if(!r.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var S=d.get,T=d.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return S.call(this)},set:function(N){g=""+N,T.call(this,N)}}),Object.defineProperty(r,a,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(N){g=""+N},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Ft(r){r._valueTracker||(r._valueTracker=qe(r))}function mn(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var d=a.getValue(),g="";return r&&(g=nt(r)?r.checked?"true":"false":r.value),r=g,r!==d?(a.setValue(r),!0):!1}function It(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function qt(r,a){var d=a.checked;return Q({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??r._wrapperState.initialChecked})}function $t(r,a){var d=a.defaultValue==null?"":a.defaultValue,g=a.checked!=null?a.checked:a.defaultChecked;d=Re(a.value!=null?a.value:d),r._wrapperState={initialChecked:g,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Rt(r,a){a=a.checked,a!=null&&U(r,"checked",a,!1)}function un(r,a){Rt(r,a);var d=Re(a.value),g=a.type;if(d!=null)g==="number"?(d===0&&r.value===""||r.value!=d)&&(r.value=""+d):r.value!==""+d&&(r.value=""+d);else if(g==="submit"||g==="reset"){r.removeAttribute("value");return}a.hasOwnProperty("value")?vn(r,a.type,d):a.hasOwnProperty("defaultValue")&&vn(r,a.type,Re(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(r.defaultChecked=!!a.defaultChecked)}function Y(r,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var g=a.type;if(!(g!=="submit"&&g!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+r._wrapperState.initialValue,d||a===r.value||(r.value=a),r.defaultValue=a}d=r.name,d!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,d!==""&&(r.name=d)}function vn(r,a,d){(a!=="number"||It(r.ownerDocument)!==r)&&(d==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+d&&(r.defaultValue=""+d))}var Vt=Array.isArray;function Wt(r,a,d,g){if(r=r.options,a){a={};for(var S=0;S<d.length;S++)a["$"+d[S]]=!0;for(d=0;d<r.length;d++)S=a.hasOwnProperty("$"+r[d].value),r[d].selected!==S&&(r[d].selected=S),S&&g&&(r[d].defaultSelected=!0)}else{for(d=""+Re(d),a=null,S=0;S<r.length;S++){if(r[S].value===d){r[S].selected=!0,g&&(r[S].defaultSelected=!0);return}a!==null||r[S].disabled||(a=r[S])}a!==null&&(a.selected=!0)}}function ot(r,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},a,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function V(r,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(t(92));if(Vt(d)){if(1<d.length)throw Error(t(93));d=d[0]}a=d}a==null&&(a=""),d=a}r._wrapperState={initialValue:Re(d)}}function R(r,a){var d=Re(a.value),g=Re(a.defaultValue);d!=null&&(d=""+d,d!==r.value&&(r.value=d),a.defaultValue==null&&r.defaultValue!==d&&(r.defaultValue=d)),g!=null&&(r.defaultValue=""+g)}function ie(r){var a=r.textContent;a===r._wrapperState.initialValue&&a!==""&&a!==null&&(r.value=a)}function Ee(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ae(r,a){return r==null||r==="http://www.w3.org/1999/xhtml"?Ee(a):r==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Me,dt=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,g,S){MSApp.execUnsafeLocalFunction(function(){return r(a,d,g,S)})}:r})(function(r,a){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=a;else{for(Me=Me||document.createElement("div"),Me.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Me.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;a.firstChild;)r.appendChild(a.firstChild)}});function Ve(r,a){if(a){var d=r.firstChild;if(d&&d===r.lastChild&&d.nodeType===3){d.nodeValue=a;return}}r.textContent=a}var it={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},St=["Webkit","ms","Moz","O"];Object.keys(it).forEach(function(r){St.forEach(function(a){a=a+r.charAt(0).toUpperCase()+r.substring(1),it[a]=it[r]})});function Ie(r,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||it.hasOwnProperty(r)&&it[r]?(""+a).trim():a+"px"}function We(r,a){r=r.style;for(var d in a)if(a.hasOwnProperty(d)){var g=d.indexOf("--")===0,S=Ie(d,a[d],g);d==="float"&&(d="cssFloat"),g?r.setProperty(d,S):r[d]=S}}var st=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lt(r,a){if(a){if(st[r]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function ze(r,a){if(r.indexOf("-")===-1)return typeof a.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=null;function J(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ze=null,Oe=null,Ye=null;function Ue(r){if(r=Es(r)){if(typeof Ze!="function")throw Error(t(280));var a=r.stateNode;a&&(a=gl(a),Ze(r.stateNode,r.type,a))}}function Te(r){Oe?Ye?Ye.push(r):Ye=[r]:Oe=r}function Xe(){if(Oe){var r=Oe,a=Ye;if(Ye=Oe=null,Ue(r),a)for(r=0;r<a.length;r++)Ue(a[r])}}function Mt(r,a){return r(a)}function rn(){}var Yt=!1;function ti(r,a,d){if(Yt)return r(a,d);Yt=!0;try{return Mt(r,a,d)}finally{Yt=!1,(Oe!==null||Ye!==null)&&(rn(),Xe())}}function ni(r,a){var d=r.stateNode;if(d===null)return null;var g=gl(d);if(g===null)return null;d=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(r=r.type,g=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!g;break e;default:r=!1}if(r)return null;if(d&&typeof d!="function")throw Error(t(231,a,typeof d));return d}var $o=!1;if(h)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){$o=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{$o=!1}function Jo(r,a,d,g,S,T,N,W,K){var ve=Array.prototype.slice.call(arguments,3);try{a.apply(d,ve)}catch(Le){this.onError(Le)}}var qn=!1,ct=null,zr=!1,Pi=null,Js={onError:function(r){qn=!0,ct=r}};function Qo(r,a,d,g,S,T,N,W,K){qn=!1,ct=null,Jo.apply(Js,arguments)}function Qs(r,a,d,g,S,T,N,W,K){if(Qo.apply(this,arguments),qn){if(qn){var ve=ct;qn=!1,ct=null}else throw Error(t(198));zr||(zr=!0,Pi=ve)}}function _i(r){var a=r,d=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(d=a.return),r=a.return;while(r)}return a.tag===3?d:null}function nr(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function jr(r){if(_i(r)!==r)throw Error(t(188))}function Ka(r){var a=r.alternate;if(!a){if(a=_i(r),a===null)throw Error(t(188));return a!==r?null:r}for(var d=r,g=a;;){var S=d.return;if(S===null)break;var T=S.alternate;if(T===null){if(g=S.return,g!==null){d=g;continue}break}if(S.child===T.child){for(T=S.child;T;){if(T===d)return jr(S),r;if(T===g)return jr(S),a;T=T.sibling}throw Error(t(188))}if(d.return!==g.return)d=S,g=T;else{for(var N=!1,W=S.child;W;){if(W===d){N=!0,d=S,g=T;break}if(W===g){N=!0,g=S,d=T;break}W=W.sibling}if(!N){for(W=T.child;W;){if(W===d){N=!0,d=T,g=S;break}if(W===g){N=!0,g=T,d=S;break}W=W.sibling}if(!N)throw Error(t(189))}}if(d.alternate!==g)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?r:a}function ea(r){return r=Ka(r),r!==null?$a(r):null}function $a(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var a=$a(r);if(a!==null)return a;r=r.sibling}return null}var Ja=e.unstable_scheduleCallback,ta=e.unstable_cancelCallback,yc=e.unstable_shouldYield,eo=e.unstable_requestPaint,xn=e.unstable_now,F=e.unstable_getCurrentPriorityLevel,se=e.unstable_ImmediatePriority,_e=e.unstable_UserBlockingPriority,pe=e.unstable_NormalPriority,le=e.unstable_LowPriority,Ge=e.unstable_IdlePriority,$e=null,He=null;function et(r){if(He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot($e,r,void 0,(r.current.flags&128)===128)}catch{}}var Ne=Math.clz32?Math.clz32:Ct,Je=Math.log,pt=Math.LN2;function Ct(r){return r>>>=0,r===0?32:31-(Je(r)/pt|0)|0}var zt=64,sn=4194304;function rt(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function vt(r,a){var d=r.pendingLanes;if(d===0)return 0;var g=0,S=r.suspendedLanes,T=r.pingedLanes,N=d&268435455;if(N!==0){var W=N&~S;W!==0?g=rt(W):(T&=N,T!==0&&(g=rt(T)))}else N=d&~S,N!==0?g=rt(N):T!==0&&(g=rt(T));if(g===0)return 0;if(a!==0&&a!==g&&(a&S)===0&&(S=g&-g,T=a&-a,S>=T||S===16&&(T&4194240)!==0))return a;if((g&4)!==0&&(g|=d&16),a=r.entangledLanes,a!==0)for(r=r.entanglements,a&=g;0<a;)d=31-Ne(a),S=1<<d,g|=r[d],a&=~S;return g}function mt(r,a){switch(r){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zt(r,a){for(var d=r.suspendedLanes,g=r.pingedLanes,S=r.expirationTimes,T=r.pendingLanes;0<T;){var N=31-Ne(T),W=1<<N,K=S[N];K===-1?((W&d)===0||(W&g)!==0)&&(S[N]=mt(W,a)):K<=a&&(r.expiredLanes|=W),T&=~W}}function Et(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Yn(){var r=zt;return zt<<=1,(zt&4194240)===0&&(zt=64),r}function xi(r){for(var a=[],d=0;31>d;d++)a.push(r);return a}function gn(r,a,d){r.pendingLanes|=a,a!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,a=31-Ne(a),r[a]=d}function dn(r,a){var d=r.pendingLanes&~a;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=a,r.mutableReadLanes&=a,r.entangledLanes&=a,a=r.entanglements;var g=r.eventTimes;for(r=r.expirationTimes;0<d;){var S=31-Ne(d),T=1<<S;a[S]=0,g[S]=-1,r[S]=-1,d&=~T}}function Ht(r,a){var d=r.entangledLanes|=a;for(r=r.entanglements;d;){var g=31-Ne(d),S=1<<g;S&a|r[g]&a&&(r[g]|=a),d&=~S}}var wt=0;function Nn(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Cn,wn,Vr,Ri,na,ia=!1,to=[],Hi=null,yr=null,ir=null,ra=new Map,Tt=new Map,jn=[],hn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(r,a){switch(r){case"focusin":case"focusout":Hi=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":ra.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(a.pointerId)}}function gs(r,a,d,g,S,T){return r===null||r.nativeEvent!==T?(r={blockedOn:a,domEventName:d,eventSystemFlags:g,nativeEvent:T,targetContainers:[S]},a!==null&&(a=Es(a),a!==null&&wn(a)),r):(r.eventSystemFlags|=g,a=r.targetContainers,S!==null&&a.indexOf(S)===-1&&a.push(S),r)}function wc(r,a,d,g,S){switch(a){case"focusin":return Hi=gs(Hi,r,a,d,g,S),!0;case"dragenter":return yr=gs(yr,r,a,d,g,S),!0;case"mouseover":return ir=gs(ir,r,a,d,g,S),!0;case"pointerover":var T=S.pointerId;return ra.set(T,gs(ra.get(T)||null,r,a,d,g,S)),!0;case"gotpointercapture":return T=S.pointerId,Tt.set(T,gs(Tt.get(T)||null,r,a,d,g,S)),!0}return!1}function Qa(r){var a=Ms(r.target);if(a!==null){var d=_i(a);if(d!==null){if(a=d.tag,a===13){if(a=nr(d),a!==null){r.blockedOn=a,na(r.priority,function(){Vr(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){r.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}r.blockedOn=null}function rr(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var d=nl(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(d===null){d=r.nativeEvent;var g=new d.constructor(d.type,d);Nt=g,d.target.dispatchEvent(g),Nt=null}else return a=Es(d),a!==null&&wn(a),r.blockedOn=d,!1;a.shift()}return!0}function el(r,a,d){rr(r)&&d.delete(a)}function sa(){ia=!1,Hi!==null&&rr(Hi)&&(Hi=null),yr!==null&&rr(yr)&&(yr=null),ir!==null&&rr(ir)&&(ir=null),ra.forEach(el),Tt.forEach(el)}function Mn(r,a){r.blockedOn===a&&(r.blockedOn=null,ia||(ia=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sa)))}function Gi(r){function a(S){return Mn(S,r)}if(0<to.length){Mn(to[0],r);for(var d=1;d<to.length;d++){var g=to[d];g.blockedOn===r&&(g.blockedOn=null)}}for(Hi!==null&&Mn(Hi,r),yr!==null&&Mn(yr,r),ir!==null&&Mn(ir,r),ra.forEach(a),Tt.forEach(a),d=0;d<jn.length;d++)g=jn[d],g.blockedOn===r&&(g.blockedOn=null);for(;0<jn.length&&(d=jn[0],d.blockedOn===null);)Qa(d),d.blockedOn===null&&jn.shift()}var vs=k.ReactCurrentBatchConfig,oa=!0;function zf(r,a,d,g){var S=wt,T=vs.transition;vs.transition=null;try{wt=1,aa(r,a,d,g)}finally{wt=S,vs.transition=T}}function rd(r,a,d,g){var S=wt,T=vs.transition;vs.transition=null;try{wt=4,aa(r,a,d,g)}finally{wt=S,vs.transition=T}}function aa(r,a,d,g){if(oa){var S=nl(r,a,d,g);if(S===null)s(r,a,g,tl,d),Sc(r,g);else if(wc(S,r,a,d,g))g.stopPropagation();else if(Sc(r,g),a&4&&-1<hn.indexOf(r)){for(;S!==null;){var T=Es(S);if(T!==null&&Cn(T),T=nl(r,a,d,g),T===null&&s(r,a,g,tl,d),T===S)break;S=T}S!==null&&g.stopPropagation()}else s(r,a,g,null,d)}}var tl=null;function nl(r,a,d,g){if(tl=null,r=J(g),r=Ms(r),r!==null)if(a=_i(r),a===null)r=null;else if(d=a.tag,d===13){if(r=nr(a),r!==null)return r;r=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null);return tl=r,null}function Xt(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(F()){case se:return 1;case _e:return 4;case pe:case le:return 16;case Ge:return 536870912;default:return 16}default:return 16}}var Hr=null,yi=null,Gr=null;function bc(){if(Gr)return Gr;var r,a=yi,d=a.length,g,S="value"in Hr?Hr.value:Hr.textContent,T=S.length;for(r=0;r<d&&a[r]===S[r];r++);var N=d-r;for(g=1;g<=N&&a[d-g]===S[T-g];g++);return Gr=S.slice(r,1<g?1-g:void 0)}function il(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function no(){return!0}function sd(){return!1}function ai(r){function a(d,g,S,T,N){this._reactName=d,this._targetInst=S,this.type=g,this.nativeEvent=T,this.target=N,this.currentTarget=null;for(var W in r)r.hasOwnProperty(W)&&(d=r[W],this[W]=d?d(T):T[W]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?no:sd,this.isPropagationStopped=sd,this}return Q(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=no)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=no)},persist:function(){},isPersistent:no}),a}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mc=ai(io),_s=Q({},io,{view:0,detail:0}),jf=ai(_s),Ni,Ec,ro,Wi=Q({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ys,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ro&&(ro&&r.type==="mousemove"?(Ni=r.screenX-ro.screenX,Ec=r.screenY-ro.screenY):Ec=Ni=0,ro=r),Ni)},movementY:function(r){return"movementY"in r?r.movementY:Ec}}),Tc=ai(Wi),od=Q({},Wi,{dataTransfer:0}),Ac=ai(od),Vf=Q({},_s,{relatedTarget:0}),rl=ai(Vf),ad=Q({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),Hf=ai(ad),Gf=Q({},io,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Cc=ai(Gf),Wf=Q({},io,{data:0}),Pc=ai(Wf),ld={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xf(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=xs[r])?!!a[r]:!1}function ys(){return Xf}var Li=Q({},_s,{key:function(r){if(r.key){var a=ld[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=il(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?sl[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ys,charCode:function(r){return r.type==="keypress"?il(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?il(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),cd=ai(Li),ud=Q({},Wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dd=ai(ud),Rc=Q({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ys}),Nc=ai(Rc),Zf=Q({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),qf=ai(Zf),hd=Q({},Wi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Yf=ai(hd),Xi=[9,13,27,32],Wr=h&&"CompositionEvent"in window,la=null;h&&"documentMode"in document&&(la=document.documentMode);var Sr=h&&"TextEvent"in window&&!la,fd=h&&(!Wr||la&&8<la&&11>=la),Ss=" ",pd=!1;function so(r,a){switch(r){case"keyup":return Xi.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lc(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var wr=!1;function Kf(r,a){switch(r){case"compositionend":return Lc(a);case"keypress":return a.which!==32?null:(pd=!0,Ss);case"textInput":return r=a.data,r===Ss&&pd?null:r;default:return null}}function Xr(r,a){if(wr)return r==="compositionend"||!Wr&&so(r,a)?(r=bc(),Gr=yi=Hr=null,wr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return fd&&a.locale!=="ko"?null:a.data;default:return null}}var ol={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function md(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!ol[r.type]:a==="textarea"}function al(r,a,d,g){Te(g),a=p(a,"onChange"),0<a.length&&(d=new Mc("onChange","change",null,d,g),r.push({event:d,listeners:a}))}var ca=null,Si=null;function $f(r){jc(r,0)}function br(r){var a=Ts(r);if(mn(a))return r}function Jf(r,a){if(r==="change")return a}var sr=!1;if(h){var oo;if(h){var ll="oninput"in document;if(!ll){var cl=document.createElement("div");cl.setAttribute("oninput","return;"),ll=typeof cl.oninput=="function"}oo=ll}else oo=!1;sr=oo&&(!document.documentMode||9<document.documentMode)}function ua(){ca&&(ca.detachEvent("onpropertychange",ul),Si=ca=null)}function ul(r){if(r.propertyName==="value"&&br(Si)){var a=[];al(a,Si,r,J(r)),ti($f,a)}}function dl(r,a,d){r==="focusin"?(ua(),ca=a,Si=d,ca.attachEvent("onpropertychange",ul)):r==="focusout"&&ua()}function ao(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return br(Si)}function hl(r,a){if(r==="click")return br(a)}function Dc(r,a){if(r==="input"||r==="change")return br(a)}function gd(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Zi=typeof Object.is=="function"?Object.is:gd;function Zr(r,a){if(Zi(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var d=Object.keys(r),g=Object.keys(a);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var S=d[g];if(!f.call(a,S)||!Zi(r[S],a[S]))return!1}return!0}function vd(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Ic(r,a){var d=vd(r);r=0;for(var g;d;){if(d.nodeType===3){if(g=r+d.textContent.length,r<=a&&g>=a)return{node:d,offset:a-r};r=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=vd(d)}}function _d(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?_d(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function Uc(){for(var r=window,a=It();a instanceof r.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)r=a.contentWindow;else break;a=It(r.document)}return a}function Oc(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function or(r){var a=Uc(),d=r.focusedElem,g=r.selectionRange;if(a!==d&&d&&d.ownerDocument&&_d(d.ownerDocument.documentElement,d)){if(g!==null&&Oc(d)){if(a=g.start,r=g.end,r===void 0&&(r=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(r,d.value.length);else if(r=(a=d.ownerDocument||document)&&a.defaultView||window,r.getSelection){r=r.getSelection();var S=d.textContent.length,T=Math.min(g.start,S);g=g.end===void 0?T:Math.min(g.end,S),!r.extend&&T>g&&(S=g,g=T,T=S),S=Ic(d,T);var N=Ic(d,g);S&&N&&(r.rangeCount!==1||r.anchorNode!==S.node||r.anchorOffset!==S.offset||r.focusNode!==N.node||r.focusOffset!==N.offset)&&(a=a.createRange(),a.setStart(S.node,S.offset),r.removeAllRanges(),T>g?(r.addRange(a),r.extend(N.node,N.offset)):(a.setEnd(N.node,N.offset),r.addRange(a)))}}for(a=[],r=d;r=r.parentNode;)r.nodeType===1&&a.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)r=a[d],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var fl=h&&"documentMode"in document&&11>=document.documentMode,lo=null,co=null,da=null,pl=!1;function xd(r,a,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;pl||lo==null||lo!==It(g)||(g=lo,"selectionStart"in g&&Oc(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),da&&Zr(da,g)||(da=g,g=p(co,"onSelect"),0<g.length&&(a=new Mc("onSelect","select",null,a,d),r.push({event:a,listeners:g}),a.target=lo)))}function qr(r,a){var d={};return d[r.toLowerCase()]=a.toLowerCase(),d["Webkit"+r]="webkit"+a,d["Moz"+r]="moz"+a,d}var uo={animationend:qr("Animation","AnimationEnd"),animationiteration:qr("Animation","AnimationIteration"),animationstart:qr("Animation","AnimationStart"),transitionend:qr("Transition","TransitionEnd")},Yr={},Fc={};h&&(Fc=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function ha(r){if(Yr[r])return Yr[r];if(!uo[r])return r;var a=uo[r],d;for(d in a)if(a.hasOwnProperty(d)&&d in Fc)return Yr[r]=a[d];return r}var yd=ha("animationend"),ar=ha("animationiteration"),kc=ha("animationstart"),Bc=ha("transitionend"),ho=new Map,Sd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qi(r,a){ho.set(r,a),l(a,[r])}for(var ws=0;ws<Sd.length;ws++){var ml=Sd[ws],wd=ml.toLowerCase(),Qf=ml[0].toUpperCase()+ml.slice(1);qi(wd,"on"+Qf)}qi(yd,"onAnimationEnd"),qi(ar,"onAnimationIteration"),qi(kc,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(Bc,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bd=new Set("cancel close invalid load scroll toggle".split(" ").concat(fo));function zc(r,a,d){var g=r.type||"unknown-event";r.currentTarget=d,Qs(g,a,void 0,r),r.currentTarget=null}function jc(r,a){a=(a&4)!==0;for(var d=0;d<r.length;d++){var g=r[d],S=g.event;g=g.listeners;e:{var T=void 0;if(a)for(var N=g.length-1;0<=N;N--){var W=g[N],K=W.instance,ve=W.currentTarget;if(W=W.listener,K!==T&&S.isPropagationStopped())break e;zc(S,W,ve),T=K}else for(N=0;N<g.length;N++){if(W=g[N],K=W.instance,ve=W.currentTarget,W=W.listener,K!==T&&S.isPropagationStopped())break e;zc(S,W,ve),T=K}}}if(zr)throw r=Pi,zr=!1,Pi=null,r}function fn(r,a){var d=a[vo];d===void 0&&(d=a[vo]=new Set);var g=r+"__bubble";d.has(g)||(Md(a,r,2,!1),d.add(g))}function Vc(r,a,d){var g=0;a&&(g|=4),Md(d,r,g,a)}var fa="_reactListening"+Math.random().toString(36).slice(2);function po(r){if(!r[fa]){r[fa]=!0,i.forEach(function(d){d!=="selectionchange"&&(bd.has(d)||Vc(d,!1,r),Vc(d,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[fa]||(a[fa]=!0,Vc("selectionchange",!1,a))}}function Md(r,a,d,g){switch(Xt(a)){case 1:var S=zf;break;case 4:S=rd;break;default:S=aa}d=S.bind(null,a,d,r),S=void 0,!$o||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(S=!0),g?S!==void 0?r.addEventListener(a,d,{capture:!0,passive:S}):r.addEventListener(a,d,!0):S!==void 0?r.addEventListener(a,d,{passive:S}):r.addEventListener(a,d,!1)}function s(r,a,d,g,S){var T=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var N=g.tag;if(N===3||N===4){var W=g.stateNode.containerInfo;if(W===S||W.nodeType===8&&W.parentNode===S)break;if(N===4)for(N=g.return;N!==null;){var K=N.tag;if((K===3||K===4)&&(K=N.stateNode.containerInfo,K===S||K.nodeType===8&&K.parentNode===S))return;N=N.return}for(;W!==null;){if(N=Ms(W),N===null)return;if(K=N.tag,K===5||K===6){g=T=N;continue e}W=W.parentNode}}g=g.return}ti(function(){var ve=T,Le=J(d),Fe=[];e:{var Pe=ho.get(r);if(Pe!==void 0){var tt=Mc,ut=r;switch(r){case"keypress":if(il(d)===0)break e;case"keydown":case"keyup":tt=cd;break;case"focusin":ut="focus",tt=rl;break;case"focusout":ut="blur",tt=rl;break;case"beforeblur":case"afterblur":tt=rl;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=Tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=Ac;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=Nc;break;case yd:case ar:case kc:tt=Hf;break;case Bc:tt=qf;break;case"scroll":tt=jf;break;case"wheel":tt=Yf;break;case"copy":case"cut":case"paste":tt=Cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=dd}var ht=(a&4)!==0,Ln=!ht&&r==="scroll",de=ht?Pe!==null?Pe+"Capture":null:Pe;ht=[];for(var ee=ve,fe;ee!==null;){fe=ee;var Be=fe.stateNode;if(fe.tag===5&&Be!==null&&(fe=Be,de!==null&&(Be=ni(ee,de),Be!=null&&ht.push(c(ee,Be,fe)))),Ln)break;ee=ee.return}0<ht.length&&(Pe=new tt(Pe,ut,null,d,Le),Fe.push({event:Pe,listeners:ht}))}}if((a&7)===0){e:{if(Pe=r==="mouseover"||r==="pointerover",tt=r==="mouseout"||r==="pointerout",Pe&&d!==Nt&&(ut=d.relatedTarget||d.fromElement)&&(Ms(ut)||ut[an]))break e;if((tt||Pe)&&(Pe=Le.window===Le?Le:(Pe=Le.ownerDocument)?Pe.defaultView||Pe.parentWindow:window,tt?(ut=d.relatedTarget||d.toElement,tt=ve,ut=ut?Ms(ut):null,ut!==null&&(Ln=_i(ut),ut!==Ln||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(tt=null,ut=ve),tt!==ut)){if(ht=Tc,Be="onMouseLeave",de="onMouseEnter",ee="mouse",(r==="pointerout"||r==="pointerover")&&(ht=dd,Be="onPointerLeave",de="onPointerEnter",ee="pointer"),Ln=tt==null?Pe:Ts(tt),fe=ut==null?Pe:Ts(ut),Pe=new ht(Be,ee+"leave",tt,d,Le),Pe.target=Ln,Pe.relatedTarget=fe,Be=null,Ms(Le)===ve&&(ht=new ht(de,ee+"enter",ut,d,Le),ht.target=fe,ht.relatedTarget=Ln,Be=ht),Ln=Be,tt&&ut)t:{for(ht=tt,de=ut,ee=0,fe=ht;fe;fe=y(fe))ee++;for(fe=0,Be=de;Be;Be=y(Be))fe++;for(;0<ee-fe;)ht=y(ht),ee--;for(;0<fe-ee;)de=y(de),fe--;for(;ee--;){if(ht===de||de!==null&&ht===de.alternate)break t;ht=y(ht),de=y(de)}ht=null}else ht=null;tt!==null&&C(Fe,Pe,tt,ht,!1),ut!==null&&Ln!==null&&C(Fe,Ln,ut,ht,!0)}}e:{if(Pe=ve?Ts(ve):window,tt=Pe.nodeName&&Pe.nodeName.toLowerCase(),tt==="select"||tt==="input"&&Pe.type==="file")var ft=Jf;else if(md(Pe))if(sr)ft=Dc;else{ft=ao;var xt=dl}else(tt=Pe.nodeName)&&tt.toLowerCase()==="input"&&(Pe.type==="checkbox"||Pe.type==="radio")&&(ft=hl);if(ft&&(ft=ft(r,ve))){al(Fe,ft,d,Le);break e}xt&&xt(r,Pe,ve),r==="focusout"&&(xt=Pe._wrapperState)&&xt.controlled&&Pe.type==="number"&&vn(Pe,"number",Pe.value)}switch(xt=ve?Ts(ve):window,r){case"focusin":(md(xt)||xt.contentEditable==="true")&&(lo=xt,co=ve,da=null);break;case"focusout":da=co=lo=null;break;case"mousedown":pl=!0;break;case"contextmenu":case"mouseup":case"dragend":pl=!1,xd(Fe,d,Le);break;case"selectionchange":if(fl)break;case"keydown":case"keyup":xd(Fe,d,Le)}var yt;if(Wr)e:{switch(r){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else wr?so(r,d)&&(Pt="onCompositionEnd"):r==="keydown"&&d.keyCode===229&&(Pt="onCompositionStart");Pt&&(fd&&d.locale!=="ko"&&(wr||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&wr&&(yt=bc()):(Hr=Le,yi="value"in Hr?Hr.value:Hr.textContent,wr=!0)),xt=p(ve,Pt),0<xt.length&&(Pt=new Pc(Pt,r,null,d,Le),Fe.push({event:Pt,listeners:xt}),yt?Pt.data=yt:(yt=Lc(d),yt!==null&&(Pt.data=yt)))),(yt=Sr?Kf(r,d):Xr(r,d))&&(ve=p(ve,"onBeforeInput"),0<ve.length&&(Le=new Pc("onBeforeInput","beforeinput",null,d,Le),Fe.push({event:Le,listeners:ve}),Le.data=yt))}jc(Fe,a)})}function c(r,a,d){return{instance:r,listener:a,currentTarget:d}}function p(r,a){for(var d=a+"Capture",g=[];r!==null;){var S=r,T=S.stateNode;S.tag===5&&T!==null&&(S=T,T=ni(r,d),T!=null&&g.unshift(c(r,T,S)),T=ni(r,a),T!=null&&g.push(c(r,T,S))),r=r.return}return g}function y(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function C(r,a,d,g,S){for(var T=a._reactName,N=[];d!==null&&d!==g;){var W=d,K=W.alternate,ve=W.stateNode;if(K!==null&&K===g)break;W.tag===5&&ve!==null&&(W=ve,S?(K=ni(d,T),K!=null&&N.unshift(c(d,K,W))):S||(K=ni(d,T),K!=null&&N.push(c(d,K,W)))),d=d.return}N.length!==0&&r.push({event:a,listeners:N})}var D=/\r\n?/g,Z=/\u0000|\uFFFD/g;function ce(r){return(typeof r=="string"?r:""+r).replace(D,`
`).replace(Z,"")}function me(r,a,d){if(a=ce(a),ce(r)!==a&&d)throw Error(t(425))}function Ce(){}var Qe=null,_t=null;function Ut(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Vn=typeof setTimeout=="function"?setTimeout:void 0,On=typeof clearTimeout=="function"?clearTimeout:void 0,wi=typeof Promise=="function"?Promise:void 0,li=typeof queueMicrotask=="function"?queueMicrotask:typeof wi<"u"?function(r){return wi.resolve(null).then(r).catch(mo)}:Vn;function mo(r){setTimeout(function(){throw r})}function Hc(r,a){var d=a,g=0;do{var S=d.nextSibling;if(r.removeChild(d),S&&S.nodeType===8)if(d=S.data,d==="/$"){if(g===0){r.removeChild(S),Gi(a);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=S}while(d);Gi(a)}function Kr(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return r}function Ed(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var d=r.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return r;a--}else d==="/$"&&a++}r=r.previousSibling}return null}var bs=Math.random().toString(36).slice(2),lr="__reactFiber$"+bs,go="__reactProps$"+bs,an="__reactContainer$"+bs,vo="__reactEvents$"+bs,ep="__reactListeners$"+bs,tp="__reactHandles$"+bs;function Ms(r){var a=r[lr];if(a)return a;for(var d=r.parentNode;d;){if(a=d[an]||d[lr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(r=Ed(r);r!==null;){if(d=r[lr])return d;r=Ed(r)}return a}r=d,d=r.parentNode}return null}function Es(r){return r=r[lr]||r[an],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Ts(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function gl(r){return r[go]||null}var np=[],vl=-1;function _o(r){return{current:r}}function yn(r){0>vl||(r.current=np[vl],np[vl]=null,vl--)}function _n(r,a){vl++,np[vl]=r.current,r.current=a}var xo={},ci=_o(xo),Di=_o(!1),pa=xo;function _l(r,a){var d=r.type.contextTypes;if(!d)return xo;var g=r.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===a)return g.__reactInternalMemoizedMaskedChildContext;var S={},T;for(T in d)S[T]=a[T];return g&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=S),S}function Ii(r){return r=r.childContextTypes,r!=null}function Td(){yn(Di),yn(ci)}function jv(r,a,d){if(ci.current!==xo)throw Error(t(168));_n(ci,a),_n(Di,d)}function Vv(r,a,d){var g=r.stateNode;if(a=a.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var S in g)if(!(S in a))throw Error(t(108,be(r)||"Unknown",S));return Q({},d,g)}function Ad(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||xo,pa=ci.current,_n(ci,r),_n(Di,Di.current),!0}function Hv(r,a,d){var g=r.stateNode;if(!g)throw Error(t(169));d?(r=Vv(r,a,pa),g.__reactInternalMemoizedMergedChildContext=r,yn(Di),yn(ci),_n(ci,r)):yn(Di),_n(Di,d)}var As=null,Cd=!1,ip=!1;function Gv(r){As===null?As=[r]:As.push(r)}function kM(r){Cd=!0,Gv(r)}function yo(){if(!ip&&As!==null){ip=!0;var r=0,a=wt;try{var d=As;for(wt=1;r<d.length;r++){var g=d[r];do g=g(!0);while(g!==null)}As=null,Cd=!1}catch(S){throw As!==null&&(As=As.slice(r+1)),Ja(se,yo),S}finally{wt=a,ip=!1}}return null}var xl=[],yl=0,Pd=null,Rd=0,cr=[],ur=0,ma=null,Cs=1,Ps="";function ga(r,a){xl[yl++]=Rd,xl[yl++]=Pd,Pd=r,Rd=a}function Wv(r,a,d){cr[ur++]=Cs,cr[ur++]=Ps,cr[ur++]=ma,ma=r;var g=Cs;r=Ps;var S=32-Ne(g)-1;g&=~(1<<S),d+=1;var T=32-Ne(a)+S;if(30<T){var N=S-S%5;T=(g&(1<<N)-1).toString(32),g>>=N,S-=N,Cs=1<<32-Ne(a)+S|d<<S|g,Ps=T+r}else Cs=1<<T|d<<S|g,Ps=r}function rp(r){r.return!==null&&(ga(r,1),Wv(r,1,0))}function sp(r){for(;r===Pd;)Pd=xl[--yl],xl[yl]=null,Rd=xl[--yl],xl[yl]=null;for(;r===ma;)ma=cr[--ur],cr[ur]=null,Ps=cr[--ur],cr[ur]=null,Cs=cr[--ur],cr[ur]=null}var Yi=null,Ki=null,bn=!1,Mr=null;function Xv(r,a){var d=pr(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=r,a=r.deletions,a===null?(r.deletions=[d],r.flags|=16):a.push(d)}function Zv(r,a){switch(r.tag){case 5:var d=r.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(r.stateNode=a,Yi=r,Ki=Kr(a.firstChild),!0):!1;case 6:return a=r.pendingProps===""||a.nodeType!==3?null:a,a!==null?(r.stateNode=a,Yi=r,Ki=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=ma!==null?{id:Cs,overflow:Ps}:null,r.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=pr(18,null,null,0),d.stateNode=a,d.return=r,r.child=d,Yi=r,Ki=null,!0):!1;default:return!1}}function op(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ap(r){if(bn){var a=Ki;if(a){var d=a;if(!Zv(r,a)){if(op(r))throw Error(t(418));a=Kr(d.nextSibling);var g=Yi;a&&Zv(r,a)?Xv(g,d):(r.flags=r.flags&-4097|2,bn=!1,Yi=r)}}else{if(op(r))throw Error(t(418));r.flags=r.flags&-4097|2,bn=!1,Yi=r}}}function qv(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Yi=r}function Nd(r){if(r!==Yi)return!1;if(!bn)return qv(r),bn=!0,!1;var a;if((a=r.tag!==3)&&!(a=r.tag!==5)&&(a=r.type,a=a!=="head"&&a!=="body"&&!Ut(r.type,r.memoizedProps)),a&&(a=Ki)){if(op(r))throw Yv(),Error(t(418));for(;a;)Xv(r,a),a=Kr(a.nextSibling)}if(qv(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8){var d=r.data;if(d==="/$"){if(a===0){Ki=Kr(r.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}r=r.nextSibling}Ki=null}}else Ki=Yi?Kr(r.stateNode.nextSibling):null;return!0}function Yv(){for(var r=Ki;r;)r=Kr(r.nextSibling)}function Sl(){Ki=Yi=null,bn=!1}function lp(r){Mr===null?Mr=[r]:Mr.push(r)}var BM=k.ReactCurrentBatchConfig;function Gc(r,a,d){if(r=d.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var g=d.stateNode}if(!g)throw Error(t(147,r));var S=g,T=""+r;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===T?a.ref:(a=function(N){var W=S.refs;N===null?delete W[T]:W[T]=N},a._stringRef=T,a)}if(typeof r!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,r))}return r}function Ld(r,a){throw r=Object.prototype.toString.call(a),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r))}function Kv(r){var a=r._init;return a(r._payload)}function $v(r){function a(de,ee){if(r){var fe=de.deletions;fe===null?(de.deletions=[ee],de.flags|=16):fe.push(ee)}}function d(de,ee){if(!r)return null;for(;ee!==null;)a(de,ee),ee=ee.sibling;return null}function g(de,ee){for(de=new Map;ee!==null;)ee.key!==null?de.set(ee.key,ee):de.set(ee.index,ee),ee=ee.sibling;return de}function S(de,ee){return de=Co(de,ee),de.index=0,de.sibling=null,de}function T(de,ee,fe){return de.index=fe,r?(fe=de.alternate,fe!==null?(fe=fe.index,fe<ee?(de.flags|=2,ee):fe):(de.flags|=2,ee)):(de.flags|=1048576,ee)}function N(de){return r&&de.alternate===null&&(de.flags|=2),de}function W(de,ee,fe,Be){return ee===null||ee.tag!==6?(ee=Qp(fe,de.mode,Be),ee.return=de,ee):(ee=S(ee,fe),ee.return=de,ee)}function K(de,ee,fe,Be){var ft=fe.type;return ft===G?Le(de,ee,fe.props.children,Be,fe.key):ee!==null&&(ee.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===ae&&Kv(ft)===ee.type)?(Be=S(ee,fe.props),Be.ref=Gc(de,ee,fe),Be.return=de,Be):(Be=nh(fe.type,fe.key,fe.props,null,de.mode,Be),Be.ref=Gc(de,ee,fe),Be.return=de,Be)}function ve(de,ee,fe,Be){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==fe.containerInfo||ee.stateNode.implementation!==fe.implementation?(ee=em(fe,de.mode,Be),ee.return=de,ee):(ee=S(ee,fe.children||[]),ee.return=de,ee)}function Le(de,ee,fe,Be,ft){return ee===null||ee.tag!==7?(ee=Ma(fe,de.mode,Be,ft),ee.return=de,ee):(ee=S(ee,fe),ee.return=de,ee)}function Fe(de,ee,fe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=Qp(""+ee,de.mode,fe),ee.return=de,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case B:return fe=nh(ee.type,ee.key,ee.props,null,de.mode,fe),fe.ref=Gc(de,null,ee),fe.return=de,fe;case H:return ee=em(ee,de.mode,fe),ee.return=de,ee;case ae:var Be=ee._init;return Fe(de,Be(ee._payload),fe)}if(Vt(ee)||we(ee))return ee=Ma(ee,de.mode,fe,null),ee.return=de,ee;Ld(de,ee)}return null}function Pe(de,ee,fe,Be){var ft=ee!==null?ee.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return ft!==null?null:W(de,ee,""+fe,Be);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case B:return fe.key===ft?K(de,ee,fe,Be):null;case H:return fe.key===ft?ve(de,ee,fe,Be):null;case ae:return ft=fe._init,Pe(de,ee,ft(fe._payload),Be)}if(Vt(fe)||we(fe))return ft!==null?null:Le(de,ee,fe,Be,null);Ld(de,fe)}return null}function tt(de,ee,fe,Be,ft){if(typeof Be=="string"&&Be!==""||typeof Be=="number")return de=de.get(fe)||null,W(ee,de,""+Be,ft);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case B:return de=de.get(Be.key===null?fe:Be.key)||null,K(ee,de,Be,ft);case H:return de=de.get(Be.key===null?fe:Be.key)||null,ve(ee,de,Be,ft);case ae:var xt=Be._init;return tt(de,ee,fe,xt(Be._payload),ft)}if(Vt(Be)||we(Be))return de=de.get(fe)||null,Le(ee,de,Be,ft,null);Ld(ee,Be)}return null}function ut(de,ee,fe,Be){for(var ft=null,xt=null,yt=ee,Pt=ee=0,Jn=null;yt!==null&&Pt<fe.length;Pt++){yt.index>Pt?(Jn=yt,yt=null):Jn=yt.sibling;var en=Pe(de,yt,fe[Pt],Be);if(en===null){yt===null&&(yt=Jn);break}r&&yt&&en.alternate===null&&a(de,yt),ee=T(en,ee,Pt),xt===null?ft=en:xt.sibling=en,xt=en,yt=Jn}if(Pt===fe.length)return d(de,yt),bn&&ga(de,Pt),ft;if(yt===null){for(;Pt<fe.length;Pt++)yt=Fe(de,fe[Pt],Be),yt!==null&&(ee=T(yt,ee,Pt),xt===null?ft=yt:xt.sibling=yt,xt=yt);return bn&&ga(de,Pt),ft}for(yt=g(de,yt);Pt<fe.length;Pt++)Jn=tt(yt,de,Pt,fe[Pt],Be),Jn!==null&&(r&&Jn.alternate!==null&&yt.delete(Jn.key===null?Pt:Jn.key),ee=T(Jn,ee,Pt),xt===null?ft=Jn:xt.sibling=Jn,xt=Jn);return r&&yt.forEach(function(Po){return a(de,Po)}),bn&&ga(de,Pt),ft}function ht(de,ee,fe,Be){var ft=we(fe);if(typeof ft!="function")throw Error(t(150));if(fe=ft.call(fe),fe==null)throw Error(t(151));for(var xt=ft=null,yt=ee,Pt=ee=0,Jn=null,en=fe.next();yt!==null&&!en.done;Pt++,en=fe.next()){yt.index>Pt?(Jn=yt,yt=null):Jn=yt.sibling;var Po=Pe(de,yt,en.value,Be);if(Po===null){yt===null&&(yt=Jn);break}r&&yt&&Po.alternate===null&&a(de,yt),ee=T(Po,ee,Pt),xt===null?ft=Po:xt.sibling=Po,xt=Po,yt=Jn}if(en.done)return d(de,yt),bn&&ga(de,Pt),ft;if(yt===null){for(;!en.done;Pt++,en=fe.next())en=Fe(de,en.value,Be),en!==null&&(ee=T(en,ee,Pt),xt===null?ft=en:xt.sibling=en,xt=en);return bn&&ga(de,Pt),ft}for(yt=g(de,yt);!en.done;Pt++,en=fe.next())en=tt(yt,de,Pt,en.value,Be),en!==null&&(r&&en.alternate!==null&&yt.delete(en.key===null?Pt:en.key),ee=T(en,ee,Pt),xt===null?ft=en:xt.sibling=en,xt=en);return r&&yt.forEach(function(_E){return a(de,_E)}),bn&&ga(de,Pt),ft}function Ln(de,ee,fe,Be){if(typeof fe=="object"&&fe!==null&&fe.type===G&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case B:e:{for(var ft=fe.key,xt=ee;xt!==null;){if(xt.key===ft){if(ft=fe.type,ft===G){if(xt.tag===7){d(de,xt.sibling),ee=S(xt,fe.props.children),ee.return=de,de=ee;break e}}else if(xt.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===ae&&Kv(ft)===xt.type){d(de,xt.sibling),ee=S(xt,fe.props),ee.ref=Gc(de,xt,fe),ee.return=de,de=ee;break e}d(de,xt);break}else a(de,xt);xt=xt.sibling}fe.type===G?(ee=Ma(fe.props.children,de.mode,Be,fe.key),ee.return=de,de=ee):(Be=nh(fe.type,fe.key,fe.props,null,de.mode,Be),Be.ref=Gc(de,ee,fe),Be.return=de,de=Be)}return N(de);case H:e:{for(xt=fe.key;ee!==null;){if(ee.key===xt)if(ee.tag===4&&ee.stateNode.containerInfo===fe.containerInfo&&ee.stateNode.implementation===fe.implementation){d(de,ee.sibling),ee=S(ee,fe.children||[]),ee.return=de,de=ee;break e}else{d(de,ee);break}else a(de,ee);ee=ee.sibling}ee=em(fe,de.mode,Be),ee.return=de,de=ee}return N(de);case ae:return xt=fe._init,Ln(de,ee,xt(fe._payload),Be)}if(Vt(fe))return ut(de,ee,fe,Be);if(we(fe))return ht(de,ee,fe,Be);Ld(de,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,ee!==null&&ee.tag===6?(d(de,ee.sibling),ee=S(ee,fe),ee.return=de,de=ee):(d(de,ee),ee=Qp(fe,de.mode,Be),ee.return=de,de=ee),N(de)):d(de,ee)}return Ln}var wl=$v(!0),Jv=$v(!1),Dd=_o(null),Id=null,bl=null,cp=null;function up(){cp=bl=Id=null}function dp(r){var a=Dd.current;yn(Dd),r._currentValue=a}function hp(r,a,d){for(;r!==null;){var g=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),r===d)break;r=r.return}}function Ml(r,a){Id=r,cp=bl=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&a)!==0&&(Ui=!0),r.firstContext=null)}function dr(r){var a=r._currentValue;if(cp!==r)if(r={context:r,memoizedValue:a,next:null},bl===null){if(Id===null)throw Error(t(308));bl=r,Id.dependencies={lanes:0,firstContext:r}}else bl=bl.next=r;return a}var va=null;function fp(r){va===null?va=[r]:va.push(r)}function Qv(r,a,d,g){var S=a.interleaved;return S===null?(d.next=d,fp(a)):(d.next=S.next,S.next=d),a.interleaved=d,Rs(r,g)}function Rs(r,a){r.lanes|=a;var d=r.alternate;for(d!==null&&(d.lanes|=a),d=r,r=r.return;r!==null;)r.childLanes|=a,d=r.alternate,d!==null&&(d.childLanes|=a),d=r,r=r.return;return d.tag===3?d.stateNode:null}var So=!1;function pp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function e_(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ns(r,a){return{eventTime:r,lane:a,tag:0,payload:null,callback:null,next:null}}function wo(r,a,d){var g=r.updateQueue;if(g===null)return null;if(g=g.shared,(Jt&2)!==0){var S=g.pending;return S===null?a.next=a:(a.next=S.next,S.next=a),g.pending=a,Rs(r,d)}return S=g.interleaved,S===null?(a.next=a,fp(g)):(a.next=S.next,S.next=a),g.interleaved=a,Rs(r,d)}function Ud(r,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var g=a.lanes;g&=r.pendingLanes,d|=g,a.lanes=d,Ht(r,d)}}function t_(r,a){var d=r.updateQueue,g=r.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var S=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var N={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?S=T=N:T=T.next=N,d=d.next}while(d!==null);T===null?S=T=a:T=T.next=a}else S=T=a;d={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:T,shared:g.shared,effects:g.effects},r.updateQueue=d;return}r=d.lastBaseUpdate,r===null?d.firstBaseUpdate=a:r.next=a,d.lastBaseUpdate=a}function Od(r,a,d,g){var S=r.updateQueue;So=!1;var T=S.firstBaseUpdate,N=S.lastBaseUpdate,W=S.shared.pending;if(W!==null){S.shared.pending=null;var K=W,ve=K.next;K.next=null,N===null?T=ve:N.next=ve,N=K;var Le=r.alternate;Le!==null&&(Le=Le.updateQueue,W=Le.lastBaseUpdate,W!==N&&(W===null?Le.firstBaseUpdate=ve:W.next=ve,Le.lastBaseUpdate=K))}if(T!==null){var Fe=S.baseState;N=0,Le=ve=K=null,W=T;do{var Pe=W.lane,tt=W.eventTime;if((g&Pe)===Pe){Le!==null&&(Le=Le.next={eventTime:tt,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var ut=r,ht=W;switch(Pe=a,tt=d,ht.tag){case 1:if(ut=ht.payload,typeof ut=="function"){Fe=ut.call(tt,Fe,Pe);break e}Fe=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=ht.payload,Pe=typeof ut=="function"?ut.call(tt,Fe,Pe):ut,Pe==null)break e;Fe=Q({},Fe,Pe);break e;case 2:So=!0}}W.callback!==null&&W.lane!==0&&(r.flags|=64,Pe=S.effects,Pe===null?S.effects=[W]:Pe.push(W))}else tt={eventTime:tt,lane:Pe,tag:W.tag,payload:W.payload,callback:W.callback,next:null},Le===null?(ve=Le=tt,K=Fe):Le=Le.next=tt,N|=Pe;if(W=W.next,W===null){if(W=S.shared.pending,W===null)break;Pe=W,W=Pe.next,Pe.next=null,S.lastBaseUpdate=Pe,S.shared.pending=null}}while(!0);if(Le===null&&(K=Fe),S.baseState=K,S.firstBaseUpdate=ve,S.lastBaseUpdate=Le,a=S.shared.interleaved,a!==null){S=a;do N|=S.lane,S=S.next;while(S!==a)}else T===null&&(S.shared.lanes=0);ya|=N,r.lanes=N,r.memoizedState=Fe}}function n_(r,a,d){if(r=a.effects,a.effects=null,r!==null)for(a=0;a<r.length;a++){var g=r[a],S=g.callback;if(S!==null){if(g.callback=null,g=d,typeof S!="function")throw Error(t(191,S));S.call(g)}}}var Wc={},$r=_o(Wc),Xc=_o(Wc),Zc=_o(Wc);function _a(r){if(r===Wc)throw Error(t(174));return r}function mp(r,a){switch(_n(Zc,a),_n(Xc,r),_n($r,Wc),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Ae(null,"");break;default:r=r===8?a.parentNode:a,a=r.namespaceURI||null,r=r.tagName,a=Ae(a,r)}yn($r),_n($r,a)}function El(){yn($r),yn(Xc),yn(Zc)}function i_(r){_a(Zc.current);var a=_a($r.current),d=Ae(a,r.type);a!==d&&(_n(Xc,r),_n($r,d))}function gp(r){Xc.current===r&&(yn($r),yn(Xc))}var En=_o(0);function Fd(r){for(var a=r;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var vp=[];function _p(){for(var r=0;r<vp.length;r++)vp[r]._workInProgressVersionPrimary=null;vp.length=0}var kd=k.ReactCurrentDispatcher,xp=k.ReactCurrentBatchConfig,xa=0,Tn=null,Hn=null,Kn=null,Bd=!1,qc=!1,Yc=0,zM=0;function ui(){throw Error(t(321))}function yp(r,a){if(a===null)return!1;for(var d=0;d<a.length&&d<r.length;d++)if(!Zi(r[d],a[d]))return!1;return!0}function Sp(r,a,d,g,S,T){if(xa=T,Tn=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,kd.current=r===null||r.memoizedState===null?GM:WM,r=d(g,S),qc){T=0;do{if(qc=!1,Yc=0,25<=T)throw Error(t(301));T+=1,Kn=Hn=null,a.updateQueue=null,kd.current=XM,r=d(g,S)}while(qc)}if(kd.current=Vd,a=Hn!==null&&Hn.next!==null,xa=0,Kn=Hn=Tn=null,Bd=!1,a)throw Error(t(300));return r}function wp(){var r=Yc!==0;return Yc=0,r}function Jr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?Tn.memoizedState=Kn=r:Kn=Kn.next=r,Kn}function hr(){if(Hn===null){var r=Tn.alternate;r=r!==null?r.memoizedState:null}else r=Hn.next;var a=Kn===null?Tn.memoizedState:Kn.next;if(a!==null)Kn=a,Hn=r;else{if(r===null)throw Error(t(310));Hn=r,r={memoizedState:Hn.memoizedState,baseState:Hn.baseState,baseQueue:Hn.baseQueue,queue:Hn.queue,next:null},Kn===null?Tn.memoizedState=Kn=r:Kn=Kn.next=r}return Kn}function Kc(r,a){return typeof a=="function"?a(r):a}function bp(r){var a=hr(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=r;var g=Hn,S=g.baseQueue,T=d.pending;if(T!==null){if(S!==null){var N=S.next;S.next=T.next,T.next=N}g.baseQueue=S=T,d.pending=null}if(S!==null){T=S.next,g=g.baseState;var W=N=null,K=null,ve=T;do{var Le=ve.lane;if((xa&Le)===Le)K!==null&&(K=K.next={lane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),g=ve.hasEagerState?ve.eagerState:r(g,ve.action);else{var Fe={lane:Le,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null};K===null?(W=K=Fe,N=g):K=K.next=Fe,Tn.lanes|=Le,ya|=Le}ve=ve.next}while(ve!==null&&ve!==T);K===null?N=g:K.next=W,Zi(g,a.memoizedState)||(Ui=!0),a.memoizedState=g,a.baseState=N,a.baseQueue=K,d.lastRenderedState=g}if(r=d.interleaved,r!==null){S=r;do T=S.lane,Tn.lanes|=T,ya|=T,S=S.next;while(S!==r)}else S===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function Mp(r){var a=hr(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=r;var g=d.dispatch,S=d.pending,T=a.memoizedState;if(S!==null){d.pending=null;var N=S=S.next;do T=r(T,N.action),N=N.next;while(N!==S);Zi(T,a.memoizedState)||(Ui=!0),a.memoizedState=T,a.baseQueue===null&&(a.baseState=T),d.lastRenderedState=T}return[T,g]}function r_(){}function s_(r,a){var d=Tn,g=hr(),S=a(),T=!Zi(g.memoizedState,S);if(T&&(g.memoizedState=S,Ui=!0),g=g.queue,Ep(l_.bind(null,d,g,r),[r]),g.getSnapshot!==a||T||Kn!==null&&Kn.memoizedState.tag&1){if(d.flags|=2048,$c(9,a_.bind(null,d,g,S,a),void 0,null),$n===null)throw Error(t(349));(xa&30)!==0||o_(d,a,S)}return S}function o_(r,a,d){r.flags|=16384,r={getSnapshot:a,value:d},a=Tn.updateQueue,a===null?(a={lastEffect:null,stores:null},Tn.updateQueue=a,a.stores=[r]):(d=a.stores,d===null?a.stores=[r]:d.push(r))}function a_(r,a,d,g){a.value=d,a.getSnapshot=g,c_(a)&&u_(r)}function l_(r,a,d){return d(function(){c_(a)&&u_(r)})}function c_(r){var a=r.getSnapshot;r=r.value;try{var d=a();return!Zi(r,d)}catch{return!0}}function u_(r){var a=Rs(r,1);a!==null&&Cr(a,r,1,-1)}function d_(r){var a=Jr();return typeof r=="function"&&(r=r()),a.memoizedState=a.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kc,lastRenderedState:r},a.queue=r,r=r.dispatch=HM.bind(null,Tn,r),[a.memoizedState,r]}function $c(r,a,d,g){return r={tag:r,create:a,destroy:d,deps:g,next:null},a=Tn.updateQueue,a===null?(a={lastEffect:null,stores:null},Tn.updateQueue=a,a.lastEffect=r.next=r):(d=a.lastEffect,d===null?a.lastEffect=r.next=r:(g=d.next,d.next=r,r.next=g,a.lastEffect=r)),r}function h_(){return hr().memoizedState}function zd(r,a,d,g){var S=Jr();Tn.flags|=r,S.memoizedState=$c(1|a,d,void 0,g===void 0?null:g)}function jd(r,a,d,g){var S=hr();g=g===void 0?null:g;var T=void 0;if(Hn!==null){var N=Hn.memoizedState;if(T=N.destroy,g!==null&&yp(g,N.deps)){S.memoizedState=$c(a,d,T,g);return}}Tn.flags|=r,S.memoizedState=$c(1|a,d,T,g)}function f_(r,a){return zd(8390656,8,r,a)}function Ep(r,a){return jd(2048,8,r,a)}function p_(r,a){return jd(4,2,r,a)}function m_(r,a){return jd(4,4,r,a)}function g_(r,a){if(typeof a=="function")return r=r(),a(r),function(){a(null)};if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function v_(r,a,d){return d=d!=null?d.concat([r]):null,jd(4,4,g_.bind(null,a,r),d)}function Tp(){}function __(r,a){var d=hr();a=a===void 0?null:a;var g=d.memoizedState;return g!==null&&a!==null&&yp(a,g[1])?g[0]:(d.memoizedState=[r,a],r)}function x_(r,a){var d=hr();a=a===void 0?null:a;var g=d.memoizedState;return g!==null&&a!==null&&yp(a,g[1])?g[0]:(r=r(),d.memoizedState=[r,a],r)}function y_(r,a,d){return(xa&21)===0?(r.baseState&&(r.baseState=!1,Ui=!0),r.memoizedState=d):(Zi(d,a)||(d=Yn(),Tn.lanes|=d,ya|=d,r.baseState=!0),a)}function jM(r,a){var d=wt;wt=d!==0&&4>d?d:4,r(!0);var g=xp.transition;xp.transition={};try{r(!1),a()}finally{wt=d,xp.transition=g}}function S_(){return hr().memoizedState}function VM(r,a,d){var g=To(r);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},w_(r))b_(a,d);else if(d=Qv(r,a,d,g),d!==null){var S=Mi();Cr(d,r,g,S),M_(d,a,g)}}function HM(r,a,d){var g=To(r),S={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(w_(r))b_(a,S);else{var T=r.alternate;if(r.lanes===0&&(T===null||T.lanes===0)&&(T=a.lastRenderedReducer,T!==null))try{var N=a.lastRenderedState,W=T(N,d);if(S.hasEagerState=!0,S.eagerState=W,Zi(W,N)){var K=a.interleaved;K===null?(S.next=S,fp(a)):(S.next=K.next,K.next=S),a.interleaved=S;return}}catch{}finally{}d=Qv(r,a,S,g),d!==null&&(S=Mi(),Cr(d,r,g,S),M_(d,a,g))}}function w_(r){var a=r.alternate;return r===Tn||a!==null&&a===Tn}function b_(r,a){qc=Bd=!0;var d=r.pending;d===null?a.next=a:(a.next=d.next,d.next=a),r.pending=a}function M_(r,a,d){if((d&4194240)!==0){var g=a.lanes;g&=r.pendingLanes,d|=g,a.lanes=d,Ht(r,d)}}var Vd={readContext:dr,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useInsertionEffect:ui,useLayoutEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useMutableSource:ui,useSyncExternalStore:ui,useId:ui,unstable_isNewReconciler:!1},GM={readContext:dr,useCallback:function(r,a){return Jr().memoizedState=[r,a===void 0?null:a],r},useContext:dr,useEffect:f_,useImperativeHandle:function(r,a,d){return d=d!=null?d.concat([r]):null,zd(4194308,4,g_.bind(null,a,r),d)},useLayoutEffect:function(r,a){return zd(4194308,4,r,a)},useInsertionEffect:function(r,a){return zd(4,2,r,a)},useMemo:function(r,a){var d=Jr();return a=a===void 0?null:a,r=r(),d.memoizedState=[r,a],r},useReducer:function(r,a,d){var g=Jr();return a=d!==void 0?d(a):a,g.memoizedState=g.baseState=a,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:a},g.queue=r,r=r.dispatch=VM.bind(null,Tn,r),[g.memoizedState,r]},useRef:function(r){var a=Jr();return r={current:r},a.memoizedState=r},useState:d_,useDebugValue:Tp,useDeferredValue:function(r){return Jr().memoizedState=r},useTransition:function(){var r=d_(!1),a=r[0];return r=jM.bind(null,r[1]),Jr().memoizedState=r,[a,r]},useMutableSource:function(){},useSyncExternalStore:function(r,a,d){var g=Tn,S=Jr();if(bn){if(d===void 0)throw Error(t(407));d=d()}else{if(d=a(),$n===null)throw Error(t(349));(xa&30)!==0||o_(g,a,d)}S.memoizedState=d;var T={value:d,getSnapshot:a};return S.queue=T,f_(l_.bind(null,g,T,r),[r]),g.flags|=2048,$c(9,a_.bind(null,g,T,d,a),void 0,null),d},useId:function(){var r=Jr(),a=$n.identifierPrefix;if(bn){var d=Ps,g=Cs;d=(g&~(1<<32-Ne(g)-1)).toString(32)+d,a=":"+a+"R"+d,d=Yc++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=zM++,a=":"+a+"r"+d.toString(32)+":";return r.memoizedState=a},unstable_isNewReconciler:!1},WM={readContext:dr,useCallback:__,useContext:dr,useEffect:Ep,useImperativeHandle:v_,useInsertionEffect:p_,useLayoutEffect:m_,useMemo:x_,useReducer:bp,useRef:h_,useState:function(){return bp(Kc)},useDebugValue:Tp,useDeferredValue:function(r){var a=hr();return y_(a,Hn.memoizedState,r)},useTransition:function(){var r=bp(Kc)[0],a=hr().memoizedState;return[r,a]},useMutableSource:r_,useSyncExternalStore:s_,useId:S_,unstable_isNewReconciler:!1},XM={readContext:dr,useCallback:__,useContext:dr,useEffect:Ep,useImperativeHandle:v_,useInsertionEffect:p_,useLayoutEffect:m_,useMemo:x_,useReducer:Mp,useRef:h_,useState:function(){return Mp(Kc)},useDebugValue:Tp,useDeferredValue:function(r){var a=hr();return Hn===null?a.memoizedState=r:y_(a,Hn.memoizedState,r)},useTransition:function(){var r=Mp(Kc)[0],a=hr().memoizedState;return[r,a]},useMutableSource:r_,useSyncExternalStore:s_,useId:S_,unstable_isNewReconciler:!1};function Er(r,a){if(r&&r.defaultProps){a=Q({},a),r=r.defaultProps;for(var d in r)a[d]===void 0&&(a[d]=r[d]);return a}return a}function Ap(r,a,d,g){a=r.memoizedState,d=d(g,a),d=d==null?a:Q({},a,d),r.memoizedState=d,r.lanes===0&&(r.updateQueue.baseState=d)}var Hd={isMounted:function(r){return(r=r._reactInternals)?_i(r)===r:!1},enqueueSetState:function(r,a,d){r=r._reactInternals;var g=Mi(),S=To(r),T=Ns(g,S);T.payload=a,d!=null&&(T.callback=d),a=wo(r,T,S),a!==null&&(Cr(a,r,S,g),Ud(a,r,S))},enqueueReplaceState:function(r,a,d){r=r._reactInternals;var g=Mi(),S=To(r),T=Ns(g,S);T.tag=1,T.payload=a,d!=null&&(T.callback=d),a=wo(r,T,S),a!==null&&(Cr(a,r,S,g),Ud(a,r,S))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var d=Mi(),g=To(r),S=Ns(d,g);S.tag=2,a!=null&&(S.callback=a),a=wo(r,S,g),a!==null&&(Cr(a,r,g,d),Ud(a,r,g))}};function E_(r,a,d,g,S,T,N){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(g,T,N):a.prototype&&a.prototype.isPureReactComponent?!Zr(d,g)||!Zr(S,T):!0}function T_(r,a,d){var g=!1,S=xo,T=a.contextType;return typeof T=="object"&&T!==null?T=dr(T):(S=Ii(a)?pa:ci.current,g=a.contextTypes,T=(g=g!=null)?_l(r,S):xo),a=new a(d,T),r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Hd,r.stateNode=a,a._reactInternals=r,g&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=S,r.__reactInternalMemoizedMaskedChildContext=T),a}function A_(r,a,d,g){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,g),a.state!==r&&Hd.enqueueReplaceState(a,a.state,null)}function Cp(r,a,d,g){var S=r.stateNode;S.props=d,S.state=r.memoizedState,S.refs={},pp(r);var T=a.contextType;typeof T=="object"&&T!==null?S.context=dr(T):(T=Ii(a)?pa:ci.current,S.context=_l(r,T)),S.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Ap(r,a,T,d),S.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(a=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),a!==S.state&&Hd.enqueueReplaceState(S,S.state,null),Od(r,d,S,g),S.state=r.memoizedState),typeof S.componentDidMount=="function"&&(r.flags|=4194308)}function Tl(r,a){try{var d="",g=a;do d+=ke(g),g=g.return;while(g);var S=d}catch(T){S=`
Error generating stack: `+T.message+`
`+T.stack}return{value:r,source:a,stack:S,digest:null}}function Pp(r,a,d){return{value:r,source:null,stack:d??null,digest:a??null}}function Rp(r,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var ZM=typeof WeakMap=="function"?WeakMap:Map;function C_(r,a,d){d=Ns(-1,d),d.tag=3,d.payload={element:null};var g=a.value;return d.callback=function(){Kd||(Kd=!0,Wp=g),Rp(r,a)},d}function P_(r,a,d){d=Ns(-1,d),d.tag=3;var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var S=a.value;d.payload=function(){return g(S)},d.callback=function(){Rp(r,a)}}var T=r.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){Rp(r,a),typeof g!="function"&&(Mo===null?Mo=new Set([this]):Mo.add(this));var N=a.stack;this.componentDidCatch(a.value,{componentStack:N!==null?N:""})}),d}function R_(r,a,d){var g=r.pingCache;if(g===null){g=r.pingCache=new ZM;var S=new Set;g.set(a,S)}else S=g.get(a),S===void 0&&(S=new Set,g.set(a,S));S.has(d)||(S.add(d),r=aE.bind(null,r,a,d),a.then(r,r))}function N_(r){do{var a;if((a=r.tag===13)&&(a=r.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return r;r=r.return}while(r!==null);return null}function L_(r,a,d,g,S){return(r.mode&1)===0?(r===a?r.flags|=65536:(r.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=Ns(-1,1),a.tag=2,wo(d,a,1))),d.lanes|=1),r):(r.flags|=65536,r.lanes=S,r)}var qM=k.ReactCurrentOwner,Ui=!1;function bi(r,a,d,g){a.child=r===null?Jv(a,null,d,g):wl(a,r.child,d,g)}function D_(r,a,d,g,S){d=d.render;var T=a.ref;return Ml(a,S),g=Sp(r,a,d,g,T,S),d=wp(),r!==null&&!Ui?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~S,Ls(r,a,S)):(bn&&d&&rp(a),a.flags|=1,bi(r,a,g,S),a.child)}function I_(r,a,d,g,S){if(r===null){var T=d.type;return typeof T=="function"&&!Jp(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=T,U_(r,a,T,g,S)):(r=nh(d.type,null,g,a,a.mode,S),r.ref=a.ref,r.return=a,a.child=r)}if(T=r.child,(r.lanes&S)===0){var N=T.memoizedProps;if(d=d.compare,d=d!==null?d:Zr,d(N,g)&&r.ref===a.ref)return Ls(r,a,S)}return a.flags|=1,r=Co(T,g),r.ref=a.ref,r.return=a,a.child=r}function U_(r,a,d,g,S){if(r!==null){var T=r.memoizedProps;if(Zr(T,g)&&r.ref===a.ref)if(Ui=!1,a.pendingProps=g=T,(r.lanes&S)!==0)(r.flags&131072)!==0&&(Ui=!0);else return a.lanes=r.lanes,Ls(r,a,S)}return Np(r,a,d,g,S)}function O_(r,a,d){var g=a.pendingProps,S=g.children,T=r!==null?r.memoizedState:null;if(g.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(Cl,$i),$i|=d;else{if((d&1073741824)===0)return r=T!==null?T.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:r,cachePool:null,transitions:null},a.updateQueue=null,_n(Cl,$i),$i|=r,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=T!==null?T.baseLanes:d,_n(Cl,$i),$i|=g}else T!==null?(g=T.baseLanes|d,a.memoizedState=null):g=d,_n(Cl,$i),$i|=g;return bi(r,a,S,d),a.child}function F_(r,a){var d=a.ref;(r===null&&d!==null||r!==null&&r.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function Np(r,a,d,g,S){var T=Ii(d)?pa:ci.current;return T=_l(a,T),Ml(a,S),d=Sp(r,a,d,g,T,S),g=wp(),r!==null&&!Ui?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~S,Ls(r,a,S)):(bn&&g&&rp(a),a.flags|=1,bi(r,a,d,S),a.child)}function k_(r,a,d,g,S){if(Ii(d)){var T=!0;Ad(a)}else T=!1;if(Ml(a,S),a.stateNode===null)Wd(r,a),T_(a,d,g),Cp(a,d,g,S),g=!0;else if(r===null){var N=a.stateNode,W=a.memoizedProps;N.props=W;var K=N.context,ve=d.contextType;typeof ve=="object"&&ve!==null?ve=dr(ve):(ve=Ii(d)?pa:ci.current,ve=_l(a,ve));var Le=d.getDerivedStateFromProps,Fe=typeof Le=="function"||typeof N.getSnapshotBeforeUpdate=="function";Fe||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(W!==g||K!==ve)&&A_(a,N,g,ve),So=!1;var Pe=a.memoizedState;N.state=Pe,Od(a,g,N,S),K=a.memoizedState,W!==g||Pe!==K||Di.current||So?(typeof Le=="function"&&(Ap(a,d,Le,g),K=a.memoizedState),(W=So||E_(a,d,W,g,Pe,K,ve))?(Fe||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(a.flags|=4194308)):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=K),N.props=g,N.state=K,N.context=ve,g=W):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{N=a.stateNode,e_(r,a),W=a.memoizedProps,ve=a.type===a.elementType?W:Er(a.type,W),N.props=ve,Fe=a.pendingProps,Pe=N.context,K=d.contextType,typeof K=="object"&&K!==null?K=dr(K):(K=Ii(d)?pa:ci.current,K=_l(a,K));var tt=d.getDerivedStateFromProps;(Le=typeof tt=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(W!==Fe||Pe!==K)&&A_(a,N,g,K),So=!1,Pe=a.memoizedState,N.state=Pe,Od(a,g,N,S);var ut=a.memoizedState;W!==Fe||Pe!==ut||Di.current||So?(typeof tt=="function"&&(Ap(a,d,tt,g),ut=a.memoizedState),(ve=So||E_(a,d,ve,g,Pe,ut,K)||!1)?(Le||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(g,ut,K),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(g,ut,K)),typeof N.componentDidUpdate=="function"&&(a.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof N.componentDidUpdate!="function"||W===r.memoizedProps&&Pe===r.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||W===r.memoizedProps&&Pe===r.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=ut),N.props=g,N.state=ut,N.context=K,g=ve):(typeof N.componentDidUpdate!="function"||W===r.memoizedProps&&Pe===r.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||W===r.memoizedProps&&Pe===r.memoizedState||(a.flags|=1024),g=!1)}return Lp(r,a,d,g,T,S)}function Lp(r,a,d,g,S,T){F_(r,a);var N=(a.flags&128)!==0;if(!g&&!N)return S&&Hv(a,d,!1),Ls(r,a,T);g=a.stateNode,qM.current=a;var W=N&&typeof d.getDerivedStateFromError!="function"?null:g.render();return a.flags|=1,r!==null&&N?(a.child=wl(a,r.child,null,T),a.child=wl(a,null,W,T)):bi(r,a,W,T),a.memoizedState=g.state,S&&Hv(a,d,!0),a.child}function B_(r){var a=r.stateNode;a.pendingContext?jv(r,a.pendingContext,a.pendingContext!==a.context):a.context&&jv(r,a.context,!1),mp(r,a.containerInfo)}function z_(r,a,d,g,S){return Sl(),lp(S),a.flags|=256,bi(r,a,d,g),a.child}var Dp={dehydrated:null,treeContext:null,retryLane:0};function Ip(r){return{baseLanes:r,cachePool:null,transitions:null}}function j_(r,a,d){var g=a.pendingProps,S=En.current,T=!1,N=(a.flags&128)!==0,W;if((W=N)||(W=r!==null&&r.memoizedState===null?!1:(S&2)!==0),W?(T=!0,a.flags&=-129):(r===null||r.memoizedState!==null)&&(S|=1),_n(En,S&1),r===null)return ap(a),r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((a.mode&1)===0?a.lanes=1:r.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(N=g.children,r=g.fallback,T?(g=a.mode,T=a.child,N={mode:"hidden",children:N},(g&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=N):T=ih(N,g,0,null),r=Ma(r,g,d,null),T.return=a,r.return=a,T.sibling=r,a.child=T,a.child.memoizedState=Ip(d),a.memoizedState=Dp,r):Up(a,N));if(S=r.memoizedState,S!==null&&(W=S.dehydrated,W!==null))return YM(r,a,N,g,W,S,d);if(T){T=g.fallback,N=a.mode,S=r.child,W=S.sibling;var K={mode:"hidden",children:g.children};return(N&1)===0&&a.child!==S?(g=a.child,g.childLanes=0,g.pendingProps=K,a.deletions=null):(g=Co(S,K),g.subtreeFlags=S.subtreeFlags&14680064),W!==null?T=Co(W,T):(T=Ma(T,N,d,null),T.flags|=2),T.return=a,g.return=a,g.sibling=T,a.child=g,g=T,T=a.child,N=r.child.memoizedState,N=N===null?Ip(d):{baseLanes:N.baseLanes|d,cachePool:null,transitions:N.transitions},T.memoizedState=N,T.childLanes=r.childLanes&~d,a.memoizedState=Dp,g}return T=r.child,r=T.sibling,g=Co(T,{mode:"visible",children:g.children}),(a.mode&1)===0&&(g.lanes=d),g.return=a,g.sibling=null,r!==null&&(d=a.deletions,d===null?(a.deletions=[r],a.flags|=16):d.push(r)),a.child=g,a.memoizedState=null,g}function Up(r,a){return a=ih({mode:"visible",children:a},r.mode,0,null),a.return=r,r.child=a}function Gd(r,a,d,g){return g!==null&&lp(g),wl(a,r.child,null,d),r=Up(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function YM(r,a,d,g,S,T,N){if(d)return a.flags&256?(a.flags&=-257,g=Pp(Error(t(422))),Gd(r,a,N,g)):a.memoizedState!==null?(a.child=r.child,a.flags|=128,null):(T=g.fallback,S=a.mode,g=ih({mode:"visible",children:g.children},S,0,null),T=Ma(T,S,N,null),T.flags|=2,g.return=a,T.return=a,g.sibling=T,a.child=g,(a.mode&1)!==0&&wl(a,r.child,null,N),a.child.memoizedState=Ip(N),a.memoizedState=Dp,T);if((a.mode&1)===0)return Gd(r,a,N,null);if(S.data==="$!"){if(g=S.nextSibling&&S.nextSibling.dataset,g)var W=g.dgst;return g=W,T=Error(t(419)),g=Pp(T,g,void 0),Gd(r,a,N,g)}if(W=(N&r.childLanes)!==0,Ui||W){if(g=$n,g!==null){switch(N&-N){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(g.suspendedLanes|N))!==0?0:S,S!==0&&S!==T.retryLane&&(T.retryLane=S,Rs(r,S),Cr(g,r,S,-1))}return $p(),g=Pp(Error(t(421))),Gd(r,a,N,g)}return S.data==="$?"?(a.flags|=128,a.child=r.child,a=lE.bind(null,r),S._reactRetry=a,null):(r=T.treeContext,Ki=Kr(S.nextSibling),Yi=a,bn=!0,Mr=null,r!==null&&(cr[ur++]=Cs,cr[ur++]=Ps,cr[ur++]=ma,Cs=r.id,Ps=r.overflow,ma=a),a=Up(a,g.children),a.flags|=4096,a)}function V_(r,a,d){r.lanes|=a;var g=r.alternate;g!==null&&(g.lanes|=a),hp(r.return,a,d)}function Op(r,a,d,g,S){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:S}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=d,T.tailMode=S)}function H_(r,a,d){var g=a.pendingProps,S=g.revealOrder,T=g.tail;if(bi(r,a,g.children,d),g=En.current,(g&2)!==0)g=g&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&V_(r,d,a);else if(r.tag===19)V_(r,d,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}g&=1}if(_n(En,g),(a.mode&1)===0)a.memoizedState=null;else switch(S){case"forwards":for(d=a.child,S=null;d!==null;)r=d.alternate,r!==null&&Fd(r)===null&&(S=d),d=d.sibling;d=S,d===null?(S=a.child,a.child=null):(S=d.sibling,d.sibling=null),Op(a,!1,S,d,T);break;case"backwards":for(d=null,S=a.child,a.child=null;S!==null;){if(r=S.alternate,r!==null&&Fd(r)===null){a.child=S;break}r=S.sibling,S.sibling=d,d=S,S=r}Op(a,!0,d,null,T);break;case"together":Op(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Wd(r,a){(a.mode&1)===0&&r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2)}function Ls(r,a,d){if(r!==null&&(a.dependencies=r.dependencies),ya|=a.lanes,(d&a.childLanes)===0)return null;if(r!==null&&a.child!==r.child)throw Error(t(153));if(a.child!==null){for(r=a.child,d=Co(r,r.pendingProps),a.child=d,d.return=a;r.sibling!==null;)r=r.sibling,d=d.sibling=Co(r,r.pendingProps),d.return=a;d.sibling=null}return a.child}function KM(r,a,d){switch(a.tag){case 3:B_(a),Sl();break;case 5:i_(a);break;case 1:Ii(a.type)&&Ad(a);break;case 4:mp(a,a.stateNode.containerInfo);break;case 10:var g=a.type._context,S=a.memoizedProps.value;_n(Dd,g._currentValue),g._currentValue=S;break;case 13:if(g=a.memoizedState,g!==null)return g.dehydrated!==null?(_n(En,En.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?j_(r,a,d):(_n(En,En.current&1),r=Ls(r,a,d),r!==null?r.sibling:null);_n(En,En.current&1);break;case 19:if(g=(d&a.childLanes)!==0,(r.flags&128)!==0){if(g)return H_(r,a,d);a.flags|=128}if(S=a.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),_n(En,En.current),g)break;return null;case 22:case 23:return a.lanes=0,O_(r,a,d)}return Ls(r,a,d)}var G_,Fp,W_,X_;G_=function(r,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Fp=function(){},W_=function(r,a,d,g){var S=r.memoizedProps;if(S!==g){r=a.stateNode,_a($r.current);var T=null;switch(d){case"input":S=qt(r,S),g=qt(r,g),T=[];break;case"select":S=Q({},S,{value:void 0}),g=Q({},g,{value:void 0}),T=[];break;case"textarea":S=ot(r,S),g=ot(r,g),T=[];break;default:typeof S.onClick!="function"&&typeof g.onClick=="function"&&(r.onclick=Ce)}lt(d,g);var N;d=null;for(ve in S)if(!g.hasOwnProperty(ve)&&S.hasOwnProperty(ve)&&S[ve]!=null)if(ve==="style"){var W=S[ve];for(N in W)W.hasOwnProperty(N)&&(d||(d={}),d[N]="")}else ve!=="dangerouslySetInnerHTML"&&ve!=="children"&&ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&ve!=="autoFocus"&&(o.hasOwnProperty(ve)?T||(T=[]):(T=T||[]).push(ve,null));for(ve in g){var K=g[ve];if(W=S!=null?S[ve]:void 0,g.hasOwnProperty(ve)&&K!==W&&(K!=null||W!=null))if(ve==="style")if(W){for(N in W)!W.hasOwnProperty(N)||K&&K.hasOwnProperty(N)||(d||(d={}),d[N]="");for(N in K)K.hasOwnProperty(N)&&W[N]!==K[N]&&(d||(d={}),d[N]=K[N])}else d||(T||(T=[]),T.push(ve,d)),d=K;else ve==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,W=W?W.__html:void 0,K!=null&&W!==K&&(T=T||[]).push(ve,K)):ve==="children"?typeof K!="string"&&typeof K!="number"||(T=T||[]).push(ve,""+K):ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&(o.hasOwnProperty(ve)?(K!=null&&ve==="onScroll"&&fn("scroll",r),T||W===K||(T=[])):(T=T||[]).push(ve,K))}d&&(T=T||[]).push("style",d);var ve=T;(a.updateQueue=ve)&&(a.flags|=4)}},X_=function(r,a,d,g){d!==g&&(a.flags|=4)};function Jc(r,a){if(!bn)switch(r.tailMode){case"hidden":a=r.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?r.tail=null:d.sibling=null;break;case"collapsed":d=r.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:g.sibling=null}}function di(r){var a=r.alternate!==null&&r.alternate.child===r.child,d=0,g=0;if(a)for(var S=r.child;S!==null;)d|=S.lanes|S.childLanes,g|=S.subtreeFlags&14680064,g|=S.flags&14680064,S.return=r,S=S.sibling;else for(S=r.child;S!==null;)d|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=r,S=S.sibling;return r.subtreeFlags|=g,r.childLanes=d,a}function $M(r,a,d){var g=a.pendingProps;switch(sp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return di(a),null;case 1:return Ii(a.type)&&Td(),di(a),null;case 3:return g=a.stateNode,El(),yn(Di),yn(ci),_p(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(r===null||r.child===null)&&(Nd(a)?a.flags|=4:r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Mr!==null&&(qp(Mr),Mr=null))),Fp(r,a),di(a),null;case 5:gp(a);var S=_a(Zc.current);if(d=a.type,r!==null&&a.stateNode!=null)W_(r,a,d,g,S),r.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!g){if(a.stateNode===null)throw Error(t(166));return di(a),null}if(r=_a($r.current),Nd(a)){g=a.stateNode,d=a.type;var T=a.memoizedProps;switch(g[lr]=a,g[go]=T,r=(a.mode&1)!==0,d){case"dialog":fn("cancel",g),fn("close",g);break;case"iframe":case"object":case"embed":fn("load",g);break;case"video":case"audio":for(S=0;S<fo.length;S++)fn(fo[S],g);break;case"source":fn("error",g);break;case"img":case"image":case"link":fn("error",g),fn("load",g);break;case"details":fn("toggle",g);break;case"input":$t(g,T),fn("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!T.multiple},fn("invalid",g);break;case"textarea":V(g,T),fn("invalid",g)}lt(d,T),S=null;for(var N in T)if(T.hasOwnProperty(N)){var W=T[N];N==="children"?typeof W=="string"?g.textContent!==W&&(T.suppressHydrationWarning!==!0&&me(g.textContent,W,r),S=["children",W]):typeof W=="number"&&g.textContent!==""+W&&(T.suppressHydrationWarning!==!0&&me(g.textContent,W,r),S=["children",""+W]):o.hasOwnProperty(N)&&W!=null&&N==="onScroll"&&fn("scroll",g)}switch(d){case"input":Ft(g),Y(g,T,!0);break;case"textarea":Ft(g),ie(g);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(g.onclick=Ce)}g=S,a.updateQueue=g,g!==null&&(a.flags|=4)}else{N=S.nodeType===9?S:S.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Ee(d)),r==="http://www.w3.org/1999/xhtml"?d==="script"?(r=N.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof g.is=="string"?r=N.createElement(d,{is:g.is}):(r=N.createElement(d),d==="select"&&(N=r,g.multiple?N.multiple=!0:g.size&&(N.size=g.size))):r=N.createElementNS(r,d),r[lr]=a,r[go]=g,G_(r,a,!1,!1),a.stateNode=r;e:{switch(N=ze(d,g),d){case"dialog":fn("cancel",r),fn("close",r),S=g;break;case"iframe":case"object":case"embed":fn("load",r),S=g;break;case"video":case"audio":for(S=0;S<fo.length;S++)fn(fo[S],r);S=g;break;case"source":fn("error",r),S=g;break;case"img":case"image":case"link":fn("error",r),fn("load",r),S=g;break;case"details":fn("toggle",r),S=g;break;case"input":$t(r,g),S=qt(r,g),fn("invalid",r);break;case"option":S=g;break;case"select":r._wrapperState={wasMultiple:!!g.multiple},S=Q({},g,{value:void 0}),fn("invalid",r);break;case"textarea":V(r,g),S=ot(r,g),fn("invalid",r);break;default:S=g}lt(d,S),W=S;for(T in W)if(W.hasOwnProperty(T)){var K=W[T];T==="style"?We(r,K):T==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,K!=null&&dt(r,K)):T==="children"?typeof K=="string"?(d!=="textarea"||K!=="")&&Ve(r,K):typeof K=="number"&&Ve(r,""+K):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(o.hasOwnProperty(T)?K!=null&&T==="onScroll"&&fn("scroll",r):K!=null&&U(r,T,K,N))}switch(d){case"input":Ft(r),Y(r,g,!1);break;case"textarea":Ft(r),ie(r);break;case"option":g.value!=null&&r.setAttribute("value",""+Re(g.value));break;case"select":r.multiple=!!g.multiple,T=g.value,T!=null?Wt(r,!!g.multiple,T,!1):g.defaultValue!=null&&Wt(r,!!g.multiple,g.defaultValue,!0);break;default:typeof S.onClick=="function"&&(r.onclick=Ce)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return di(a),null;case 6:if(r&&a.stateNode!=null)X_(r,a,r.memoizedProps,g);else{if(typeof g!="string"&&a.stateNode===null)throw Error(t(166));if(d=_a(Zc.current),_a($r.current),Nd(a)){if(g=a.stateNode,d=a.memoizedProps,g[lr]=a,(T=g.nodeValue!==d)&&(r=Yi,r!==null))switch(r.tag){case 3:me(g.nodeValue,d,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&me(g.nodeValue,d,(r.mode&1)!==0)}T&&(a.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[lr]=a,a.stateNode=g}return di(a),null;case 13:if(yn(En),g=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(bn&&Ki!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Yv(),Sl(),a.flags|=98560,T=!1;else if(T=Nd(a),g!==null&&g.dehydrated!==null){if(r===null){if(!T)throw Error(t(318));if(T=a.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(t(317));T[lr]=a}else Sl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;di(a),T=!1}else Mr!==null&&(qp(Mr),Mr=null),T=!0;if(!T)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(g=g!==null,g!==(r!==null&&r.memoizedState!==null)&&g&&(a.child.flags|=8192,(a.mode&1)!==0&&(r===null||(En.current&1)!==0?Gn===0&&(Gn=3):$p())),a.updateQueue!==null&&(a.flags|=4),di(a),null);case 4:return El(),Fp(r,a),r===null&&po(a.stateNode.containerInfo),di(a),null;case 10:return dp(a.type._context),di(a),null;case 17:return Ii(a.type)&&Td(),di(a),null;case 19:if(yn(En),T=a.memoizedState,T===null)return di(a),null;if(g=(a.flags&128)!==0,N=T.rendering,N===null)if(g)Jc(T,!1);else{if(Gn!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(N=Fd(r),N!==null){for(a.flags|=128,Jc(T,!1),g=N.updateQueue,g!==null&&(a.updateQueue=g,a.flags|=4),a.subtreeFlags=0,g=d,d=a.child;d!==null;)T=d,r=g,T.flags&=14680066,N=T.alternate,N===null?(T.childLanes=0,T.lanes=r,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=N.childLanes,T.lanes=N.lanes,T.child=N.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=N.memoizedProps,T.memoizedState=N.memoizedState,T.updateQueue=N.updateQueue,T.type=N.type,r=N.dependencies,T.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),d=d.sibling;return _n(En,En.current&1|2),a.child}r=r.sibling}T.tail!==null&&xn()>Pl&&(a.flags|=128,g=!0,Jc(T,!1),a.lanes=4194304)}else{if(!g)if(r=Fd(N),r!==null){if(a.flags|=128,g=!0,d=r.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),Jc(T,!0),T.tail===null&&T.tailMode==="hidden"&&!N.alternate&&!bn)return di(a),null}else 2*xn()-T.renderingStartTime>Pl&&d!==1073741824&&(a.flags|=128,g=!0,Jc(T,!1),a.lanes=4194304);T.isBackwards?(N.sibling=a.child,a.child=N):(d=T.last,d!==null?d.sibling=N:a.child=N,T.last=N)}return T.tail!==null?(a=T.tail,T.rendering=a,T.tail=a.sibling,T.renderingStartTime=xn(),a.sibling=null,d=En.current,_n(En,g?d&1|2:d&1),a):(di(a),null);case 22:case 23:return Kp(),g=a.memoizedState!==null,r!==null&&r.memoizedState!==null!==g&&(a.flags|=8192),g&&(a.mode&1)!==0?($i&1073741824)!==0&&(di(a),a.subtreeFlags&6&&(a.flags|=8192)):di(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function JM(r,a){switch(sp(a),a.tag){case 1:return Ii(a.type)&&Td(),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return El(),yn(Di),yn(ci),_p(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 5:return gp(a),null;case 13:if(yn(En),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Sl()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return yn(En),null;case 4:return El(),null;case 10:return dp(a.type._context),null;case 22:case 23:return Kp(),null;case 24:return null;default:return null}}var Xd=!1,hi=!1,QM=typeof WeakSet=="function"?WeakSet:Set,at=null;function Al(r,a){var d=r.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){Pn(r,a,g)}else d.current=null}function kp(r,a,d){try{d()}catch(g){Pn(r,a,g)}}var Z_=!1;function eE(r,a){if(Qe=oa,r=Uc(),Oc(r)){if("selectionStart"in r)var d={start:r.selectionStart,end:r.selectionEnd};else e:{d=(d=r.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var S=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var N=0,W=-1,K=-1,ve=0,Le=0,Fe=r,Pe=null;t:for(;;){for(var tt;Fe!==d||S!==0&&Fe.nodeType!==3||(W=N+S),Fe!==T||g!==0&&Fe.nodeType!==3||(K=N+g),Fe.nodeType===3&&(N+=Fe.nodeValue.length),(tt=Fe.firstChild)!==null;)Pe=Fe,Fe=tt;for(;;){if(Fe===r)break t;if(Pe===d&&++ve===S&&(W=N),Pe===T&&++Le===g&&(K=N),(tt=Fe.nextSibling)!==null)break;Fe=Pe,Pe=Fe.parentNode}Fe=tt}d=W===-1||K===-1?null:{start:W,end:K}}else d=null}d=d||{start:0,end:0}}else d=null;for(_t={focusedElem:r,selectionRange:d},oa=!1,at=a;at!==null;)if(a=at,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,at=r;else for(;at!==null;){a=at;try{var ut=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var ht=ut.memoizedProps,Ln=ut.memoizedState,de=a.stateNode,ee=de.getSnapshotBeforeUpdate(a.elementType===a.type?ht:Er(a.type,ht),Ln);de.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var fe=a.stateNode.containerInfo;fe.nodeType===1?fe.textContent="":fe.nodeType===9&&fe.documentElement&&fe.removeChild(fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Be){Pn(a,a.return,Be)}if(r=a.sibling,r!==null){r.return=a.return,at=r;break}at=a.return}return ut=Z_,Z_=!1,ut}function Qc(r,a,d){var g=a.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&r)===r){var T=S.destroy;S.destroy=void 0,T!==void 0&&kp(a,d,T)}S=S.next}while(S!==g)}}function Zd(r,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&r)===r){var g=d.create;d.destroy=g()}d=d.next}while(d!==a)}}function Bp(r){var a=r.ref;if(a!==null){var d=r.stateNode;switch(r.tag){case 5:r=d;break;default:r=d}typeof a=="function"?a(r):a.current=r}}function q_(r){var a=r.alternate;a!==null&&(r.alternate=null,q_(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&(delete a[lr],delete a[go],delete a[vo],delete a[ep],delete a[tp])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Y_(r){return r.tag===5||r.tag===3||r.tag===4}function K_(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Y_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function zp(r,a,d){var g=r.tag;if(g===5||g===6)r=r.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(r,a):d.insertBefore(r,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(r,d)):(a=d,a.appendChild(r)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Ce));else if(g!==4&&(r=r.child,r!==null))for(zp(r,a,d),r=r.sibling;r!==null;)zp(r,a,d),r=r.sibling}function jp(r,a,d){var g=r.tag;if(g===5||g===6)r=r.stateNode,a?d.insertBefore(r,a):d.appendChild(r);else if(g!==4&&(r=r.child,r!==null))for(jp(r,a,d),r=r.sibling;r!==null;)jp(r,a,d),r=r.sibling}var ii=null,Tr=!1;function bo(r,a,d){for(d=d.child;d!==null;)$_(r,a,d),d=d.sibling}function $_(r,a,d){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount($e,d)}catch{}switch(d.tag){case 5:hi||Al(d,a);case 6:var g=ii,S=Tr;ii=null,bo(r,a,d),ii=g,Tr=S,ii!==null&&(Tr?(r=ii,d=d.stateNode,r.nodeType===8?r.parentNode.removeChild(d):r.removeChild(d)):ii.removeChild(d.stateNode));break;case 18:ii!==null&&(Tr?(r=ii,d=d.stateNode,r.nodeType===8?Hc(r.parentNode,d):r.nodeType===1&&Hc(r,d),Gi(r)):Hc(ii,d.stateNode));break;case 4:g=ii,S=Tr,ii=d.stateNode.containerInfo,Tr=!0,bo(r,a,d),ii=g,Tr=S;break;case 0:case 11:case 14:case 15:if(!hi&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){S=g=g.next;do{var T=S,N=T.destroy;T=T.tag,N!==void 0&&((T&2)!==0||(T&4)!==0)&&kp(d,a,N),S=S.next}while(S!==g)}bo(r,a,d);break;case 1:if(!hi&&(Al(d,a),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(W){Pn(d,a,W)}bo(r,a,d);break;case 21:bo(r,a,d);break;case 22:d.mode&1?(hi=(g=hi)||d.memoizedState!==null,bo(r,a,d),hi=g):bo(r,a,d);break;default:bo(r,a,d)}}function J_(r){var a=r.updateQueue;if(a!==null){r.updateQueue=null;var d=r.stateNode;d===null&&(d=r.stateNode=new QM),a.forEach(function(g){var S=cE.bind(null,r,g);d.has(g)||(d.add(g),g.then(S,S))})}}function Ar(r,a){var d=a.deletions;if(d!==null)for(var g=0;g<d.length;g++){var S=d[g];try{var T=r,N=a,W=N;e:for(;W!==null;){switch(W.tag){case 5:ii=W.stateNode,Tr=!1;break e;case 3:ii=W.stateNode.containerInfo,Tr=!0;break e;case 4:ii=W.stateNode.containerInfo,Tr=!0;break e}W=W.return}if(ii===null)throw Error(t(160));$_(T,N,S),ii=null,Tr=!1;var K=S.alternate;K!==null&&(K.return=null),S.return=null}catch(ve){Pn(S,a,ve)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Q_(a,r),a=a.sibling}function Q_(r,a){var d=r.alternate,g=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Ar(a,r),Qr(r),g&4){try{Qc(3,r,r.return),Zd(3,r)}catch(ht){Pn(r,r.return,ht)}try{Qc(5,r,r.return)}catch(ht){Pn(r,r.return,ht)}}break;case 1:Ar(a,r),Qr(r),g&512&&d!==null&&Al(d,d.return);break;case 5:if(Ar(a,r),Qr(r),g&512&&d!==null&&Al(d,d.return),r.flags&32){var S=r.stateNode;try{Ve(S,"")}catch(ht){Pn(r,r.return,ht)}}if(g&4&&(S=r.stateNode,S!=null)){var T=r.memoizedProps,N=d!==null?d.memoizedProps:T,W=r.type,K=r.updateQueue;if(r.updateQueue=null,K!==null)try{W==="input"&&T.type==="radio"&&T.name!=null&&Rt(S,T),ze(W,N);var ve=ze(W,T);for(N=0;N<K.length;N+=2){var Le=K[N],Fe=K[N+1];Le==="style"?We(S,Fe):Le==="dangerouslySetInnerHTML"?dt(S,Fe):Le==="children"?Ve(S,Fe):U(S,Le,Fe,ve)}switch(W){case"input":un(S,T);break;case"textarea":R(S,T);break;case"select":var Pe=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!T.multiple;var tt=T.value;tt!=null?Wt(S,!!T.multiple,tt,!1):Pe!==!!T.multiple&&(T.defaultValue!=null?Wt(S,!!T.multiple,T.defaultValue,!0):Wt(S,!!T.multiple,T.multiple?[]:"",!1))}S[go]=T}catch(ht){Pn(r,r.return,ht)}}break;case 6:if(Ar(a,r),Qr(r),g&4){if(r.stateNode===null)throw Error(t(162));S=r.stateNode,T=r.memoizedProps;try{S.nodeValue=T}catch(ht){Pn(r,r.return,ht)}}break;case 3:if(Ar(a,r),Qr(r),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Gi(a.containerInfo)}catch(ht){Pn(r,r.return,ht)}break;case 4:Ar(a,r),Qr(r);break;case 13:Ar(a,r),Qr(r),S=r.child,S.flags&8192&&(T=S.memoizedState!==null,S.stateNode.isHidden=T,!T||S.alternate!==null&&S.alternate.memoizedState!==null||(Gp=xn())),g&4&&J_(r);break;case 22:if(Le=d!==null&&d.memoizedState!==null,r.mode&1?(hi=(ve=hi)||Le,Ar(a,r),hi=ve):Ar(a,r),Qr(r),g&8192){if(ve=r.memoizedState!==null,(r.stateNode.isHidden=ve)&&!Le&&(r.mode&1)!==0)for(at=r,Le=r.child;Le!==null;){for(Fe=at=Le;at!==null;){switch(Pe=at,tt=Pe.child,Pe.tag){case 0:case 11:case 14:case 15:Qc(4,Pe,Pe.return);break;case 1:Al(Pe,Pe.return);var ut=Pe.stateNode;if(typeof ut.componentWillUnmount=="function"){g=Pe,d=Pe.return;try{a=g,ut.props=a.memoizedProps,ut.state=a.memoizedState,ut.componentWillUnmount()}catch(ht){Pn(g,d,ht)}}break;case 5:Al(Pe,Pe.return);break;case 22:if(Pe.memoizedState!==null){nx(Fe);continue}}tt!==null?(tt.return=Pe,at=tt):nx(Fe)}Le=Le.sibling}e:for(Le=null,Fe=r;;){if(Fe.tag===5){if(Le===null){Le=Fe;try{S=Fe.stateNode,ve?(T=S.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(W=Fe.stateNode,K=Fe.memoizedProps.style,N=K!=null&&K.hasOwnProperty("display")?K.display:null,W.style.display=Ie("display",N))}catch(ht){Pn(r,r.return,ht)}}}else if(Fe.tag===6){if(Le===null)try{Fe.stateNode.nodeValue=ve?"":Fe.memoizedProps}catch(ht){Pn(r,r.return,ht)}}else if((Fe.tag!==22&&Fe.tag!==23||Fe.memoizedState===null||Fe===r)&&Fe.child!==null){Fe.child.return=Fe,Fe=Fe.child;continue}if(Fe===r)break e;for(;Fe.sibling===null;){if(Fe.return===null||Fe.return===r)break e;Le===Fe&&(Le=null),Fe=Fe.return}Le===Fe&&(Le=null),Fe.sibling.return=Fe.return,Fe=Fe.sibling}}break;case 19:Ar(a,r),Qr(r),g&4&&J_(r);break;case 21:break;default:Ar(a,r),Qr(r)}}function Qr(r){var a=r.flags;if(a&2){try{e:{for(var d=r.return;d!==null;){if(Y_(d)){var g=d;break e}d=d.return}throw Error(t(160))}switch(g.tag){case 5:var S=g.stateNode;g.flags&32&&(Ve(S,""),g.flags&=-33);var T=K_(r);jp(r,T,S);break;case 3:case 4:var N=g.stateNode.containerInfo,W=K_(r);zp(r,W,N);break;default:throw Error(t(161))}}catch(K){Pn(r,r.return,K)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function tE(r,a,d){at=r,ex(r)}function ex(r,a,d){for(var g=(r.mode&1)!==0;at!==null;){var S=at,T=S.child;if(S.tag===22&&g){var N=S.memoizedState!==null||Xd;if(!N){var W=S.alternate,K=W!==null&&W.memoizedState!==null||hi;W=Xd;var ve=hi;if(Xd=N,(hi=K)&&!ve)for(at=S;at!==null;)N=at,K=N.child,N.tag===22&&N.memoizedState!==null?ix(S):K!==null?(K.return=N,at=K):ix(S);for(;T!==null;)at=T,ex(T),T=T.sibling;at=S,Xd=W,hi=ve}tx(r)}else(S.subtreeFlags&8772)!==0&&T!==null?(T.return=S,at=T):tx(r)}}function tx(r){for(;at!==null;){var a=at;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:hi||Zd(5,a);break;case 1:var g=a.stateNode;if(a.flags&4&&!hi)if(d===null)g.componentDidMount();else{var S=a.elementType===a.type?d.memoizedProps:Er(a.type,d.memoizedProps);g.componentDidUpdate(S,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var T=a.updateQueue;T!==null&&n_(a,T,g);break;case 3:var N=a.updateQueue;if(N!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}n_(a,N,d)}break;case 5:var W=a.stateNode;if(d===null&&a.flags&4){d=W;var K=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":K.autoFocus&&d.focus();break;case"img":K.src&&(d.src=K.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var ve=a.alternate;if(ve!==null){var Le=ve.memoizedState;if(Le!==null){var Fe=Le.dehydrated;Fe!==null&&Gi(Fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}hi||a.flags&512&&Bp(a)}catch(Pe){Pn(a,a.return,Pe)}}if(a===r){at=null;break}if(d=a.sibling,d!==null){d.return=a.return,at=d;break}at=a.return}}function nx(r){for(;at!==null;){var a=at;if(a===r){at=null;break}var d=a.sibling;if(d!==null){d.return=a.return,at=d;break}at=a.return}}function ix(r){for(;at!==null;){var a=at;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{Zd(4,a)}catch(K){Pn(a,d,K)}break;case 1:var g=a.stateNode;if(typeof g.componentDidMount=="function"){var S=a.return;try{g.componentDidMount()}catch(K){Pn(a,S,K)}}var T=a.return;try{Bp(a)}catch(K){Pn(a,T,K)}break;case 5:var N=a.return;try{Bp(a)}catch(K){Pn(a,N,K)}}}catch(K){Pn(a,a.return,K)}if(a===r){at=null;break}var W=a.sibling;if(W!==null){W.return=a.return,at=W;break}at=a.return}}var nE=Math.ceil,qd=k.ReactCurrentDispatcher,Vp=k.ReactCurrentOwner,fr=k.ReactCurrentBatchConfig,Jt=0,$n=null,Fn=null,ri=0,$i=0,Cl=_o(0),Gn=0,eu=null,ya=0,Yd=0,Hp=0,tu=null,Oi=null,Gp=0,Pl=1/0,Ds=null,Kd=!1,Wp=null,Mo=null,$d=!1,Eo=null,Jd=0,nu=0,Xp=null,Qd=-1,eh=0;function Mi(){return(Jt&6)!==0?xn():Qd!==-1?Qd:Qd=xn()}function To(r){return(r.mode&1)===0?1:(Jt&2)!==0&&ri!==0?ri&-ri:BM.transition!==null?(eh===0&&(eh=Yn()),eh):(r=wt,r!==0||(r=window.event,r=r===void 0?16:Xt(r.type)),r)}function Cr(r,a,d,g){if(50<nu)throw nu=0,Xp=null,Error(t(185));gn(r,d,g),((Jt&2)===0||r!==$n)&&(r===$n&&((Jt&2)===0&&(Yd|=d),Gn===4&&Ao(r,ri)),Fi(r,g),d===1&&Jt===0&&(a.mode&1)===0&&(Pl=xn()+500,Cd&&yo()))}function Fi(r,a){var d=r.callbackNode;Zt(r,a);var g=vt(r,r===$n?ri:0);if(g===0)d!==null&&ta(d),r.callbackNode=null,r.callbackPriority=0;else if(a=g&-g,r.callbackPriority!==a){if(d!=null&&ta(d),a===1)r.tag===0?kM(sx.bind(null,r)):Gv(sx.bind(null,r)),li(function(){(Jt&6)===0&&yo()}),d=null;else{switch(Nn(g)){case 1:d=se;break;case 4:d=_e;break;case 16:d=pe;break;case 536870912:d=Ge;break;default:d=pe}d=fx(d,rx.bind(null,r))}r.callbackPriority=a,r.callbackNode=d}}function rx(r,a){if(Qd=-1,eh=0,(Jt&6)!==0)throw Error(t(327));var d=r.callbackNode;if(Rl()&&r.callbackNode!==d)return null;var g=vt(r,r===$n?ri:0);if(g===0)return null;if((g&30)!==0||(g&r.expiredLanes)!==0||a)a=th(r,g);else{a=g;var S=Jt;Jt|=2;var T=ax();($n!==r||ri!==a)&&(Ds=null,Pl=xn()+500,wa(r,a));do try{sE();break}catch(W){ox(r,W)}while(!0);up(),qd.current=T,Jt=S,Fn!==null?a=0:($n=null,ri=0,a=Gn)}if(a!==0){if(a===2&&(S=Et(r),S!==0&&(g=S,a=Zp(r,S))),a===1)throw d=eu,wa(r,0),Ao(r,g),Fi(r,xn()),d;if(a===6)Ao(r,g);else{if(S=r.current.alternate,(g&30)===0&&!iE(S)&&(a=th(r,g),a===2&&(T=Et(r),T!==0&&(g=T,a=Zp(r,T))),a===1))throw d=eu,wa(r,0),Ao(r,g),Fi(r,xn()),d;switch(r.finishedWork=S,r.finishedLanes=g,a){case 0:case 1:throw Error(t(345));case 2:ba(r,Oi,Ds);break;case 3:if(Ao(r,g),(g&130023424)===g&&(a=Gp+500-xn(),10<a)){if(vt(r,0)!==0)break;if(S=r.suspendedLanes,(S&g)!==g){Mi(),r.pingedLanes|=r.suspendedLanes&S;break}r.timeoutHandle=Vn(ba.bind(null,r,Oi,Ds),a);break}ba(r,Oi,Ds);break;case 4:if(Ao(r,g),(g&4194240)===g)break;for(a=r.eventTimes,S=-1;0<g;){var N=31-Ne(g);T=1<<N,N=a[N],N>S&&(S=N),g&=~T}if(g=S,g=xn()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*nE(g/1960))-g,10<g){r.timeoutHandle=Vn(ba.bind(null,r,Oi,Ds),g);break}ba(r,Oi,Ds);break;case 5:ba(r,Oi,Ds);break;default:throw Error(t(329))}}}return Fi(r,xn()),r.callbackNode===d?rx.bind(null,r):null}function Zp(r,a){var d=tu;return r.current.memoizedState.isDehydrated&&(wa(r,a).flags|=256),r=th(r,a),r!==2&&(a=Oi,Oi=d,a!==null&&qp(a)),r}function qp(r){Oi===null?Oi=r:Oi.push.apply(Oi,r)}function iE(r){for(var a=r;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var S=d[g],T=S.getSnapshot;S=S.value;try{if(!Zi(T(),S))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ao(r,a){for(a&=~Hp,a&=~Yd,r.suspendedLanes|=a,r.pingedLanes&=~a,r=r.expirationTimes;0<a;){var d=31-Ne(a),g=1<<d;r[d]=-1,a&=~g}}function sx(r){if((Jt&6)!==0)throw Error(t(327));Rl();var a=vt(r,0);if((a&1)===0)return Fi(r,xn()),null;var d=th(r,a);if(r.tag!==0&&d===2){var g=Et(r);g!==0&&(a=g,d=Zp(r,g))}if(d===1)throw d=eu,wa(r,0),Ao(r,a),Fi(r,xn()),d;if(d===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=a,ba(r,Oi,Ds),Fi(r,xn()),null}function Yp(r,a){var d=Jt;Jt|=1;try{return r(a)}finally{Jt=d,Jt===0&&(Pl=xn()+500,Cd&&yo())}}function Sa(r){Eo!==null&&Eo.tag===0&&(Jt&6)===0&&Rl();var a=Jt;Jt|=1;var d=fr.transition,g=wt;try{if(fr.transition=null,wt=1,r)return r()}finally{wt=g,fr.transition=d,Jt=a,(Jt&6)===0&&yo()}}function Kp(){$i=Cl.current,yn(Cl)}function wa(r,a){r.finishedWork=null,r.finishedLanes=0;var d=r.timeoutHandle;if(d!==-1&&(r.timeoutHandle=-1,On(d)),Fn!==null)for(d=Fn.return;d!==null;){var g=d;switch(sp(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Td();break;case 3:El(),yn(Di),yn(ci),_p();break;case 5:gp(g);break;case 4:El();break;case 13:yn(En);break;case 19:yn(En);break;case 10:dp(g.type._context);break;case 22:case 23:Kp()}d=d.return}if($n=r,Fn=r=Co(r.current,null),ri=$i=a,Gn=0,eu=null,Hp=Yd=ya=0,Oi=tu=null,va!==null){for(a=0;a<va.length;a++)if(d=va[a],g=d.interleaved,g!==null){d.interleaved=null;var S=g.next,T=d.pending;if(T!==null){var N=T.next;T.next=S,g.next=N}d.pending=g}va=null}return r}function ox(r,a){do{var d=Fn;try{if(up(),kd.current=Vd,Bd){for(var g=Tn.memoizedState;g!==null;){var S=g.queue;S!==null&&(S.pending=null),g=g.next}Bd=!1}if(xa=0,Kn=Hn=Tn=null,qc=!1,Yc=0,Vp.current=null,d===null||d.return===null){Gn=1,eu=a,Fn=null;break}e:{var T=r,N=d.return,W=d,K=a;if(a=ri,W.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var ve=K,Le=W,Fe=Le.tag;if((Le.mode&1)===0&&(Fe===0||Fe===11||Fe===15)){var Pe=Le.alternate;Pe?(Le.updateQueue=Pe.updateQueue,Le.memoizedState=Pe.memoizedState,Le.lanes=Pe.lanes):(Le.updateQueue=null,Le.memoizedState=null)}var tt=N_(N);if(tt!==null){tt.flags&=-257,L_(tt,N,W,T,a),tt.mode&1&&R_(T,ve,a),a=tt,K=ve;var ut=a.updateQueue;if(ut===null){var ht=new Set;ht.add(K),a.updateQueue=ht}else ut.add(K);break e}else{if((a&1)===0){R_(T,ve,a),$p();break e}K=Error(t(426))}}else if(bn&&W.mode&1){var Ln=N_(N);if(Ln!==null){(Ln.flags&65536)===0&&(Ln.flags|=256),L_(Ln,N,W,T,a),lp(Tl(K,W));break e}}T=K=Tl(K,W),Gn!==4&&(Gn=2),tu===null?tu=[T]:tu.push(T),T=N;do{switch(T.tag){case 3:T.flags|=65536,a&=-a,T.lanes|=a;var de=C_(T,K,a);t_(T,de);break e;case 1:W=K;var ee=T.type,fe=T.stateNode;if((T.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(Mo===null||!Mo.has(fe)))){T.flags|=65536,a&=-a,T.lanes|=a;var Be=P_(T,W,a);t_(T,Be);break e}}T=T.return}while(T!==null)}cx(d)}catch(ft){a=ft,Fn===d&&d!==null&&(Fn=d=d.return);continue}break}while(!0)}function ax(){var r=qd.current;return qd.current=Vd,r===null?Vd:r}function $p(){(Gn===0||Gn===3||Gn===2)&&(Gn=4),$n===null||(ya&268435455)===0&&(Yd&268435455)===0||Ao($n,ri)}function th(r,a){var d=Jt;Jt|=2;var g=ax();($n!==r||ri!==a)&&(Ds=null,wa(r,a));do try{rE();break}catch(S){ox(r,S)}while(!0);if(up(),Jt=d,qd.current=g,Fn!==null)throw Error(t(261));return $n=null,ri=0,Gn}function rE(){for(;Fn!==null;)lx(Fn)}function sE(){for(;Fn!==null&&!yc();)lx(Fn)}function lx(r){var a=hx(r.alternate,r,$i);r.memoizedProps=r.pendingProps,a===null?cx(r):Fn=a,Vp.current=null}function cx(r){var a=r;do{var d=a.alternate;if(r=a.return,(a.flags&32768)===0){if(d=$M(d,a,$i),d!==null){Fn=d;return}}else{if(d=JM(d,a),d!==null){d.flags&=32767,Fn=d;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Gn=6,Fn=null;return}}if(a=a.sibling,a!==null){Fn=a;return}Fn=a=r}while(a!==null);Gn===0&&(Gn=5)}function ba(r,a,d){var g=wt,S=fr.transition;try{fr.transition=null,wt=1,oE(r,a,d,g)}finally{fr.transition=S,wt=g}return null}function oE(r,a,d,g){do Rl();while(Eo!==null);if((Jt&6)!==0)throw Error(t(327));d=r.finishedWork;var S=r.finishedLanes;if(d===null)return null;if(r.finishedWork=null,r.finishedLanes=0,d===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var T=d.lanes|d.childLanes;if(dn(r,T),r===$n&&(Fn=$n=null,ri=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||$d||($d=!0,fx(pe,function(){return Rl(),null})),T=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||T){T=fr.transition,fr.transition=null;var N=wt;wt=1;var W=Jt;Jt|=4,Vp.current=null,eE(r,d),Q_(d,r),or(_t),oa=!!Qe,_t=Qe=null,r.current=d,tE(d),eo(),Jt=W,wt=N,fr.transition=T}else r.current=d;if($d&&($d=!1,Eo=r,Jd=S),T=r.pendingLanes,T===0&&(Mo=null),et(d.stateNode),Fi(r,xn()),a!==null)for(g=r.onRecoverableError,d=0;d<a.length;d++)S=a[d],g(S.value,{componentStack:S.stack,digest:S.digest});if(Kd)throw Kd=!1,r=Wp,Wp=null,r;return(Jd&1)!==0&&r.tag!==0&&Rl(),T=r.pendingLanes,(T&1)!==0?r===Xp?nu++:(nu=0,Xp=r):nu=0,yo(),null}function Rl(){if(Eo!==null){var r=Nn(Jd),a=fr.transition,d=wt;try{if(fr.transition=null,wt=16>r?16:r,Eo===null)var g=!1;else{if(r=Eo,Eo=null,Jd=0,(Jt&6)!==0)throw Error(t(331));var S=Jt;for(Jt|=4,at=r.current;at!==null;){var T=at,N=T.child;if((at.flags&16)!==0){var W=T.deletions;if(W!==null){for(var K=0;K<W.length;K++){var ve=W[K];for(at=ve;at!==null;){var Le=at;switch(Le.tag){case 0:case 11:case 15:Qc(8,Le,T)}var Fe=Le.child;if(Fe!==null)Fe.return=Le,at=Fe;else for(;at!==null;){Le=at;var Pe=Le.sibling,tt=Le.return;if(q_(Le),Le===ve){at=null;break}if(Pe!==null){Pe.return=tt,at=Pe;break}at=tt}}}var ut=T.alternate;if(ut!==null){var ht=ut.child;if(ht!==null){ut.child=null;do{var Ln=ht.sibling;ht.sibling=null,ht=Ln}while(ht!==null)}}at=T}}if((T.subtreeFlags&2064)!==0&&N!==null)N.return=T,at=N;else e:for(;at!==null;){if(T=at,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:Qc(9,T,T.return)}var de=T.sibling;if(de!==null){de.return=T.return,at=de;break e}at=T.return}}var ee=r.current;for(at=ee;at!==null;){N=at;var fe=N.child;if((N.subtreeFlags&2064)!==0&&fe!==null)fe.return=N,at=fe;else e:for(N=ee;at!==null;){if(W=at,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:Zd(9,W)}}catch(ft){Pn(W,W.return,ft)}if(W===N){at=null;break e}var Be=W.sibling;if(Be!==null){Be.return=W.return,at=Be;break e}at=W.return}}if(Jt=S,yo(),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot($e,r)}catch{}g=!0}return g}finally{wt=d,fr.transition=a}}return!1}function ux(r,a,d){a=Tl(d,a),a=C_(r,a,1),r=wo(r,a,1),a=Mi(),r!==null&&(gn(r,1,a),Fi(r,a))}function Pn(r,a,d){if(r.tag===3)ux(r,r,d);else for(;a!==null;){if(a.tag===3){ux(a,r,d);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Mo===null||!Mo.has(g))){r=Tl(d,r),r=P_(a,r,1),a=wo(a,r,1),r=Mi(),a!==null&&(gn(a,1,r),Fi(a,r));break}}a=a.return}}function aE(r,a,d){var g=r.pingCache;g!==null&&g.delete(a),a=Mi(),r.pingedLanes|=r.suspendedLanes&d,$n===r&&(ri&d)===d&&(Gn===4||Gn===3&&(ri&130023424)===ri&&500>xn()-Gp?wa(r,0):Hp|=d),Fi(r,a)}function dx(r,a){a===0&&((r.mode&1)===0?a=1:(a=sn,sn<<=1,(sn&130023424)===0&&(sn=4194304)));var d=Mi();r=Rs(r,a),r!==null&&(gn(r,a,d),Fi(r,d))}function lE(r){var a=r.memoizedState,d=0;a!==null&&(d=a.retryLane),dx(r,d)}function cE(r,a){var d=0;switch(r.tag){case 13:var g=r.stateNode,S=r.memoizedState;S!==null&&(d=S.retryLane);break;case 19:g=r.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(a),dx(r,d)}var hx;hx=function(r,a,d){if(r!==null)if(r.memoizedProps!==a.pendingProps||Di.current)Ui=!0;else{if((r.lanes&d)===0&&(a.flags&128)===0)return Ui=!1,KM(r,a,d);Ui=(r.flags&131072)!==0}else Ui=!1,bn&&(a.flags&1048576)!==0&&Wv(a,Rd,a.index);switch(a.lanes=0,a.tag){case 2:var g=a.type;Wd(r,a),r=a.pendingProps;var S=_l(a,ci.current);Ml(a,d),S=Sp(null,a,g,r,S,d);var T=wp();return a.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Ii(g)?(T=!0,Ad(a)):T=!1,a.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,pp(a),S.updater=Hd,a.stateNode=S,S._reactInternals=a,Cp(a,g,r,d),a=Lp(null,a,g,!0,T,d)):(a.tag=0,bn&&T&&rp(a),bi(null,a,S,d),a=a.child),a;case 16:g=a.elementType;e:{switch(Wd(r,a),r=a.pendingProps,S=g._init,g=S(g._payload),a.type=g,S=a.tag=dE(g),r=Er(g,r),S){case 0:a=Np(null,a,g,r,d);break e;case 1:a=k_(null,a,g,r,d);break e;case 11:a=D_(null,a,g,r,d);break e;case 14:a=I_(null,a,g,Er(g.type,r),d);break e}throw Error(t(306,g,""))}return a;case 0:return g=a.type,S=a.pendingProps,S=a.elementType===g?S:Er(g,S),Np(r,a,g,S,d);case 1:return g=a.type,S=a.pendingProps,S=a.elementType===g?S:Er(g,S),k_(r,a,g,S,d);case 3:e:{if(B_(a),r===null)throw Error(t(387));g=a.pendingProps,T=a.memoizedState,S=T.element,e_(r,a),Od(a,g,null,d);var N=a.memoizedState;if(g=N.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},a.updateQueue.baseState=T,a.memoizedState=T,a.flags&256){S=Tl(Error(t(423)),a),a=z_(r,a,g,d,S);break e}else if(g!==S){S=Tl(Error(t(424)),a),a=z_(r,a,g,d,S);break e}else for(Ki=Kr(a.stateNode.containerInfo.firstChild),Yi=a,bn=!0,Mr=null,d=Jv(a,null,g,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Sl(),g===S){a=Ls(r,a,d);break e}bi(r,a,g,d)}a=a.child}return a;case 5:return i_(a),r===null&&ap(a),g=a.type,S=a.pendingProps,T=r!==null?r.memoizedProps:null,N=S.children,Ut(g,S)?N=null:T!==null&&Ut(g,T)&&(a.flags|=32),F_(r,a),bi(r,a,N,d),a.child;case 6:return r===null&&ap(a),null;case 13:return j_(r,a,d);case 4:return mp(a,a.stateNode.containerInfo),g=a.pendingProps,r===null?a.child=wl(a,null,g,d):bi(r,a,g,d),a.child;case 11:return g=a.type,S=a.pendingProps,S=a.elementType===g?S:Er(g,S),D_(r,a,g,S,d);case 7:return bi(r,a,a.pendingProps,d),a.child;case 8:return bi(r,a,a.pendingProps.children,d),a.child;case 12:return bi(r,a,a.pendingProps.children,d),a.child;case 10:e:{if(g=a.type._context,S=a.pendingProps,T=a.memoizedProps,N=S.value,_n(Dd,g._currentValue),g._currentValue=N,T!==null)if(Zi(T.value,N)){if(T.children===S.children&&!Di.current){a=Ls(r,a,d);break e}}else for(T=a.child,T!==null&&(T.return=a);T!==null;){var W=T.dependencies;if(W!==null){N=T.child;for(var K=W.firstContext;K!==null;){if(K.context===g){if(T.tag===1){K=Ns(-1,d&-d),K.tag=2;var ve=T.updateQueue;if(ve!==null){ve=ve.shared;var Le=ve.pending;Le===null?K.next=K:(K.next=Le.next,Le.next=K),ve.pending=K}}T.lanes|=d,K=T.alternate,K!==null&&(K.lanes|=d),hp(T.return,d,a),W.lanes|=d;break}K=K.next}}else if(T.tag===10)N=T.type===a.type?null:T.child;else if(T.tag===18){if(N=T.return,N===null)throw Error(t(341));N.lanes|=d,W=N.alternate,W!==null&&(W.lanes|=d),hp(N,d,a),N=T.sibling}else N=T.child;if(N!==null)N.return=T;else for(N=T;N!==null;){if(N===a){N=null;break}if(T=N.sibling,T!==null){T.return=N.return,N=T;break}N=N.return}T=N}bi(r,a,S.children,d),a=a.child}return a;case 9:return S=a.type,g=a.pendingProps.children,Ml(a,d),S=dr(S),g=g(S),a.flags|=1,bi(r,a,g,d),a.child;case 14:return g=a.type,S=Er(g,a.pendingProps),S=Er(g.type,S),I_(r,a,g,S,d);case 15:return U_(r,a,a.type,a.pendingProps,d);case 17:return g=a.type,S=a.pendingProps,S=a.elementType===g?S:Er(g,S),Wd(r,a),a.tag=1,Ii(g)?(r=!0,Ad(a)):r=!1,Ml(a,d),T_(a,g,S),Cp(a,g,S,d),Lp(null,a,g,!0,r,d);case 19:return H_(r,a,d);case 22:return O_(r,a,d)}throw Error(t(156,a.tag))};function fx(r,a){return Ja(r,a)}function uE(r,a,d,g){this.tag=r,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(r,a,d,g){return new uE(r,a,d,g)}function Jp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function dE(r){if(typeof r=="function")return Jp(r)?1:0;if(r!=null){if(r=r.$$typeof,r===re)return 11;if(r===Se)return 14}return 2}function Co(r,a){var d=r.alternate;return d===null?(d=pr(r.tag,a,r.key,r.mode),d.elementType=r.elementType,d.type=r.type,d.stateNode=r.stateNode,d.alternate=r,r.alternate=d):(d.pendingProps=a,d.type=r.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=r.flags&14680064,d.childLanes=r.childLanes,d.lanes=r.lanes,d.child=r.child,d.memoizedProps=r.memoizedProps,d.memoizedState=r.memoizedState,d.updateQueue=r.updateQueue,a=r.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=r.sibling,d.index=r.index,d.ref=r.ref,d}function nh(r,a,d,g,S,T){var N=2;if(g=r,typeof r=="function")Jp(r)&&(N=1);else if(typeof r=="string")N=5;else e:switch(r){case G:return Ma(d.children,S,T,a);case $:N=8,S|=8;break;case I:return r=pr(12,d,a,S|2),r.elementType=I,r.lanes=T,r;case ue:return r=pr(13,d,a,S),r.elementType=ue,r.lanes=T,r;case ge:return r=pr(19,d,a,S),r.elementType=ge,r.lanes=T,r;case te:return ih(d,S,T,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case z:N=10;break e;case q:N=9;break e;case re:N=11;break e;case Se:N=14;break e;case ae:N=16,g=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return a=pr(N,d,a,S),a.elementType=r,a.type=g,a.lanes=T,a}function Ma(r,a,d,g){return r=pr(7,r,g,a),r.lanes=d,r}function ih(r,a,d,g){return r=pr(22,r,g,a),r.elementType=te,r.lanes=d,r.stateNode={isHidden:!1},r}function Qp(r,a,d){return r=pr(6,r,null,a),r.lanes=d,r}function em(r,a,d){return a=pr(4,r.children!==null?r.children:[],r.key,a),a.lanes=d,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function hE(r,a,d,g,S){this.tag=a,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xi(0),this.expirationTimes=xi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xi(0),this.identifierPrefix=g,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function tm(r,a,d,g,S,T,N,W,K){return r=new hE(r,a,d,W,K),a===1?(a=1,T===!0&&(a|=8)):a=0,T=pr(3,null,null,a),r.current=T,T.stateNode=r,T.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},pp(T),r}function fE(r,a,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:g==null?null:""+g,children:r,containerInfo:a,implementation:d}}function px(r){if(!r)return xo;r=r._reactInternals;e:{if(_i(r)!==r||r.tag!==1)throw Error(t(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Ii(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(r.tag===1){var d=r.type;if(Ii(d))return Vv(r,d,a)}return a}function mx(r,a,d,g,S,T,N,W,K){return r=tm(d,g,!0,r,S,T,N,W,K),r.context=px(null),d=r.current,g=Mi(),S=To(d),T=Ns(g,S),T.callback=a??null,wo(d,T,S),r.current.lanes=S,gn(r,S,g),Fi(r,g),r}function rh(r,a,d,g){var S=a.current,T=Mi(),N=To(S);return d=px(d),a.context===null?a.context=d:a.pendingContext=d,a=Ns(T,N),a.payload={element:r},g=g===void 0?null:g,g!==null&&(a.callback=g),r=wo(S,a,N),r!==null&&(Cr(r,S,N,T),Ud(r,S,N)),N}function sh(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function gx(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var d=r.retryLane;r.retryLane=d!==0&&d<a?d:a}}function nm(r,a){gx(r,a),(r=r.alternate)&&gx(r,a)}function pE(){return null}var vx=typeof reportError=="function"?reportError:function(r){console.error(r)};function im(r){this._internalRoot=r}oh.prototype.render=im.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(t(409));rh(r,a,null,null)},oh.prototype.unmount=im.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;Sa(function(){rh(null,r,null,null)}),a[an]=null}};function oh(r){this._internalRoot=r}oh.prototype.unstable_scheduleHydration=function(r){if(r){var a=Ri();r={blockedOn:null,target:r,priority:a};for(var d=0;d<jn.length&&a!==0&&a<jn[d].priority;d++);jn.splice(d,0,r),d===0&&Qa(r)}};function rm(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ah(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function _x(){}function mE(r,a,d,g,S){if(S){if(typeof g=="function"){var T=g;g=function(){var ve=sh(N);T.call(ve)}}var N=mx(a,g,r,0,null,!1,!1,"",_x);return r._reactRootContainer=N,r[an]=N.current,po(r.nodeType===8?r.parentNode:r),Sa(),N}for(;S=r.lastChild;)r.removeChild(S);if(typeof g=="function"){var W=g;g=function(){var ve=sh(K);W.call(ve)}}var K=tm(r,0,!1,null,null,!1,!1,"",_x);return r._reactRootContainer=K,r[an]=K.current,po(r.nodeType===8?r.parentNode:r),Sa(function(){rh(a,K,d,g)}),K}function lh(r,a,d,g,S){var T=d._reactRootContainer;if(T){var N=T;if(typeof S=="function"){var W=S;S=function(){var K=sh(N);W.call(K)}}rh(a,N,r,S)}else N=mE(d,a,r,S,g);return sh(N)}Cn=function(r){switch(r.tag){case 3:var a=r.stateNode;if(a.current.memoizedState.isDehydrated){var d=rt(a.pendingLanes);d!==0&&(Ht(a,d|1),Fi(a,xn()),(Jt&6)===0&&(Pl=xn()+500,yo()))}break;case 13:Sa(function(){var g=Rs(r,1);if(g!==null){var S=Mi();Cr(g,r,1,S)}}),nm(r,1)}},wn=function(r){if(r.tag===13){var a=Rs(r,134217728);if(a!==null){var d=Mi();Cr(a,r,134217728,d)}nm(r,134217728)}},Vr=function(r){if(r.tag===13){var a=To(r),d=Rs(r,a);if(d!==null){var g=Mi();Cr(d,r,a,g)}nm(r,a)}},Ri=function(){return wt},na=function(r,a){var d=wt;try{return wt=r,a()}finally{wt=d}},Ze=function(r,a,d){switch(a){case"input":if(un(r,d),a=d.name,d.type==="radio"&&a!=null){for(d=r;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var g=d[a];if(g!==r&&g.form===r.form){var S=gl(g);if(!S)throw Error(t(90));mn(g),un(g,S)}}}break;case"textarea":R(r,d);break;case"select":a=d.value,a!=null&&Wt(r,!!d.multiple,a,!1)}},Mt=Yp,rn=Sa;var gE={usingClientEntryPoint:!1,Events:[Es,Ts,gl,Te,Xe,Yp]},iu={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vE={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ea(r),r===null?null:r.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||pE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ch.isDisabled&&ch.supportsFiber)try{$e=ch.inject(vE),He=ch}catch{}}return ki.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gE,ki.createPortal=function(r,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rm(a))throw Error(t(200));return fE(r,a,null,d)},ki.createRoot=function(r,a){if(!rm(r))throw Error(t(299));var d=!1,g="",S=vx;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),a=tm(r,1,!1,null,null,d,!1,g,S),r[an]=a.current,po(r.nodeType===8?r.parentNode:r),new im(a)},ki.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ea(a),r=r===null?null:r.stateNode,r},ki.flushSync=function(r){return Sa(r)},ki.hydrate=function(r,a,d){if(!ah(a))throw Error(t(200));return lh(null,r,a,!0,d)},ki.hydrateRoot=function(r,a,d){if(!rm(r))throw Error(t(405));var g=d!=null&&d.hydratedSources||null,S=!1,T="",N=vx;if(d!=null&&(d.unstable_strictMode===!0&&(S=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(N=d.onRecoverableError)),a=mx(a,null,r,1,d??null,S,!1,T,N),r[an]=a.current,po(r),g)for(r=0;r<g.length;r++)d=g[r],S=d._getVersion,S=S(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,S]:a.mutableSourceEagerHydrationData.push(d,S);return new oh(a)},ki.render=function(r,a,d){if(!ah(a))throw Error(t(200));return lh(null,r,a,!1,d)},ki.unmountComponentAtNode=function(r){if(!ah(r))throw Error(t(40));return r._reactRootContainer?(Sa(function(){lh(null,null,r,!1,function(){r._reactRootContainer=null,r[an]=null})}),!0):!1},ki.unstable_batchedUpdates=Yp,ki.unstable_renderSubtreeIntoContainer=function(r,a,d,g){if(!ah(d))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return lh(r,a,d,!1,g)},ki.version="18.3.1-next-f1338f8080-20240426",ki}var Tx;function Rw(){if(Tx)return am.exports;Tx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),am.exports=AE(),am.exports}var Ax;function CE(){if(Ax)return uh;Ax=1;var n=Rw();return uh.createRoot=n.createRoot,uh.hydrateRoot=n.hydrateRoot,uh}var PE=CE();Rw();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ru(){return Ru=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ru.apply(this,arguments)}var Vo;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Vo||(Vo={}));const Cx="popstate";function RE(n){n===void 0&&(n={});function e(i,o){let{pathname:l,search:u,hash:h}=i.location;return ug("",{pathname:l,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:tf(o)}return LE(e,t,null,n)}function Bn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function I0(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NE(){return Math.random().toString(36).substr(2,8)}function Px(n,e){return{usr:n.state,key:n.key,idx:e}}function ug(n,e,t,i){return t===void 0&&(t=null),Ru({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?uc(e):e,{state:t,key:e&&e.key||i||NE()})}function tf(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function uc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function LE(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,u=o.history,h=Vo.Pop,f=null,m=_();m==null&&(m=0,u.replaceState(Ru({},u.state,{idx:m}),""));function _(){return(u.state||{idx:null}).idx}function x(){h=Vo.Pop;let b=_(),M=b==null?null:b-m;m=b,f&&f({action:h,location:P.location,delta:M})}function w(b,M){h=Vo.Push;let O=ug(P.location,b,M);m=_()+1;let U=Px(O,m),k=P.createHref(O);try{u.pushState(U,"",k)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;o.location.assign(k)}l&&f&&f({action:h,location:P.location,delta:1})}function E(b,M){h=Vo.Replace;let O=ug(P.location,b,M);m=_();let U=Px(O,m),k=P.createHref(O);u.replaceState(U,"",k),l&&f&&f({action:h,location:P.location,delta:0})}function A(b){let M=o.location.origin!=="null"?o.location.origin:o.location.href,O=typeof b=="string"?b:tf(b);return O=O.replace(/ $/,"%20"),Bn(M,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,M)}let P={get action(){return h},get location(){return n(o,u)},listen(b){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Cx,x),f=b,()=>{o.removeEventListener(Cx,x),f=null}},createHref(b){return e(o,b)},createURL:A,encodeLocation(b){let M=A(b);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:w,replace:E,go(b){return u.go(b)}};return P}var Rx;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Rx||(Rx={}));function DE(n,e,t){return t===void 0&&(t="/"),IE(n,e,t)}function IE(n,e,t,i){let o=typeof e=="string"?uc(e):e,l=U0(o.pathname||"/",t);if(l==null)return null;let u=Nw(n);UE(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let m=ZE(l);h=GE(u[f],m)}return h}function Nw(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,u,h)=>{let f={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};f.relativePath.startsWith("/")&&(Bn(f.relativePath.startsWith(i),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(i.length));let m=Go([i,f.relativePath]),_=t.concat(f);l.children&&l.children.length>0&&(Bn(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Nw(l.children,e,_,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:VE(m,l.index),routesMeta:_})};return n.forEach((l,u)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))o(l,u);else for(let f of Lw(l.path))o(l,u,f)}),e}function Lw(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let u=Lw(i.join("/")),h=[];return h.push(...u.map(f=>f===""?l:[l,f].join("/"))),o&&h.push(...u),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function UE(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:HE(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const OE=/^:[\w-]+$/,FE=3,kE=2,BE=1,zE=10,jE=-2,Nx=n=>n==="*";function VE(n,e){let t=n.split("/"),i=t.length;return t.some(Nx)&&(i+=jE),e&&(i+=kE),t.filter(o=>!Nx(o)).reduce((o,l)=>o+(OE.test(l)?FE:l===""?BE:zE),i)}function HE(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function GE(n,e,t){let{routesMeta:i}=n,o={},l="/",u=[];for(let h=0;h<i.length;++h){let f=i[h],m=h===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",x=WE({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},_),w=f.route;if(!x)return null;Object.assign(o,x.params),u.push({params:o,pathname:Go([l,x.pathname]),pathnameBase:JE(Go([l,x.pathnameBase])),route:w}),x.pathnameBase!=="/"&&(l=Go([l,x.pathnameBase]))}return u}function WE(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=XE(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],u=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((m,_,x)=>{let{paramName:w,isOptional:E}=_;if(w==="*"){let P=h[x]||"";u=l.slice(0,l.length-P.length).replace(/(.)\/+$/,"$1")}const A=h[x];return E&&!A?m[w]=void 0:m[w]=(A||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:u,pattern:n}}function XE(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),I0(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function ZE(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return I0(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function U0(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const qE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YE=n=>qE.test(n);function KE(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?uc(n):n,l;if(t)if(YE(t))l=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),I0(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?l=Lx(t.substring(1),"/"):l=Lx(t,e)}else l=e;return{pathname:l,search:QE(i),hash:eT(o)}}function Lx(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function um(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $E(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Dw(n,e){let t=$E(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Iw(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=uc(n):(o=Ru({},n),Bn(!o.pathname||!o.pathname.includes("?"),um("?","pathname","search",o)),Bn(!o.pathname||!o.pathname.includes("#"),um("#","pathname","hash",o)),Bn(!o.search||!o.search.includes("#"),um("#","search","hash",o)));let l=n===""||o.pathname==="",u=l?"/":o.pathname,h;if(u==null)h=t;else{let x=e.length-1;if(!i&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),x-=1;o.pathname=w.join("/")}h=x>=0?e[x]:"/"}let f=KE(o,h),m=u&&u!=="/"&&u.endsWith("/"),_=(l||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||_)&&(f.pathname+="/"),f}const Go=n=>n.join("/").replace(/\/\/+/g,"/"),JE=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),QE=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,eT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function tT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Uw=["post","put","patch","delete"];new Set(Uw);const nT=["get",...Uw];new Set(nT);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nu(){return Nu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Nu.apply(this,arguments)}const O0=ne.createContext(null),iT=ne.createContext(null),qa=ne.createContext(null),xf=ne.createContext(null),Yo=ne.createContext({outlet:null,matches:[],isDataRoute:!1}),Ow=ne.createContext(null);function rT(n,e){let{relative:t}=e===void 0?{}:e;zu()||Bn(!1);let{basename:i,navigator:o}=ne.useContext(qa),{hash:l,pathname:u,search:h}=Bw(n,{relative:t}),f=u;return i!=="/"&&(f=u==="/"?i:Go([i,u])),o.createHref({pathname:f,search:h,hash:l})}function zu(){return ne.useContext(xf)!=null}function ju(){return zu()||Bn(!1),ne.useContext(xf).location}function Fw(n){ne.useContext(qa).static||ne.useLayoutEffect(n)}function kw(){let{isDataRoute:n}=ne.useContext(Yo);return n?vT():sT()}function sT(){zu()||Bn(!1);let n=ne.useContext(O0),{basename:e,future:t,navigator:i}=ne.useContext(qa),{matches:o}=ne.useContext(Yo),{pathname:l}=ju(),u=JSON.stringify(Dw(o,t.v7_relativeSplatPath)),h=ne.useRef(!1);return Fw(()=>{h.current=!0}),ne.useCallback(function(m,_){if(_===void 0&&(_={}),!h.current)return;if(typeof m=="number"){i.go(m);return}let x=Iw(m,JSON.parse(u),l,_.relative==="path");n==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Go([e,x.pathname])),(_.replace?i.replace:i.push)(x,_.state,_)},[e,i,u,l,n])}function F0(){let{matches:n}=ne.useContext(Yo),e=n[n.length-1];return e?e.params:{}}function Bw(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=ne.useContext(qa),{matches:o}=ne.useContext(Yo),{pathname:l}=ju(),u=JSON.stringify(Dw(o,i.v7_relativeSplatPath));return ne.useMemo(()=>Iw(n,JSON.parse(u),l,t==="path"),[n,u,l,t])}function oT(n,e){return aT(n,e)}function aT(n,e,t,i){zu()||Bn(!1);let{navigator:o}=ne.useContext(qa),{matches:l}=ne.useContext(Yo),u=l[l.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=ju(),_;if(e){var x;let b=typeof e=="string"?uc(e):e;f==="/"||(x=b.pathname)!=null&&x.startsWith(f)||Bn(!1),_=b}else _=m;let w=_.pathname||"/",E=w;if(f!=="/"){let b=f.replace(/^\//,"").split("/");E="/"+w.replace(/^\//,"").split("/").slice(b.length).join("/")}let A=DE(n,{pathname:E}),P=hT(A&&A.map(b=>Object.assign({},b,{params:Object.assign({},h,b.params),pathname:Go([f,o.encodeLocation?o.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?f:Go([f,o.encodeLocation?o.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,t,i);return e&&P?ne.createElement(xf.Provider,{value:{location:Nu({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Vo.Pop}},P):P}function lT(){let n=gT(),e=tT(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},e),t?ne.createElement("pre",{style:o},t):null,null)}const cT=ne.createElement(lT,null);class uT extends ne.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?ne.createElement(Yo.Provider,{value:this.props.routeContext},ne.createElement(Ow.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dT(n){let{routeContext:e,match:t,children:i}=n,o=ne.useContext(O0);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),ne.createElement(Yo.Provider,{value:e},i)}function hT(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,h=(o=t)==null?void 0:o.errors;if(h!=null){let _=u.findIndex(x=>x.route.id&&(h==null?void 0:h[x.route.id])!==void 0);_>=0||Bn(!1),u=u.slice(0,Math.min(u.length,_+1))}let f=!1,m=-1;if(t&&i&&i.v7_partialHydration)for(let _=0;_<u.length;_++){let x=u[_];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=_),x.route.id){let{loaderData:w,errors:E}=t,A=x.route.loader&&w[x.route.id]===void 0&&(!E||E[x.route.id]===void 0);if(x.route.lazy||A){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((_,x,w)=>{let E,A=!1,P=null,b=null;t&&(E=h&&x.route.id?h[x.route.id]:void 0,P=x.route.errorElement||cT,f&&(m<0&&w===0?(_T("route-fallback"),A=!0,b=null):m===w&&(A=!0,b=x.route.hydrateFallbackElement||null)));let M=e.concat(u.slice(0,w+1)),O=()=>{let U;return E?U=P:A?U=b:x.route.Component?U=ne.createElement(x.route.Component,null):x.route.element?U=x.route.element:U=_,ne.createElement(dT,{match:x,routeContext:{outlet:_,matches:M,isDataRoute:t!=null},children:U})};return t&&(x.route.ErrorBoundary||x.route.errorElement||w===0)?ne.createElement(uT,{location:t.location,revalidation:t.revalidation,component:P,error:E,children:O(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):O()},null)}var zw=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(zw||{}),jw=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(jw||{});function fT(n){let e=ne.useContext(O0);return e||Bn(!1),e}function pT(n){let e=ne.useContext(iT);return e||Bn(!1),e}function mT(n){let e=ne.useContext(Yo);return e||Bn(!1),e}function Vw(n){let e=mT(),t=e.matches[e.matches.length-1];return t.route.id||Bn(!1),t.route.id}function gT(){var n;let e=ne.useContext(Ow),t=pT(),i=Vw();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function vT(){let{router:n}=fT(zw.UseNavigateStable),e=Vw(jw.UseNavigateStable),t=ne.useRef(!1);return Fw(()=>{t.current=!0}),ne.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Nu({fromRouteId:e},l)))},[n,e])}const Dx={};function _T(n,e,t){Dx[n]||(Dx[n]=!0)}function xT(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function ns(n){Bn(!1)}function yT(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Vo.Pop,navigator:l,static:u=!1,future:h}=n;zu()&&Bn(!1);let f=e.replace(/^\/*/,"/"),m=ne.useMemo(()=>({basename:f,navigator:l,static:u,future:Nu({v7_relativeSplatPath:!1},h)}),[f,h,l,u]);typeof i=="string"&&(i=uc(i));let{pathname:_="/",search:x="",hash:w="",state:E=null,key:A="default"}=i,P=ne.useMemo(()=>{let b=U0(_,f);return b==null?null:{location:{pathname:b,search:x,hash:w,state:E,key:A},navigationType:o}},[f,_,x,w,E,A,o]);return P==null?null:ne.createElement(qa.Provider,{value:m},ne.createElement(xf.Provider,{children:t,value:P}))}function ST(n){let{children:e,location:t}=n;return oT(dg(e),t)}new Promise(()=>{});function dg(n,e){e===void 0&&(e=[]);let t=[];return ne.Children.forEach(n,(i,o)=>{if(!ne.isValidElement(i))return;let l=[...e,o];if(i.type===ne.Fragment){t.push.apply(t,dg(i.props.children,l));return}i.type!==ns&&Bn(!1),!i.props.index||!i.props.children||Bn(!1);let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=dg(i.props.children,l)),t.push(u)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hg(){return hg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hg.apply(this,arguments)}function wT(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function bT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function MT(n,e){return n.button===0&&(!e||e==="_self")&&!bT(n)}const ET=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],TT="6";try{window.__reactRouterVersion=TT}catch{}const AT="startTransition",Ix=ME[AT];function CT(n){let{basename:e,children:t,future:i,window:o}=n,l=ne.useRef();l.current==null&&(l.current=RE({window:o,v5Compat:!0}));let u=l.current,[h,f]=ne.useState({action:u.action,location:u.location}),{v7_startTransition:m}=i||{},_=ne.useCallback(x=>{m&&Ix?Ix(()=>f(x)):f(x)},[f,m]);return ne.useLayoutEffect(()=>u.listen(_),[u,_]),ne.useEffect(()=>xT(i),[i]),ne.createElement(yT,{basename:e,children:t,location:h.location,navigationType:h.action,navigator:u,future:i})}const PT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ot=ne.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:u,state:h,target:f,to:m,preventScrollReset:_,viewTransition:x}=e,w=wT(e,ET),{basename:E}=ne.useContext(qa),A,P=!1;if(typeof m=="string"&&RT.test(m)&&(A=m,PT))try{let U=new URL(window.location.href),k=m.startsWith("//")?new URL(U.protocol+m):new URL(m),B=U0(k.pathname,E);k.origin===U.origin&&B!=null?m=B+k.search+k.hash:P=!0}catch{}let b=rT(m,{relative:o}),M=NT(m,{replace:u,state:h,target:f,preventScrollReset:_,relative:o,viewTransition:x});function O(U){i&&i(U),U.defaultPrevented||M(U)}return ne.createElement("a",hg({},w,{href:A||b,onClick:P||l?i:O,ref:t,target:f}))});var Ux;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Ux||(Ux={}));var Ox;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Ox||(Ox={}));function NT(n,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:u,viewTransition:h}=e===void 0?{}:e,f=kw(),m=ju(),_=Bw(n,{relative:u});return ne.useCallback(x=>{if(MT(x,t)){x.preventDefault();let w=i!==void 0?i:tf(m)===tf(_);f(n,{replace:w,state:o,preventScrollReset:l,relative:u,viewTransition:h})}},[m,f,_,i,o,t,n,l,u,h])}const k0=ne.createContext({});function dc(n){const e=ne.useRef(null);return e.current===null&&(e.current=n()),e.current}const yf=ne.createContext(null),Vu=ne.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class LT extends ne.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function DT({children:n,isPresent:e}){const t=ne.useId(),i=ne.useRef(null),o=ne.useRef({width:0,height:0,top:0,left:0}),{nonce:l}=ne.useContext(Vu);return ne.useInsertionEffect(()=>{const{width:u,height:h,top:f,left:m}=o.current;if(e||!i.current||!u||!h)return;i.current.dataset.motionPopId=t;const _=document.createElement("style");return l&&(_.nonce=l),document.head.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            top: ${f}px !important;
            left: ${m}px !important;
          }
        `),()=>{document.head.removeChild(_)}},[e]),v.jsx(LT,{isPresent:e,childRef:i,sizeRef:o,children:ne.cloneElement(n,{ref:i})})}const IT=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:o,presenceAffectsLayout:l,mode:u})=>{const h=dc(UT),f=ne.useId(),m=ne.useCallback(x=>{h.set(x,!0);for(const w of h.values())if(!w)return;i&&i()},[h,i]),_=ne.useMemo(()=>({id:f,initial:e,isPresent:t,custom:o,onExitComplete:m,register:x=>(h.set(x,!1),()=>h.delete(x))}),l?[Math.random(),m]:[t,m]);return ne.useMemo(()=>{h.forEach((x,w)=>h.set(w,!1))},[t]),ne.useEffect(()=>{!t&&!h.size&&i&&i()},[t]),u==="popLayout"&&(n=v.jsx(DT,{isPresent:t,children:n})),v.jsx(yf.Provider,{value:_,children:n})};function UT(){return new Map}function Hw(n=!0){const e=ne.useContext(yf);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:o}=e,l=ne.useId();ne.useEffect(()=>{n&&o(l)},[n]);const u=ne.useCallback(()=>n&&i&&i(l),[l,i,n]);return!t&&i?[!1,u]:[!0]}const dh=n=>n.key||"";function Fx(n){const e=[];return ne.Children.forEach(n,t=>{ne.isValidElement(t)&&e.push(t)}),e}const B0=typeof window<"u",Hu=B0?ne.useLayoutEffect:ne.useEffect,Sf=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:l="sync",propagate:u=!1})=>{const[h,f]=Hw(u),m=ne.useMemo(()=>Fx(n),[n]),_=u&&!h?[]:m.map(dh),x=ne.useRef(!0),w=ne.useRef(m),E=dc(()=>new Map),[A,P]=ne.useState(m),[b,M]=ne.useState(m);Hu(()=>{x.current=!1,w.current=m;for(let k=0;k<b.length;k++){const B=dh(b[k]);_.includes(B)?E.delete(B):E.get(B)!==!0&&E.set(B,!1)}},[b,_.length,_.join("-")]);const O=[];if(m!==A){let k=[...m];for(let B=0;B<b.length;B++){const H=b[B],G=dh(H);_.includes(G)||(k.splice(B,0,H),O.push(H))}l==="wait"&&O.length&&(k=O),M(Fx(k)),P(m);return}const{forceRender:U}=ne.useContext(k0);return v.jsx(v.Fragment,{children:b.map(k=>{const B=dh(k),H=u&&!h?!1:m===b||_.includes(B),G=()=>{if(E.has(B))E.set(B,!0);else return;let $=!0;E.forEach(I=>{I||($=!1)}),$&&(U==null||U(),M(w.current),u&&(f==null||f()),i&&i())};return v.jsx(IT,{isPresent:H,initial:!x.current||t?void 0:!1,custom:H?void 0:e,presenceAffectsLayout:o,mode:l,onExitComplete:H?void 0:G,children:k},B)})})},Ti=n=>n;let OT=Ti,Gw=Ti;function z0(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ga=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},Vs=n=>n*1e3,Hs=n=>n/1e3,FT={useManualTiming:!1};function kT(n){let e=new Set,t=new Set,i=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function h(m){l.has(m)&&(f.schedule(m),n()),m(u)}const f={schedule:(m,_=!1,x=!1)=>{const E=x&&i?e:t;return _&&l.add(m),E.has(m)||E.add(m),m},cancel:m=>{t.delete(m),l.delete(m)},process:m=>{if(u=m,i){o=!0;return}i=!0,[e,t]=[t,e],e.forEach(h),e.clear(),i=!1,o&&(o=!1,f.process(m))}};return f}const hh=["read","resolveKeyframes","update","preRender","render","postRender"],BT=40;function Ww(n,e){let t=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},l=()=>t=!0,u=hh.reduce((M,O)=>(M[O]=kT(l),M),{}),{read:h,resolveKeyframes:f,update:m,preRender:_,render:x,postRender:w}=u,E=()=>{const M=performance.now();t=!1,o.delta=i?1e3/60:Math.max(Math.min(M-o.timestamp,BT),1),o.timestamp=M,o.isProcessing=!0,h.process(o),f.process(o),m.process(o),_.process(o),x.process(o),w.process(o),o.isProcessing=!1,t&&e&&(i=!1,n(E))},A=()=>{t=!0,i=!0,o.isProcessing||n(E)};return{schedule:hh.reduce((M,O)=>{const U=u[O];return M[O]=(k,B=!1,H=!1)=>(t||A(),U.schedule(k,B,H)),M},{}),cancel:M=>{for(let O=0;O<hh.length;O++)u[hh[O]].cancel(M)},state:o,steps:u}}const{schedule:nn,cancel:Or,state:Wn,steps:dm}=Ww(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ti,!0),Xw=ne.createContext({strict:!1}),kx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ec={};for(const n in kx)ec[n]={isEnabled:e=>kx[n].some(t=>!!e[t])};function zT(n){for(const e in n)ec[e]={...ec[e],...n[e]}}const jT=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nf(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||jT.has(n)}let Zw=n=>!nf(n);function VT(n){n&&(Zw=e=>e.startsWith("on")?!nf(e):n(e))}try{VT(require("@emotion/is-prop-valid").default)}catch{}function HT(n,e,t){const i={};for(const o in n)o==="values"&&typeof n.values=="object"||(Zw(o)||t===!0&&nf(o)||!e&&!nf(o)||n.draggable&&o.startsWith("onDrag"))&&(i[o]=n[o]);return i}function GT(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,o)=>o==="create"?n:(e.has(o)||e.set(o,n(o)),e.get(o))})}const wf=ne.createContext({});function Lu(n){return typeof n=="string"||Array.isArray(n)}function bf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const j0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],V0=["initial",...j0];function Mf(n){return bf(n.animate)||V0.some(e=>Lu(n[e]))}function qw(n){return!!(Mf(n)||n.variants)}function WT(n,e){if(Mf(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Lu(t)?t:void 0,animate:Lu(i)?i:void 0}}return n.inherit!==!1?e:{}}function XT(n){const{initial:e,animate:t}=WT(n,ne.useContext(wf));return ne.useMemo(()=>({initial:e,animate:t}),[Bx(e),Bx(t)])}function Bx(n){return Array.isArray(n)?n.join(" "):n}const ZT=Symbol.for("motionComponentSymbol");function Wl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function qT(n,e,t){return ne.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Wl(t)&&(t.current=i))},[e])}const H0=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),YT="framerAppearId",Yw="data-"+H0(YT),{schedule:G0}=Ww(queueMicrotask,!1),Kw=ne.createContext({});function KT(n,e,t,i,o){var l,u;const{visualElement:h}=ne.useContext(wf),f=ne.useContext(Xw),m=ne.useContext(yf),_=ne.useContext(Vu).reducedMotion,x=ne.useRef(null);i=i||f.renderer,!x.current&&i&&(x.current=i(n,{visualState:e,parent:h,props:t,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:_}));const w=x.current,E=ne.useContext(Kw);w&&!w.projection&&o&&(w.type==="html"||w.type==="svg")&&$T(x.current,t,o,E);const A=ne.useRef(!1);ne.useInsertionEffect(()=>{w&&A.current&&w.update(t,m)});const P=t[Yw],b=ne.useRef(!!P&&!(!((l=window.MotionHandoffIsComplete)===null||l===void 0)&&l.call(window,P))&&((u=window.MotionHasOptimisedAnimation)===null||u===void 0?void 0:u.call(window,P)));return Hu(()=>{w&&(A.current=!0,window.MotionIsMounted=!0,w.updateFeatures(),G0.render(w.render),b.current&&w.animationState&&w.animationState.animateChanges())}),ne.useEffect(()=>{w&&(!b.current&&w.animationState&&w.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var M;(M=window.MotionHandoffMarkAsComplete)===null||M===void 0||M.call(window,P)}),b.current=!1))}),w}function $T(n,e,t,i){const{layoutId:o,layout:l,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:m}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:$w(n.parent)),n.projection.setOptions({layoutId:o,layout:l,alwaysMeasureLayout:!!u||h&&Wl(h),visualElement:n,animationType:typeof l=="string"?l:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:m})}function $w(n){if(n)return n.options.allowProjection!==!1?n.projection:$w(n.parent)}function JT({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:o}){var l,u;n&&zT(n);function h(m,_){let x;const w={...ne.useContext(Vu),...m,layoutId:QT(m)},{isStatic:E}=w,A=XT(m),P=i(m,E);if(!E&&B0){eA();const b=tA(w);x=b.MeasureLayout,A.visualElement=KT(o,P,w,e,b.ProjectionNode)}return v.jsxs(wf.Provider,{value:A,children:[x&&A.visualElement?v.jsx(x,{visualElement:A.visualElement,...w}):null,t(o,m,qT(P,A.visualElement,_),P,E,A.visualElement)]})}h.displayName=`motion.${typeof o=="string"?o:`create(${(u=(l=o.displayName)!==null&&l!==void 0?l:o.name)!==null&&u!==void 0?u:""})`}`;const f=ne.forwardRef(h);return f[ZT]=o,f}function QT({layoutId:n}){const e=ne.useContext(k0).id;return e&&n!==void 0?e+"-"+n:n}function eA(n,e){ne.useContext(Xw).strict}function tA(n){const{drag:e,layout:t}=ec;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const nA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function W0(n){return typeof n!="string"||n.includes("-")?!1:!!(nA.indexOf(n)>-1||/[A-Z]/u.test(n))}function zx(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function X0(n,e,t,i){if(typeof e=="function"){const[o,l]=zx(i);e=e(t!==void 0?t:n.custom,o,l)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[o,l]=zx(i);e=e(t!==void 0?t:n.custom,o,l)}return e}const fg=n=>Array.isArray(n),iA=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),rA=n=>fg(n)?n[n.length-1]||0:n,ei=n=>!!(n&&n.getVelocity);function zh(n){const e=ei(n)?n.get():n;return iA(e)?e.toValue():e}function sA({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},i,o,l){const u={latestValues:oA(i,o,l,n),renderState:e()};return t&&(u.onMount=h=>t({props:i,current:h,...u}),u.onUpdate=h=>t(h)),u}const Jw=n=>(e,t)=>{const i=ne.useContext(wf),o=ne.useContext(yf),l=()=>sA(n,e,i,o);return t?l():dc(l)};function oA(n,e,t,i){const o={},l=i(n,{});for(const w in l)o[w]=zh(l[w]);let{initial:u,animate:h}=n;const f=Mf(n),m=qw(n);e&&m&&!f&&n.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let _=t?t.initial===!1:!1;_=_||u===!1;const x=_?h:u;if(x&&typeof x!="boolean"&&!bf(x)){const w=Array.isArray(x)?x:[x];for(let E=0;E<w.length;E++){const A=X0(n,w[E]);if(A){const{transitionEnd:P,transition:b,...M}=A;for(const O in M){let U=M[O];if(Array.isArray(U)){const k=_?U.length-1:0;U=U[k]}U!==null&&(o[O]=U)}for(const O in P)o[O]=P[O]}}}return o}const hc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ya=new Set(hc),Qw=n=>e=>typeof e=="string"&&e.startsWith(n),eb=Qw("--"),aA=Qw("var(--"),Z0=n=>aA(n)?lA.test(n.split("/*")[0].trim()):!1,lA=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,tb=(n,e)=>e&&typeof n=="number"?e.transform(n):n,hs=(n,e,t)=>t>e?e:t<n?n:t,fc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Du={...fc,transform:n=>hs(0,1,n)},fh={...fc,default:1},Gu=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ko=Gu("deg"),as=Gu("%"),bt=Gu("px"),cA=Gu("vh"),uA=Gu("vw"),jx={...as,parse:n=>as.parse(n)/100,transform:n=>as.transform(n*100)},dA={borderWidth:bt,borderTopWidth:bt,borderRightWidth:bt,borderBottomWidth:bt,borderLeftWidth:bt,borderRadius:bt,radius:bt,borderTopLeftRadius:bt,borderTopRightRadius:bt,borderBottomRightRadius:bt,borderBottomLeftRadius:bt,width:bt,maxWidth:bt,height:bt,maxHeight:bt,top:bt,right:bt,bottom:bt,left:bt,padding:bt,paddingTop:bt,paddingRight:bt,paddingBottom:bt,paddingLeft:bt,margin:bt,marginTop:bt,marginRight:bt,marginBottom:bt,marginLeft:bt,backgroundPositionX:bt,backgroundPositionY:bt},hA={rotate:ko,rotateX:ko,rotateY:ko,rotateZ:ko,scale:fh,scaleX:fh,scaleY:fh,scaleZ:fh,skew:ko,skewX:ko,skewY:ko,distance:bt,translateX:bt,translateY:bt,translateZ:bt,x:bt,y:bt,z:bt,perspective:bt,transformPerspective:bt,opacity:Du,originX:jx,originY:jx,originZ:bt},Vx={...fc,transform:Math.round},q0={...dA,...hA,zIndex:Vx,size:bt,fillOpacity:Du,strokeOpacity:Du,numOctaves:Vx},fA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},pA=hc.length;function mA(n,e,t){let i="",o=!0;for(let l=0;l<pA;l++){const u=hc[l],h=n[u];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(u.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||t){const m=tb(h,q0[u]);if(!f){o=!1;const _=fA[u]||u;i+=`${_}(${m}) `}t&&(e[u]=m)}}return i=i.trim(),t?i=t(e,o?"":i):o&&(i="none"),i}function Y0(n,e,t){const{style:i,vars:o,transformOrigin:l}=n;let u=!1,h=!1;for(const f in e){const m=e[f];if(Ya.has(f)){u=!0;continue}else if(eb(f)){o[f]=m;continue}else{const _=tb(m,q0[f]);f.startsWith("origin")?(h=!0,l[f]=_):i[f]=_}}if(e.transform||(u||t?i.transform=mA(e,n.transform,t):i.transform&&(i.transform="none")),h){const{originX:f="50%",originY:m="50%",originZ:_=0}=l;i.transformOrigin=`${f} ${m} ${_}`}}const gA={offset:"stroke-dashoffset",array:"stroke-dasharray"},vA={offset:"strokeDashoffset",array:"strokeDasharray"};function _A(n,e,t=1,i=0,o=!0){n.pathLength=1;const l=o?gA:vA;n[l.offset]=bt.transform(-i);const u=bt.transform(e),h=bt.transform(t);n[l.array]=`${u} ${h}`}function Hx(n,e,t){return typeof n=="string"?n:bt.transform(e+t*n)}function xA(n,e,t){const i=Hx(e,n.x,n.width),o=Hx(t,n.y,n.height);return`${i} ${o}`}function K0(n,{attrX:e,attrY:t,attrScale:i,originX:o,originY:l,pathLength:u,pathSpacing:h=1,pathOffset:f=0,...m},_,x){if(Y0(n,m,x),_){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:w,style:E,dimensions:A}=n;w.transform&&(A&&(E.transform=w.transform),delete w.transform),A&&(o!==void 0||l!==void 0||E.transform)&&(E.transformOrigin=xA(A,o!==void 0?o:.5,l!==void 0?l:.5)),e!==void 0&&(w.x=e),t!==void 0&&(w.y=t),i!==void 0&&(w.scale=i),u!==void 0&&_A(w,u,h,f,!1)}const $0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),nb=()=>({...$0(),attrs:{}}),J0=n=>typeof n=="string"&&n.toLowerCase()==="svg";function ib(n,{style:e,vars:t},i,o){Object.assign(n.style,e,o&&o.getProjectionStyles(i));for(const l in t)n.style.setProperty(l,t[l])}const rb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sb(n,e,t,i){ib(n,e,void 0,i);for(const o in e.attrs)n.setAttribute(rb.has(o)?o:H0(o),e.attrs[o])}const rf={};function yA(n){Object.assign(rf,n)}function ob(n,{layout:e,layoutId:t}){return Ya.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!rf[n]||n==="opacity")}function Q0(n,e,t){var i;const{style:o}=n,l={};for(const u in o)(ei(o[u])||e.style&&ei(e.style[u])||ob(u,n)||((i=t==null?void 0:t.getValue(u))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(l[u]=o[u]);return l}function ab(n,e,t){const i=Q0(n,e,t);for(const o in n)if(ei(n[o])||ei(e[o])){const l=hc.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[l]=n[o]}return i}function SA(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Gx=["x","y","width","height","cx","cy","r"],wA={useVisualState:Jw({scrapeMotionValuesFromProps:ab,createRenderState:nb,onUpdate:({props:n,prevProps:e,current:t,renderState:i,latestValues:o})=>{if(!t)return;let l=!!n.drag;if(!l){for(const h in o)if(Ya.has(h)){l=!0;break}}if(!l)return;let u=!e;if(e)for(let h=0;h<Gx.length;h++){const f=Gx[h];n[f]!==e[f]&&(u=!0)}u&&nn.read(()=>{SA(t,i),nn.render(()=>{K0(i,o,J0(t.tagName),n.transformTemplate),sb(t,i)})})}})},bA={useVisualState:Jw({scrapeMotionValuesFromProps:Q0,createRenderState:$0})};function lb(n,e,t){for(const i in e)!ei(e[i])&&!ob(i,t)&&(n[i]=e[i])}function MA({transformTemplate:n},e){return ne.useMemo(()=>{const t=$0();return Y0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function EA(n,e){const t=n.style||{},i={};return lb(i,t,n),Object.assign(i,MA(n,e)),i}function TA(n,e){const t={},i=EA(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}function AA(n,e,t,i){const o=ne.useMemo(()=>{const l=nb();return K0(l,e,J0(i),n.transformTemplate),{...l.attrs,style:{...l.style}}},[e]);if(n.style){const l={};lb(l,n.style,n),o.style={...l,...o.style}}return o}function CA(n=!1){return(t,i,o,{latestValues:l},u)=>{const f=(W0(t)?AA:TA)(i,l,u,t),m=HT(i,typeof t=="string",n),_=t!==ne.Fragment?{...m,...f,ref:o}:{},{children:x}=i,w=ne.useMemo(()=>ei(x)?x.get():x,[x]);return ne.createElement(t,{..._,children:w})}}function PA(n,e){return function(i,{forwardMotionProps:o}={forwardMotionProps:!1}){const u={...W0(i)?wA:bA,preloadedFeatures:n,useRender:CA(o),createVisualElement:e,Component:i};return JT(u)}}function cb(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function Ef(n,e,t){const i=n.getProps();return X0(i,e,t!==void 0?t:i.custom,n)}const ub=z0(()=>window.ScrollTimeline!==void 0);class RA{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(o=>{if(ub()&&o.attachTimeline)return o.attachTimeline(e);if(typeof t=="function")return t(o)});return()=>{i.forEach((o,l)=>{o&&o(),this.animations[l].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class NA extends RA{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function ev(n,e){return n?n[e]||n.default||n:void 0}const pg=2e4;function db(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<pg;)e+=t,i=n.next(e);return e>=pg?1/0:e}function tv(n){return typeof n=="function"}function Wx(n,e){n.timeline=e,n.onfinish=null}const nv=n=>Array.isArray(n)&&typeof n[0]=="number",LA={linearEasing:void 0};function DA(n,e){const t=z0(n);return()=>{var i;return(i=LA[e])!==null&&i!==void 0?i:t()}}const sf=DA(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hb=(n,e,t=10)=>{let i="";const o=Math.max(Math.round(e/t),2);for(let l=0;l<o;l++)i+=n(Ga(0,o-1,l))+", ";return`linear(${i.substring(0,i.length-2)})`};function fb(n){return!!(typeof n=="function"&&sf()||!n||typeof n=="string"&&(n in mg||sf())||nv(n)||Array.isArray(n)&&n.every(fb))}const vu=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,mg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vu([0,.65,.55,1]),circOut:vu([.55,0,1,.45]),backIn:vu([.31,.01,.66,-.59]),backOut:vu([.33,1.53,.69,.99])};function pb(n,e){if(n)return typeof n=="function"&&sf()?hb(n,e):nv(n)?vu(n):Array.isArray(n)?n.map(t=>pb(t,e)||mg.easeOut):mg[n]}const Lr={x:!1,y:!1};function mb(){return Lr.x||Lr.y}function gb(n,e,t){var i;if(n instanceof Element)return[n];if(typeof n=="string"){let o=document;const l=(i=void 0)!==null&&i!==void 0?i:o.querySelectorAll(n);return l?Array.from(l):[]}return Array.from(n)}function vb(n,e){const t=gb(n),i=new AbortController,o={passive:!0,...e,signal:i.signal};return[t,o,()=>i.abort()]}function Xx(n){return e=>{e.pointerType==="touch"||mb()||n(e)}}function IA(n,e,t={}){const[i,o,l]=vb(n,t),u=Xx(h=>{const{target:f}=h,m=e(h);if(typeof m!="function"||!f)return;const _=Xx(x=>{m(x),f.removeEventListener("pointerleave",_)});f.addEventListener("pointerleave",_,o)});return i.forEach(h=>{h.addEventListener("pointerenter",u,o)}),l}const _b=(n,e)=>e?n===e?!0:_b(n,e.parentElement):!1,iv=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,UA=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function OA(n){return UA.has(n.tagName)||n.tabIndex!==-1}const _u=new WeakSet;function Zx(n){return e=>{e.key==="Enter"&&n(e)}}function hm(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const FA=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=Zx(()=>{if(_u.has(t))return;hm(t,"down");const o=Zx(()=>{hm(t,"up")}),l=()=>hm(t,"cancel");t.addEventListener("keyup",o,e),t.addEventListener("blur",l,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function qx(n){return iv(n)&&!mb()}function kA(n,e,t={}){const[i,o,l]=vb(n,t),u=h=>{const f=h.currentTarget;if(!qx(h)||_u.has(f))return;_u.add(f);const m=e(h),_=(E,A)=>{window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",w),!(!qx(E)||!_u.has(f))&&(_u.delete(f),typeof m=="function"&&m(E,{success:A}))},x=E=>{_(E,t.useGlobalTarget||_b(f,E.target))},w=E=>{_(E,!1)};window.addEventListener("pointerup",x,o),window.addEventListener("pointercancel",w,o)};return i.forEach(h=>{!OA(h)&&h.getAttribute("tabindex")===null&&(h.tabIndex=0),(t.useGlobalTarget?window:h).addEventListener("pointerdown",u,o),h.addEventListener("focus",m=>FA(m,o),o)}),l}function BA(n){return n==="x"||n==="y"?Lr[n]?null:(Lr[n]=!0,()=>{Lr[n]=!1}):Lr.x||Lr.y?null:(Lr.x=Lr.y=!0,()=>{Lr.x=Lr.y=!1})}const xb=new Set(["width","height","top","left","right","bottom",...hc]);let jh;function zA(){jh=void 0}const ls={now:()=>(jh===void 0&&ls.set(Wn.isProcessing||FT.useManualTiming?Wn.timestamp:performance.now()),jh),set:n=>{jh=n,queueMicrotask(zA)}};function rv(n,e){n.indexOf(e)===-1&&n.push(e)}function sv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class ov{constructor(){this.subscriptions=[]}add(e){return rv(this.subscriptions,e),()=>sv(this.subscriptions,e)}notify(e,t,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,t,i);else for(let l=0;l<o;l++){const u=this.subscriptions[l];u&&u(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function av(n,e){return e?n*(1e3/e):0}const Yx=30,jA=n=>!isNaN(parseFloat(n)),bu={current:void 0};class VA{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,o=!0)=>{const l=ls.now();this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ls.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=jA(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new ov);const i=this.events[e].add(t);return e==="change"?()=>{i(),nn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return bu.current&&bu.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=ls.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Yx)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Yx);return av(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rs(n,e){return new VA(n,e)}function HA(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,rs(t))}function GA(n,e){const t=Ef(n,e);let{transitionEnd:i={},transition:o={},...l}=t||{};l={...l,...i};for(const u in l){const h=rA(l[u]);HA(n,u,h)}}function WA(n){return!!(ei(n)&&n.add)}function gg(n,e){const t=n.getValue("willChange");if(WA(t))return t.add(e)}function yb(n){return n.props[Yw]}const Sb=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,XA=1e-7,ZA=12;function qA(n,e,t,i,o){let l,u,h=0;do u=e+(t-e)/2,l=Sb(u,i,o)-n,l>0?t=u:e=u;while(Math.abs(l)>XA&&++h<ZA);return u}function Wu(n,e,t,i){if(n===e&&t===i)return Ti;const o=l=>qA(l,0,1,n,t);return l=>l===0||l===1?l:Sb(o(l),e,i)}const wb=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,bb=n=>e=>1-n(1-e),Mb=Wu(.33,1.53,.69,.99),lv=bb(Mb),Eb=wb(lv),Tb=n=>(n*=2)<1?.5*lv(n):.5*(2-Math.pow(2,-10*(n-1))),cv=n=>1-Math.sin(Math.acos(n)),Ab=bb(cv),Cb=wb(cv),Pb=n=>/^0[^.\s]+$/u.test(n);function YA(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Pb(n):!0}const Mu=n=>Math.round(n*1e5)/1e5,uv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function KA(n){return n==null}const $A=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,dv=(n,e)=>t=>!!(typeof t=="string"&&$A.test(t)&&t.startsWith(n)||e&&!KA(t)&&Object.prototype.hasOwnProperty.call(t,e)),Rb=(n,e,t)=>i=>{if(typeof i!="string")return i;const[o,l,u,h]=i.match(uv);return{[n]:parseFloat(o),[e]:parseFloat(l),[t]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},JA=n=>hs(0,255,n),fm={...fc,transform:n=>Math.round(JA(n))},Fa={test:dv("rgb","red"),parse:Rb("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+fm.transform(n)+", "+fm.transform(e)+", "+fm.transform(t)+", "+Mu(Du.transform(i))+")"};function QA(n){let e="",t="",i="",o="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),o=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),o=n.substring(4,5),e+=e,t+=t,i+=i,o+=o),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const vg={test:dv("#"),parse:QA,transform:Fa.transform},Xl={test:dv("hsl","hue"),parse:Rb("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+as.transform(Mu(e))+", "+as.transform(Mu(t))+", "+Mu(Du.transform(i))+")"},mi={test:n=>Fa.test(n)||vg.test(n)||Xl.test(n),parse:n=>Fa.test(n)?Fa.parse(n):Xl.test(n)?Xl.parse(n):vg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Fa.transform(n):Xl.transform(n)},eC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function tC(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(uv))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(eC))===null||t===void 0?void 0:t.length)||0)>0}const Nb="number",Lb="color",nC="var",iC="var(",Kx="${}",rC=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Iu(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},o=[];let l=0;const h=e.replace(rC,f=>(mi.test(f)?(i.color.push(l),o.push(Lb),t.push(mi.parse(f))):f.startsWith(iC)?(i.var.push(l),o.push(nC),t.push(f)):(i.number.push(l),o.push(Nb),t.push(parseFloat(f))),++l,Kx)).split(Kx);return{values:t,split:h,indexes:i,types:o}}function Db(n){return Iu(n).values}function Ib(n){const{split:e,types:t}=Iu(n),i=e.length;return o=>{let l="";for(let u=0;u<i;u++)if(l+=e[u],o[u]!==void 0){const h=t[u];h===Nb?l+=Mu(o[u]):h===Lb?l+=mi.transform(o[u]):l+=o[u]}return l}}const sC=n=>typeof n=="number"?0:n;function oC(n){const e=Db(n);return Ib(n)(e.map(sC))}const Xo={test:tC,parse:Db,createTransformer:Ib,getAnimatableNone:oC},aC=new Set(["brightness","contrast","saturate","opacity"]);function lC(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(uv)||[];if(!i)return n;const o=t.replace(i,"");let l=aC.has(e)?1:0;return i!==t&&(l*=100),e+"("+l+o+")"}const cC=/\b([a-z-]*)\(.*?\)/gu,_g={...Xo,getAnimatableNone:n=>{const e=n.match(cC);return e?e.map(lC).join(" "):n}},uC={...q0,color:mi,backgroundColor:mi,outlineColor:mi,fill:mi,stroke:mi,borderColor:mi,borderTopColor:mi,borderRightColor:mi,borderBottomColor:mi,borderLeftColor:mi,filter:_g,WebkitFilter:_g},hv=n=>uC[n];function Ub(n,e){let t=hv(n);return t!==_g&&(t=Xo),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const dC=new Set(["auto","none","0"]);function hC(n,e,t){let i=0,o;for(;i<n.length&&!o;){const l=n[i];typeof l=="string"&&!dC.has(l)&&Iu(l).values.length&&(o=n[i]),i++}if(o&&t)for(const l of e)n[l]=Ub(t,o)}const $x=n=>n===fc||n===bt,Jx=(n,e)=>parseFloat(n.split(", ")[e]),Qx=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const o=i.match(/^matrix3d\((.+)\)$/u);if(o)return Jx(o[1],e);{const l=i.match(/^matrix\((.+)\)$/u);return l?Jx(l[1],n):0}},fC=new Set(["x","y","z"]),pC=hc.filter(n=>!fC.has(n));function mC(n){const e=[];return pC.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const tc={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:Qx(4,13),y:Qx(5,14)};tc.translateX=tc.x;tc.translateY=tc.y;const ja=new Set;let xg=!1,yg=!1;function Ob(){if(yg){const n=Array.from(ja).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const o=mC(i);o.length&&(t.set(i,o),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const o=t.get(i);o&&o.forEach(([l,u])=>{var h;(h=i.getValue(l))===null||h===void 0||h.set(u)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}yg=!1,xg=!1,ja.forEach(n=>n.complete()),ja.clear()}function Fb(){ja.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(yg=!0)})}function gC(){Fb(),Ob()}class fv{constructor(e,t,i,o,l,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=o,this.element=l,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ja.add(this),xg||(xg=!0,nn.read(Fb),nn.resolveKeyframes(Ob))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:o}=this;for(let l=0;l<e.length;l++)if(e[l]===null)if(l===0){const u=o==null?void 0:o.get(),h=e[e.length-1];if(u!==void 0)e[0]=u;else if(i&&t){const f=i.readValue(t,h);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=h),o&&u===void 0&&o.set(e[0])}else e[l]=e[l-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ja.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ja.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const kb=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),vC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _C(n){const e=vC.exec(n);if(!e)return[,];const[,t,i,o]=e;return[`--${t??i}`,o]}function Bb(n,e,t=1){const[i,o]=_C(n);if(!i)return;const l=window.getComputedStyle(e).getPropertyValue(i);if(l){const u=l.trim();return kb(u)?parseFloat(u):u}return Z0(o)?Bb(o,e,t+1):o}const zb=n=>e=>e.test(n),xC={test:n=>n==="auto",parse:n=>n},jb=[fc,bt,as,ko,uA,cA,xC],ey=n=>jb.find(zb(n));class Vb extends fv{constructor(e,t,i,o,l){super(e,t,i,o,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let m=e[f];if(typeof m=="string"&&(m=m.trim(),Z0(m))){const _=Bb(m,t.current);_!==void 0&&(e[f]=_),f===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!xb.has(i)||e.length!==2)return;const[o,l]=e,u=ey(o),h=ey(l);if(u!==h)if($x(u)&&$x(h))for(let f=0;f<e.length;f++){const m=e[f];typeof m=="string"&&(e[f]=parseFloat(m))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let o=0;o<e.length;o++)YA(e[o])&&i.push(o);i.length&&hC(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=tc[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const o=t[t.length-1];o!==void 0&&e.getValue(i,o).jump(o,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:o}=this;if(!t||!t.current)return;const l=t.getValue(i);l&&l.jump(this.measuredOrigin,!1);const u=o.length-1,h=o[u];o[u]=tc[i](t.measureViewportBox(),window.getComputedStyle(t.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([f,m])=>{t.getValue(f).set(m)}),this.resolveNoneKeyframes()}}const ty=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Xo.test(n)||n==="0")&&!n.startsWith("url("));function yC(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function SC(n,e,t,i){const o=n[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const l=n[n.length-1],u=ty(o,e),h=ty(l,e);return!u||!h?!1:yC(n)||(t==="spring"||tv(t))&&i}const wC=n=>n!==null;function Tf(n,{repeat:e,repeatType:t="loop"},i){const o=n.filter(wC),l=e&&t!=="loop"&&e%2===1?0:o.length-1;return!l||i===void 0?o[l]:i}const bC=40;class Hb{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:o=0,repeatDelay:l=0,repeatType:u="loop",...h}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ls.now(),this.options={autoplay:e,delay:t,type:i,repeat:o,repeatDelay:l,repeatType:u,...h},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>bC?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&gC(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=ls.now(),this.hasAttemptedResolve=!0;const{name:i,type:o,velocity:l,delay:u,onComplete:h,onUpdate:f,isGenerator:m}=this.options;if(!m&&!SC(e,i,o,l))if(u)this.options.duration=0;else{f&&f(Tf(e,this.options,t)),h&&h(),this.resolveFinishedPromise();return}const _=this.initPlayback(e,t);_!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,..._},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const An=(n,e,t)=>n+(e-n)*t;function pm(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function MC({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let o=0,l=0,u=0;if(!e)o=l=u=t;else{const h=t<.5?t*(1+e):t+e-t*e,f=2*t-h;o=pm(f,h,n+1/3),l=pm(f,h,n),u=pm(f,h,n-1/3)}return{red:Math.round(o*255),green:Math.round(l*255),blue:Math.round(u*255),alpha:i}}function of(n,e){return t=>t>0?e:n}const mm=(n,e,t)=>{const i=n*n,o=t*(e*e-i)+i;return o<0?0:Math.sqrt(o)},EC=[vg,Fa,Xl],TC=n=>EC.find(e=>e.test(n));function ny(n){const e=TC(n);if(!e)return!1;let t=e.parse(n);return e===Xl&&(t=MC(t)),t}const iy=(n,e)=>{const t=ny(n),i=ny(e);if(!t||!i)return of(n,e);const o={...t};return l=>(o.red=mm(t.red,i.red,l),o.green=mm(t.green,i.green,l),o.blue=mm(t.blue,i.blue,l),o.alpha=An(t.alpha,i.alpha,l),Fa.transform(o))},AC=(n,e)=>t=>e(n(t)),Xu=(...n)=>n.reduce(AC),Sg=new Set(["none","hidden"]);function CC(n,e){return Sg.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function PC(n,e){return t=>An(n,e,t)}function pv(n){return typeof n=="number"?PC:typeof n=="string"?Z0(n)?of:mi.test(n)?iy:LC:Array.isArray(n)?Gb:typeof n=="object"?mi.test(n)?iy:RC:of}function Gb(n,e){const t=[...n],i=t.length,o=n.map((l,u)=>pv(l)(l,e[u]));return l=>{for(let u=0;u<i;u++)t[u]=o[u](l);return t}}function RC(n,e){const t={...n,...e},i={};for(const o in t)n[o]!==void 0&&e[o]!==void 0&&(i[o]=pv(n[o])(n[o],e[o]));return o=>{for(const l in i)t[l]=i[l](o);return t}}function NC(n,e){var t;const i=[],o={color:0,var:0,number:0};for(let l=0;l<e.values.length;l++){const u=e.types[l],h=n.indexes[u][o[u]],f=(t=n.values[h])!==null&&t!==void 0?t:0;i[l]=f,o[u]++}return i}const LC=(n,e)=>{const t=Xo.createTransformer(e),i=Iu(n),o=Iu(e);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?Sg.has(n)&&!o.values.length||Sg.has(e)&&!i.values.length?CC(n,e):Xu(Gb(NC(i,o),o.values),t):of(n,e)};function Wb(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?An(n,e,t):pv(n)(n,e)}const DC=5;function Xb(n,e,t){const i=Math.max(e-DC,0);return av(t-n(i),e-i)}const Rn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},gm=.001;function IC({duration:n=Rn.duration,bounce:e=Rn.bounce,velocity:t=Rn.velocity,mass:i=Rn.mass}){let o,l,u=1-e;u=hs(Rn.minDamping,Rn.maxDamping,u),n=hs(Rn.minDuration,Rn.maxDuration,Hs(n)),u<1?(o=m=>{const _=m*u,x=_*n,w=_-t,E=wg(m,u),A=Math.exp(-x);return gm-w/E*A},l=m=>{const x=m*u*n,w=x*t+t,E=Math.pow(u,2)*Math.pow(m,2)*n,A=Math.exp(-x),P=wg(Math.pow(m,2),u);return(-o(m)+gm>0?-1:1)*((w-E)*A)/P}):(o=m=>{const _=Math.exp(-m*n),x=(m-t)*n+1;return-gm+_*x},l=m=>{const _=Math.exp(-m*n),x=(t-m)*(n*n);return _*x});const h=5/n,f=OC(o,l,h);if(n=Vs(n),isNaN(f))return{stiffness:Rn.stiffness,damping:Rn.damping,duration:n};{const m=Math.pow(f,2)*i;return{stiffness:m,damping:u*2*Math.sqrt(i*m),duration:n}}}const UC=12;function OC(n,e,t){let i=t;for(let o=1;o<UC;o++)i=i-n(i)/e(i);return i}function wg(n,e){return n*Math.sqrt(1-e*e)}const FC=["duration","bounce"],kC=["stiffness","damping","mass"];function ry(n,e){return e.some(t=>n[t]!==void 0)}function BC(n){let e={velocity:Rn.velocity,stiffness:Rn.stiffness,damping:Rn.damping,mass:Rn.mass,isResolvedFromDuration:!1,...n};if(!ry(n,kC)&&ry(n,FC))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),o=i*i,l=2*hs(.05,1,1-(n.bounce||0))*Math.sqrt(o);e={...e,mass:Rn.mass,stiffness:o,damping:l}}else{const t=IC(n);e={...e,...t,mass:Rn.mass},e.isResolvedFromDuration=!0}return e}function Zb(n=Rn.visualDuration,e=Rn.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:o}=t;const l=t.keyframes[0],u=t.keyframes[t.keyframes.length-1],h={done:!1,value:l},{stiffness:f,damping:m,mass:_,duration:x,velocity:w,isResolvedFromDuration:E}=BC({...t,velocity:-Hs(t.velocity||0)}),A=w||0,P=m/(2*Math.sqrt(f*_)),b=u-l,M=Hs(Math.sqrt(f/_)),O=Math.abs(b)<5;i||(i=O?Rn.restSpeed.granular:Rn.restSpeed.default),o||(o=O?Rn.restDelta.granular:Rn.restDelta.default);let U;if(P<1){const B=wg(M,P);U=H=>{const G=Math.exp(-P*M*H);return u-G*((A+P*M*b)/B*Math.sin(B*H)+b*Math.cos(B*H))}}else if(P===1)U=B=>u-Math.exp(-M*B)*(b+(A+M*b)*B);else{const B=M*Math.sqrt(P*P-1);U=H=>{const G=Math.exp(-P*M*H),$=Math.min(B*H,300);return u-G*((A+P*M*b)*Math.sinh($)+B*b*Math.cosh($))/B}}const k={calculatedDuration:E&&x||null,next:B=>{const H=U(B);if(E)h.done=B>=x;else{let G=0;P<1&&(G=B===0?Vs(A):Xb(U,B,H));const $=Math.abs(G)<=i,I=Math.abs(u-H)<=o;h.done=$&&I}return h.value=h.done?u:H,h},toString:()=>{const B=Math.min(db(k),pg),H=hb(G=>k.next(B*G).value,B,30);return B+"ms "+H}};return k}function sy({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:l=500,modifyTarget:u,min:h,max:f,restDelta:m=.5,restSpeed:_}){const x=n[0],w={done:!1,value:x},E=$=>h!==void 0&&$<h||f!==void 0&&$>f,A=$=>h===void 0?f:f===void 0||Math.abs(h-$)<Math.abs(f-$)?h:f;let P=t*e;const b=x+P,M=u===void 0?b:u(b);M!==b&&(P=M-x);const O=$=>-P*Math.exp(-$/i),U=$=>M+O($),k=$=>{const I=O($),z=U($);w.done=Math.abs(I)<=m,w.value=w.done?M:z};let B,H;const G=$=>{E(w.value)&&(B=$,H=Zb({keyframes:[w.value,A(w.value)],velocity:Xb(U,$,w.value),damping:o,stiffness:l,restDelta:m,restSpeed:_}))};return G(0),{calculatedDuration:null,next:$=>{let I=!1;return!H&&B===void 0&&(I=!0,k($),G($)),B!==void 0&&$>=B?H.next($-B):(!I&&k($),w)}}}const zC=Wu(.42,0,1,1),jC=Wu(0,0,.58,1),qb=Wu(.42,0,.58,1),VC=n=>Array.isArray(n)&&typeof n[0]!="number",HC={linear:Ti,easeIn:zC,easeInOut:qb,easeOut:jC,circIn:cv,circInOut:Cb,circOut:Ab,backIn:lv,backInOut:Eb,backOut:Mb,anticipate:Tb},oy=n=>{if(nv(n)){Gw(n.length===4);const[e,t,i,o]=n;return Wu(e,t,i,o)}else if(typeof n=="string")return HC[n];return n};function GC(n,e,t){const i=[],o=t||Wb,l=n.length-1;for(let u=0;u<l;u++){let h=o(n[u],n[u+1]);if(e){const f=Array.isArray(e)?e[u]||Ti:e;h=Xu(f,h)}i.push(h)}return i}function mv(n,e,{clamp:t=!0,ease:i,mixer:o}={}){const l=n.length;if(Gw(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const u=n[0]===n[1];n[0]>n[l-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=GC(e,i,o),f=h.length,m=_=>{if(u&&_<n[0])return e[0];let x=0;if(f>1)for(;x<n.length-2&&!(_<n[x+1]);x++);const w=Ga(n[x],n[x+1],_);return h[x](w)};return t?_=>m(hs(n[0],n[l-1],_)):m}function WC(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const o=Ga(0,e,i);n.push(An(t,1,o))}}function Yb(n){const e=[0];return WC(e,n.length-1),e}function XC(n,e){return n.map(t=>t*e)}function ZC(n,e){return n.map(()=>e||qb).splice(0,n.length-1)}function af({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const o=VC(i)?i.map(oy):oy(i),l={done:!1,value:e[0]},u=XC(t&&t.length===e.length?t:Yb(e),n),h=mv(u,e,{ease:Array.isArray(o)?o:ZC(e,o)});return{calculatedDuration:n,next:f=>(l.value=h(f),l.done=f>=n,l)}}const qC=n=>{const e=({timestamp:t})=>n(t);return{start:()=>nn.update(e,!0),stop:()=>Or(e),now:()=>Wn.isProcessing?Wn.timestamp:ls.now()}},YC={decay:sy,inertia:sy,tween:af,keyframes:af,spring:Zb},KC=n=>n/100;class Af extends Hb{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:t,motionValue:i,element:o,keyframes:l}=this.options,u=(o==null?void 0:o.KeyframeResolver)||fv,h=(f,m)=>this.onKeyframesResolved(f,m);this.resolver=new u(l,h,t,i,o),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l,velocity:u=0}=this.options,h=tv(t)?t:YC[t]||af;let f,m;h!==af&&typeof e[0]!="number"&&(f=Xu(KC,Wb(e[0],e[1])),e=[0,100]);const _=h({...this.options,keyframes:e});l==="mirror"&&(m=h({...this.options,keyframes:[...e].reverse(),velocity:-u})),_.calculatedDuration===null&&(_.calculatedDuration=db(_));const{calculatedDuration:x}=_,w=x+o,E=w*(i+1)-o;return{generator:_,mirroredGenerator:m,mapPercentToKeyframes:f,calculatedDuration:x,resolvedDuration:w,totalDuration:E}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:$}=this.options;return{done:!0,value:$[$.length-1]}}const{finalKeyframe:o,generator:l,mirroredGenerator:u,mapPercentToKeyframes:h,keyframes:f,calculatedDuration:m,totalDuration:_,resolvedDuration:x}=i;if(this.startTime===null)return l.next(0);const{delay:w,repeat:E,repeatType:A,repeatDelay:P,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-_/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const M=this.currentTime-w*(this.speed>=0?1:-1),O=this.speed>=0?M<0:M>_;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=_);let U=this.currentTime,k=l;if(E){const $=Math.min(this.currentTime,_)/x;let I=Math.floor($),z=$%1;!z&&$>=1&&(z=1),z===1&&I--,I=Math.min(I,E+1),!!(I%2)&&(A==="reverse"?(z=1-z,P&&(z-=P/x)):A==="mirror"&&(k=u)),U=hs(0,1,z)*x}const B=O?{done:!1,value:f[0]}:k.next(U);h&&(B.value=h(B.value));let{done:H}=B;!O&&m!==null&&(H=this.speed>=0?this.currentTime>=_:this.currentTime<=0);const G=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return G&&o!==void 0&&(B.value=Tf(f,this.options,o)),b&&b(B.value),G&&this.finish(),B}get duration(){const{resolved:e}=this;return e?Hs(e.calculatedDuration):0}get time(){return Hs(this.currentTime)}set time(e){e=Vs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Hs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=qC,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),t&&t();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=o):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}function $C(n){return new Af(n)}const JC=new Set(["opacity","clipPath","filter","transform"]);function QC(n,e,t,{delay:i=0,duration:o=300,repeat:l=0,repeatType:u="loop",ease:h="easeInOut",times:f}={}){const m={[e]:t};f&&(m.offset=f);const _=pb(h,o);return Array.isArray(_)&&(m.easing=_),n.animate(m,{delay:i,duration:o,easing:Array.isArray(_)?"linear":_,fill:"both",iterations:l+1,direction:u==="reverse"?"alternate":"normal"})}const eP=z0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),lf=10,tP=2e4;function nP(n){return tv(n.type)||n.type==="spring"||!fb(n.ease)}function iP(n,e){const t=new Af({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const o=[];let l=0;for(;!i.done&&l<tP;)i=t.sample(l),o.push(i.value),l+=lf;return{times:void 0,keyframes:o,duration:l-lf,ease:"linear"}}const Kb={anticipate:Tb,backInOut:Eb,circInOut:Cb};function rP(n){return n in Kb}class ay extends Hb{constructor(e){super(e);const{name:t,motionValue:i,element:o,keyframes:l}=this.options;this.resolver=new Vb(l,(u,h)=>this.onKeyframesResolved(u,h),t,i,o),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:i=300,times:o,ease:l,type:u,motionValue:h,name:f,startTime:m}=this.options;if(!h.owner||!h.owner.current)return!1;if(typeof l=="string"&&sf()&&rP(l)&&(l=Kb[l]),nP(this.options)){const{onComplete:x,onUpdate:w,motionValue:E,element:A,...P}=this.options,b=iP(e,P);e=b.keyframes,e.length===1&&(e[1]=e[0]),i=b.duration,o=b.times,l=b.ease,u="keyframes"}const _=QC(h.owner.current,f,e,{...this.options,duration:i,times:o,ease:l});return _.startTime=m??this.calcStartTime(),this.pendingTimeline?(Wx(_,this.pendingTimeline),this.pendingTimeline=void 0):_.onfinish=()=>{const{onComplete:x}=this.options;h.set(Tf(e,this.options,t)),x&&x(),this.cancel(),this.resolveFinishedPromise()},{animation:_,duration:i,times:o,type:u,ease:l,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Hs(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Hs(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=Vs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Ti;const{animation:i}=t;Wx(i,e)}return Ti}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:o,type:l,ease:u,times:h}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:m,onUpdate:_,onComplete:x,element:w,...E}=this.options,A=new Af({...E,keyframes:i,duration:o,type:l,ease:u,times:h,isGenerator:!0}),P=Vs(this.time);m.setWithVelocity(A.sample(P-lf).value,A.sample(P).value,lf)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:o,repeatType:l,damping:u,type:h}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:m}=t.owner.getProps();return eP()&&i&&JC.has(i)&&!f&&!m&&!o&&l!=="mirror"&&u!==0&&h!=="inertia"}}const sP={type:"spring",stiffness:500,damping:25,restSpeed:10},oP=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),aP={type:"keyframes",duration:.8},lP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cP=(n,{keyframes:e})=>e.length>2?aP:Ya.has(n)?n.startsWith("scale")?oP(e[1]):sP:lP;function uP({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:o,repeat:l,repeatType:u,repeatDelay:h,from:f,elapsed:m,..._}){return!!Object.keys(_).length}const gv=(n,e,t,i={},o,l)=>u=>{const h=ev(i,n)||{},f=h.delay||i.delay||0;let{elapsed:m=0}=i;m=m-Vs(f);let _={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-m,onUpdate:w=>{e.set(w),h.onUpdate&&h.onUpdate(w)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:l?void 0:o};uP(h)||(_={..._,...cP(n,_)}),_.duration&&(_.duration=Vs(_.duration)),_.repeatDelay&&(_.repeatDelay=Vs(_.repeatDelay)),_.from!==void 0&&(_.keyframes[0]=_.from);let x=!1;if((_.type===!1||_.duration===0&&!_.repeatDelay)&&(_.duration=0,_.delay===0&&(x=!0)),x&&!l&&e.get()!==void 0){const w=Tf(_.keyframes,h);if(w!==void 0)return nn.update(()=>{_.onUpdate(w),_.onComplete()}),new NA([])}return!l&&ay.supports(_)?new ay(_):new Af(_)};function dP({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function $b(n,e,{delay:t=0,transitionOverride:i,type:o}={}){var l;let{transition:u=n.getDefaultTransition(),transitionEnd:h,...f}=e;i&&(u=i);const m=[],_=o&&n.animationState&&n.animationState.getState()[o];for(const x in f){const w=n.getValue(x,(l=n.latestValues[x])!==null&&l!==void 0?l:null),E=f[x];if(E===void 0||_&&dP(_,x))continue;const A={delay:t,...ev(u||{},x)};let P=!1;if(window.MotionHandoffAnimation){const M=yb(n);if(M){const O=window.MotionHandoffAnimation(M,x,nn);O!==null&&(A.startTime=O,P=!0)}}gg(n,x),w.start(gv(x,w,E,n.shouldReduceMotion&&xb.has(x)?{type:!1}:A,n,P));const b=w.animation;b&&m.push(b)}return h&&Promise.all(m).then(()=>{nn.update(()=>{h&&GA(n,h)})}),m}function bg(n,e,t={}){var i;const o=Ef(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:l=n.getDefaultTransition()||{}}=o||{};t.transitionOverride&&(l=t.transitionOverride);const u=o?()=>Promise.all($b(n,o,t)):()=>Promise.resolve(),h=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:_=0,staggerChildren:x,staggerDirection:w}=l;return hP(n,e,_+m,x,w,t)}:()=>Promise.resolve(),{when:f}=l;if(f){const[m,_]=f==="beforeChildren"?[u,h]:[h,u];return m().then(()=>_())}else return Promise.all([u(),h(t.delay)])}function hP(n,e,t=0,i=0,o=1,l){const u=[],h=(n.variantChildren.size-1)*i,f=o===1?(m=0)=>m*i:(m=0)=>h-m*i;return Array.from(n.variantChildren).sort(fP).forEach((m,_)=>{m.notify("AnimationStart",e),u.push(bg(m,e,{...l,delay:t+f(_)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(u)}function fP(n,e){return n.sortNodePosition(e)}function pP(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const o=e.map(l=>bg(n,l,t));i=Promise.all(o)}else if(typeof e=="string")i=bg(n,e,t);else{const o=typeof e=="function"?Ef(n,e,t.custom):e;i=Promise.all($b(n,o,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const mP=V0.length;function Jb(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?Jb(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<mP;t++){const i=V0[t],o=n.props[i];(Lu(o)||o===!1)&&(e[i]=o)}return e}const gP=[...j0].reverse(),vP=j0.length;function _P(n){return e=>Promise.all(e.map(({animation:t,options:i})=>pP(n,t,i)))}function xP(n){let e=_P(n),t=ly(),i=!0;const o=f=>(m,_)=>{var x;const w=Ef(n,_,f==="exit"?(x=n.presenceContext)===null||x===void 0?void 0:x.custom:void 0);if(w){const{transition:E,transitionEnd:A,...P}=w;m={...m,...P,...A}}return m};function l(f){e=f(n)}function u(f){const{props:m}=n,_=Jb(n.parent)||{},x=[],w=new Set;let E={},A=1/0;for(let b=0;b<vP;b++){const M=gP[b],O=t[M],U=m[M]!==void 0?m[M]:_[M],k=Lu(U),B=M===f?O.isActive:null;B===!1&&(A=b);let H=U===_[M]&&U!==m[M]&&k;if(H&&i&&n.manuallyAnimateOnMount&&(H=!1),O.protectedKeys={...E},!O.isActive&&B===null||!U&&!O.prevProp||bf(U)||typeof U=="boolean")continue;const G=yP(O.prevProp,U);let $=G||M===f&&O.isActive&&!H&&k||b>A&&k,I=!1;const z=Array.isArray(U)?U:[U];let q=z.reduce(o(M),{});B===!1&&(q={});const{prevResolvedValues:re={}}=O,ue={...re,...q},ge=te=>{$=!0,w.has(te)&&(I=!0,w.delete(te)),O.needsAnimating[te]=!0;const X=n.getValue(te);X&&(X.liveStyle=!1)};for(const te in ue){const X=q[te],we=re[te];if(E.hasOwnProperty(te))continue;let Q=!1;fg(X)&&fg(we)?Q=!cb(X,we):Q=X!==we,Q?X!=null?ge(te):w.add(te):X!==void 0&&w.has(te)?ge(te):O.protectedKeys[te]=!0}O.prevProp=U,O.prevResolvedValues=q,O.isActive&&(E={...E,...q}),i&&n.blockInitialAnimation&&($=!1),$&&(!(H&&G)||I)&&x.push(...z.map(te=>({animation:te,options:{type:M}})))}if(w.size){const b={};w.forEach(M=>{const O=n.getBaseTarget(M),U=n.getValue(M);U&&(U.liveStyle=!0),b[M]=O??null}),x.push({animation:b})}let P=!!x.length;return i&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(P=!1),i=!1,P?e(x):Promise.resolve()}function h(f,m){var _;if(t[f].isActive===m)return Promise.resolve();(_=n.variantChildren)===null||_===void 0||_.forEach(w=>{var E;return(E=w.animationState)===null||E===void 0?void 0:E.setActive(f,m)}),t[f].isActive=m;const x=u(f);for(const w in t)t[w].protectedKeys={};return x}return{animateChanges:u,setActive:h,setAnimateFunction:l,getState:()=>t,reset:()=>{t=ly(),i=!0}}}function yP(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!cb(e,n):!1}function Ea(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ly(){return{animate:Ea(!0),whileInView:Ea(),whileHover:Ea(),whileTap:Ea(),whileDrag:Ea(),whileFocus:Ea(),exit:Ea()}}class Ko{constructor(e){this.isMounted=!1,this.node=e}update(){}}class SP extends Ko{constructor(e){super(e),e.animationState||(e.animationState=xP(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();bf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let wP=0;class bP extends Ko{constructor(){super(...arguments),this.id=wP++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e);t&&!e&&o.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const MP={animation:{Feature:SP},exit:{Feature:bP}};function Uu(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function Zu(n){return{point:{x:n.pageX,y:n.pageY}}}const EP=n=>e=>iv(e)&&n(e,Zu(e));function Eu(n,e,t,i){return Uu(n,e,EP(t),i)}const cy=(n,e)=>Math.abs(n-e);function TP(n,e){const t=cy(n.x,e.x),i=cy(n.y,e.y);return Math.sqrt(t**2+i**2)}class Qb{constructor(e,t,{transformPagePoint:i,contextWindow:o,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=_m(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,E=TP(x.offset,{x:0,y:0})>=3;if(!w&&!E)return;const{point:A}=x,{timestamp:P}=Wn;this.history.push({...A,timestamp:P});const{onStart:b,onMove:M}=this.handlers;w||(b&&b(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,x)},this.handlePointerMove=(x,w)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=vm(w,this.transformPagePoint),nn.update(this.updatePoint,!0)},this.handlePointerUp=(x,w)=>{this.end();const{onEnd:E,onSessionEnd:A,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=_m(x.type==="pointercancel"?this.lastMoveEventInfo:vm(w,this.transformPagePoint),this.history);this.startEvent&&E&&E(x,b),A&&A(x,b)},!iv(e))return;this.dragSnapToOrigin=l,this.handlers=t,this.transformPagePoint=i,this.contextWindow=o||window;const u=Zu(e),h=vm(u,this.transformPagePoint),{point:f}=h,{timestamp:m}=Wn;this.history=[{...f,timestamp:m}];const{onSessionStart:_}=t;_&&_(e,_m(h,this.history)),this.removeListeners=Xu(Eu(this.contextWindow,"pointermove",this.handlePointerMove),Eu(this.contextWindow,"pointerup",this.handlePointerUp),Eu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Or(this.updatePoint)}}function vm(n,e){return e?{point:e(n.point)}:n}function uy(n,e){return{x:n.x-e.x,y:n.y-e.y}}function _m({point:n},e){return{point:n,delta:uy(n,e1(e)),offset:uy(n,AP(e)),velocity:CP(e,.1)}}function AP(n){return n[0]}function e1(n){return n[n.length-1]}function CP(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const o=e1(n);for(;t>=0&&(i=n[t],!(o.timestamp-i.timestamp>Vs(e)));)t--;if(!i)return{x:0,y:0};const l=Hs(o.timestamp-i.timestamp);if(l===0)return{x:0,y:0};const u={x:(o.x-i.x)/l,y:(o.y-i.y)/l};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}const t1=1e-4,PP=1-t1,RP=1+t1,n1=.01,NP=0-n1,LP=0+n1;function tr(n){return n.max-n.min}function DP(n,e,t){return Math.abs(n-e)<=t}function dy(n,e,t,i=.5){n.origin=i,n.originPoint=An(e.min,e.max,n.origin),n.scale=tr(t)/tr(e),n.translate=An(t.min,t.max,n.origin)-n.originPoint,(n.scale>=PP&&n.scale<=RP||isNaN(n.scale))&&(n.scale=1),(n.translate>=NP&&n.translate<=LP||isNaN(n.translate))&&(n.translate=0)}function Tu(n,e,t,i){dy(n.x,e.x,t.x,i?i.originX:void 0),dy(n.y,e.y,t.y,i?i.originY:void 0)}function hy(n,e,t){n.min=t.min+e.min,n.max=n.min+tr(e)}function IP(n,e,t){hy(n.x,e.x,t.x),hy(n.y,e.y,t.y)}function fy(n,e,t){n.min=e.min-t.min,n.max=n.min+tr(e)}function Au(n,e,t){fy(n.x,e.x,t.x),fy(n.y,e.y,t.y)}function UP(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?An(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?An(t,n,i.max):Math.min(n,t)),n}function py(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function OP(n,{top:e,left:t,bottom:i,right:o}){return{x:py(n.x,t,o),y:py(n.y,e,i)}}function my(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function FP(n,e){return{x:my(n.x,e.x),y:my(n.y,e.y)}}function kP(n,e){let t=.5;const i=tr(n),o=tr(e);return o>i?t=Ga(e.min,e.max-i,n.min):i>o&&(t=Ga(n.min,n.max-o,e.min)),hs(0,1,t)}function BP(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Mg=.35;function zP(n=Mg){return n===!1?n=0:n===!0&&(n=Mg),{x:gy(n,"left","right"),y:gy(n,"top","bottom")}}function gy(n,e,t){return{min:vy(n,e),max:vy(n,t)}}function vy(n,e){return typeof n=="number"?n:n[e]||0}const _y=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zl=()=>({x:_y(),y:_y()}),xy=()=>({min:0,max:0}),Dn=()=>({x:xy(),y:xy()});function vr(n){return[n("x"),n("y")]}function i1({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function jP({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function VP(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function xm(n){return n===void 0||n===1}function Eg({scale:n,scaleX:e,scaleY:t}){return!xm(n)||!xm(e)||!xm(t)}function La(n){return Eg(n)||r1(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function r1(n){return yy(n.x)||yy(n.y)}function yy(n){return n&&n!=="0%"}function cf(n,e,t){const i=n-t,o=e*i;return t+o}function Sy(n,e,t,i,o){return o!==void 0&&(n=cf(n,o,i)),cf(n,t,i)+e}function Tg(n,e=0,t=1,i,o){n.min=Sy(n.min,e,t,i,o),n.max=Sy(n.max,e,t,i,o)}function s1(n,{x:e,y:t}){Tg(n.x,e.translate,e.scale,e.originPoint),Tg(n.y,t.translate,t.scale,t.originPoint)}const wy=.999999999999,by=1.0000000000001;function HP(n,e,t,i=!1){const o=t.length;if(!o)return;e.x=e.y=1;let l,u;for(let h=0;h<o;h++){l=t[h],u=l.projectionDelta;const{visualElement:f}=l.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Yl(n,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,s1(n,u)),i&&La(l.latestValues)&&Yl(n,l.latestValues))}e.x<by&&e.x>wy&&(e.x=1),e.y<by&&e.y>wy&&(e.y=1)}function ql(n,e){n.min=n.min+e,n.max=n.max+e}function My(n,e,t,i,o=.5){const l=An(n.min,n.max,o);Tg(n,e,t,l,i)}function Yl(n,e){My(n.x,e.x,e.scaleX,e.scale,e.originX),My(n.y,e.y,e.scaleY,e.scale,e.originY)}function o1(n,e){return i1(VP(n.getBoundingClientRect(),e))}function GP(n,e,t){const i=o1(n,t),{scroll:o}=e;return o&&(ql(i.x,o.offset.x),ql(i.y,o.offset.y)),i}const a1=({current:n})=>n?n.ownerDocument.defaultView:null,WP=new WeakMap;class XP{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=_=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Zu(_).point)},l=(_,x)=>{const{drag:w,dragPropagation:E,onDragStart:A}=this.getProps();if(w&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=BA(w),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vr(b=>{let M=this.getAxisMotionValue(b).get()||0;if(as.test(M)){const{projection:O}=this.visualElement;if(O&&O.layout){const U=O.layout.layoutBox[b];U&&(M=tr(U)*(parseFloat(M)/100))}}this.originPoint[b]=M}),A&&nn.postRender(()=>A(_,x)),gg(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},u=(_,x)=>{const{dragPropagation:w,dragDirectionLock:E,onDirectionLock:A,onDrag:P}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:b}=x;if(E&&this.currentDirection===null){this.currentDirection=ZP(b),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",x.point,b),this.updateAxis("y",x.point,b),this.visualElement.render(),P&&P(_,x)},h=(_,x)=>this.stop(_,x),f=()=>vr(_=>{var x;return this.getAnimationState(_)==="paused"&&((x=this.getAxisMotionValue(_).animation)===null||x===void 0?void 0:x.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new Qb(e,{onSessionStart:o,onStart:l,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:a1(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:o}=t;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&nn.postRender(()=>l(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:o}=this.getProps();if(!i||!ph(e,o,this.currentDirection))return;const l=this.getAxisMotionValue(e);let u=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(u=UP(u,this.constraints[e],this.elastic[e])),l.set(u)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,l=this.constraints;t&&Wl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&o?this.constraints=OP(o.layoutBox,t):this.constraints=!1,this.elastic=zP(i),l!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&vr(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=BP(o.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Wl(e))return!1;const i=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=GP(i,o.root,this.visualElement.getTransformPagePoint());let u=FP(o.layout.layoutBox,l);if(t){const h=t(jP(u));this.hasMutatedConstraints=!!h,h&&(u=i1(h))}return u}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:o,dragTransition:l,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},m=vr(_=>{if(!ph(_,t,this.currentDirection))return;let x=f&&f[_]||{};u&&(x={min:0,max:0});const w=o?200:1e6,E=o?40:1e7,A={type:"inertia",velocity:i?e[_]:0,bounceStiffness:w,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...l,...x};return this.startAxisValueAnimation(_,A)});return Promise.all(m).then(h)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return gg(this.visualElement,e),i.start(gv(e,i,0,t,this.visualElement,!1))}stopAnimation(){vr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),o=i[t];return o||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){vr(t=>{const{drag:i}=this.getProps();if(!ph(t,i,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(t);if(o&&o.layout){const{min:u,max:h}=o.layout.layoutBox[t];l.set(e[t]-An(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Wl(t)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};vr(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const f=h.get();o[u]=kP({min:f,max:f},this.constraints[u])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),vr(u=>{if(!ph(u,e,null))return;const h=this.getAxisMotionValue(u),{min:f,max:m}=this.constraints[u];h.set(An(f,m,o[u]))})}addListeners(){if(!this.visualElement.current)return;WP.set(this.visualElement,this);const e=this.visualElement.current,t=Eu(e,"pointerdown",f=>{const{drag:m,dragListener:_=!0}=this.getProps();m&&_&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();Wl(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,l=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),nn.read(i);const u=Uu(window,"resize",()=>this.scalePositionWithinConstraints()),h=o.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:m})=>{this.isDragging&&m&&(vr(_=>{const x=this.getAxisMotionValue(_);x&&(this.originPoint[_]+=f[_].translate,x.set(x.get()+f[_].translate))}),this.visualElement.render())}));return()=>{u(),t(),l(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:u=Mg,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:o,dragConstraints:l,dragElastic:u,dragMomentum:h}}}function ph(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function ZP(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class qP extends Ko{constructor(e){super(e),this.removeGroupControls=Ti,this.removeListeners=Ti,this.controls=new XP(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ti}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ey=n=>(e,t)=>{n&&nn.postRender(()=>n(e,t))};class YP extends Ko{constructor(){super(...arguments),this.removePointerDownListener=Ti}onPointerDown(e){this.session=new Qb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:a1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:Ey(e),onStart:Ey(t),onMove:i,onEnd:(l,u)=>{delete this.session,o&&nn.postRender(()=>o(l,u))}}}mount(){this.removePointerDownListener=Eu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Vh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ty(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const su={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(bt.test(n))n=parseFloat(n);else return n;const t=Ty(n,e.target.x),i=Ty(n,e.target.y);return`${t}% ${i}%`}},KP={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,o=Xo.parse(n);if(o.length>5)return i;const l=Xo.createTransformer(n),u=typeof o[0]!="number"?1:0,h=t.x.scale*e.x,f=t.y.scale*e.y;o[0+u]/=h,o[1+u]/=f;const m=An(h,f,.5);return typeof o[2+u]=="number"&&(o[2+u]/=m),typeof o[3+u]=="number"&&(o[3+u]/=m),l(o)}};class $P extends ne.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:o}=this.props,{projection:l}=e;yA(JP),l&&(t.group&&t.group.add(l),i&&i.register&&o&&i.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Vh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:o,isPresent:l}=this.props,u=i.projection;return u&&(u.isPresent=l,o||e.layoutDependency!==t||t===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?u.promote():u.relegate()||nn.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),G0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function l1(n){const[e,t]=Hw(),i=ne.useContext(k0);return v.jsx($P,{...n,layoutGroup:i,switchLayoutGroup:ne.useContext(Kw),isPresent:e,safeToRemove:t})}const JP={borderRadius:{...su,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:su,borderTopRightRadius:su,borderBottomLeftRadius:su,borderBottomRightRadius:su,boxShadow:KP};function QP(n,e,t){const i=ei(n)?n:rs(n);return i.start(gv("",i,e,t)),i.animation}function e2(n){return n instanceof SVGElement&&n.tagName!=="svg"}const t2=(n,e)=>n.depth-e.depth;class n2{constructor(){this.children=[],this.isDirty=!1}add(e){rv(this.children,e),this.isDirty=!0}remove(e){sv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(t2),this.isDirty=!1,this.children.forEach(e)}}function i2(n,e){const t=ls.now(),i=({timestamp:o})=>{const l=o-t;l>=e&&(Or(i),n(l-e))};return nn.read(i,!0),()=>Or(i)}const c1=["TopLeft","TopRight","BottomLeft","BottomRight"],r2=c1.length,Ay=n=>typeof n=="string"?parseFloat(n):n,Cy=n=>typeof n=="number"||bt.test(n);function s2(n,e,t,i,o,l){o?(n.opacity=An(0,t.opacity!==void 0?t.opacity:1,o2(i)),n.opacityExit=An(e.opacity!==void 0?e.opacity:1,0,a2(i))):l&&(n.opacity=An(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let u=0;u<r2;u++){const h=`border${c1[u]}Radius`;let f=Py(e,h),m=Py(t,h);if(f===void 0&&m===void 0)continue;f||(f=0),m||(m=0),f===0||m===0||Cy(f)===Cy(m)?(n[h]=Math.max(An(Ay(f),Ay(m),i),0),(as.test(m)||as.test(f))&&(n[h]+="%")):n[h]=m}(e.rotate||t.rotate)&&(n.rotate=An(e.rotate||0,t.rotate||0,i))}function Py(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const o2=u1(0,.5,Ab),a2=u1(.5,.95,Ti);function u1(n,e,t){return i=>i<n?0:i>e?1:t(Ga(n,e,i))}function Ry(n,e){n.min=e.min,n.max=e.max}function mr(n,e){Ry(n.x,e.x),Ry(n.y,e.y)}function Ny(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function Ly(n,e,t,i,o){return n-=e,n=cf(n,1/t,i),o!==void 0&&(n=cf(n,1/o,i)),n}function l2(n,e=0,t=1,i=.5,o,l=n,u=n){if(as.test(e)&&(e=parseFloat(e),e=An(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=An(l.min,l.max,i);n===l&&(h-=e),n.min=Ly(n.min,e,t,h,o),n.max=Ly(n.max,e,t,h,o)}function Dy(n,e,[t,i,o],l,u){l2(n,e[t],e[i],e[o],e.scale,l,u)}const c2=["x","scaleX","originX"],u2=["y","scaleY","originY"];function Iy(n,e,t,i){Dy(n.x,e,c2,t?t.x:void 0,i?i.x:void 0),Dy(n.y,e,u2,t?t.y:void 0,i?i.y:void 0)}function Uy(n){return n.translate===0&&n.scale===1}function d1(n){return Uy(n.x)&&Uy(n.y)}function Oy(n,e){return n.min===e.min&&n.max===e.max}function d2(n,e){return Oy(n.x,e.x)&&Oy(n.y,e.y)}function Fy(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function h1(n,e){return Fy(n.x,e.x)&&Fy(n.y,e.y)}function ky(n){return tr(n.x)/tr(n.y)}function By(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class h2{constructor(){this.members=[]}add(e){rv(this.members,e),e.scheduleRender()}remove(e){if(sv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(o=>e===o);if(t===0)return!1;let i;for(let o=t;o>=0;o--){const l=this.members[o];if(l.isPresent!==!1){i=l;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function f2(n,e,t){let i="";const o=n.x.translate/e.x,l=n.y.translate/e.y,u=(t==null?void 0:t.z)||0;if((o||l||u)&&(i=`translate3d(${o}px, ${l}px, ${u}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:m,rotate:_,rotateX:x,rotateY:w,skewX:E,skewY:A}=t;m&&(i=`perspective(${m}px) ${i}`),_&&(i+=`rotate(${_}deg) `),x&&(i+=`rotateX(${x}deg) `),w&&(i+=`rotateY(${w}deg) `),E&&(i+=`skewX(${E}deg) `),A&&(i+=`skewY(${A}deg) `)}const h=n.x.scale*e.x,f=n.y.scale*e.y;return(h!==1||f!==1)&&(i+=`scale(${h}, ${f})`),i||"none"}const Da={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},xu=typeof window<"u"&&window.MotionDebug!==void 0,ym=["","X","Y","Z"],p2={visibility:"hidden"},zy=1e3;let m2=0;function Sm(n,e,t,i){const{latestValues:o}=e;o[n]&&(t[n]=o[n],e.setStaticValue(n,0),i&&(i[n]=0))}function f1(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=yb(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:o,layoutId:l}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",nn,!(o||l))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&f1(i)}function p1({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(u={},h=e==null?void 0:e()){this.id=m2++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,xu&&(Da.totalNodes=Da.resolvedTargetDeltas=Da.recalculatedProjection=0),this.nodes.forEach(_2),this.nodes.forEach(b2),this.nodes.forEach(M2),this.nodes.forEach(x2),xu&&window.MotionDebug.record(Da)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new n2)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new ov),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const f=this.eventHandlers.get(u);f&&f.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=e2(u),this.instance=u;const{layoutId:f,layout:m,visualElement:_}=this.options;if(_&&!_.current&&_.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(m||f)&&(this.isLayoutDirty=!0),n){let x;const w=()=>this.root.updateBlockedByResize=!1;n(u,()=>{this.root.updateBlockedByResize=!0,x&&x(),x=i2(w,250),Vh.hasAnimatedSinceResize&&(Vh.hasAnimatedSinceResize=!1,this.nodes.forEach(Vy))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&_&&(f||m)&&this.addEventListener("didUpdate",({delta:x,hasLayoutChanged:w,hasRelativeTargetChanged:E,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const P=this.options.transition||_.getDefaultTransition()||P2,{onLayoutAnimationStart:b,onLayoutAnimationComplete:M}=_.getProps(),O=!this.targetLayout||!h1(this.targetLayout,A)||E,U=!w&&E;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||U||w&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(x,U);const k={...ev(P,"layout"),onPlay:b,onComplete:M};(_.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else w||Vy(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Or(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(E2),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&f1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let _=0;_<this.path.length;_++){const x=this.path[_];x.shouldResetTransform=!0,x.updateScroll("snapshot"),x.options.layoutRoot&&x.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(jy);return}this.isUpdating||this.nodes.forEach(S2),this.isUpdating=!1,this.nodes.forEach(w2),this.nodes.forEach(g2),this.nodes.forEach(v2),this.clearAllSnapshots();const h=ls.now();Wn.delta=hs(0,1e3/60,h-Wn.timestamp),Wn.timestamp=h,Wn.isProcessing=!0,dm.update.process(Wn),dm.preRender.process(Wn),dm.render.process(Wn),Wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,G0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(y2),this.sharedNodes.forEach(T2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!o)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!d1(this.projectionDelta),f=this.getTransformTemplate(),m=f?f(this.latestValues,""):void 0,_=m!==this.prevTransformTemplateValue;u&&(h||La(this.latestValues)||_)&&(o(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return u&&(f=this.removeTransform(f)),R2(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:h}=this.options;if(!h)return Dn();const f=h.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(N2))){const{scroll:_}=this.root;_&&(ql(f.x,_.offset.x),ql(f.y,_.offset.y))}return f}removeElementScroll(u){var h;const f=Dn();if(mr(f,u),!((h=this.scroll)===null||h===void 0)&&h.wasRoot)return f;for(let m=0;m<this.path.length;m++){const _=this.path[m],{scroll:x,options:w}=_;_!==this.root&&x&&w.layoutScroll&&(x.wasRoot&&mr(f,u),ql(f.x,x.offset.x),ql(f.y,x.offset.y))}return f}applyTransform(u,h=!1){const f=Dn();mr(f,u);for(let m=0;m<this.path.length;m++){const _=this.path[m];!h&&_.options.layoutScroll&&_.scroll&&_!==_.root&&Yl(f,{x:-_.scroll.offset.x,y:-_.scroll.offset.y}),La(_.latestValues)&&Yl(f,_.latestValues)}return La(this.latestValues)&&Yl(f,this.latestValues),f}removeTransform(u){const h=Dn();mr(h,u);for(let f=0;f<this.path.length;f++){const m=this.path[f];if(!m.instance||!La(m.latestValues))continue;Eg(m.latestValues)&&m.updateSnapshot();const _=Dn(),x=m.measurePageBox();mr(_,x),Iy(h,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,_)}return La(this.latestValues)&&Iy(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var h;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==f;if(!(u||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:x,layoutId:w}=this.options;if(!(!this.layout||!(x||w))){if(this.resolvedRelativeTargetAt=Wn.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dn(),this.relativeTargetOrigin=Dn(),Au(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),mr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Dn(),this.targetWithTransforms=Dn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),IP(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):mr(this.target,this.layout.layoutBox),s1(this.target,this.targetDelta)):mr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dn(),this.relativeTargetOrigin=Dn(),Au(this.relativeTargetOrigin,this.target,E.target),mr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}xu&&Da.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Eg(this.parent.latestValues)||r1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const h=this.getLead(),f=!!this.resumingFrom||this!==h;let m=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(m=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===Wn.timestamp&&(m=!1),m)return;const{layout:_,layoutId:x}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(_||x))return;mr(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,E=this.treeScale.y;HP(this.layoutCorrected,this.treeScale,this.path,f),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=Dn());const{target:A}=h;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ny(this.prevProjectionDelta.x,this.projectionDelta.x),Ny(this.prevProjectionDelta.y,this.projectionDelta.y)),Tu(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==E||!By(this.projectionDelta.x,this.prevProjectionDelta.x)||!By(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),xu&&Da.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var h;if((h=this.options.visualElement)===null||h===void 0||h.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zl(),this.projectionDelta=Zl(),this.projectionDeltaWithTransform=Zl()}setAnimationOrigin(u,h=!1){const f=this.snapshot,m=f?f.latestValues:{},_={...this.latestValues},x=Zl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const w=Dn(),E=f?f.source:void 0,A=this.layout?this.layout.source:void 0,P=E!==A,b=this.getStack(),M=!b||b.members.length<=1,O=!!(P&&!M&&this.options.crossfade===!0&&!this.path.some(C2));this.animationProgress=0;let U;this.mixTargetDelta=k=>{const B=k/1e3;Hy(x.x,u.x,B),Hy(x.y,u.y,B),this.setTargetDelta(x),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Au(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),A2(this.relativeTarget,this.relativeTargetOrigin,w,B),U&&d2(this.relativeTarget,U)&&(this.isProjectionDirty=!1),U||(U=Dn()),mr(U,this.relativeTarget)),P&&(this.animationValues=_,s2(_,m,this.latestValues,B,O,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Or(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nn.update(()=>{Vh.hasAnimatedSinceResize=!0,this.currentAnimation=QP(0,zy,{...u,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zy),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:f,layout:m,latestValues:_}=u;if(!(!h||!f||!m)){if(this!==u&&this.layout&&m&&m1(this.options.animationType,this.layout.layoutBox,m.layoutBox)){f=this.target||Dn();const x=tr(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+x;const w=tr(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+w}mr(h,f),Yl(h,_),Tu(this.projectionDeltaWithTransform,this.layoutCorrected,h,_)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new h2),this.sharedNodes.get(u).add(h);const m=h.options.initialPromotionConfig;h.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:h}=this.options;return h?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:h}=this.options;return h?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:f}={}){const m=this.getStack();m&&m.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const m={};f.z&&Sm("z",u,m,this.animationValues);for(let _=0;_<ym.length;_++)Sm(`rotate${ym[_]}`,u,m,this.animationValues),Sm(`skew${ym[_]}`,u,m,this.animationValues);u.render();for(const _ in m)u.setStaticValue(_,m[_]),this.animationValues&&(this.animationValues[_]=m[_]);u.scheduleRender()}getProjectionStyles(u){var h,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return p2;const m={visibility:""},_=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=zh(u==null?void 0:u.pointerEvents)||"",m.transform=_?_(this.latestValues,""):"none",m;const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){const P={};return this.options.layoutId&&(P.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,P.pointerEvents=zh(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!La(this.latestValues)&&(P.transform=_?_({},""):"none",this.hasProjected=!1),P}const w=x.animationValues||x.latestValues;this.applyTransformsToTarget(),m.transform=f2(this.projectionDeltaWithTransform,this.treeScale,w),_&&(m.transform=_(w,m.transform));const{x:E,y:A}=this.projectionDelta;m.transformOrigin=`${E.origin*100}% ${A.origin*100}% 0`,x.animationValues?m.opacity=x===this?(f=(h=w.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:m.opacity=x===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const P in rf){if(w[P]===void 0)continue;const{correct:b,applyTo:M}=rf[P],O=m.transform==="none"?w[P]:b(w[P],x);if(M){const U=M.length;for(let k=0;k<U;k++)m[M[k]]=O}else m[P]=O}return this.options.layoutId&&(m.pointerEvents=x===this?zh(u==null?void 0:u.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(jy),this.root.sharedNodes.clear()}}}function g2(n){n.updateLayout()}function v2(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:o}=n.layout,{animationType:l}=n.options,u=t.source!==n.layout.source;l==="size"?vr(x=>{const w=u?t.measuredBox[x]:t.layoutBox[x],E=tr(w);w.min=i[x].min,w.max=w.min+E}):m1(l,t.layoutBox,i)&&vr(x=>{const w=u?t.measuredBox[x]:t.layoutBox[x],E=tr(i[x]);w.max=w.min+E,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[x].max=n.relativeTarget[x].min+E)});const h=Zl();Tu(h,i,t.layoutBox);const f=Zl();u?Tu(f,n.applyTransform(o,!0),t.measuredBox):Tu(f,i,t.layoutBox);const m=!d1(h);let _=!1;if(!n.resumeFrom){const x=n.getClosestProjectingParent();if(x&&!x.resumeFrom){const{snapshot:w,layout:E}=x;if(w&&E){const A=Dn();Au(A,t.layoutBox,w.layoutBox);const P=Dn();Au(P,i,E.layoutBox),h1(A,P)||(_=!0),x.options.layoutRoot&&(n.relativeTarget=P,n.relativeTargetOrigin=A,n.relativeParent=x)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:f,layoutDelta:h,hasLayoutChanged:m,hasRelativeTargetChanged:_})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function _2(n){xu&&Da.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function x2(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function y2(n){n.clearSnapshot()}function jy(n){n.clearMeasurements()}function S2(n){n.isLayoutDirty=!1}function w2(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Vy(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function b2(n){n.resolveTargetDelta()}function M2(n){n.calcProjection()}function E2(n){n.resetSkewAndRotation()}function T2(n){n.removeLeadSnapshot()}function Hy(n,e,t){n.translate=An(e.translate,0,t),n.scale=An(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Gy(n,e,t,i){n.min=An(e.min,t.min,i),n.max=An(e.max,t.max,i)}function A2(n,e,t,i){Gy(n.x,e.x,t.x,i),Gy(n.y,e.y,t.y,i)}function C2(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const P2={duration:.45,ease:[.4,0,.1,1]},Wy=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Xy=Wy("applewebkit/")&&!Wy("chrome/")?Math.round:Ti;function Zy(n){n.min=Xy(n.min),n.max=Xy(n.max)}function R2(n){Zy(n.x),Zy(n.y)}function m1(n,e,t){return n==="position"||n==="preserve-aspect"&&!DP(ky(e),ky(t),.2)}function N2(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const L2=p1({attachResizeListener:(n,e)=>Uu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),wm={current:void 0},g1=p1({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!wm.current){const n=new L2({});n.mount(window),n.setOptions({layoutScroll:!0}),wm.current=n}return wm.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),D2={pan:{Feature:YP},drag:{Feature:qP,ProjectionNode:g1,MeasureLayout:l1}};function qy(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const o="onHover"+t,l=i[o];l&&nn.postRender(()=>l(e,Zu(e)))}class I2 extends Ko{mount(){const{current:e}=this.node;e&&(this.unmount=IA(e,t=>(qy(this.node,t,"Start"),i=>qy(this.node,i,"End"))))}unmount(){}}class U2 extends Ko{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xu(Uu(this.node.current,"focus",()=>this.onFocus()),Uu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Yy(n,e,t){const{props:i}=n;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const o="onTap"+(t==="End"?"":t),l=i[o];l&&nn.postRender(()=>l(e,Zu(e)))}class O2 extends Ko{mount(){const{current:e}=this.node;e&&(this.unmount=kA(e,t=>(Yy(this.node,t,"Start"),(i,{success:o})=>Yy(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ag=new WeakMap,bm=new WeakMap,F2=n=>{const e=Ag.get(n.target);e&&e(n)},k2=n=>{n.forEach(F2)};function B2({root:n,...e}){const t=n||document;bm.has(t)||bm.set(t,{});const i=bm.get(t),o=JSON.stringify(e);return i[o]||(i[o]=new IntersectionObserver(k2,{root:n,...e})),i[o]}function z2(n,e,t){const i=B2(e);return Ag.set(n,t),i.observe(n),()=>{Ag.delete(n),i.unobserve(n)}}const j2={some:0,all:1};class V2 extends Ko{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:o="some",once:l}=e,u={root:t?t.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:j2[o]},h=f=>{const{isIntersecting:m}=f;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:_,onViewportLeave:x}=this.node.getProps(),w=m?_:x;w&&w(f)};return z2(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(H2(e,t))&&this.startObserver()}unmount(){}}function H2({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const G2={inView:{Feature:V2},tap:{Feature:O2},focus:{Feature:U2},hover:{Feature:I2}},W2={layout:{ProjectionNode:g1,MeasureLayout:l1}},Cg={current:null},v1={current:!1};function X2(){if(v1.current=!0,!!B0)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Cg.current=n.matches;n.addListener(e),e()}else Cg.current=!1}const Z2=[...jb,mi,Xo],q2=n=>Z2.find(zb(n)),Ky=new WeakMap;function Y2(n,e,t){for(const i in e){const o=e[i],l=t[i];if(ei(o))n.addValue(i,o);else if(ei(l))n.addValue(i,rs(o,{owner:n}));else if(l!==o)if(n.hasValue(i)){const u=n.getValue(i);u.liveStyle===!0?u.jump(o):u.hasAnimated||u.set(o)}else{const u=n.getStaticValue(i);n.addValue(i,rs(u!==void 0?u:o,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const $y=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class K2{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:l,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=fv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=ls.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,nn.render(this.render,!1,!0))};const{latestValues:f,renderState:m,onUpdate:_}=u;this.onUpdate=_,this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=Mf(t),this.isVariantNode=qw(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:x,...w}=this.scrapeMotionValuesFromProps(t,{},this);for(const E in w){const A=w[E];f[E]!==void 0&&ei(A)&&A.set(f[E],!1)}}mount(e){this.current=e,Ky.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),v1.current||X2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Cg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Ky.delete(this.current),this.projection&&this.projection.unmount(),Or(this.notifyUpdate),Or(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Ya.has(e),o=t.on("change",h=>{this.latestValues[e]=h,this.props.onUpdate&&nn.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),l=t.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{o(),l(),u&&u(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ec){const t=ec[e];if(!t)continue;const{isEnabled:i,Feature:o}=t;if(!this.features[e]&&o&&i(this.props)&&(this.features[e]=new o(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<$y.length;i++){const o=$y[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l="on"+o,u=e[l];u&&(this.propEventSubscriptions[o]=this.on(o,u))}this.prevMotionValues=Y2(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=rs(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let o=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return o!=null&&(typeof o=="string"&&(kb(o)||Pb(o))?o=parseFloat(o):!q2(o)&&Xo.test(t)&&(o=Ub(e,t)),this.setBaseTarget(e,ei(o)?o.get():o)),ei(o)?o.get():o}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let o;if(typeof i=="string"||typeof i=="object"){const u=X0(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);u&&(o=u[e])}if(i&&o!==void 0)return o;const l=this.getBaseTargetFromProps(this.props,e);return l!==void 0&&!ei(l)?l:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new ov),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class _1 extends K2{constructor(){super(...arguments),this.KeyframeResolver=Vb}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ei(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function $2(n){return window.getComputedStyle(n)}class J2 extends _1{constructor(){super(...arguments),this.type="html",this.renderInstance=ib}readValueFromInstance(e,t){if(Ya.has(t)){const i=hv(t);return i&&i.default||0}else{const i=$2(e),o=(eb(t)?i.getPropertyValue(t):i[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return o1(e,t)}build(e,t,i){Y0(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return Q0(e,t,i)}}class Q2 extends _1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ya.has(t)){const i=hv(t);return i&&i.default||0}return t=rb.has(t)?t:H0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return ab(e,t,i)}build(e,t,i){K0(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,o){sb(e,t,i,o)}mount(e){this.isSVGTag=J0(e.tagName),super.mount(e)}}const eR=(n,e)=>W0(n)?new Q2(e):new J2(e,{allowProjection:n!==ne.Fragment}),tR=PA({...MP,...G2,...D2,...W2},eR),gt=GT(tR);function nR(n,e,t){ne.useInsertionEffect(()=>n.on(e,t),[n,e,t])}function x1(n,e){let t;const i=()=>{const{currentTime:o}=e,u=(o===null?0:o.value)/100;t!==u&&n(u),t=u};return nn.update(i,!0),()=>Or(i)}const Hh=new WeakMap;let Bo;function iR(n,e){if(e){const{inlineSize:t,blockSize:i}=e[0];return{width:t,height:i}}else return n instanceof SVGElement&&"getBBox"in n?n.getBBox():{width:n.offsetWidth,height:n.offsetHeight}}function rR({target:n,contentRect:e,borderBoxSize:t}){var i;(i=Hh.get(n))===null||i===void 0||i.forEach(o=>{o({target:n,contentSize:e,get size(){return iR(n,t)}})})}function sR(n){n.forEach(rR)}function oR(){typeof ResizeObserver>"u"||(Bo=new ResizeObserver(sR))}function aR(n,e){Bo||oR();const t=gb(n);return t.forEach(i=>{let o=Hh.get(i);o||(o=new Set,Hh.set(i,o)),o.add(e),Bo==null||Bo.observe(i)}),()=>{t.forEach(i=>{const o=Hh.get(i);o==null||o.delete(e),o!=null&&o.size||Bo==null||Bo.unobserve(i)})}}const Gh=new Set;let Cu;function lR(){Cu=()=>{const n={width:window.innerWidth,height:window.innerHeight},e={target:window,size:n,contentSize:n};Gh.forEach(t=>t(e))},window.addEventListener("resize",Cu)}function cR(n){return Gh.add(n),Cu||lR(),()=>{Gh.delete(n),!Gh.size&&Cu&&(Cu=void 0)}}function uR(n,e){return typeof n=="function"?cR(n):aR(n,e)}const dR=50,Jy=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),hR=()=>({time:0,x:Jy(),y:Jy()}),fR={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function Qy(n,e,t,i){const o=t[e],{length:l,position:u}=fR[e],h=o.current,f=t.time;o.current=n[`scroll${u}`],o.scrollLength=n[`scroll${l}`]-n[`client${l}`],o.offset.length=0,o.offset[0]=0,o.offset[1]=o.scrollLength,o.progress=Ga(0,o.scrollLength,o.current);const m=i-f;o.velocity=m>dR?0:av(o.current-h,m)}function pR(n,e,t){Qy(n,"x",e,t),Qy(n,"y",e,t),e.time=t}function mR(n,e){const t={x:0,y:0};let i=n;for(;i&&i!==e;)if(i instanceof HTMLElement)t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;else if(i.tagName==="svg"){const o=i.getBoundingClientRect();i=i.parentElement;const l=i.getBoundingClientRect();t.x+=o.left-l.left,t.y+=o.top-l.top}else if(i instanceof SVGGraphicsElement){const{x:o,y:l}=i.getBBox();t.x+=o,t.y+=l;let u=null,h=i.parentNode;for(;!u;)h.tagName==="svg"&&(u=h),h=i.parentNode;i=u}else break;return t}const Pg={start:0,center:.5,end:1};function eS(n,e,t=0){let i=0;if(n in Pg&&(n=Pg[n]),typeof n=="string"){const o=parseFloat(n);n.endsWith("px")?i=o:n.endsWith("%")?n=o/100:n.endsWith("vw")?i=o/100*document.documentElement.clientWidth:n.endsWith("vh")?i=o/100*document.documentElement.clientHeight:n=o}return typeof n=="number"&&(i=e*n),t+i}const gR=[0,0];function vR(n,e,t,i){let o=Array.isArray(n)?n:gR,l=0,u=0;return typeof n=="number"?o=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?o=n.split(" "):o=[n,Pg[n]?n:"0"]),l=eS(o[0],t,i),u=eS(o[1],e),l-u}const _R={All:[[0,0],[1,1]]},xR={x:0,y:0};function yR(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function SR(n,e,t){const{offset:i=_R.All}=t,{target:o=n,axis:l="y"}=t,u=l==="y"?"height":"width",h=o!==n?mR(o,n):xR,f=o===n?{width:n.scrollWidth,height:n.scrollHeight}:yR(o),m={width:n.clientWidth,height:n.clientHeight};e[l].offset.length=0;let _=!e[l].interpolate;const x=i.length;for(let w=0;w<x;w++){const E=vR(i[w],m[u],f[u],h[l]);!_&&E!==e[l].interpolatorOffsets[w]&&(_=!0),e[l].offset[w]=E}_&&(e[l].interpolate=mv(e[l].offset,Yb(i),{clamp:!1}),e[l].interpolatorOffsets=[...e[l].offset]),e[l].progress=hs(0,1,e[l].interpolate(e[l].current))}function wR(n,e=n,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==n){let i=e;for(;i&&i!==n;)t.x.targetOffset+=i.offsetLeft,t.y.targetOffset+=i.offsetTop,i=i.offsetParent}t.x.targetLength=e===n?e.scrollWidth:e.clientWidth,t.y.targetLength=e===n?e.scrollHeight:e.clientHeight,t.x.containerLength=n.clientWidth,t.y.containerLength=n.clientHeight}function bR(n,e,t,i={}){return{measure:()=>wR(n,i.target,t),update:o=>{pR(n,t,o),(i.offset||i.target)&&SR(n,t,i)},notify:()=>e(t)}}const ou=new WeakMap,tS=new WeakMap,Mm=new WeakMap,nS=n=>n===document.documentElement?window:n;function vv(n,{container:e=document.documentElement,...t}={}){let i=Mm.get(e);i||(i=new Set,Mm.set(e,i));const o=hR(),l=bR(e,n,o,t);if(i.add(l),!ou.has(e)){const h=()=>{for(const w of i)w.measure()},f=()=>{for(const w of i)w.update(Wn.timestamp)},m=()=>{for(const w of i)w.notify()},_=()=>{nn.read(h,!1,!0),nn.read(f,!1,!0),nn.update(m,!1,!0)};ou.set(e,_);const x=nS(e);window.addEventListener("resize",_,{passive:!0}),e!==document.documentElement&&tS.set(e,uR(e,_)),x.addEventListener("scroll",_,{passive:!0})}const u=ou.get(e);return nn.read(u,!1,!0),()=>{var h;Or(u);const f=Mm.get(e);if(!f||(f.delete(l),f.size))return;const m=ou.get(e);ou.delete(e),m&&(nS(e).removeEventListener("scroll",m),(h=tS.get(e))===null||h===void 0||h(),window.removeEventListener("resize",m))}}function MR({source:n,container:e,axis:t="y"}){n&&(e=n);const i={value:0},o=vv(l=>{i.value=l[t].progress*100},{container:e,axis:t});return{currentTime:i,cancel:o}}const Em=new Map;function y1({source:n,container:e=document.documentElement,axis:t="y"}={}){n&&(e=n),Em.has(e)||Em.set(e,{});const i=Em.get(e);return i[t]||(i[t]=ub()?new ScrollTimeline({source:e,axis:t}):MR({source:e,axis:t})),i[t]}function ER(n){return n.length===2}function S1(n){return n&&(n.target||n.offset)}function TR(n,e){return ER(n)||S1(e)?vv(t=>{n(t[e.axis].progress,t)},e):x1(n,y1(e))}function AR(n,e){if(n.flatten(),S1(e))return n.pause(),vv(t=>{n.time=n.duration*t[e.axis].progress},e);{const t=y1(e);return n.attachTimeline?n.attachTimeline(t,i=>(i.pause(),x1(o=>{i.time=i.duration*o},t))):Ti}}function CR(n,{axis:e="y",...t}={}){const i={axis:e,...t};return typeof n=="function"?TR(n,i):AR(n,i)}function iS(n,e){OT(!!(!e||e.current))}const PR=()=>({scrollX:rs(0),scrollY:rs(0),scrollXProgress:rs(0),scrollYProgress:rs(0)});function _v({container:n,target:e,layoutEffect:t=!0,...i}={}){const o=dc(PR);return(t?Hu:ne.useEffect)(()=>(iS("target",e),iS("container",n),CR((u,{x:h,y:f})=>{o.scrollX.set(h.current),o.scrollXProgress.set(h.progress),o.scrollY.set(f.current),o.scrollYProgress.set(f.progress)},{...i,container:(n==null?void 0:n.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[n,e,JSON.stringify(i.offset)]),o}function w1(n){const e=dc(()=>rs(n)),{isStatic:t}=ne.useContext(Vu);if(t){const[,i]=ne.useState(n);ne.useEffect(()=>e.on("change",i),[])}return e}function b1(n,e){const t=w1(e()),i=()=>t.set(e());return i(),Hu(()=>{const o=()=>nn.preRender(i,!1,!0),l=n.map(u=>u.on("change",o));return()=>{l.forEach(u=>u()),Or(i)}}),t}function rS(n){return typeof n=="number"?n:parseFloat(n)}function RR(n,e={}){const{isStatic:t}=ne.useContext(Vu),i=ne.useRef(null),o=w1(ei(n)?rS(n.get()):n),l=ne.useRef(o.get()),u=ne.useRef(()=>{}),h=()=>{const m=i.current;m&&m.time===0&&m.sample(Wn.delta),f(),i.current=$C({keyframes:[o.get(),l.current],velocity:o.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...e,onUpdate:u.current})},f=()=>{i.current&&i.current.stop()};return ne.useInsertionEffect(()=>o.attach((m,_)=>t?_(m):(l.current=m,u.current=_,nn.update(h),o.get()),f),[JSON.stringify(e)]),Hu(()=>{if(ei(n))return n.on("change",m=>o.set(rS(m)))},[o]),o}const NR=n=>n&&typeof n=="object"&&n.mix,LR=n=>NR(n)?n.mix:void 0;function DR(...n){const e=!Array.isArray(n[0]),t=e?0:-1,i=n[0+t],o=n[1+t],l=n[2+t],u=n[3+t],h=mv(o,l,{mixer:LR(l[0]),...u});return e?h(i):h}function IR(n){bu.current=[],n();const e=b1(bu.current,n);return bu.current=void 0,e}function Kl(n,e,t,i){if(typeof n=="function")return IR(n);const o=typeof e=="function"?e:DR(e,t,i);return Array.isArray(n)?sS(n,o):sS([n],([l])=>o(l))}function sS(n,e){const t=dc(()=>[]);return b1(n,()=>{t.length=0;const i=n.length;for(let o=0;o<i;o++)t[o]=n[o].get();return e(t)})}function M1(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=M1(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function UR(){for(var n,e,t=0,i="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=M1(n))&&(i&&(i+=" "),i+=e);return i}const xv="-",OR=n=>{const e=kR(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:u=>{const h=u.split(xv);return h[0]===""&&h.length!==1&&h.shift(),E1(h,e)||FR(u)},getConflictingClassGroupIds:(u,h)=>{const f=t[u]||[];return h&&i[u]?[...f,...i[u]]:f}}},E1=(n,e)=>{var u;if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),o=i?E1(n.slice(1),i):void 0;if(o)return o;if(e.validators.length===0)return;const l=n.join(xv);return(u=e.validators.find(({validator:h})=>h(l)))==null?void 0:u.classGroupId},oS=/^\[(.+)\]$/,FR=n=>{if(oS.test(n)){const e=oS.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},kR=n=>{const{theme:e,prefix:t}=n,i={nextPart:new Map,validators:[]};return zR(Object.entries(n.classGroups),t).forEach(([l,u])=>{Rg(u,i,l,e)}),i},Rg=(n,e,t,i)=>{n.forEach(o=>{if(typeof o=="string"){const l=o===""?e:aS(e,o);l.classGroupId=t;return}if(typeof o=="function"){if(BR(o)){Rg(o(i),e,t,i);return}e.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([l,u])=>{Rg(u,aS(e,l),t,i)})})},aS=(n,e)=>{let t=n;return e.split(xv).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},BR=n=>n.isThemeGetter,zR=(n,e)=>e?n.map(([t,i])=>{const o=i.map(l=>typeof l=="string"?e+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([u,h])=>[e+u,h])):l);return[t,o]}):n,jR=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const o=(l,u)=>{t.set(l,u),e++,e>n&&(e=0,i=t,t=new Map)};return{get(l){let u=t.get(l);if(u!==void 0)return u;if((u=i.get(l))!==void 0)return o(l,u),u},set(l,u){t.has(l)?t.set(l,u):o(l,u)}}},T1="!",VR=n=>{const{separator:e,experimentalParseClassName:t}=n,i=e.length===1,o=e[0],l=e.length,u=h=>{const f=[];let m=0,_=0,x;for(let b=0;b<h.length;b++){let M=h[b];if(m===0){if(M===o&&(i||h.slice(b,b+l)===e)){f.push(h.slice(_,b)),_=b+l;continue}if(M==="/"){x=b;continue}}M==="["?m++:M==="]"&&m--}const w=f.length===0?h:h.substring(_),E=w.startsWith(T1),A=E?w.substring(1):w,P=x&&x>_?x-_:void 0;return{modifiers:f,hasImportantModifier:E,baseClassName:A,maybePostfixModifierPosition:P}};return t?h=>t({className:h,parseClassName:u}):u},HR=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(i=>{i[0]==="["?(e.push(...t.sort(),i),t=[]):t.push(i)}),e.push(...t.sort()),e},GR=n=>({cache:jR(n.cacheSize),parseClassName:VR(n),...OR(n)}),WR=/\s+/,XR=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:o}=e,l=[],u=n.trim().split(WR);let h="";for(let f=u.length-1;f>=0;f-=1){const m=u[f],{modifiers:_,hasImportantModifier:x,baseClassName:w,maybePostfixModifierPosition:E}=t(m);let A=!!E,P=i(A?w.substring(0,E):w);if(!P){if(!A){h=m+(h.length>0?" "+h:h);continue}if(P=i(w),!P){h=m+(h.length>0?" "+h:h);continue}A=!1}const b=HR(_).join(":"),M=x?b+T1:b,O=M+P;if(l.includes(O))continue;l.push(O);const U=o(P,A);for(let k=0;k<U.length;++k){const B=U[k];l.push(M+B)}h=m+(h.length>0?" "+h:h)}return h};function ZR(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=A1(e))&&(i&&(i+=" "),i+=t);return i}const A1=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=A1(n[i]))&&(t&&(t+=" "),t+=e);return t};function qR(n,...e){let t,i,o,l=u;function u(f){const m=e.reduce((_,x)=>x(_),n());return t=GR(m),i=t.cache.get,o=t.cache.set,l=h,h(f)}function h(f){const m=i(f);if(m)return m;const _=XR(f,t);return o(f,_),_}return function(){return l(ZR.apply(null,arguments))}}const Sn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},C1=/^\[(?:([a-z-]+):)?(.+)\]$/i,YR=/^\d+\/\d+$/,KR=new Set(["px","full","screen"]),$R=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,QR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,eN=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tN=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Is=n=>$l(n)||KR.has(n)||YR.test(n),Ro=n=>pc(n,"length",cN),$l=n=>!!n&&!Number.isNaN(Number(n)),Tm=n=>pc(n,"number",$l),au=n=>!!n&&Number.isInteger(Number(n)),nN=n=>n.endsWith("%")&&$l(n.slice(0,-1)),kt=n=>C1.test(n),No=n=>$R.test(n),iN=new Set(["length","size","percentage"]),rN=n=>pc(n,iN,P1),sN=n=>pc(n,"position",P1),oN=new Set(["image","url"]),aN=n=>pc(n,oN,dN),lN=n=>pc(n,"",uN),lu=()=>!0,pc=(n,e,t)=>{const i=C1.exec(n);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):t(i[2]):!1},cN=n=>JR.test(n)&&!QR.test(n),P1=()=>!1,uN=n=>eN.test(n),dN=n=>tN.test(n),hN=()=>{const n=Sn("colors"),e=Sn("spacing"),t=Sn("blur"),i=Sn("brightness"),o=Sn("borderColor"),l=Sn("borderRadius"),u=Sn("borderSpacing"),h=Sn("borderWidth"),f=Sn("contrast"),m=Sn("grayscale"),_=Sn("hueRotate"),x=Sn("invert"),w=Sn("gap"),E=Sn("gradientColorStops"),A=Sn("gradientColorStopPositions"),P=Sn("inset"),b=Sn("margin"),M=Sn("opacity"),O=Sn("padding"),U=Sn("saturate"),k=Sn("scale"),B=Sn("sepia"),H=Sn("skew"),G=Sn("space"),$=Sn("translate"),I=()=>["auto","contain","none"],z=()=>["auto","hidden","clip","visible","scroll"],q=()=>["auto",kt,e],re=()=>[kt,e],ue=()=>["",Is,Ro],ge=()=>["auto",$l,kt],Se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ae=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>["start","end","center","between","around","evenly","stretch"],we=()=>["","0",kt],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>[$l,kt];return{cacheSize:500,separator:":",theme:{colors:[lu],spacing:[Is,Ro],blur:["none","",No,kt],brightness:j(),borderColor:[n],borderRadius:["none","","full",No,kt],borderSpacing:re(),borderWidth:ue(),contrast:j(),grayscale:we(),hueRotate:j(),invert:we(),gap:re(),gradientColorStops:[n],gradientColorStopPositions:[nN,Ro],inset:q(),margin:q(),opacity:j(),padding:re(),saturate:j(),scale:j(),sepia:we(),skew:j(),space:re(),translate:re()},classGroups:{aspect:[{aspect:["auto","square","video",kt]}],container:["container"],columns:[{columns:[No]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Se(),kt]}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[P]}],"inset-x":[{"inset-x":[P]}],"inset-y":[{"inset-y":[P]}],start:[{start:[P]}],end:[{end:[P]}],top:[{top:[P]}],right:[{right:[P]}],bottom:[{bottom:[P]}],left:[{left:[P]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",au,kt]}],basis:[{basis:q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",kt]}],grow:[{grow:we()}],shrink:[{shrink:we()}],order:[{order:["first","last","none",au,kt]}],"grid-cols":[{"grid-cols":[lu]}],"col-start-end":[{col:["auto",{span:["full",au,kt]},kt]}],"col-start":[{"col-start":ge()}],"col-end":[{"col-end":ge()}],"grid-rows":[{"grid-rows":[lu]}],"row-start-end":[{row:["auto",{span:[au,kt]},kt]}],"row-start":[{"row-start":ge()}],"row-end":[{"row-end":ge()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",kt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",kt]}],gap:[{gap:[w]}],"gap-x":[{"gap-x":[w]}],"gap-y":[{"gap-y":[w]}],"justify-content":[{justify:["normal",...X()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...X(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...X(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[O]}],px:[{px:[O]}],py:[{py:[O]}],ps:[{ps:[O]}],pe:[{pe:[O]}],pt:[{pt:[O]}],pr:[{pr:[O]}],pb:[{pb:[O]}],pl:[{pl:[O]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[G]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[G]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",kt,e]}],"min-w":[{"min-w":[kt,e,"min","max","fit"]}],"max-w":[{"max-w":[kt,e,"none","full","min","max","fit","prose",{screen:[No]},No]}],h:[{h:[kt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[kt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[kt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[kt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",No,Ro]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Tm]}],"font-family":[{font:[lu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",kt]}],"line-clamp":[{"line-clamp":["none",$l,Tm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Is,kt]}],"list-image":[{"list-image":["none",kt]}],"list-style-type":[{list:["none","disc","decimal",kt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[M]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[M]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Is,Ro]}],"underline-offset":[{"underline-offset":["auto",Is,kt]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:re()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",kt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",kt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[M]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Se(),sN]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",rN]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},aN]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[A]}],"gradient-via-pos":[{via:[A]}],"gradient-to-pos":[{to:[A]}],"gradient-from":[{from:[E]}],"gradient-via":[{via:[E]}],"gradient-to":[{to:[E]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[h]}],"border-w-x":[{"border-x":[h]}],"border-w-y":[{"border-y":[h]}],"border-w-s":[{"border-s":[h]}],"border-w-e":[{"border-e":[h]}],"border-w-t":[{"border-t":[h]}],"border-w-r":[{"border-r":[h]}],"border-w-b":[{"border-b":[h]}],"border-w-l":[{"border-l":[h]}],"border-opacity":[{"border-opacity":[M]}],"border-style":[{border:[...ae(),"hidden"]}],"divide-x":[{"divide-x":[h]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[h]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[M]}],"divide-style":[{divide:ae()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...ae()]}],"outline-offset":[{"outline-offset":[Is,kt]}],"outline-w":[{outline:[Is,Ro]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:ue()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[M]}],"ring-offset-w":[{"ring-offset":[Is,Ro]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",No,lN]}],"shadow-color":[{shadow:[lu]}],opacity:[{opacity:[M]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[i]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",No,kt]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[_]}],invert:[{invert:[x]}],saturate:[{saturate:[U]}],sepia:[{sepia:[B]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[_]}],"backdrop-invert":[{"backdrop-invert":[x]}],"backdrop-opacity":[{"backdrop-opacity":[M]}],"backdrop-saturate":[{"backdrop-saturate":[U]}],"backdrop-sepia":[{"backdrop-sepia":[B]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[u]}],"border-spacing-x":[{"border-spacing-x":[u]}],"border-spacing-y":[{"border-spacing-y":[u]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",kt]}],duration:[{duration:j()}],ease:[{ease:["linear","in","out","in-out",kt]}],delay:[{delay:j()}],animate:[{animate:["none","spin","ping","pulse","bounce",kt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[au,kt]}],"translate-x":[{"translate-x":[$]}],"translate-y":[{"translate-y":[$]}],"skew-x":[{"skew-x":[H]}],"skew-y":[{"skew-y":[H]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",kt]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",kt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":re()}],"scroll-mx":[{"scroll-mx":re()}],"scroll-my":[{"scroll-my":re()}],"scroll-ms":[{"scroll-ms":re()}],"scroll-me":[{"scroll-me":re()}],"scroll-mt":[{"scroll-mt":re()}],"scroll-mr":[{"scroll-mr":re()}],"scroll-mb":[{"scroll-mb":re()}],"scroll-ml":[{"scroll-ml":re()}],"scroll-p":[{"scroll-p":re()}],"scroll-px":[{"scroll-px":re()}],"scroll-py":[{"scroll-py":re()}],"scroll-ps":[{"scroll-ps":re()}],"scroll-pe":[{"scroll-pe":re()}],"scroll-pt":[{"scroll-pt":re()}],"scroll-pr":[{"scroll-pr":re()}],"scroll-pb":[{"scroll-pb":re()}],"scroll-pl":[{"scroll-pl":re()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",kt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Is,Ro,Tm]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},fN=qR(hN);function on(...n){return fN(UR(n))}function Va(n){return(typeof n=="string"?new Date(n):n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Cf(n){const e=typeof n=="string"?new Date(n):n,t=Math.floor((new Date().getTime()-e.getTime())/1e3);let i=t/31536e3;return i>1?Math.floor(i)+" years ago":(i=t/2592e3,i>1?Math.floor(i)+" months ago":(i=t/86400,i>1?Math.floor(i)+" days ago":(i=t/3600,i>1?Math.floor(i)+" hours ago":(i=t/60,i>1?Math.floor(i)+" minutes ago":"just now"))))}function Ng(n,e){return n.length<=e?n:n.slice(0,e)+"..."}const pN=({navItems:n,className:e})=>{const{scrollY:t}=_v(),[i,o]=ne.useState(!1);return nR(t,"change",l=>{typeof l=="number"&&(l>50?o(!0):o(!1))}),v.jsx(Sf,{mode:"wait",children:v.jsxs(gt.div,{initial:{opacity:1,y:-100},animate:{y:i?0:-100,opacity:i?1:0},transition:{duration:.2},className:on("flex max-w-fit fixed top-8 left-8 border border-neutral-800 rounded-full bg-neutral-900/80 backdrop-blur-md shadow-2xl z-[5000] px-8 py-3 items-center justify-center space-x-4",e),children:[n.map((l,u)=>v.jsxs(Ot,{to:l.link,className:on("relative items-center flex space-x-1 text-neutral-400 hover:text-neutral-100 transition-colors"),children:[v.jsx("span",{className:"block sm:hidden",children:l.icon}),v.jsx("span",{className:"hidden sm:block text-sm",children:l.name})]},`link=${u}`)),v.jsxs(Ot,{to:"/login",className:"border text-sm font-medium relative border-neutral-700 text-neutral-100 px-4 py-2 rounded-full hover:bg-neutral-800 transition-colors",children:[v.jsx("span",{children:"Login"}),v.jsx("span",{className:"absolute inset-x-0 w-1/2 mx-auto -bottom-px bg-gradient-to-r from-transparent via-lime-500 to-transparent h-px"})]})]})})},mN=({items:n,className:e})=>v.jsx("div",{className:on("h-[30rem] flex flex-col items-center justify-center bg-transparent w-full",e),children:v.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6 max-w-7xl mx-auto w-full h-full overflow-hidden relative group/strip",children:[v.jsx("div",{className:"absolute top-0 w-full h-20 bg-gradient-to-b from-neutral-900 via-neutral-900/80 to-transparent z-10 pointer-events-none"}),v.jsx("div",{className:"absolute bottom-0 w-full h-20 bg-gradient-to-t from-neutral-900 via-neutral-900/80 to-transparent z-10 pointer-events-none"}),v.jsx(Am,{items:n.slice(0,2),duration:60}),v.jsx(Am,{items:n.slice(2,4),duration:75,reverse:!0}),v.jsx(Am,{items:n.slice(4,6),duration:55})]})}),Am=({items:n,duration:e,reverse:t=!1})=>v.jsx("div",{className:"flex flex-col gap-6 relative h-full group/marquee",children:v.jsx("div",{style:{"--duration":`${e}s`,animationDirection:t?"reverse":"normal"},className:"flex flex-col gap-6 animate-marquee-vertical group-hover/marquee:[animation-play-state:paused]",children:[...n,...n,...n,...n].map((i,o)=>v.jsx("div",{className:"flex-shrink-0",children:i},o))})});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Dt=(n,e)=>{const t=ne.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:h="",children:f,...m},_)=>ne.createElement("svg",{ref:_,...gN,width:o,height:o,stroke:i,strokeWidth:u?Number(l)*24/Number(o):l,className:["lucide",`lucide-${vN(n)}`,h].join(" "),...m},[...e.map(([x,w])=>ne.createElement(x,w)),...Array.isArray(f)?f:[f]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=Dt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=Dt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=Dt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=Dt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=Dt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=Dt("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=Dt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=Dt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=Dt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=Dt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=Dt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=Dt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=Dt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=Dt("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=Dt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=Dt("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=Dt("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=Dt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=Dt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=Dt("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=Dt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=Dt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=Dt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=Dt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=Dt("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=Dt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Dt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=Dt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Dt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=Dt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=Dt("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=Dt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=Dt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Dt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=Dt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=Dt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=Dt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Dt("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=Dt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=Dt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=Dt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Dt("Vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=Dt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=Dt("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const bv="182",kN=0,uS=1,BN=2,Xh=1,zN=2,yu=3,Zo=0,zi=1,zs=2,Gs=0,Jl=1,dS=2,hS=3,fS=4,jN=5,Ua=100,VN=101,HN=102,GN=103,WN=104,XN=200,ZN=201,qN=202,YN=203,Ig=204,Ug=205,KN=206,$N=207,JN=208,QN=209,eL=210,tL=211,nL=212,iL=213,rL=214,Og=0,Fg=1,kg=2,rc=3,Bg=4,zg=5,jg=6,Vg=7,I1=0,sL=1,oL=2,cs=0,U1=1,O1=2,F1=3,k1=4,B1=5,z1=6,j1=7,V1=300,Xa=301,sc=302,Hg=303,Gg=304,Nf=306,Wg=1e3,js=1001,Xg=1002,oi=1003,aL=1004,gh=1005,vi=1006,Cm=1007,ka=1008,xr=1009,H1=1010,G1=1011,Ou=1012,Mv=1013,fs=1014,ss=1015,qs=1016,Ev=1017,Tv=1018,Fu=1020,W1=35902,X1=35899,Z1=1021,q1=1022,Ur=1023,Ys=1026,Ba=1027,Y1=1028,Av=1029,oc=1030,Cv=1031,Pv=1033,Zh=33776,qh=33777,Yh=33778,Kh=33779,Zg=35840,qg=35841,Yg=35842,Kg=35843,$g=36196,Jg=37492,Qg=37496,e0=37488,t0=37489,n0=37490,i0=37491,r0=37808,s0=37809,o0=37810,a0=37811,l0=37812,c0=37813,u0=37814,d0=37815,h0=37816,f0=37817,p0=37818,m0=37819,g0=37820,v0=37821,_0=36492,x0=36494,y0=36495,S0=36283,w0=36284,b0=36285,M0=36286,lL=3200,cL=0,uL=1,jo="",_r="srgb",ac="srgb-linear",ff="linear",ln="srgb",Nl=7680,pS=519,dL=512,hL=513,fL=514,Rv=515,pL=516,mL=517,Nv=518,gL=519,mS=35044,gS="300 es",os=2e3,pf=2001;function K1(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function mf(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function vL(){const n=mf("canvas");return n.style.display="block",n}const vS={};function _S(...n){const e="THREE."+n.shift();console.log(e,...n)}function Lt(...n){const e="THREE."+n.shift();console.warn(e,...n)}function tn(...n){const e="THREE."+n.shift();console.error(e,...n)}function ku(...n){const e=n.join(" ");e in vS||(vS[e]=!0,Lt(...n))}function _L(n,e,t){return new Promise(function(i,o){function l(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:o();break;case n.TIMEOUT_EXPIRED:setTimeout(l,t);break;default:i()}}setTimeout(l,t)})}class gc{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const o=i[e];if(o!==void 0){const l=o.indexOf(t);l!==-1&&o.splice(l,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const o=i.slice(0);for(let l=0,u=o.length;l<u;l++)o[l].call(this,e);e.target=null}}}const fi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Pm=Math.PI/180,E0=180/Math.PI;function qu(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(fi[n&255]+fi[n>>8&255]+fi[n>>16&255]+fi[n>>24&255]+"-"+fi[e&255]+fi[e>>8&255]+"-"+fi[e>>16&15|64]+fi[e>>24&255]+"-"+fi[t&63|128]+fi[t>>8&255]+"-"+fi[t>>16&255]+fi[t>>24&255]+fi[i&255]+fi[i>>8&255]+fi[i>>16&255]+fi[i>>24&255]).toLowerCase()}function Kt(n,e,t){return Math.max(e,Math.min(t,n))}function xL(n,e){return(n%e+e)%e}function Rm(n,e,t){return(1-t)*n+t*e}function cu(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Bi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}class cn{constructor(e=0,t=0){cn.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6],this.y=o[1]*t+o[4]*i+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Kt(this.x,e.x,t.x),this.y=Kt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Kt(this.x,e,t),this.y=Kt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Kt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Kt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),o=Math.sin(t),l=this.x-e.x,u=this.y-e.y;return this.x=l*i-u*o+e.x,this.y=l*o+u*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Yu{constructor(e=0,t=0,i=0,o=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=o}static slerpFlat(e,t,i,o,l,u,h){let f=i[o+0],m=i[o+1],_=i[o+2],x=i[o+3],w=l[u+0],E=l[u+1],A=l[u+2],P=l[u+3];if(h<=0){e[t+0]=f,e[t+1]=m,e[t+2]=_,e[t+3]=x;return}if(h>=1){e[t+0]=w,e[t+1]=E,e[t+2]=A,e[t+3]=P;return}if(x!==P||f!==w||m!==E||_!==A){let b=f*w+m*E+_*A+x*P;b<0&&(w=-w,E=-E,A=-A,P=-P,b=-b);let M=1-h;if(b<.9995){const O=Math.acos(b),U=Math.sin(O);M=Math.sin(M*O)/U,h=Math.sin(h*O)/U,f=f*M+w*h,m=m*M+E*h,_=_*M+A*h,x=x*M+P*h}else{f=f*M+w*h,m=m*M+E*h,_=_*M+A*h,x=x*M+P*h;const O=1/Math.sqrt(f*f+m*m+_*_+x*x);f*=O,m*=O,_*=O,x*=O}}e[t]=f,e[t+1]=m,e[t+2]=_,e[t+3]=x}static multiplyQuaternionsFlat(e,t,i,o,l,u){const h=i[o],f=i[o+1],m=i[o+2],_=i[o+3],x=l[u],w=l[u+1],E=l[u+2],A=l[u+3];return e[t]=h*A+_*x+f*E-m*w,e[t+1]=f*A+_*w+m*x-h*E,e[t+2]=m*A+_*E+h*w-f*x,e[t+3]=_*A-h*x-f*w-m*E,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,o){return this._x=e,this._y=t,this._z=i,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,o=e._y,l=e._z,u=e._order,h=Math.cos,f=Math.sin,m=h(i/2),_=h(o/2),x=h(l/2),w=f(i/2),E=f(o/2),A=f(l/2);switch(u){case"XYZ":this._x=w*_*x+m*E*A,this._y=m*E*x-w*_*A,this._z=m*_*A+w*E*x,this._w=m*_*x-w*E*A;break;case"YXZ":this._x=w*_*x+m*E*A,this._y=m*E*x-w*_*A,this._z=m*_*A-w*E*x,this._w=m*_*x+w*E*A;break;case"ZXY":this._x=w*_*x-m*E*A,this._y=m*E*x+w*_*A,this._z=m*_*A+w*E*x,this._w=m*_*x-w*E*A;break;case"ZYX":this._x=w*_*x-m*E*A,this._y=m*E*x+w*_*A,this._z=m*_*A-w*E*x,this._w=m*_*x+w*E*A;break;case"YZX":this._x=w*_*x+m*E*A,this._y=m*E*x+w*_*A,this._z=m*_*A-w*E*x,this._w=m*_*x-w*E*A;break;case"XZY":this._x=w*_*x-m*E*A,this._y=m*E*x-w*_*A,this._z=m*_*A+w*E*x,this._w=m*_*x+w*E*A;break;default:Lt("Quaternion: .setFromEuler() encountered an unknown order: "+u)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,o=Math.sin(i);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],o=t[4],l=t[8],u=t[1],h=t[5],f=t[9],m=t[2],_=t[6],x=t[10],w=i+h+x;if(w>0){const E=.5/Math.sqrt(w+1);this._w=.25/E,this._x=(_-f)*E,this._y=(l-m)*E,this._z=(u-o)*E}else if(i>h&&i>x){const E=2*Math.sqrt(1+i-h-x);this._w=(_-f)/E,this._x=.25*E,this._y=(o+u)/E,this._z=(l+m)/E}else if(h>x){const E=2*Math.sqrt(1+h-i-x);this._w=(l-m)/E,this._x=(o+u)/E,this._y=.25*E,this._z=(f+_)/E}else{const E=2*Math.sqrt(1+x-i-h);this._w=(u-o)/E,this._x=(l+m)/E,this._y=(f+_)/E,this._z=.25*E}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Kt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const o=Math.min(1,t/i);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,o=e._y,l=e._z,u=e._w,h=t._x,f=t._y,m=t._z,_=t._w;return this._x=i*_+u*h+o*m-l*f,this._y=o*_+u*f+l*h-i*m,this._z=l*_+u*m+i*f-o*h,this._w=u*_-i*h-o*f-l*m,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,o=e._y,l=e._z,u=e._w,h=this.dot(e);h<0&&(i=-i,o=-o,l=-l,u=-u,h=-h);let f=1-t;if(h<.9995){const m=Math.acos(h),_=Math.sin(m);f=Math.sin(f*m)/_,t=Math.sin(t*m)/_,this._x=this._x*f+i*t,this._y=this._y*f+o*t,this._z=this._z*f+l*t,this._w=this._w*f+u*t,this._onChangeCallback()}else this._x=this._x*f+i*t,this._y=this._y*f+o*t,this._z=this._z*f+l*t,this._w=this._w*f+u*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),o=Math.sqrt(1-i),l=Math.sqrt(i);return this.set(o*Math.sin(e),o*Math.cos(e),l*Math.sin(t),l*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class xe{constructor(e=0,t=0,i=0){xe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(xS.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(xS.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,o=this.z,l=e.elements;return this.x=l[0]*t+l[3]*i+l[6]*o,this.y=l[1]*t+l[4]*i+l[7]*o,this.z=l[2]*t+l[5]*i+l[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,o=this.z,l=e.elements,u=1/(l[3]*t+l[7]*i+l[11]*o+l[15]);return this.x=(l[0]*t+l[4]*i+l[8]*o+l[12])*u,this.y=(l[1]*t+l[5]*i+l[9]*o+l[13])*u,this.z=(l[2]*t+l[6]*i+l[10]*o+l[14])*u,this}applyQuaternion(e){const t=this.x,i=this.y,o=this.z,l=e.x,u=e.y,h=e.z,f=e.w,m=2*(u*o-h*i),_=2*(h*t-l*o),x=2*(l*i-u*t);return this.x=t+f*m+u*x-h*_,this.y=i+f*_+h*m-l*x,this.z=o+f*x+l*_-u*m,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,o=this.z,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*o,this.y=l[1]*t+l[5]*i+l[9]*o,this.z=l[2]*t+l[6]*i+l[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Kt(this.x,e.x,t.x),this.y=Kt(this.y,e.y,t.y),this.z=Kt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Kt(this.x,e,t),this.y=Kt(this.y,e,t),this.z=Kt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Kt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,o=e.y,l=e.z,u=t.x,h=t.y,f=t.z;return this.x=o*f-l*h,this.y=l*u-i*f,this.z=i*h-o*u,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Nm.copy(this).projectOnVector(e),this.sub(Nm)}reflect(e){return this.sub(Nm.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Kt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,o=this.z-e.z;return t*t+i*i+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const o=Math.sin(t)*e;return this.x=o*Math.sin(i),this.y=Math.cos(t)*e,this.z=o*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=o,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Nm=new xe,xS=new Yu;class Bt{constructor(e,t,i,o,l,u,h,f,m){Bt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,o,l,u,h,f,m)}set(e,t,i,o,l,u,h,f,m){const _=this.elements;return _[0]=e,_[1]=o,_[2]=h,_[3]=t,_[4]=l,_[5]=f,_[6]=i,_[7]=u,_[8]=m,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,o=t.elements,l=this.elements,u=i[0],h=i[3],f=i[6],m=i[1],_=i[4],x=i[7],w=i[2],E=i[5],A=i[8],P=o[0],b=o[3],M=o[6],O=o[1],U=o[4],k=o[7],B=o[2],H=o[5],G=o[8];return l[0]=u*P+h*O+f*B,l[3]=u*b+h*U+f*H,l[6]=u*M+h*k+f*G,l[1]=m*P+_*O+x*B,l[4]=m*b+_*U+x*H,l[7]=m*M+_*k+x*G,l[2]=w*P+E*O+A*B,l[5]=w*b+E*U+A*H,l[8]=w*M+E*k+A*G,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],o=e[2],l=e[3],u=e[4],h=e[5],f=e[6],m=e[7],_=e[8];return t*u*_-t*h*m-i*l*_+i*h*f+o*l*m-o*u*f}invert(){const e=this.elements,t=e[0],i=e[1],o=e[2],l=e[3],u=e[4],h=e[5],f=e[6],m=e[7],_=e[8],x=_*u-h*m,w=h*f-_*l,E=m*l-u*f,A=t*x+i*w+o*E;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);const P=1/A;return e[0]=x*P,e[1]=(o*m-_*i)*P,e[2]=(h*i-o*u)*P,e[3]=w*P,e[4]=(_*t-o*f)*P,e[5]=(o*l-h*t)*P,e[6]=E*P,e[7]=(i*f-m*t)*P,e[8]=(u*t-i*l)*P,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,o,l,u,h){const f=Math.cos(l),m=Math.sin(l);return this.set(i*f,i*m,-i*(f*u+m*h)+u+e,-o*m,o*f,-o*(-m*u+f*h)+h+t,0,0,1),this}scale(e,t){return this.premultiply(Lm.makeScale(e,t)),this}rotate(e){return this.premultiply(Lm.makeRotation(-e)),this}translate(e,t){return this.premultiply(Lm.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let o=0;o<9;o++)if(t[o]!==i[o])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Lm=new Bt,yS=new Bt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),SS=new Bt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function yL(){const n={enabled:!0,workingColorSpace:ac,spaces:{},convert:function(o,l,u){return this.enabled===!1||l===u||!l||!u||(this.spaces[l].transfer===ln&&(o.r=Ws(o.r),o.g=Ws(o.g),o.b=Ws(o.b)),this.spaces[l].primaries!==this.spaces[u].primaries&&(o.applyMatrix3(this.spaces[l].toXYZ),o.applyMatrix3(this.spaces[u].fromXYZ)),this.spaces[u].transfer===ln&&(o.r=Ql(o.r),o.g=Ql(o.g),o.b=Ql(o.b))),o},workingToColorSpace:function(o,l){return this.convert(o,this.workingColorSpace,l)},colorSpaceToWorking:function(o,l){return this.convert(o,l,this.workingColorSpace)},getPrimaries:function(o){return this.spaces[o].primaries},getTransfer:function(o){return o===jo?ff:this.spaces[o].transfer},getToneMappingMode:function(o){return this.spaces[o].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(o,l=this.workingColorSpace){return o.fromArray(this.spaces[l].luminanceCoefficients)},define:function(o){Object.assign(this.spaces,o)},_getMatrix:function(o,l,u){return o.copy(this.spaces[l].toXYZ).multiply(this.spaces[u].fromXYZ)},_getDrawingBufferColorSpace:function(o){return this.spaces[o].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(o=this.workingColorSpace){return this.spaces[o].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(o,l){return ku("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(o,l)},toWorkingColorSpace:function(o,l){return ku("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(o,l)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[ac]:{primaries:e,whitePoint:i,transfer:ff,toXYZ:yS,fromXYZ:SS,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:_r},outputColorSpaceConfig:{drawingBufferColorSpace:_r}},[_r]:{primaries:e,whitePoint:i,transfer:ln,toXYZ:yS,fromXYZ:SS,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:_r}}}),n}const Qt=yL();function Ws(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Ql(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ll;class SL{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Ll===void 0&&(Ll=mf("canvas")),Ll.width=e.width,Ll.height=e.height;const o=Ll.getContext("2d");e instanceof ImageData?o.putImageData(e,0,0):o.drawImage(e,0,0,e.width,e.height),i=Ll}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=mf("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const o=i.getImageData(0,0,e.width,e.height),l=o.data;for(let u=0;u<l.length;u++)l[u]=Ws(l[u]/255)*255;return i.putImageData(o,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ws(t[i]/255)*255):t[i]=Ws(t[i]);return{data:t,width:e.width,height:e.height}}else return Lt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let wL=0;class Lv{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:wL++}),this.uuid=qu(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},o=this.data;if(o!==null){let l;if(Array.isArray(o)){l=[];for(let u=0,h=o.length;u<h;u++)o[u].isDataTexture?l.push(Dm(o[u].image)):l.push(Dm(o[u]))}else l=Dm(o);i.url=l}return t||(e.images[this.uuid]=i),i}}function Dm(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?SL.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(Lt("Texture: Unable to serialize Texture."),{})}let bL=0;const Im=new xe;class Ai extends gc{constructor(e=Ai.DEFAULT_IMAGE,t=Ai.DEFAULT_MAPPING,i=js,o=js,l=vi,u=ka,h=Ur,f=xr,m=Ai.DEFAULT_ANISOTROPY,_=jo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:bL++}),this.uuid=qu(),this.name="",this.source=new Lv(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=o,this.magFilter=l,this.minFilter=u,this.anisotropy=m,this.format=h,this.internalFormat=null,this.type=f,this.offset=new cn(0,0),this.repeat=new cn(1,1),this.center=new cn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Bt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=_,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Im).x}get height(){return this.source.getSize(Im).y}get depth(){return this.source.getSize(Im).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){Lt(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const o=this[t];if(o===void 0){Lt(`Texture.setValues(): property '${t}' does not exist.`);continue}o&&i&&o.isVector2&&i.isVector2||o&&i&&o.isVector3&&i.isVector3||o&&i&&o.isMatrix3&&i.isMatrix3?o.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==V1)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Wg:e.x=e.x-Math.floor(e.x);break;case js:e.x=e.x<0?0:1;break;case Xg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Wg:e.y=e.y-Math.floor(e.y);break;case js:e.y=e.y<0?0:1;break;case Xg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ai.DEFAULT_IMAGE=null;Ai.DEFAULT_MAPPING=V1;Ai.DEFAULT_ANISOTROPY=1;class In{constructor(e=0,t=0,i=0,o=1){In.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,o){return this.x=e,this.y=t,this.z=i,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,o=this.z,l=this.w,u=e.elements;return this.x=u[0]*t+u[4]*i+u[8]*o+u[12]*l,this.y=u[1]*t+u[5]*i+u[9]*o+u[13]*l,this.z=u[2]*t+u[6]*i+u[10]*o+u[14]*l,this.w=u[3]*t+u[7]*i+u[11]*o+u[15]*l,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,o,l;const f=e.elements,m=f[0],_=f[4],x=f[8],w=f[1],E=f[5],A=f[9],P=f[2],b=f[6],M=f[10];if(Math.abs(_-w)<.01&&Math.abs(x-P)<.01&&Math.abs(A-b)<.01){if(Math.abs(_+w)<.1&&Math.abs(x+P)<.1&&Math.abs(A+b)<.1&&Math.abs(m+E+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const U=(m+1)/2,k=(E+1)/2,B=(M+1)/2,H=(_+w)/4,G=(x+P)/4,$=(A+b)/4;return U>k&&U>B?U<.01?(i=0,o=.707106781,l=.707106781):(i=Math.sqrt(U),o=H/i,l=G/i):k>B?k<.01?(i=.707106781,o=0,l=.707106781):(o=Math.sqrt(k),i=H/o,l=$/o):B<.01?(i=.707106781,o=.707106781,l=0):(l=Math.sqrt(B),i=G/l,o=$/l),this.set(i,o,l,t),this}let O=Math.sqrt((b-A)*(b-A)+(x-P)*(x-P)+(w-_)*(w-_));return Math.abs(O)<.001&&(O=1),this.x=(b-A)/O,this.y=(x-P)/O,this.z=(w-_)/O,this.w=Math.acos((m+E+M-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Kt(this.x,e.x,t.x),this.y=Kt(this.y,e.y,t.y),this.z=Kt(this.z,e.z,t.z),this.w=Kt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Kt(this.x,e,t),this.y=Kt(this.y,e,t),this.z=Kt(this.z,e,t),this.w=Kt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Kt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ML extends gc{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:vi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new In(0,0,e,t),this.scissorTest=!1,this.viewport=new In(0,0,e,t);const o={width:e,height:t,depth:i.depth},l=new Ai(o);this.textures=[];const u=i.count;for(let h=0;h<u;h++)this.textures[h]=l.clone(),this.textures[h].isRenderTargetTexture=!0,this.textures[h].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:vi,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let o=0,l=this.textures.length;o<l;o++)this.textures[o].image.width=e,this.textures[o].image.height=t,this.textures[o].image.depth=i,this.textures[o].isData3DTexture!==!0&&(this.textures[o].isArrayTexture=this.textures[o].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const o=Object.assign({},e.textures[t].image);this.textures[t].source=new Lv(o)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class us extends ML{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class $1 extends Ai{constructor(e=null,t=1,i=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:o},this.magFilter=oi,this.minFilter=oi,this.wrapR=js,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class EL extends Ai{constructor(e=null,t=1,i=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:o},this.magFilter=oi,this.minFilter=oi,this.wrapR=js,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ku{constructor(e=new xe(1/0,1/0,1/0),t=new xe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Pr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Pr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Pr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const l=i.getAttribute("position");if(t===!0&&l!==void 0&&e.isInstancedMesh!==!0)for(let u=0,h=l.count;u<h;u++)e.isMesh===!0?e.getVertexPosition(u,Pr):Pr.fromBufferAttribute(l,u),Pr.applyMatrix4(e.matrixWorld),this.expandByPoint(Pr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),vh.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),vh.copy(i.boundingBox)),vh.applyMatrix4(e.matrixWorld),this.union(vh)}const o=e.children;for(let l=0,u=o.length;l<u;l++)this.expandByObject(o[l],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Pr),Pr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(uu),_h.subVectors(this.max,uu),Dl.subVectors(e.a,uu),Il.subVectors(e.b,uu),Ul.subVectors(e.c,uu),Lo.subVectors(Il,Dl),Do.subVectors(Ul,Il),Ta.subVectors(Dl,Ul);let t=[0,-Lo.z,Lo.y,0,-Do.z,Do.y,0,-Ta.z,Ta.y,Lo.z,0,-Lo.x,Do.z,0,-Do.x,Ta.z,0,-Ta.x,-Lo.y,Lo.x,0,-Do.y,Do.x,0,-Ta.y,Ta.x,0];return!Um(t,Dl,Il,Ul,_h)||(t=[1,0,0,0,1,0,0,0,1],!Um(t,Dl,Il,Ul,_h))?!1:(xh.crossVectors(Lo,Do),t=[xh.x,xh.y,xh.z],Um(t,Dl,Il,Ul,_h))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Pr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Pr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Us[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Us[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Us[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Us[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Us[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Us[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Us[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Us[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Us),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Us=[new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe],Pr=new xe,vh=new Ku,Dl=new xe,Il=new xe,Ul=new xe,Lo=new xe,Do=new xe,Ta=new xe,uu=new xe,_h=new xe,xh=new xe,Aa=new xe;function Um(n,e,t,i,o){for(let l=0,u=n.length-3;l<=u;l+=3){Aa.fromArray(n,l);const h=o.x*Math.abs(Aa.x)+o.y*Math.abs(Aa.y)+o.z*Math.abs(Aa.z),f=e.dot(Aa),m=t.dot(Aa),_=i.dot(Aa);if(Math.max(-Math.max(f,m,_),Math.min(f,m,_))>h)return!1}return!0}const TL=new Ku,du=new xe,Om=new xe;class Dv{constructor(e=new xe,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):TL.setFromPoints(e).getCenter(i);let o=0;for(let l=0,u=e.length;l<u;l++)o=Math.max(o,i.distanceToSquared(e[l]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;du.subVectors(e,this.center);const t=du.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),o=(i-this.radius)*.5;this.center.addScaledVector(du,o/i),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Om.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(du.copy(e.center).add(Om)),this.expandByPoint(du.copy(e.center).sub(Om))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Os=new xe,Fm=new xe,yh=new xe,Io=new xe,km=new xe,Sh=new xe,Bm=new xe;class AL{constructor(e=new xe,t=new xe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Os)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Os.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Os.copy(this.origin).addScaledVector(this.direction,t),Os.distanceToSquared(e))}distanceSqToSegment(e,t,i,o){Fm.copy(e).add(t).multiplyScalar(.5),yh.copy(t).sub(e).normalize(),Io.copy(this.origin).sub(Fm);const l=e.distanceTo(t)*.5,u=-this.direction.dot(yh),h=Io.dot(this.direction),f=-Io.dot(yh),m=Io.lengthSq(),_=Math.abs(1-u*u);let x,w,E,A;if(_>0)if(x=u*f-h,w=u*h-f,A=l*_,x>=0)if(w>=-A)if(w<=A){const P=1/_;x*=P,w*=P,E=x*(x+u*w+2*h)+w*(u*x+w+2*f)+m}else w=l,x=Math.max(0,-(u*w+h)),E=-x*x+w*(w+2*f)+m;else w=-l,x=Math.max(0,-(u*w+h)),E=-x*x+w*(w+2*f)+m;else w<=-A?(x=Math.max(0,-(-u*l+h)),w=x>0?-l:Math.min(Math.max(-l,-f),l),E=-x*x+w*(w+2*f)+m):w<=A?(x=0,w=Math.min(Math.max(-l,-f),l),E=w*(w+2*f)+m):(x=Math.max(0,-(u*l+h)),w=x>0?l:Math.min(Math.max(-l,-f),l),E=-x*x+w*(w+2*f)+m);else w=u>0?-l:l,x=Math.max(0,-(u*w+h)),E=-x*x+w*(w+2*f)+m;return i&&i.copy(this.origin).addScaledVector(this.direction,x),o&&o.copy(Fm).addScaledVector(yh,w),E}intersectSphere(e,t){Os.subVectors(e.center,this.origin);const i=Os.dot(this.direction),o=Os.dot(Os)-i*i,l=e.radius*e.radius;if(o>l)return null;const u=Math.sqrt(l-o),h=i-u,f=i+u;return f<0?null:h<0?this.at(f,t):this.at(h,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,o,l,u,h,f;const m=1/this.direction.x,_=1/this.direction.y,x=1/this.direction.z,w=this.origin;return m>=0?(i=(e.min.x-w.x)*m,o=(e.max.x-w.x)*m):(i=(e.max.x-w.x)*m,o=(e.min.x-w.x)*m),_>=0?(l=(e.min.y-w.y)*_,u=(e.max.y-w.y)*_):(l=(e.max.y-w.y)*_,u=(e.min.y-w.y)*_),i>u||l>o||((l>i||isNaN(i))&&(i=l),(u<o||isNaN(o))&&(o=u),x>=0?(h=(e.min.z-w.z)*x,f=(e.max.z-w.z)*x):(h=(e.max.z-w.z)*x,f=(e.min.z-w.z)*x),i>f||h>o)||((h>i||i!==i)&&(i=h),(f<o||o!==o)&&(o=f),o<0)?null:this.at(i>=0?i:o,t)}intersectsBox(e){return this.intersectBox(e,Os)!==null}intersectTriangle(e,t,i,o,l){km.subVectors(t,e),Sh.subVectors(i,e),Bm.crossVectors(km,Sh);let u=this.direction.dot(Bm),h;if(u>0){if(o)return null;h=1}else if(u<0)h=-1,u=-u;else return null;Io.subVectors(this.origin,e);const f=h*this.direction.dot(Sh.crossVectors(Io,Sh));if(f<0)return null;const m=h*this.direction.dot(km.cross(Io));if(m<0||f+m>u)return null;const _=-h*Io.dot(Bm);return _<0?null:this.at(_/u,l)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class zn{constructor(e,t,i,o,l,u,h,f,m,_,x,w,E,A,P,b){zn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,o,l,u,h,f,m,_,x,w,E,A,P,b)}set(e,t,i,o,l,u,h,f,m,_,x,w,E,A,P,b){const M=this.elements;return M[0]=e,M[4]=t,M[8]=i,M[12]=o,M[1]=l,M[5]=u,M[9]=h,M[13]=f,M[2]=m,M[6]=_,M[10]=x,M[14]=w,M[3]=E,M[7]=A,M[11]=P,M[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,i=e.elements,o=1/Ol.setFromMatrixColumn(e,0).length(),l=1/Ol.setFromMatrixColumn(e,1).length(),u=1/Ol.setFromMatrixColumn(e,2).length();return t[0]=i[0]*o,t[1]=i[1]*o,t[2]=i[2]*o,t[3]=0,t[4]=i[4]*l,t[5]=i[5]*l,t[6]=i[6]*l,t[7]=0,t[8]=i[8]*u,t[9]=i[9]*u,t[10]=i[10]*u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,o=e.y,l=e.z,u=Math.cos(i),h=Math.sin(i),f=Math.cos(o),m=Math.sin(o),_=Math.cos(l),x=Math.sin(l);if(e.order==="XYZ"){const w=u*_,E=u*x,A=h*_,P=h*x;t[0]=f*_,t[4]=-f*x,t[8]=m,t[1]=E+A*m,t[5]=w-P*m,t[9]=-h*f,t[2]=P-w*m,t[6]=A+E*m,t[10]=u*f}else if(e.order==="YXZ"){const w=f*_,E=f*x,A=m*_,P=m*x;t[0]=w+P*h,t[4]=A*h-E,t[8]=u*m,t[1]=u*x,t[5]=u*_,t[9]=-h,t[2]=E*h-A,t[6]=P+w*h,t[10]=u*f}else if(e.order==="ZXY"){const w=f*_,E=f*x,A=m*_,P=m*x;t[0]=w-P*h,t[4]=-u*x,t[8]=A+E*h,t[1]=E+A*h,t[5]=u*_,t[9]=P-w*h,t[2]=-u*m,t[6]=h,t[10]=u*f}else if(e.order==="ZYX"){const w=u*_,E=u*x,A=h*_,P=h*x;t[0]=f*_,t[4]=A*m-E,t[8]=w*m+P,t[1]=f*x,t[5]=P*m+w,t[9]=E*m-A,t[2]=-m,t[6]=h*f,t[10]=u*f}else if(e.order==="YZX"){const w=u*f,E=u*m,A=h*f,P=h*m;t[0]=f*_,t[4]=P-w*x,t[8]=A*x+E,t[1]=x,t[5]=u*_,t[9]=-h*_,t[2]=-m*_,t[6]=E*x+A,t[10]=w-P*x}else if(e.order==="XZY"){const w=u*f,E=u*m,A=h*f,P=h*m;t[0]=f*_,t[4]=-x,t[8]=m*_,t[1]=w*x+P,t[5]=u*_,t[9]=E*x-A,t[2]=A*x-E,t[6]=h*_,t[10]=P*x+w}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(CL,e,PL)}lookAt(e,t,i){const o=this.elements;return Ji.subVectors(e,t),Ji.lengthSq()===0&&(Ji.z=1),Ji.normalize(),Uo.crossVectors(i,Ji),Uo.lengthSq()===0&&(Math.abs(i.z)===1?Ji.x+=1e-4:Ji.z+=1e-4,Ji.normalize(),Uo.crossVectors(i,Ji)),Uo.normalize(),wh.crossVectors(Ji,Uo),o[0]=Uo.x,o[4]=wh.x,o[8]=Ji.x,o[1]=Uo.y,o[5]=wh.y,o[9]=Ji.y,o[2]=Uo.z,o[6]=wh.z,o[10]=Ji.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,o=t.elements,l=this.elements,u=i[0],h=i[4],f=i[8],m=i[12],_=i[1],x=i[5],w=i[9],E=i[13],A=i[2],P=i[6],b=i[10],M=i[14],O=i[3],U=i[7],k=i[11],B=i[15],H=o[0],G=o[4],$=o[8],I=o[12],z=o[1],q=o[5],re=o[9],ue=o[13],ge=o[2],Se=o[6],ae=o[10],te=o[14],X=o[3],we=o[7],Q=o[11],j=o[15];return l[0]=u*H+h*z+f*ge+m*X,l[4]=u*G+h*q+f*Se+m*we,l[8]=u*$+h*re+f*ae+m*Q,l[12]=u*I+h*ue+f*te+m*j,l[1]=_*H+x*z+w*ge+E*X,l[5]=_*G+x*q+w*Se+E*we,l[9]=_*$+x*re+w*ae+E*Q,l[13]=_*I+x*ue+w*te+E*j,l[2]=A*H+P*z+b*ge+M*X,l[6]=A*G+P*q+b*Se+M*we,l[10]=A*$+P*re+b*ae+M*Q,l[14]=A*I+P*ue+b*te+M*j,l[3]=O*H+U*z+k*ge+B*X,l[7]=O*G+U*q+k*Se+B*we,l[11]=O*$+U*re+k*ae+B*Q,l[15]=O*I+U*ue+k*te+B*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],o=e[8],l=e[12],u=e[1],h=e[5],f=e[9],m=e[13],_=e[2],x=e[6],w=e[10],E=e[14],A=e[3],P=e[7],b=e[11],M=e[15],O=f*E-m*w,U=h*E-m*x,k=h*w-f*x,B=u*E-m*_,H=u*w-f*_,G=u*x-h*_;return t*(P*O-b*U+M*k)-i*(A*O-b*B+M*H)+o*(A*U-P*B+M*G)-l*(A*k-P*H+b*G)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=t,o[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],o=e[2],l=e[3],u=e[4],h=e[5],f=e[6],m=e[7],_=e[8],x=e[9],w=e[10],E=e[11],A=e[12],P=e[13],b=e[14],M=e[15],O=x*b*m-P*w*m+P*f*E-h*b*E-x*f*M+h*w*M,U=A*w*m-_*b*m-A*f*E+u*b*E+_*f*M-u*w*M,k=_*P*m-A*x*m+A*h*E-u*P*E-_*h*M+u*x*M,B=A*x*f-_*P*f-A*h*w+u*P*w+_*h*b-u*x*b,H=t*O+i*U+o*k+l*B;if(H===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const G=1/H;return e[0]=O*G,e[1]=(P*w*l-x*b*l-P*o*E+i*b*E+x*o*M-i*w*M)*G,e[2]=(h*b*l-P*f*l+P*o*m-i*b*m-h*o*M+i*f*M)*G,e[3]=(x*f*l-h*w*l-x*o*m+i*w*m+h*o*E-i*f*E)*G,e[4]=U*G,e[5]=(_*b*l-A*w*l+A*o*E-t*b*E-_*o*M+t*w*M)*G,e[6]=(A*f*l-u*b*l-A*o*m+t*b*m+u*o*M-t*f*M)*G,e[7]=(u*w*l-_*f*l+_*o*m-t*w*m-u*o*E+t*f*E)*G,e[8]=k*G,e[9]=(A*x*l-_*P*l-A*i*E+t*P*E+_*i*M-t*x*M)*G,e[10]=(u*P*l-A*h*l+A*i*m-t*P*m-u*i*M+t*h*M)*G,e[11]=(_*h*l-u*x*l-_*i*m+t*x*m+u*i*E-t*h*E)*G,e[12]=B*G,e[13]=(_*P*o-A*x*o+A*i*w-t*P*w-_*i*b+t*x*b)*G,e[14]=(A*h*o-u*P*o-A*i*f+t*P*f+u*i*b-t*h*b)*G,e[15]=(u*x*o-_*h*o+_*i*f-t*x*f-u*i*w+t*h*w)*G,this}scale(e){const t=this.elements,i=e.x,o=e.y,l=e.z;return t[0]*=i,t[4]*=o,t[8]*=l,t[1]*=i,t[5]*=o,t[9]*=l,t[2]*=i,t[6]*=o,t[10]*=l,t[3]*=i,t[7]*=o,t[11]*=l,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,o))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),o=Math.sin(t),l=1-i,u=e.x,h=e.y,f=e.z,m=l*u,_=l*h;return this.set(m*u+i,m*h-o*f,m*f+o*h,0,m*h+o*f,_*h+i,_*f-o*u,0,m*f-o*h,_*f+o*u,l*f*f+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,o,l,u){return this.set(1,i,l,0,e,1,u,0,t,o,1,0,0,0,0,1),this}compose(e,t,i){const o=this.elements,l=t._x,u=t._y,h=t._z,f=t._w,m=l+l,_=u+u,x=h+h,w=l*m,E=l*_,A=l*x,P=u*_,b=u*x,M=h*x,O=f*m,U=f*_,k=f*x,B=i.x,H=i.y,G=i.z;return o[0]=(1-(P+M))*B,o[1]=(E+k)*B,o[2]=(A-U)*B,o[3]=0,o[4]=(E-k)*H,o[5]=(1-(w+M))*H,o[6]=(b+O)*H,o[7]=0,o[8]=(A+U)*G,o[9]=(b-O)*G,o[10]=(1-(w+P))*G,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,t,i){const o=this.elements;if(e.x=o[12],e.y=o[13],e.z=o[14],this.determinant()===0)return i.set(1,1,1),t.identity(),this;let l=Ol.set(o[0],o[1],o[2]).length();const u=Ol.set(o[4],o[5],o[6]).length(),h=Ol.set(o[8],o[9],o[10]).length();this.determinant()<0&&(l=-l),Rr.copy(this);const m=1/l,_=1/u,x=1/h;return Rr.elements[0]*=m,Rr.elements[1]*=m,Rr.elements[2]*=m,Rr.elements[4]*=_,Rr.elements[5]*=_,Rr.elements[6]*=_,Rr.elements[8]*=x,Rr.elements[9]*=x,Rr.elements[10]*=x,t.setFromRotationMatrix(Rr),i.x=l,i.y=u,i.z=h,this}makePerspective(e,t,i,o,l,u,h=os,f=!1){const m=this.elements,_=2*l/(t-e),x=2*l/(i-o),w=(t+e)/(t-e),E=(i+o)/(i-o);let A,P;if(f)A=l/(u-l),P=u*l/(u-l);else if(h===os)A=-(u+l)/(u-l),P=-2*u*l/(u-l);else if(h===pf)A=-u/(u-l),P=-u*l/(u-l);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return m[0]=_,m[4]=0,m[8]=w,m[12]=0,m[1]=0,m[5]=x,m[9]=E,m[13]=0,m[2]=0,m[6]=0,m[10]=A,m[14]=P,m[3]=0,m[7]=0,m[11]=-1,m[15]=0,this}makeOrthographic(e,t,i,o,l,u,h=os,f=!1){const m=this.elements,_=2/(t-e),x=2/(i-o),w=-(t+e)/(t-e),E=-(i+o)/(i-o);let A,P;if(f)A=1/(u-l),P=u/(u-l);else if(h===os)A=-2/(u-l),P=-(u+l)/(u-l);else if(h===pf)A=-1/(u-l),P=-l/(u-l);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return m[0]=_,m[4]=0,m[8]=0,m[12]=w,m[1]=0,m[5]=x,m[9]=0,m[13]=E,m[2]=0,m[6]=0,m[10]=A,m[14]=P,m[3]=0,m[7]=0,m[11]=0,m[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let o=0;o<16;o++)if(t[o]!==i[o])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Ol=new xe,Rr=new zn,CL=new xe(0,0,0),PL=new xe(1,1,1),Uo=new xe,wh=new xe,Ji=new xe,wS=new zn,bS=new Yu;class Ks{constructor(e=0,t=0,i=0,o=Ks.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,o=this._order){return this._x=e,this._y=t,this._z=i,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const o=e.elements,l=o[0],u=o[4],h=o[8],f=o[1],m=o[5],_=o[9],x=o[2],w=o[6],E=o[10];switch(t){case"XYZ":this._y=Math.asin(Kt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-_,E),this._z=Math.atan2(-u,l)):(this._x=Math.atan2(w,m),this._z=0);break;case"YXZ":this._x=Math.asin(-Kt(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(h,E),this._z=Math.atan2(f,m)):(this._y=Math.atan2(-x,l),this._z=0);break;case"ZXY":this._x=Math.asin(Kt(w,-1,1)),Math.abs(w)<.9999999?(this._y=Math.atan2(-x,E),this._z=Math.atan2(-u,m)):(this._y=0,this._z=Math.atan2(f,l));break;case"ZYX":this._y=Math.asin(-Kt(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(w,E),this._z=Math.atan2(f,l)):(this._x=0,this._z=Math.atan2(-u,m));break;case"YZX":this._z=Math.asin(Kt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-_,m),this._y=Math.atan2(-x,l)):(this._x=0,this._y=Math.atan2(h,E));break;case"XZY":this._z=Math.asin(-Kt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(w,m),this._y=Math.atan2(h,l)):(this._x=Math.atan2(-_,E),this._y=0);break;default:Lt("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return wS.makeRotationFromQuaternion(e),this.setFromRotationMatrix(wS,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return bS.setFromEuler(this),this.setFromQuaternion(bS,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ks.DEFAULT_ORDER="XYZ";class J1{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let RL=0;const MS=new xe,Fl=new Yu,Fs=new zn,bh=new xe,hu=new xe,NL=new xe,LL=new Yu,ES=new xe(1,0,0),TS=new xe(0,1,0),AS=new xe(0,0,1),CS={type:"added"},DL={type:"removed"},kl={type:"childadded",child:null},zm={type:"childremoved",child:null};class er extends gc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:RL++}),this.uuid=qu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=er.DEFAULT_UP.clone();const e=new xe,t=new Ks,i=new Yu,o=new xe(1,1,1);function l(){i.setFromEuler(t,!1)}function u(){t.setFromQuaternion(i,void 0,!1)}t._onChange(l),i._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new zn},normalMatrix:{value:new Bt}}),this.matrix=new zn,this.matrixWorld=new zn,this.matrixAutoUpdate=er.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=er.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new J1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Fl.setFromAxisAngle(e,t),this.quaternion.multiply(Fl),this}rotateOnWorldAxis(e,t){return Fl.setFromAxisAngle(e,t),this.quaternion.premultiply(Fl),this}rotateX(e){return this.rotateOnAxis(ES,e)}rotateY(e){return this.rotateOnAxis(TS,e)}rotateZ(e){return this.rotateOnAxis(AS,e)}translateOnAxis(e,t){return MS.copy(e).applyQuaternion(this.quaternion),this.position.add(MS.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ES,e)}translateY(e){return this.translateOnAxis(TS,e)}translateZ(e){return this.translateOnAxis(AS,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fs.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?bh.copy(e):bh.set(e,t,i);const o=this.parent;this.updateWorldMatrix(!0,!1),hu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fs.lookAt(hu,bh,this.up):Fs.lookAt(bh,hu,this.up),this.quaternion.setFromRotationMatrix(Fs),o&&(Fs.extractRotation(o.matrixWorld),Fl.setFromRotationMatrix(Fs),this.quaternion.premultiply(Fl.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(tn("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(CS),kl.child=e,this.dispatchEvent(kl),kl.child=null):tn("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(DL),zm.child=e,this.dispatchEvent(zm),zm.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Fs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Fs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fs),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(CS),kl.child=e,this.dispatchEvent(kl),kl.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,o=this.children.length;i<o;i++){const u=this.children[i].getObjectByProperty(e,t);if(u!==void 0)return u}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const o=this.children;for(let l=0,u=o.length;l<u;l++)o[l].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hu,e,NL),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hu,LL,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,o=t.length;i<o;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,o=t.length;i<o;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,o=t.length;i<o;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const o=this.children;for(let l=0,u=o.length;l<u;l++)o[l].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.geometryInfo=this._geometryInfo.map(h=>({...h,boundingBox:h.boundingBox?h.boundingBox.toJSON():void 0,boundingSphere:h.boundingSphere?h.boundingSphere.toJSON():void 0})),o.instanceInfo=this._instanceInfo.map(h=>({...h})),o.availableInstanceIds=this._availableInstanceIds.slice(),o.availableGeometryIds=this._availableGeometryIds.slice(),o.nextIndexStart=this._nextIndexStart,o.nextVertexStart=this._nextVertexStart,o.geometryCount=this._geometryCount,o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.matricesTexture=this._matricesTexture.toJSON(e),o.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(o.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(o.boundingBox=this.boundingBox.toJSON()));function l(h,f){return h[f.uuid]===void 0&&(h[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=l(e.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const f=h.shapes;if(Array.isArray(f))for(let m=0,_=f.length;m<_;m++){const x=f[m];l(e.shapes,x)}else l(e.shapes,f)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let f=0,m=this.material.length;f<m;f++)h.push(l(e.materials,this.material[f]));o.material=h}else o.material=l(e.materials,this.material);if(this.children.length>0){o.children=[];for(let h=0;h<this.children.length;h++)o.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let h=0;h<this.animations.length;h++){const f=this.animations[h];o.animations.push(l(e.animations,f))}}if(t){const h=u(e.geometries),f=u(e.materials),m=u(e.textures),_=u(e.images),x=u(e.shapes),w=u(e.skeletons),E=u(e.animations),A=u(e.nodes);h.length>0&&(i.geometries=h),f.length>0&&(i.materials=f),m.length>0&&(i.textures=m),_.length>0&&(i.images=_),x.length>0&&(i.shapes=x),w.length>0&&(i.skeletons=w),E.length>0&&(i.animations=E),A.length>0&&(i.nodes=A)}return i.object=o,i;function u(h){const f=[];for(const m in h){const _=h[m];delete _.metadata,f.push(_)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const o=e.children[i];this.add(o.clone())}return this}}er.DEFAULT_UP=new xe(0,1,0);er.DEFAULT_MATRIX_AUTO_UPDATE=!0;er.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Nr=new xe,ks=new xe,jm=new xe,Bs=new xe,Bl=new xe,zl=new xe,PS=new xe,Vm=new xe,Hm=new xe,Gm=new xe,Wm=new In,Xm=new In,Zm=new In;class Ir{constructor(e=new xe,t=new xe,i=new xe){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,o){o.subVectors(i,t),Nr.subVectors(e,t),o.cross(Nr);const l=o.lengthSq();return l>0?o.multiplyScalar(1/Math.sqrt(l)):o.set(0,0,0)}static getBarycoord(e,t,i,o,l){Nr.subVectors(o,t),ks.subVectors(i,t),jm.subVectors(e,t);const u=Nr.dot(Nr),h=Nr.dot(ks),f=Nr.dot(jm),m=ks.dot(ks),_=ks.dot(jm),x=u*m-h*h;if(x===0)return l.set(0,0,0),null;const w=1/x,E=(m*f-h*_)*w,A=(u*_-h*f)*w;return l.set(1-E-A,A,E)}static containsPoint(e,t,i,o){return this.getBarycoord(e,t,i,o,Bs)===null?!1:Bs.x>=0&&Bs.y>=0&&Bs.x+Bs.y<=1}static getInterpolation(e,t,i,o,l,u,h,f){return this.getBarycoord(e,t,i,o,Bs)===null?(f.x=0,f.y=0,"z"in f&&(f.z=0),"w"in f&&(f.w=0),null):(f.setScalar(0),f.addScaledVector(l,Bs.x),f.addScaledVector(u,Bs.y),f.addScaledVector(h,Bs.z),f)}static getInterpolatedAttribute(e,t,i,o,l,u){return Wm.setScalar(0),Xm.setScalar(0),Zm.setScalar(0),Wm.fromBufferAttribute(e,t),Xm.fromBufferAttribute(e,i),Zm.fromBufferAttribute(e,o),u.setScalar(0),u.addScaledVector(Wm,l.x),u.addScaledVector(Xm,l.y),u.addScaledVector(Zm,l.z),u}static isFrontFacing(e,t,i,o){return Nr.subVectors(i,t),ks.subVectors(e,t),Nr.cross(ks).dot(o)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,o){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,t,i,o){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Nr.subVectors(this.c,this.b),ks.subVectors(this.a,this.b),Nr.cross(ks).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ir.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ir.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,o,l){return Ir.getInterpolation(e,this.a,this.b,this.c,t,i,o,l)}containsPoint(e){return Ir.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ir.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,o=this.b,l=this.c;let u,h;Bl.subVectors(o,i),zl.subVectors(l,i),Vm.subVectors(e,i);const f=Bl.dot(Vm),m=zl.dot(Vm);if(f<=0&&m<=0)return t.copy(i);Hm.subVectors(e,o);const _=Bl.dot(Hm),x=zl.dot(Hm);if(_>=0&&x<=_)return t.copy(o);const w=f*x-_*m;if(w<=0&&f>=0&&_<=0)return u=f/(f-_),t.copy(i).addScaledVector(Bl,u);Gm.subVectors(e,l);const E=Bl.dot(Gm),A=zl.dot(Gm);if(A>=0&&E<=A)return t.copy(l);const P=E*m-f*A;if(P<=0&&m>=0&&A<=0)return h=m/(m-A),t.copy(i).addScaledVector(zl,h);const b=_*A-E*x;if(b<=0&&x-_>=0&&E-A>=0)return PS.subVectors(l,o),h=(x-_)/(x-_+(E-A)),t.copy(o).addScaledVector(PS,h);const M=1/(b+P+w);return u=P*M,h=w*M,t.copy(i).addScaledVector(Bl,u).addScaledVector(zl,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Q1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Oo={h:0,s:0,l:0},Mh={h:0,s:0,l:0};function qm(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class pn{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const o=e;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=_r){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Qt.colorSpaceToWorking(this,t),this}setRGB(e,t,i,o=Qt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Qt.colorSpaceToWorking(this,o),this}setHSL(e,t,i,o=Qt.workingColorSpace){if(e=xL(e,1),t=Kt(t,0,1),i=Kt(i,0,1),t===0)this.r=this.g=this.b=i;else{const l=i<=.5?i*(1+t):i+t-i*t,u=2*i-l;this.r=qm(u,l,e+1/3),this.g=qm(u,l,e),this.b=qm(u,l,e-1/3)}return Qt.colorSpaceToWorking(this,o),this}setStyle(e,t=_r){function i(l){l!==void 0&&parseFloat(l)<1&&Lt("Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let l;const u=o[1],h=o[2];switch(u){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(l[4]),this.setRGB(Math.min(255,parseInt(l[1],10))/255,Math.min(255,parseInt(l[2],10))/255,Math.min(255,parseInt(l[3],10))/255,t);if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(l[4]),this.setRGB(Math.min(100,parseInt(l[1],10))/100,Math.min(100,parseInt(l[2],10))/100,Math.min(100,parseInt(l[3],10))/100,t);break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(l[4]),this.setHSL(parseFloat(l[1])/360,parseFloat(l[2])/100,parseFloat(l[3])/100,t);break;default:Lt("Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const l=o[1],u=l.length;if(u===3)return this.setRGB(parseInt(l.charAt(0),16)/15,parseInt(l.charAt(1),16)/15,parseInt(l.charAt(2),16)/15,t);if(u===6)return this.setHex(parseInt(l,16),t);Lt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=_r){const i=Q1[e.toLowerCase()];return i!==void 0?this.setHex(i,t):Lt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ws(e.r),this.g=Ws(e.g),this.b=Ws(e.b),this}copyLinearToSRGB(e){return this.r=Ql(e.r),this.g=Ql(e.g),this.b=Ql(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=_r){return Qt.workingToColorSpace(pi.copy(this),e),Math.round(Kt(pi.r*255,0,255))*65536+Math.round(Kt(pi.g*255,0,255))*256+Math.round(Kt(pi.b*255,0,255))}getHexString(e=_r){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Qt.workingColorSpace){Qt.workingToColorSpace(pi.copy(this),t);const i=pi.r,o=pi.g,l=pi.b,u=Math.max(i,o,l),h=Math.min(i,o,l);let f,m;const _=(h+u)/2;if(h===u)f=0,m=0;else{const x=u-h;switch(m=_<=.5?x/(u+h):x/(2-u-h),u){case i:f=(o-l)/x+(o<l?6:0);break;case o:f=(l-i)/x+2;break;case l:f=(i-o)/x+4;break}f/=6}return e.h=f,e.s=m,e.l=_,e}getRGB(e,t=Qt.workingColorSpace){return Qt.workingToColorSpace(pi.copy(this),t),e.r=pi.r,e.g=pi.g,e.b=pi.b,e}getStyle(e=_r){Qt.workingToColorSpace(pi.copy(this),e);const t=pi.r,i=pi.g,o=pi.b;return e!==_r?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(o*255)})`}offsetHSL(e,t,i){return this.getHSL(Oo),this.setHSL(Oo.h+e,Oo.s+t,Oo.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Oo),e.getHSL(Mh);const i=Rm(Oo.h,Mh.h,t),o=Rm(Oo.s,Mh.s,t),l=Rm(Oo.l,Mh.l,t);return this.setHSL(i,o,l),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,o=this.b,l=e.elements;return this.r=l[0]*t+l[3]*i+l[6]*o,this.g=l[1]*t+l[4]*i+l[7]*o,this.b=l[2]*t+l[5]*i+l[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const pi=new pn;pn.NAMES=Q1;let IL=0;class Lf extends gc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:IL++}),this.uuid=qu(),this.name="",this.type="Material",this.blending=Jl,this.side=Zo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Ig,this.blendDst=Ug,this.blendEquation=Ua,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new pn(0,0,0),this.blendAlpha=0,this.depthFunc=rc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=pS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Nl,this.stencilZFail=Nl,this.stencilZPass=Nl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){Lt(`Material: parameter '${t}' has value of undefined.`);continue}const o=this[t];if(o===void 0){Lt(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(i):o&&o.isVector3&&i&&i.isVector3?o.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Jl&&(i.blending=this.blending),this.side!==Zo&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Ig&&(i.blendSrc=this.blendSrc),this.blendDst!==Ug&&(i.blendDst=this.blendDst),this.blendEquation!==Ua&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==rc&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==pS&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Nl&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Nl&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Nl&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function o(l){const u=[];for(const h in l){const f=l[h];delete f.metadata,u.push(f)}return u}if(t){const l=o(e.textures),u=o(e.images);l.length>0&&(i.textures=l),u.length>0&&(i.images=u)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const o=t.length;i=new Array(o);for(let l=0;l!==o;++l)i[l]=t[l].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class eM extends Lf{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new pn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ks,this.combine=I1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const kn=new xe,Eh=new cn;let UL=0;class ds{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:UL++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=mS,this.updateRanges=[],this.gpuType=ss,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let o=0,l=this.itemSize;o<l;o++)this.array[e+o]=t.array[i+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Eh.fromBufferAttribute(this,t),Eh.applyMatrix3(e),this.setXY(t,Eh.x,Eh.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyMatrix3(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyMatrix4(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyNormalMatrix(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.transformDirection(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=cu(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Bi(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=cu(t,this.array)),t}setX(e,t){return this.normalized&&(t=Bi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=cu(t,this.array)),t}setY(e,t){return this.normalized&&(t=Bi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=cu(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Bi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=cu(t,this.array)),t}setW(e,t){return this.normalized&&(t=Bi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Bi(t,this.array),i=Bi(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,o){return e*=this.itemSize,this.normalized&&(t=Bi(t,this.array),i=Bi(i,this.array),o=Bi(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=o,this}setXYZW(e,t,i,o,l){return e*=this.itemSize,this.normalized&&(t=Bi(t,this.array),i=Bi(i,this.array),o=Bi(o,this.array),l=Bi(l,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=o,this.array[e+3]=l,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==mS&&(e.usage=this.usage),e}}class tM extends ds{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class nM extends ds{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Xs extends ds{constructor(e,t,i){super(new Float32Array(e),t,i)}}let OL=0;const gr=new zn,Ym=new er,jl=new xe,Qi=new Ku,fu=new Ku,Qn=new xe;class $s extends gc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:OL++}),this.uuid=qu(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(K1(e)?nM:tM)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const l=new Bt().getNormalMatrix(e);i.applyNormalMatrix(l),i.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return gr.makeRotationFromQuaternion(e),this.applyMatrix4(gr),this}rotateX(e){return gr.makeRotationX(e),this.applyMatrix4(gr),this}rotateY(e){return gr.makeRotationY(e),this.applyMatrix4(gr),this}rotateZ(e){return gr.makeRotationZ(e),this.applyMatrix4(gr),this}translate(e,t,i){return gr.makeTranslation(e,t,i),this.applyMatrix4(gr),this}scale(e,t,i){return gr.makeScale(e,t,i),this.applyMatrix4(gr),this}lookAt(e){return Ym.lookAt(e),Ym.updateMatrix(),this.applyMatrix4(Ym.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(jl).negate(),this.translate(jl.x,jl.y,jl.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];i.push(u.x,u.y,u.z||0)}this.setAttribute("position",new Xs(i,3))}else{const i=Math.min(e.length,t.count);for(let o=0;o<i;o++){const l=e[o];t.setXYZ(o,l.x,l.y,l.z||0)}e.length>t.count&&Lt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ku);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){tn("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new xe(-1/0,-1/0,-1/0),new xe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,o=t.length;i<o;i++){const l=t[i];Qi.setFromBufferAttribute(l),this.morphTargetsRelative?(Qn.addVectors(this.boundingBox.min,Qi.min),this.boundingBox.expandByPoint(Qn),Qn.addVectors(this.boundingBox.max,Qi.max),this.boundingBox.expandByPoint(Qn)):(this.boundingBox.expandByPoint(Qi.min),this.boundingBox.expandByPoint(Qi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&tn('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Dv);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){tn("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new xe,1/0);return}if(e){const i=this.boundingSphere.center;if(Qi.setFromBufferAttribute(e),t)for(let l=0,u=t.length;l<u;l++){const h=t[l];fu.setFromBufferAttribute(h),this.morphTargetsRelative?(Qn.addVectors(Qi.min,fu.min),Qi.expandByPoint(Qn),Qn.addVectors(Qi.max,fu.max),Qi.expandByPoint(Qn)):(Qi.expandByPoint(fu.min),Qi.expandByPoint(fu.max))}Qi.getCenter(i);let o=0;for(let l=0,u=e.count;l<u;l++)Qn.fromBufferAttribute(e,l),o=Math.max(o,i.distanceToSquared(Qn));if(t)for(let l=0,u=t.length;l<u;l++){const h=t[l],f=this.morphTargetsRelative;for(let m=0,_=h.count;m<_;m++)Qn.fromBufferAttribute(h,m),f&&(jl.fromBufferAttribute(e,m),Qn.add(jl)),o=Math.max(o,i.distanceToSquared(Qn))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&tn('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){tn("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,o=t.normal,l=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ds(new Float32Array(4*i.count),4));const u=this.getAttribute("tangent"),h=[],f=[];for(let $=0;$<i.count;$++)h[$]=new xe,f[$]=new xe;const m=new xe,_=new xe,x=new xe,w=new cn,E=new cn,A=new cn,P=new xe,b=new xe;function M($,I,z){m.fromBufferAttribute(i,$),_.fromBufferAttribute(i,I),x.fromBufferAttribute(i,z),w.fromBufferAttribute(l,$),E.fromBufferAttribute(l,I),A.fromBufferAttribute(l,z),_.sub(m),x.sub(m),E.sub(w),A.sub(w);const q=1/(E.x*A.y-A.x*E.y);isFinite(q)&&(P.copy(_).multiplyScalar(A.y).addScaledVector(x,-E.y).multiplyScalar(q),b.copy(x).multiplyScalar(E.x).addScaledVector(_,-A.x).multiplyScalar(q),h[$].add(P),h[I].add(P),h[z].add(P),f[$].add(b),f[I].add(b),f[z].add(b))}let O=this.groups;O.length===0&&(O=[{start:0,count:e.count}]);for(let $=0,I=O.length;$<I;++$){const z=O[$],q=z.start,re=z.count;for(let ue=q,ge=q+re;ue<ge;ue+=3)M(e.getX(ue+0),e.getX(ue+1),e.getX(ue+2))}const U=new xe,k=new xe,B=new xe,H=new xe;function G($){B.fromBufferAttribute(o,$),H.copy(B);const I=h[$];U.copy(I),U.sub(B.multiplyScalar(B.dot(I))).normalize(),k.crossVectors(H,I);const q=k.dot(f[$])<0?-1:1;u.setXYZW($,U.x,U.y,U.z,q)}for(let $=0,I=O.length;$<I;++$){const z=O[$],q=z.start,re=z.count;for(let ue=q,ge=q+re;ue<ge;ue+=3)G(e.getX(ue+0)),G(e.getX(ue+1)),G(e.getX(ue+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ds(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let w=0,E=i.count;w<E;w++)i.setXYZ(w,0,0,0);const o=new xe,l=new xe,u=new xe,h=new xe,f=new xe,m=new xe,_=new xe,x=new xe;if(e)for(let w=0,E=e.count;w<E;w+=3){const A=e.getX(w+0),P=e.getX(w+1),b=e.getX(w+2);o.fromBufferAttribute(t,A),l.fromBufferAttribute(t,P),u.fromBufferAttribute(t,b),_.subVectors(u,l),x.subVectors(o,l),_.cross(x),h.fromBufferAttribute(i,A),f.fromBufferAttribute(i,P),m.fromBufferAttribute(i,b),h.add(_),f.add(_),m.add(_),i.setXYZ(A,h.x,h.y,h.z),i.setXYZ(P,f.x,f.y,f.z),i.setXYZ(b,m.x,m.y,m.z)}else for(let w=0,E=t.count;w<E;w+=3)o.fromBufferAttribute(t,w+0),l.fromBufferAttribute(t,w+1),u.fromBufferAttribute(t,w+2),_.subVectors(u,l),x.subVectors(o,l),_.cross(x),i.setXYZ(w+0,_.x,_.y,_.z),i.setXYZ(w+1,_.x,_.y,_.z),i.setXYZ(w+2,_.x,_.y,_.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Qn.fromBufferAttribute(e,t),Qn.normalize(),e.setXYZ(t,Qn.x,Qn.y,Qn.z)}toNonIndexed(){function e(h,f){const m=h.array,_=h.itemSize,x=h.normalized,w=new m.constructor(f.length*_);let E=0,A=0;for(let P=0,b=f.length;P<b;P++){h.isInterleavedBufferAttribute?E=f[P]*h.data.stride+h.offset:E=f[P]*_;for(let M=0;M<_;M++)w[A++]=m[E++]}return new ds(w,_,x)}if(this.index===null)return Lt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new $s,i=this.index.array,o=this.attributes;for(const h in o){const f=o[h],m=e(f,i);t.setAttribute(h,m)}const l=this.morphAttributes;for(const h in l){const f=[],m=l[h];for(let _=0,x=m.length;_<x;_++){const w=m[_],E=e(w,i);f.push(E)}t.morphAttributes[h]=f}t.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let h=0,f=u.length;h<f;h++){const m=u[h];t.addGroup(m.start,m.count,m.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const m in f)f[m]!==void 0&&(e[m]=f[m]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const f in i){const m=i[f];e.data.attributes[f]=m.toJSON(e.data)}const o={};let l=!1;for(const f in this.morphAttributes){const m=this.morphAttributes[f],_=[];for(let x=0,w=m.length;x<w;x++){const E=m[x];_.push(E.toJSON(e.data))}_.length>0&&(o[f]=_,l=!0)}l&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(e.data.groups=JSON.parse(JSON.stringify(u)));const h=this.boundingSphere;return h!==null&&(e.data.boundingSphere=h.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const o=e.attributes;for(const m in o){const _=o[m];this.setAttribute(m,_.clone(t))}const l=e.morphAttributes;for(const m in l){const _=[],x=l[m];for(let w=0,E=x.length;w<E;w++)_.push(x[w].clone(t));this.morphAttributes[m]=_}this.morphTargetsRelative=e.morphTargetsRelative;const u=e.groups;for(let m=0,_=u.length;m<_;m++){const x=u[m];this.addGroup(x.start,x.count,x.materialIndex)}const h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const RS=new zn,Ca=new AL,Th=new Dv,NS=new xe,Ah=new xe,Ch=new xe,Ph=new xe,Km=new xe,Rh=new xe,LS=new xe,Nh=new xe;class ps extends er{constructor(e=new $s,t=new eM){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const o=t[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,u=o.length;l<u;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}getVertexPosition(e,t){const i=this.geometry,o=i.attributes.position,l=i.morphAttributes.position,u=i.morphTargetsRelative;t.fromBufferAttribute(o,e);const h=this.morphTargetInfluences;if(l&&h){Rh.set(0,0,0);for(let f=0,m=l.length;f<m;f++){const _=h[f],x=l[f];_!==0&&(Km.fromBufferAttribute(x,e),u?Rh.addScaledVector(Km,_):Rh.addScaledVector(Km.sub(t),_))}t.add(Rh)}return t}raycast(e,t){const i=this.geometry,o=this.material,l=this.matrixWorld;o!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Th.copy(i.boundingSphere),Th.applyMatrix4(l),Ca.copy(e.ray).recast(e.near),!(Th.containsPoint(Ca.origin)===!1&&(Ca.intersectSphere(Th,NS)===null||Ca.origin.distanceToSquared(NS)>(e.far-e.near)**2))&&(RS.copy(l).invert(),Ca.copy(e.ray).applyMatrix4(RS),!(i.boundingBox!==null&&Ca.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Ca)))}_computeIntersections(e,t,i){let o;const l=this.geometry,u=this.material,h=l.index,f=l.attributes.position,m=l.attributes.uv,_=l.attributes.uv1,x=l.attributes.normal,w=l.groups,E=l.drawRange;if(h!==null)if(Array.isArray(u))for(let A=0,P=w.length;A<P;A++){const b=w[A],M=u[b.materialIndex],O=Math.max(b.start,E.start),U=Math.min(h.count,Math.min(b.start+b.count,E.start+E.count));for(let k=O,B=U;k<B;k+=3){const H=h.getX(k),G=h.getX(k+1),$=h.getX(k+2);o=Lh(this,M,e,i,m,_,x,H,G,$),o&&(o.faceIndex=Math.floor(k/3),o.face.materialIndex=b.materialIndex,t.push(o))}}else{const A=Math.max(0,E.start),P=Math.min(h.count,E.start+E.count);for(let b=A,M=P;b<M;b+=3){const O=h.getX(b),U=h.getX(b+1),k=h.getX(b+2);o=Lh(this,u,e,i,m,_,x,O,U,k),o&&(o.faceIndex=Math.floor(b/3),t.push(o))}}else if(f!==void 0)if(Array.isArray(u))for(let A=0,P=w.length;A<P;A++){const b=w[A],M=u[b.materialIndex],O=Math.max(b.start,E.start),U=Math.min(f.count,Math.min(b.start+b.count,E.start+E.count));for(let k=O,B=U;k<B;k+=3){const H=k,G=k+1,$=k+2;o=Lh(this,M,e,i,m,_,x,H,G,$),o&&(o.faceIndex=Math.floor(k/3),o.face.materialIndex=b.materialIndex,t.push(o))}}else{const A=Math.max(0,E.start),P=Math.min(f.count,E.start+E.count);for(let b=A,M=P;b<M;b+=3){const O=b,U=b+1,k=b+2;o=Lh(this,u,e,i,m,_,x,O,U,k),o&&(o.faceIndex=Math.floor(b/3),t.push(o))}}}}function FL(n,e,t,i,o,l,u,h){let f;if(e.side===zi?f=i.intersectTriangle(u,l,o,!0,h):f=i.intersectTriangle(o,l,u,e.side===Zo,h),f===null)return null;Nh.copy(h),Nh.applyMatrix4(n.matrixWorld);const m=t.ray.origin.distanceTo(Nh);return m<t.near||m>t.far?null:{distance:m,point:Nh.clone(),object:n}}function Lh(n,e,t,i,o,l,u,h,f,m){n.getVertexPosition(h,Ah),n.getVertexPosition(f,Ch),n.getVertexPosition(m,Ph);const _=FL(n,e,t,i,Ah,Ch,Ph,LS);if(_){const x=new xe;Ir.getBarycoord(LS,Ah,Ch,Ph,x),o&&(_.uv=Ir.getInterpolatedAttribute(o,h,f,m,x,new cn)),l&&(_.uv1=Ir.getInterpolatedAttribute(l,h,f,m,x,new cn)),u&&(_.normal=Ir.getInterpolatedAttribute(u,h,f,m,x,new xe),_.normal.dot(i.direction)>0&&_.normal.multiplyScalar(-1));const w={a:h,b:f,c:m,normal:new xe,materialIndex:0};Ir.getNormal(Ah,Ch,Ph,w.normal),_.face=w,_.barycoord=x}return _}class $u extends $s{constructor(e=1,t=1,i=1,o=1,l=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:o,heightSegments:l,depthSegments:u};const h=this;o=Math.floor(o),l=Math.floor(l),u=Math.floor(u);const f=[],m=[],_=[],x=[];let w=0,E=0;A("z","y","x",-1,-1,i,t,e,u,l,0),A("z","y","x",1,-1,i,t,-e,u,l,1),A("x","z","y",1,1,e,i,t,o,u,2),A("x","z","y",1,-1,e,i,-t,o,u,3),A("x","y","z",1,-1,e,t,i,o,l,4),A("x","y","z",-1,-1,e,t,-i,o,l,5),this.setIndex(f),this.setAttribute("position",new Xs(m,3)),this.setAttribute("normal",new Xs(_,3)),this.setAttribute("uv",new Xs(x,2));function A(P,b,M,O,U,k,B,H,G,$,I){const z=k/G,q=B/$,re=k/2,ue=B/2,ge=H/2,Se=G+1,ae=$+1;let te=0,X=0;const we=new xe;for(let Q=0;Q<ae;Q++){const j=Q*q-ue;for(let he=0;he<Se;he++){const De=he*z-re;we[P]=De*O,we[b]=j*U,we[M]=ge,m.push(we.x,we.y,we.z),we[P]=0,we[b]=0,we[M]=H>0?1:-1,_.push(we.x,we.y,we.z),x.push(he/G),x.push(1-Q/$),te+=1}}for(let Q=0;Q<$;Q++)for(let j=0;j<G;j++){const he=w+j+Se*Q,De=w+j+Se*(Q+1),je=w+(j+1)+Se*(Q+1),ke=w+(j+1)+Se*Q;f.push(he,De,ke),f.push(De,je,ke),X+=6}h.addGroup(E,X,I),E+=X,w+=te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $u(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function lc(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const o=n[t][i];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(Lt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=o.clone():Array.isArray(o)?e[t][i]=o.slice():e[t][i]=o}}return e}function Ei(n){const e={};for(let t=0;t<n.length;t++){const i=lc(n[t]);for(const o in i)e[o]=i[o]}return e}function kL(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function iM(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Qt.workingColorSpace}const BL={clone:lc,merge:Ei};var zL=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,jL=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Fr extends Lf{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=zL,this.fragmentShader=jL,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=lc(e.uniforms),this.uniformsGroups=kL(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const o in this.uniforms){const u=this.uniforms[o].value;u&&u.isTexture?t.uniforms[o]={type:"t",value:u.toJSON(e).uuid}:u&&u.isColor?t.uniforms[o]={type:"c",value:u.getHex()}:u&&u.isVector2?t.uniforms[o]={type:"v2",value:u.toArray()}:u&&u.isVector3?t.uniforms[o]={type:"v3",value:u.toArray()}:u&&u.isVector4?t.uniforms[o]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?t.uniforms[o]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?t.uniforms[o]={type:"m4",value:u.toArray()}:t.uniforms[o]={value:u}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const o in this.extensions)this.extensions[o]===!0&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class rM extends er{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zn,this.projectionMatrix=new zn,this.projectionMatrixInverse=new zn,this.coordinateSystem=os,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Fo=new xe,DS=new cn,IS=new cn;class Dr extends rM{constructor(e=50,t=1,i=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=E0*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Pm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return E0*2*Math.atan(Math.tan(Pm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Fo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Fo.x,Fo.y).multiplyScalar(-e/Fo.z),Fo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Fo.x,Fo.y).multiplyScalar(-e/Fo.z)}getViewSize(e,t){return this.getViewBounds(e,DS,IS),t.subVectors(IS,DS)}setViewOffset(e,t,i,o,l,u){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=o,this.view.width=l,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Pm*.5*this.fov)/this.zoom,i=2*t,o=this.aspect*i,l=-.5*o;const u=this.view;if(this.view!==null&&this.view.enabled){const f=u.fullWidth,m=u.fullHeight;l+=u.offsetX*o/f,t-=u.offsetY*i/m,o*=u.width/f,i*=u.height/m}const h=this.filmOffset;h!==0&&(l+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+o,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Vl=-90,Hl=1;class VL extends er{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const o=new Dr(Vl,Hl,e,t);o.layers=this.layers,this.add(o);const l=new Dr(Vl,Hl,e,t);l.layers=this.layers,this.add(l);const u=new Dr(Vl,Hl,e,t);u.layers=this.layers,this.add(u);const h=new Dr(Vl,Hl,e,t);h.layers=this.layers,this.add(h);const f=new Dr(Vl,Hl,e,t);f.layers=this.layers,this.add(f);const m=new Dr(Vl,Hl,e,t);m.layers=this.layers,this.add(m)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,o,l,u,h,f]=t;for(const m of t)this.remove(m);if(e===os)i.up.set(0,1,0),i.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),l.up.set(0,0,-1),l.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(e===pf)i.up.set(0,-1,0),i.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),l.up.set(0,0,1),l.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const m of t)this.add(m),m.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:o}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[l,u,h,f,m,_]=this.children,x=e.getRenderTarget(),w=e.getActiveCubeFace(),E=e.getActiveMipmapLevel(),A=e.xr.enabled;e.xr.enabled=!1;const P=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,o),e.render(t,l),e.setRenderTarget(i,1,o),e.render(t,u),e.setRenderTarget(i,2,o),e.render(t,h),e.setRenderTarget(i,3,o),e.render(t,f),e.setRenderTarget(i,4,o),e.render(t,m),i.texture.generateMipmaps=P,e.setRenderTarget(i,5,o),e.render(t,_),e.setRenderTarget(x,w,E),e.xr.enabled=A,i.texture.needsPMREMUpdate=!0}}class sM extends Ai{constructor(e=[],t=Xa,i,o,l,u,h,f,m,_){super(e,t,i,o,l,u,h,f,m,_),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class oM extends us{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},o=[i,i,i,i,i,i];this.texture=new sM(o),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new $u(5,5,5),l=new Fr({name:"CubemapFromEquirect",uniforms:lc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:zi,blending:Gs});l.uniforms.tEquirect.value=t;const u=new ps(o,l),h=t.minFilter;return t.minFilter===ka&&(t.minFilter=vi),new VL(1,10,this).update(e,u),t.minFilter=h,u.geometry.dispose(),u.material.dispose(),this}clear(e,t=!0,i=!0,o=!0){const l=e.getRenderTarget();for(let u=0;u<6;u++)e.setRenderTarget(this,u),e.clear(t,i,o);e.setRenderTarget(l)}}class Dh extends er{constructor(){super(),this.isGroup=!0,this.type="Group"}}const HL={type:"move"};class $m{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Dh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Dh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new xe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new xe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Dh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new xe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new xe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let o=null,l=null,u=null;const h=this._targetRay,f=this._grip,m=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(m&&e.hand){u=!0;for(const P of e.hand.values()){const b=t.getJointPose(P,i),M=this._getHandJoint(m,P);b!==null&&(M.matrix.fromArray(b.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=b.radius),M.visible=b!==null}const _=m.joints["index-finger-tip"],x=m.joints["thumb-tip"],w=_.position.distanceTo(x.position),E=.02,A=.005;m.inputState.pinching&&w>E+A?(m.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!m.inputState.pinching&&w<=E-A&&(m.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(l=t.getPose(e.gripSpace,i),l!==null&&(f.matrix.fromArray(l.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,l.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(l.linearVelocity)):f.hasLinearVelocity=!1,l.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(l.angularVelocity)):f.hasAngularVelocity=!1));h!==null&&(o=t.getPose(e.targetRaySpace,i),o===null&&l!==null&&(o=l),o!==null&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(HL)))}return h!==null&&(h.visible=o!==null),f!==null&&(f.visible=l!==null),m!==null&&(m.visible=u!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Dh;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class GL extends er{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ks,this.environmentIntensity=1,this.environmentRotation=new Ks,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class WL extends Ai{constructor(e=null,t=1,i=1,o,l,u,h,f,m=oi,_=oi,x,w){super(null,u,h,f,m,_,o,l,x,w),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Jm=new xe,XL=new xe,ZL=new Bt;class Ia{constructor(e=new xe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,o){return this.normal.set(e,t,i),this.constant=o,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const o=Jm.subVectors(i,t).cross(XL.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Jm),o=this.normal.dot(i);if(o===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const l=-(e.start.dot(this.normal)+this.constant)/o;return l<0||l>1?null:t.copy(e.start).addScaledVector(i,l)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||ZL.getNormalMatrix(e),o=this.coplanarPoint(Jm).applyMatrix4(e),l=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(l),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Pa=new Dv,qL=new cn(.5,.5),Ih=new xe;class aM{constructor(e=new Ia,t=new Ia,i=new Ia,o=new Ia,l=new Ia,u=new Ia){this.planes=[e,t,i,o,l,u]}set(e,t,i,o,l,u){const h=this.planes;return h[0].copy(e),h[1].copy(t),h[2].copy(i),h[3].copy(o),h[4].copy(l),h[5].copy(u),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=os,i=!1){const o=this.planes,l=e.elements,u=l[0],h=l[1],f=l[2],m=l[3],_=l[4],x=l[5],w=l[6],E=l[7],A=l[8],P=l[9],b=l[10],M=l[11],O=l[12],U=l[13],k=l[14],B=l[15];if(o[0].setComponents(m-u,E-_,M-A,B-O).normalize(),o[1].setComponents(m+u,E+_,M+A,B+O).normalize(),o[2].setComponents(m+h,E+x,M+P,B+U).normalize(),o[3].setComponents(m-h,E-x,M-P,B-U).normalize(),i)o[4].setComponents(f,w,b,k).normalize(),o[5].setComponents(m-f,E-w,M-b,B-k).normalize();else if(o[4].setComponents(m-f,E-w,M-b,B-k).normalize(),t===os)o[5].setComponents(m+f,E+w,M+b,B+k).normalize();else if(t===pf)o[5].setComponents(f,w,b,k).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Pa.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Pa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Pa)}intersectsSprite(e){Pa.center.set(0,0,0);const t=qL.distanceTo(e.center);return Pa.radius=.7071067811865476+t,Pa.applyMatrix4(e.matrixWorld),this.intersectsSphere(Pa)}intersectsSphere(e){const t=this.planes,i=e.center,o=-e.radius;for(let l=0;l<6;l++)if(t[l].distanceToPoint(i)<o)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const o=t[i];if(Ih.x=o.normal.x>0?e.max.x:e.min.x,Ih.y=o.normal.y>0?e.max.y:e.min.y,Ih.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(Ih)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class Bu extends Ai{constructor(e,t,i=fs,o,l,u,h=oi,f=oi,m,_=Ys,x=1){if(_!==Ys&&_!==Ba)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const w={width:e,height:t,depth:x};super(w,o,l,u,h,f,_,i,m),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Lv(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class YL extends Bu{constructor(e,t=fs,i=Xa,o,l,u=oi,h=oi,f,m=Ys){const _={width:e,height:e,depth:1},x=[_,_,_,_,_,_];super(e,e,t,i,o,l,u,h,f,m),this.image=x,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class lM extends Ai{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Ju extends $s{constructor(e=1,t=1,i=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:o};const l=e/2,u=t/2,h=Math.floor(i),f=Math.floor(o),m=h+1,_=f+1,x=e/h,w=t/f,E=[],A=[],P=[],b=[];for(let M=0;M<_;M++){const O=M*w-u;for(let U=0;U<m;U++){const k=U*x-l;A.push(k,-O,0),P.push(0,0,1),b.push(U/h),b.push(1-M/f)}}for(let M=0;M<f;M++)for(let O=0;O<h;O++){const U=O+m*M,k=O+m*(M+1),B=O+1+m*(M+1),H=O+1+m*M;E.push(U,k,H),E.push(k,B,H)}this.setIndex(E),this.setAttribute("position",new Xs(A,3)),this.setAttribute("normal",new Xs(P,3)),this.setAttribute("uv",new Xs(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ju(e.width,e.height,e.widthSegments,e.heightSegments)}}class KL extends Fr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class $L extends Lf{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=lL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class JL extends Lf{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Iv extends rM{constructor(e=-1,t=1,i=1,o=-1,l=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=o,this.near=l,this.far=u,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,o,l,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=o,this.view.width=l,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let l=i-e,u=i+e,h=o+t,f=o-t;if(this.view!==null&&this.view.enabled){const m=(this.right-this.left)/this.view.fullWidth/this.zoom,_=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=m*this.view.offsetX,u=l+m*this.view.width,h-=_*this.view.offsetY,f=h-_*this.view.height}this.projectionMatrix.makeOrthographic(l,u,h,f,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class QL extends Dr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}function US(n,e,t,i){const o=e3(i);switch(t){case Z1:return n*e;case Y1:return n*e/o.components*o.byteLength;case Av:return n*e/o.components*o.byteLength;case oc:return n*e*2/o.components*o.byteLength;case Cv:return n*e*2/o.components*o.byteLength;case q1:return n*e*3/o.components*o.byteLength;case Ur:return n*e*4/o.components*o.byteLength;case Pv:return n*e*4/o.components*o.byteLength;case Zh:case qh:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Yh:case Kh:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case qg:case Kg:return Math.max(n,16)*Math.max(e,8)/4;case Zg:case Yg:return Math.max(n,8)*Math.max(e,8)/2;case $g:case Jg:case e0:case t0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Qg:case n0:case i0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case r0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case s0:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case o0:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case a0:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case l0:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case c0:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case u0:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case d0:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case h0:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case f0:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case p0:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case m0:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case g0:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case v0:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case _0:case x0:case y0:return Math.ceil(n/4)*Math.ceil(e/4)*16;case S0:case w0:return Math.ceil(n/4)*Math.ceil(e/4)*8;case b0:case M0:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function e3(n){switch(n){case xr:case H1:return{byteLength:1,components:1};case Ou:case G1:case qs:return{byteLength:2,components:1};case Ev:case Tv:return{byteLength:2,components:4};case fs:case Mv:case ss:return{byteLength:4,components:1};case W1:case X1:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:bv}}));typeof window<"u"&&(window.__THREE__?Lt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=bv);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function cM(){let n=null,e=!1,t=null,i=null;function o(l,u){t(l,u),i=n.requestAnimationFrame(o)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(o),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(l){t=l},setContext:function(l){n=l}}}function t3(n){const e=new WeakMap;function t(h,f){const m=h.array,_=h.usage,x=m.byteLength,w=n.createBuffer();n.bindBuffer(f,w),n.bufferData(f,m,_),h.onUploadCallback();let E;if(m instanceof Float32Array)E=n.FLOAT;else if(typeof Float16Array<"u"&&m instanceof Float16Array)E=n.HALF_FLOAT;else if(m instanceof Uint16Array)h.isFloat16BufferAttribute?E=n.HALF_FLOAT:E=n.UNSIGNED_SHORT;else if(m instanceof Int16Array)E=n.SHORT;else if(m instanceof Uint32Array)E=n.UNSIGNED_INT;else if(m instanceof Int32Array)E=n.INT;else if(m instanceof Int8Array)E=n.BYTE;else if(m instanceof Uint8Array)E=n.UNSIGNED_BYTE;else if(m instanceof Uint8ClampedArray)E=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);return{buffer:w,type:E,bytesPerElement:m.BYTES_PER_ELEMENT,version:h.version,size:x}}function i(h,f,m){const _=f.array,x=f.updateRanges;if(n.bindBuffer(m,h),x.length===0)n.bufferSubData(m,0,_);else{x.sort((E,A)=>E.start-A.start);let w=0;for(let E=1;E<x.length;E++){const A=x[w],P=x[E];P.start<=A.start+A.count+1?A.count=Math.max(A.count,P.start+P.count-A.start):(++w,x[w]=P)}x.length=w+1;for(let E=0,A=x.length;E<A;E++){const P=x[E];n.bufferSubData(m,P.start*_.BYTES_PER_ELEMENT,_,P.start,P.count)}f.clearUpdateRanges()}f.onUploadCallback()}function o(h){return h.isInterleavedBufferAttribute&&(h=h.data),e.get(h)}function l(h){h.isInterleavedBufferAttribute&&(h=h.data);const f=e.get(h);f&&(n.deleteBuffer(f.buffer),e.delete(h))}function u(h,f){if(h.isInterleavedBufferAttribute&&(h=h.data),h.isGLBufferAttribute){const _=e.get(h);(!_||_.version<h.version)&&e.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}const m=e.get(h);if(m===void 0)e.set(h,t(h,f));else if(m.version<h.version){if(m.size!==h.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(m.buffer,h,f),m.version=h.version}}return{get:o,remove:l,update:u}}var n3=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,i3=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,r3=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,s3=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,o3=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,a3=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,l3=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,c3=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,u3=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,d3=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,h3=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,f3=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,p3=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,m3=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,g3=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,v3=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,_3=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,x3=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,y3=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,S3=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,w3=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,b3=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,M3=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,E3=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,T3=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,A3=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,C3=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,P3=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,R3=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,N3=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,L3="gl_FragColor = linearToOutputTexel( gl_FragColor );",D3=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,I3=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,U3=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,O3=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,F3=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,k3=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,B3=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,z3=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,j3=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,V3=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,H3=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,G3=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,W3=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,X3=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Z3=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,q3=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Y3=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,K3=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,$3=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,J3=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Q3=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,eD=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,tD=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,nD=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,iD=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,rD=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,sD=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,oD=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,aD=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,lD=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,cD=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,uD=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,dD=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hD=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,fD=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,pD=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,mD=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,gD=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,vD=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,_D=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,xD=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,yD=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,SD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,wD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,bD=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,MD=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,ED=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,TD=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,AD=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,CD=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,PD=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,RD=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ND=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,LD=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,DD=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,ID=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,UD=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,OD=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,FD=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,kD=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,BD=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,zD=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,jD=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,VD=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,HD=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,GD=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,WD=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,XD=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ZD=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,qD=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,YD=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,KD=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,$D=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,JD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,QD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,eI=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const tI=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,nI=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,iI=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,rI=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sI=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,oI=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,aI=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,lI=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,cI=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,uI=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,dI=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,hI=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fI=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,pI=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,mI=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,gI=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vI=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_I=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xI=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,yI=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SI=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,wI=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,bI=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,MI=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EI=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,TI=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AI=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CI=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PI=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,RI=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,NI=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,LI=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,DI=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,II=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,jt={alphahash_fragment:n3,alphahash_pars_fragment:i3,alphamap_fragment:r3,alphamap_pars_fragment:s3,alphatest_fragment:o3,alphatest_pars_fragment:a3,aomap_fragment:l3,aomap_pars_fragment:c3,batching_pars_vertex:u3,batching_vertex:d3,begin_vertex:h3,beginnormal_vertex:f3,bsdfs:p3,iridescence_fragment:m3,bumpmap_pars_fragment:g3,clipping_planes_fragment:v3,clipping_planes_pars_fragment:_3,clipping_planes_pars_vertex:x3,clipping_planes_vertex:y3,color_fragment:S3,color_pars_fragment:w3,color_pars_vertex:b3,color_vertex:M3,common:E3,cube_uv_reflection_fragment:T3,defaultnormal_vertex:A3,displacementmap_pars_vertex:C3,displacementmap_vertex:P3,emissivemap_fragment:R3,emissivemap_pars_fragment:N3,colorspace_fragment:L3,colorspace_pars_fragment:D3,envmap_fragment:I3,envmap_common_pars_fragment:U3,envmap_pars_fragment:O3,envmap_pars_vertex:F3,envmap_physical_pars_fragment:q3,envmap_vertex:k3,fog_vertex:B3,fog_pars_vertex:z3,fog_fragment:j3,fog_pars_fragment:V3,gradientmap_pars_fragment:H3,lightmap_pars_fragment:G3,lights_lambert_fragment:W3,lights_lambert_pars_fragment:X3,lights_pars_begin:Z3,lights_toon_fragment:Y3,lights_toon_pars_fragment:K3,lights_phong_fragment:$3,lights_phong_pars_fragment:J3,lights_physical_fragment:Q3,lights_physical_pars_fragment:eD,lights_fragment_begin:tD,lights_fragment_maps:nD,lights_fragment_end:iD,logdepthbuf_fragment:rD,logdepthbuf_pars_fragment:sD,logdepthbuf_pars_vertex:oD,logdepthbuf_vertex:aD,map_fragment:lD,map_pars_fragment:cD,map_particle_fragment:uD,map_particle_pars_fragment:dD,metalnessmap_fragment:hD,metalnessmap_pars_fragment:fD,morphinstance_vertex:pD,morphcolor_vertex:mD,morphnormal_vertex:gD,morphtarget_pars_vertex:vD,morphtarget_vertex:_D,normal_fragment_begin:xD,normal_fragment_maps:yD,normal_pars_fragment:SD,normal_pars_vertex:wD,normal_vertex:bD,normalmap_pars_fragment:MD,clearcoat_normal_fragment_begin:ED,clearcoat_normal_fragment_maps:TD,clearcoat_pars_fragment:AD,iridescence_pars_fragment:CD,opaque_fragment:PD,packing:RD,premultiplied_alpha_fragment:ND,project_vertex:LD,dithering_fragment:DD,dithering_pars_fragment:ID,roughnessmap_fragment:UD,roughnessmap_pars_fragment:OD,shadowmap_pars_fragment:FD,shadowmap_pars_vertex:kD,shadowmap_vertex:BD,shadowmask_pars_fragment:zD,skinbase_vertex:jD,skinning_pars_vertex:VD,skinning_vertex:HD,skinnormal_vertex:GD,specularmap_fragment:WD,specularmap_pars_fragment:XD,tonemapping_fragment:ZD,tonemapping_pars_fragment:qD,transmission_fragment:YD,transmission_pars_fragment:KD,uv_pars_fragment:$D,uv_pars_vertex:JD,uv_vertex:QD,worldpos_vertex:eI,background_vert:tI,background_frag:nI,backgroundCube_vert:iI,backgroundCube_frag:rI,cube_vert:sI,cube_frag:oI,depth_vert:aI,depth_frag:lI,distance_vert:cI,distance_frag:uI,equirect_vert:dI,equirect_frag:hI,linedashed_vert:fI,linedashed_frag:pI,meshbasic_vert:mI,meshbasic_frag:gI,meshlambert_vert:vI,meshlambert_frag:_I,meshmatcap_vert:xI,meshmatcap_frag:yI,meshnormal_vert:SI,meshnormal_frag:wI,meshphong_vert:bI,meshphong_frag:MI,meshphysical_vert:EI,meshphysical_frag:TI,meshtoon_vert:AI,meshtoon_frag:CI,points_vert:PI,points_frag:RI,shadow_vert:NI,shadow_frag:LI,sprite_vert:DI,sprite_frag:II},Ke={common:{diffuse:{value:new pn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Bt},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Bt}},envmap:{envMap:{value:null},envMapRotation:{value:new Bt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Bt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Bt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Bt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Bt},normalScale:{value:new cn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Bt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Bt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Bt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Bt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0},uvTransform:{value:new Bt}},sprite:{diffuse:{value:new pn(16777215)},opacity:{value:1},center:{value:new cn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Bt},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0}}},is={basic:{uniforms:Ei([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.fog]),vertexShader:jt.meshbasic_vert,fragmentShader:jt.meshbasic_frag},lambert:{uniforms:Ei([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new pn(0)}}]),vertexShader:jt.meshlambert_vert,fragmentShader:jt.meshlambert_frag},phong:{uniforms:Ei([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new pn(0)},specular:{value:new pn(1118481)},shininess:{value:30}}]),vertexShader:jt.meshphong_vert,fragmentShader:jt.meshphong_frag},standard:{uniforms:Ei([Ke.common,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.roughnessmap,Ke.metalnessmap,Ke.fog,Ke.lights,{emissive:{value:new pn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:jt.meshphysical_vert,fragmentShader:jt.meshphysical_frag},toon:{uniforms:Ei([Ke.common,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.gradientmap,Ke.fog,Ke.lights,{emissive:{value:new pn(0)}}]),vertexShader:jt.meshtoon_vert,fragmentShader:jt.meshtoon_frag},matcap:{uniforms:Ei([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,{matcap:{value:null}}]),vertexShader:jt.meshmatcap_vert,fragmentShader:jt.meshmatcap_frag},points:{uniforms:Ei([Ke.points,Ke.fog]),vertexShader:jt.points_vert,fragmentShader:jt.points_frag},dashed:{uniforms:Ei([Ke.common,Ke.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:jt.linedashed_vert,fragmentShader:jt.linedashed_frag},depth:{uniforms:Ei([Ke.common,Ke.displacementmap]),vertexShader:jt.depth_vert,fragmentShader:jt.depth_frag},normal:{uniforms:Ei([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,{opacity:{value:1}}]),vertexShader:jt.meshnormal_vert,fragmentShader:jt.meshnormal_frag},sprite:{uniforms:Ei([Ke.sprite,Ke.fog]),vertexShader:jt.sprite_vert,fragmentShader:jt.sprite_frag},background:{uniforms:{uvTransform:{value:new Bt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:jt.background_vert,fragmentShader:jt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Bt}},vertexShader:jt.backgroundCube_vert,fragmentShader:jt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:jt.cube_vert,fragmentShader:jt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:jt.equirect_vert,fragmentShader:jt.equirect_frag},distance:{uniforms:Ei([Ke.common,Ke.displacementmap,{referencePosition:{value:new xe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:jt.distance_vert,fragmentShader:jt.distance_frag},shadow:{uniforms:Ei([Ke.lights,Ke.fog,{color:{value:new pn(0)},opacity:{value:1}}]),vertexShader:jt.shadow_vert,fragmentShader:jt.shadow_frag}};is.physical={uniforms:Ei([is.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Bt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Bt},clearcoatNormalScale:{value:new cn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Bt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Bt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Bt},sheen:{value:0},sheenColor:{value:new pn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Bt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Bt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Bt},transmissionSamplerSize:{value:new cn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Bt},attenuationDistance:{value:0},attenuationColor:{value:new pn(0)},specularColor:{value:new pn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Bt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Bt},anisotropyVector:{value:new cn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Bt}}]),vertexShader:jt.meshphysical_vert,fragmentShader:jt.meshphysical_frag};const Uh={r:0,b:0,g:0},Ra=new Ks,UI=new zn;function OI(n,e,t,i,o,l,u){const h=new pn(0);let f=l===!0?0:1,m,_,x=null,w=0,E=null;function A(U){let k=U.isScene===!0?U.background:null;return k&&k.isTexture&&(k=(U.backgroundBlurriness>0?t:e).get(k)),k}function P(U){let k=!1;const B=A(U);B===null?M(h,f):B&&B.isColor&&(M(B,1),k=!0);const H=n.xr.getEnvironmentBlendMode();H==="additive"?i.buffers.color.setClear(0,0,0,1,u):H==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,u),(n.autoClear||k)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function b(U,k){const B=A(k);B&&(B.isCubeTexture||B.mapping===Nf)?(_===void 0&&(_=new ps(new $u(1,1,1),new Fr({name:"BackgroundCubeMaterial",uniforms:lc(is.backgroundCube.uniforms),vertexShader:is.backgroundCube.vertexShader,fragmentShader:is.backgroundCube.fragmentShader,side:zi,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),_.geometry.deleteAttribute("normal"),_.geometry.deleteAttribute("uv"),_.onBeforeRender=function(H,G,$){this.matrixWorld.copyPosition($.matrixWorld)},Object.defineProperty(_.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(_)),Ra.copy(k.backgroundRotation),Ra.x*=-1,Ra.y*=-1,Ra.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(Ra.y*=-1,Ra.z*=-1),_.material.uniforms.envMap.value=B,_.material.uniforms.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,_.material.uniforms.backgroundBlurriness.value=k.backgroundBlurriness,_.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,_.material.uniforms.backgroundRotation.value.setFromMatrix4(UI.makeRotationFromEuler(Ra)),_.material.toneMapped=Qt.getTransfer(B.colorSpace)!==ln,(x!==B||w!==B.version||E!==n.toneMapping)&&(_.material.needsUpdate=!0,x=B,w=B.version,E=n.toneMapping),_.layers.enableAll(),U.unshift(_,_.geometry,_.material,0,0,null)):B&&B.isTexture&&(m===void 0&&(m=new ps(new Ju(2,2),new Fr({name:"BackgroundMaterial",uniforms:lc(is.background.uniforms),vertexShader:is.background.vertexShader,fragmentShader:is.background.fragmentShader,side:Zo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(m)),m.material.uniforms.t2D.value=B,m.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,m.material.toneMapped=Qt.getTransfer(B.colorSpace)!==ln,B.matrixAutoUpdate===!0&&B.updateMatrix(),m.material.uniforms.uvTransform.value.copy(B.matrix),(x!==B||w!==B.version||E!==n.toneMapping)&&(m.material.needsUpdate=!0,x=B,w=B.version,E=n.toneMapping),m.layers.enableAll(),U.unshift(m,m.geometry,m.material,0,0,null))}function M(U,k){U.getRGB(Uh,iM(n)),i.buffers.color.setClear(Uh.r,Uh.g,Uh.b,k,u)}function O(){_!==void 0&&(_.geometry.dispose(),_.material.dispose(),_=void 0),m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0)}return{getClearColor:function(){return h},setClearColor:function(U,k=1){h.set(U),f=k,M(h,f)},getClearAlpha:function(){return f},setClearAlpha:function(U){f=U,M(h,f)},render:P,addToRenderList:b,dispose:O}}function FI(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},o=w(null);let l=o,u=!1;function h(z,q,re,ue,ge){let Se=!1;const ae=x(ue,re,q);l!==ae&&(l=ae,m(l.object)),Se=E(z,ue,re,ge),Se&&A(z,ue,re,ge),ge!==null&&e.update(ge,n.ELEMENT_ARRAY_BUFFER),(Se||u)&&(u=!1,k(z,q,re,ue),ge!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ge).buffer))}function f(){return n.createVertexArray()}function m(z){return n.bindVertexArray(z)}function _(z){return n.deleteVertexArray(z)}function x(z,q,re){const ue=re.wireframe===!0;let ge=i[z.id];ge===void 0&&(ge={},i[z.id]=ge);let Se=ge[q.id];Se===void 0&&(Se={},ge[q.id]=Se);let ae=Se[ue];return ae===void 0&&(ae=w(f()),Se[ue]=ae),ae}function w(z){const q=[],re=[],ue=[];for(let ge=0;ge<t;ge++)q[ge]=0,re[ge]=0,ue[ge]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:q,enabledAttributes:re,attributeDivisors:ue,object:z,attributes:{},index:null}}function E(z,q,re,ue){const ge=l.attributes,Se=q.attributes;let ae=0;const te=re.getAttributes();for(const X in te)if(te[X].location>=0){const Q=ge[X];let j=Se[X];if(j===void 0&&(X==="instanceMatrix"&&z.instanceMatrix&&(j=z.instanceMatrix),X==="instanceColor"&&z.instanceColor&&(j=z.instanceColor)),Q===void 0||Q.attribute!==j||j&&Q.data!==j.data)return!0;ae++}return l.attributesNum!==ae||l.index!==ue}function A(z,q,re,ue){const ge={},Se=q.attributes;let ae=0;const te=re.getAttributes();for(const X in te)if(te[X].location>=0){let Q=Se[X];Q===void 0&&(X==="instanceMatrix"&&z.instanceMatrix&&(Q=z.instanceMatrix),X==="instanceColor"&&z.instanceColor&&(Q=z.instanceColor));const j={};j.attribute=Q,Q&&Q.data&&(j.data=Q.data),ge[X]=j,ae++}l.attributes=ge,l.attributesNum=ae,l.index=ue}function P(){const z=l.newAttributes;for(let q=0,re=z.length;q<re;q++)z[q]=0}function b(z){M(z,0)}function M(z,q){const re=l.newAttributes,ue=l.enabledAttributes,ge=l.attributeDivisors;re[z]=1,ue[z]===0&&(n.enableVertexAttribArray(z),ue[z]=1),ge[z]!==q&&(n.vertexAttribDivisor(z,q),ge[z]=q)}function O(){const z=l.newAttributes,q=l.enabledAttributes;for(let re=0,ue=q.length;re<ue;re++)q[re]!==z[re]&&(n.disableVertexAttribArray(re),q[re]=0)}function U(z,q,re,ue,ge,Se,ae){ae===!0?n.vertexAttribIPointer(z,q,re,ge,Se):n.vertexAttribPointer(z,q,re,ue,ge,Se)}function k(z,q,re,ue){P();const ge=ue.attributes,Se=re.getAttributes(),ae=q.defaultAttributeValues;for(const te in Se){const X=Se[te];if(X.location>=0){let we=ge[te];if(we===void 0&&(te==="instanceMatrix"&&z.instanceMatrix&&(we=z.instanceMatrix),te==="instanceColor"&&z.instanceColor&&(we=z.instanceColor)),we!==void 0){const Q=we.normalized,j=we.itemSize,he=e.get(we);if(he===void 0)continue;const De=he.buffer,je=he.type,ke=he.bytesPerElement,oe=je===n.INT||je===n.UNSIGNED_INT||we.gpuType===Mv;if(we.isInterleavedBufferAttribute){const be=we.data,Re=be.stride,nt=we.offset;if(be.isInstancedInterleavedBuffer){for(let qe=0;qe<X.locationSize;qe++)M(X.location+qe,be.meshPerAttribute);z.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let qe=0;qe<X.locationSize;qe++)b(X.location+qe);n.bindBuffer(n.ARRAY_BUFFER,De);for(let qe=0;qe<X.locationSize;qe++)U(X.location+qe,j/X.locationSize,je,Q,Re*ke,(nt+j/X.locationSize*qe)*ke,oe)}else{if(we.isInstancedBufferAttribute){for(let be=0;be<X.locationSize;be++)M(X.location+be,we.meshPerAttribute);z.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let be=0;be<X.locationSize;be++)b(X.location+be);n.bindBuffer(n.ARRAY_BUFFER,De);for(let be=0;be<X.locationSize;be++)U(X.location+be,j/X.locationSize,je,Q,j*ke,j/X.locationSize*be*ke,oe)}}else if(ae!==void 0){const Q=ae[te];if(Q!==void 0)switch(Q.length){case 2:n.vertexAttrib2fv(X.location,Q);break;case 3:n.vertexAttrib3fv(X.location,Q);break;case 4:n.vertexAttrib4fv(X.location,Q);break;default:n.vertexAttrib1fv(X.location,Q)}}}}O()}function B(){$();for(const z in i){const q=i[z];for(const re in q){const ue=q[re];for(const ge in ue)_(ue[ge].object),delete ue[ge];delete q[re]}delete i[z]}}function H(z){if(i[z.id]===void 0)return;const q=i[z.id];for(const re in q){const ue=q[re];for(const ge in ue)_(ue[ge].object),delete ue[ge];delete q[re]}delete i[z.id]}function G(z){for(const q in i){const re=i[q];if(re[z.id]===void 0)continue;const ue=re[z.id];for(const ge in ue)_(ue[ge].object),delete ue[ge];delete re[z.id]}}function $(){I(),u=!0,l!==o&&(l=o,m(l.object))}function I(){o.geometry=null,o.program=null,o.wireframe=!1}return{setup:h,reset:$,resetDefaultState:I,dispose:B,releaseStatesOfGeometry:H,releaseStatesOfProgram:G,initAttributes:P,enableAttribute:b,disableUnusedAttributes:O}}function kI(n,e,t){let i;function o(m){i=m}function l(m,_){n.drawArrays(i,m,_),t.update(_,i,1)}function u(m,_,x){x!==0&&(n.drawArraysInstanced(i,m,_,x),t.update(_,i,x))}function h(m,_,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,m,0,_,0,x);let E=0;for(let A=0;A<x;A++)E+=_[A];t.update(E,i,1)}function f(m,_,x,w){if(x===0)return;const E=e.get("WEBGL_multi_draw");if(E===null)for(let A=0;A<m.length;A++)u(m[A],_[A],w[A]);else{E.multiDrawArraysInstancedWEBGL(i,m,0,_,0,w,0,x);let A=0;for(let P=0;P<x;P++)A+=_[P]*w[P];t.update(A,i,1)}}this.setMode=o,this.render=l,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=f}function BI(n,e,t,i){let o;function l(){if(o!==void 0)return o;if(e.has("EXT_texture_filter_anisotropic")===!0){const G=e.get("EXT_texture_filter_anisotropic");o=n.getParameter(G.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else o=0;return o}function u(G){return!(G!==Ur&&i.convert(G)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function h(G){const $=G===qs&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(G!==xr&&i.convert(G)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&G!==ss&&!$)}function f(G){if(G==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";G="mediump"}return G==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let m=t.precision!==void 0?t.precision:"highp";const _=f(m);_!==m&&(Lt("WebGLRenderer:",m,"not supported, using",_,"instead."),m=_);const x=t.logarithmicDepthBuffer===!0,w=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),E=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),A=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),P=n.getParameter(n.MAX_TEXTURE_SIZE),b=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),M=n.getParameter(n.MAX_VERTEX_ATTRIBS),O=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),U=n.getParameter(n.MAX_VARYING_VECTORS),k=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),B=n.getParameter(n.MAX_SAMPLES),H=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:l,getMaxPrecision:f,textureFormatReadable:u,textureTypeReadable:h,precision:m,logarithmicDepthBuffer:x,reversedDepthBuffer:w,maxTextures:E,maxVertexTextures:A,maxTextureSize:P,maxCubemapSize:b,maxAttributes:M,maxVertexUniforms:O,maxVaryings:U,maxFragmentUniforms:k,maxSamples:B,samples:H}}function zI(n){const e=this;let t=null,i=0,o=!1,l=!1;const u=new Ia,h=new Bt,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(x,w){const E=x.length!==0||w||i!==0||o;return o=w,i=x.length,E},this.beginShadows=function(){l=!0,_(null)},this.endShadows=function(){l=!1},this.setGlobalState=function(x,w){t=_(x,w,0)},this.setState=function(x,w,E){const A=x.clippingPlanes,P=x.clipIntersection,b=x.clipShadows,M=n.get(x);if(!o||A===null||A.length===0||l&&!b)l?_(null):m();else{const O=l?0:i,U=O*4;let k=M.clippingState||null;f.value=k,k=_(A,w,U,E);for(let B=0;B!==U;++B)k[B]=t[B];M.clippingState=k,this.numIntersection=P?this.numPlanes:0,this.numPlanes+=O}};function m(){f.value!==t&&(f.value=t,f.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function _(x,w,E,A){const P=x!==null?x.length:0;let b=null;if(P!==0){if(b=f.value,A!==!0||b===null){const M=E+P*4,O=w.matrixWorldInverse;h.getNormalMatrix(O),(b===null||b.length<M)&&(b=new Float32Array(M));for(let U=0,k=E;U!==P;++U,k+=4)u.copy(x[U]).applyMatrix4(O,h),u.normal.toArray(b,k),b[k+3]=u.constant}f.value=b,f.needsUpdate=!0}return e.numPlanes=P,e.numIntersection=0,b}}function jI(n){let e=new WeakMap;function t(u,h){return h===Hg?u.mapping=Xa:h===Gg&&(u.mapping=sc),u}function i(u){if(u&&u.isTexture){const h=u.mapping;if(h===Hg||h===Gg)if(e.has(u)){const f=e.get(u).texture;return t(f,u.mapping)}else{const f=u.image;if(f&&f.height>0){const m=new oM(f.height);return m.fromEquirectangularTexture(n,u),e.set(u,m),u.addEventListener("dispose",o),t(m.texture,u.mapping)}else return null}}return u}function o(u){const h=u.target;h.removeEventListener("dispose",o);const f=e.get(h);f!==void 0&&(e.delete(h),f.dispose())}function l(){e=new WeakMap}return{get:i,dispose:l}}const Ho=4,OS=[.125,.215,.35,.446,.526,.582],Oa=20,VI=256,pu=new Iv,FS=new pn;let Qm=null,eg=0,tg=0,ng=!1;const HI=new xe;class kS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,o=100,l={}){const{size:u=256,position:h=HI}=l;Qm=this._renderer.getRenderTarget(),eg=this._renderer.getActiveCubeFace(),tg=this._renderer.getActiveMipmapLevel(),ng=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(u);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(e,i,o,f,h),t>0&&this._blur(f,0,0,t),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=jS(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=zS(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(Qm,eg,tg),this._renderer.xr.enabled=ng,e.scissorTest=!1,Gl(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Xa||e.mapping===sc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Qm=this._renderer.getRenderTarget(),eg=this._renderer.getActiveCubeFace(),tg=this._renderer.getActiveMipmapLevel(),ng=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:vi,minFilter:vi,generateMipmaps:!1,type:qs,format:Ur,colorSpace:ac,depthBuffer:!1},o=BS(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=BS(e,t,i);const{_lodMax:l}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=GI(l)),this._blurMaterial=XI(l,e,t),this._ggxMaterial=WI(l,e,t)}return o}_compileMaterial(e){const t=new ps(new $s,e);this._renderer.compile(t,pu)}_sceneToCubeUV(e,t,i,o,l){const f=new Dr(90,1,t,i),m=[1,-1,1,1,1,1],_=[1,1,1,-1,-1,-1],x=this._renderer,w=x.autoClear,E=x.toneMapping;x.getClearColor(FS),x.toneMapping=cs,x.autoClear=!1,x.state.buffers.depth.getReversed()&&(x.setRenderTarget(o),x.clearDepth(),x.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new ps(new $u,new eM({name:"PMREM.Background",side:zi,depthWrite:!1,depthTest:!1})));const P=this._backgroundBox,b=P.material;let M=!1;const O=e.background;O?O.isColor&&(b.color.copy(O),e.background=null,M=!0):(b.color.copy(FS),M=!0);for(let U=0;U<6;U++){const k=U%3;k===0?(f.up.set(0,m[U],0),f.position.set(l.x,l.y,l.z),f.lookAt(l.x+_[U],l.y,l.z)):k===1?(f.up.set(0,0,m[U]),f.position.set(l.x,l.y,l.z),f.lookAt(l.x,l.y+_[U],l.z)):(f.up.set(0,m[U],0),f.position.set(l.x,l.y,l.z),f.lookAt(l.x,l.y,l.z+_[U]));const B=this._cubeSize;Gl(o,k*B,U>2?B:0,B,B),x.setRenderTarget(o),M&&x.render(P,f),x.render(e,f)}x.toneMapping=E,x.autoClear=w,e.background=O}_textureToCubeUV(e,t){const i=this._renderer,o=e.mapping===Xa||e.mapping===sc;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=jS()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=zS());const l=o?this._cubemapMaterial:this._equirectMaterial,u=this._lodMeshes[0];u.material=l;const h=l.uniforms;h.envMap.value=e;const f=this._cubeSize;Gl(t,0,0,3*f,2*f),i.setRenderTarget(t),i.render(u,pu)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const o=this._lodMeshes.length;for(let l=1;l<o;l++)this._applyGGXFilter(e,l-1,l);t.autoClear=i}_applyGGXFilter(e,t,i){const o=this._renderer,l=this._pingPongRenderTarget,u=this._ggxMaterial,h=this._lodMeshes[i];h.material=u;const f=u.uniforms,m=i/(this._lodMeshes.length-1),_=t/(this._lodMeshes.length-1),x=Math.sqrt(m*m-_*_),w=0+m*1.25,E=x*w,{_lodMax:A}=this,P=this._sizeLods[i],b=3*P*(i>A-Ho?i-A+Ho:0),M=4*(this._cubeSize-P);f.envMap.value=e.texture,f.roughness.value=E,f.mipInt.value=A-t,Gl(l,b,M,3*P,2*P),o.setRenderTarget(l),o.render(h,pu),f.envMap.value=l.texture,f.roughness.value=0,f.mipInt.value=A-i,Gl(e,b,M,3*P,2*P),o.setRenderTarget(e),o.render(h,pu)}_blur(e,t,i,o,l){const u=this._pingPongRenderTarget;this._halfBlur(e,u,t,i,o,"latitudinal",l),this._halfBlur(u,e,i,i,o,"longitudinal",l)}_halfBlur(e,t,i,o,l,u,h){const f=this._renderer,m=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&tn("blur direction must be either latitudinal or longitudinal!");const _=3,x=this._lodMeshes[o];x.material=m;const w=m.uniforms,E=this._sizeLods[i]-1,A=isFinite(l)?Math.PI/(2*E):2*Math.PI/(2*Oa-1),P=l/A,b=isFinite(l)?1+Math.floor(_*P):Oa;b>Oa&&Lt(`sigmaRadians, ${l}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${Oa}`);const M=[];let O=0;for(let G=0;G<Oa;++G){const $=G/P,I=Math.exp(-$*$/2);M.push(I),G===0?O+=I:G<b&&(O+=2*I)}for(let G=0;G<M.length;G++)M[G]=M[G]/O;w.envMap.value=e.texture,w.samples.value=b,w.weights.value=M,w.latitudinal.value=u==="latitudinal",h&&(w.poleAxis.value=h);const{_lodMax:U}=this;w.dTheta.value=A,w.mipInt.value=U-i;const k=this._sizeLods[o],B=3*k*(o>U-Ho?o-U+Ho:0),H=4*(this._cubeSize-k);Gl(t,B,H,3*k,2*k),f.setRenderTarget(t),f.render(x,pu)}}function GI(n){const e=[],t=[],i=[];let o=n;const l=n-Ho+1+OS.length;for(let u=0;u<l;u++){const h=Math.pow(2,o);e.push(h);let f=1/h;u>n-Ho?f=OS[u-n+Ho-1]:u===0&&(f=0),t.push(f);const m=1/(h-2),_=-m,x=1+m,w=[_,_,x,_,x,x,_,_,x,x,_,x],E=6,A=6,P=3,b=2,M=1,O=new Float32Array(P*A*E),U=new Float32Array(b*A*E),k=new Float32Array(M*A*E);for(let H=0;H<E;H++){const G=H%3*2/3-1,$=H>2?0:-1,I=[G,$,0,G+2/3,$,0,G+2/3,$+1,0,G,$,0,G+2/3,$+1,0,G,$+1,0];O.set(I,P*A*H),U.set(w,b*A*H);const z=[H,H,H,H,H,H];k.set(z,M*A*H)}const B=new $s;B.setAttribute("position",new ds(O,P)),B.setAttribute("uv",new ds(U,b)),B.setAttribute("faceIndex",new ds(k,M)),i.push(new ps(B,null)),o>Ho&&o--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function BS(n,e,t){const i=new us(n,e,t);return i.texture.mapping=Nf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Gl(n,e,t,i,o){n.viewport.set(e,t,i,o),n.scissor.set(e,t,i,o)}function WI(n,e,t){return new Fr({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:VI,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:Df(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Gs,depthTest:!1,depthWrite:!1})}function XI(n,e,t){const i=new Float32Array(Oa),o=new xe(0,1,0);return new Fr({name:"SphericalGaussianBlur",defines:{n:Oa,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:Df(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Gs,depthTest:!1,depthWrite:!1})}function zS(){return new Fr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Df(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Gs,depthTest:!1,depthWrite:!1})}function jS(){return new Fr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Df(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Gs,depthTest:!1,depthWrite:!1})}function Df(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ZI(n){let e=new WeakMap,t=null;function i(h){if(h&&h.isTexture){const f=h.mapping,m=f===Hg||f===Gg,_=f===Xa||f===sc;if(m||_){let x=e.get(h);const w=x!==void 0?x.texture.pmremVersion:0;if(h.isRenderTargetTexture&&h.pmremVersion!==w)return t===null&&(t=new kS(n)),x=m?t.fromEquirectangular(h,x):t.fromCubemap(h,x),x.texture.pmremVersion=h.pmremVersion,e.set(h,x),x.texture;if(x!==void 0)return x.texture;{const E=h.image;return m&&E&&E.height>0||_&&E&&o(E)?(t===null&&(t=new kS(n)),x=m?t.fromEquirectangular(h):t.fromCubemap(h),x.texture.pmremVersion=h.pmremVersion,e.set(h,x),h.addEventListener("dispose",l),x.texture):null}}}return h}function o(h){let f=0;const m=6;for(let _=0;_<m;_++)h[_]!==void 0&&f++;return f===m}function l(h){const f=h.target;f.removeEventListener("dispose",l);const m=e.get(f);m!==void 0&&(e.delete(f),m.dispose())}function u(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:u}}function qI(n){const e={};function t(i){if(e[i]!==void 0)return e[i];const o=n.getExtension(i);return e[i]=o,o}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const o=t(i);return o===null&&ku("WebGLRenderer: "+i+" extension not supported."),o}}}function YI(n,e,t,i){const o={},l=new WeakMap;function u(x){const w=x.target;w.index!==null&&e.remove(w.index);for(const A in w.attributes)e.remove(w.attributes[A]);w.removeEventListener("dispose",u),delete o[w.id];const E=l.get(w);E&&(e.remove(E),l.delete(w)),i.releaseStatesOfGeometry(w),w.isInstancedBufferGeometry===!0&&delete w._maxInstanceCount,t.memory.geometries--}function h(x,w){return o[w.id]===!0||(w.addEventListener("dispose",u),o[w.id]=!0,t.memory.geometries++),w}function f(x){const w=x.attributes;for(const E in w)e.update(w[E],n.ARRAY_BUFFER)}function m(x){const w=[],E=x.index,A=x.attributes.position;let P=0;if(E!==null){const O=E.array;P=E.version;for(let U=0,k=O.length;U<k;U+=3){const B=O[U+0],H=O[U+1],G=O[U+2];w.push(B,H,H,G,G,B)}}else if(A!==void 0){const O=A.array;P=A.version;for(let U=0,k=O.length/3-1;U<k;U+=3){const B=U+0,H=U+1,G=U+2;w.push(B,H,H,G,G,B)}}else return;const b=new(K1(w)?nM:tM)(w,1);b.version=P;const M=l.get(x);M&&e.remove(M),l.set(x,b)}function _(x){const w=l.get(x);if(w){const E=x.index;E!==null&&w.version<E.version&&m(x)}else m(x);return l.get(x)}return{get:h,update:f,getWireframeAttribute:_}}function KI(n,e,t){let i;function o(w){i=w}let l,u;function h(w){l=w.type,u=w.bytesPerElement}function f(w,E){n.drawElements(i,E,l,w*u),t.update(E,i,1)}function m(w,E,A){A!==0&&(n.drawElementsInstanced(i,E,l,w*u,A),t.update(E,i,A))}function _(w,E,A){if(A===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,E,0,l,w,0,A);let b=0;for(let M=0;M<A;M++)b+=E[M];t.update(b,i,1)}function x(w,E,A,P){if(A===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let M=0;M<w.length;M++)m(w[M]/u,E[M],P[M]);else{b.multiDrawElementsInstancedWEBGL(i,E,0,l,w,0,P,0,A);let M=0;for(let O=0;O<A;O++)M+=E[O]*P[O];t.update(M,i,1)}}this.setMode=o,this.setIndex=h,this.render=f,this.renderInstances=m,this.renderMultiDraw=_,this.renderMultiDrawInstances=x}function $I(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(l,u,h){switch(t.calls++,u){case n.TRIANGLES:t.triangles+=h*(l/3);break;case n.LINES:t.lines+=h*(l/2);break;case n.LINE_STRIP:t.lines+=h*(l-1);break;case n.LINE_LOOP:t.lines+=h*l;break;case n.POINTS:t.points+=h*l;break;default:tn("WebGLInfo: Unknown draw mode:",u);break}}function o(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:o,update:i}}function JI(n,e,t){const i=new WeakMap,o=new In;function l(u,h,f){const m=u.morphTargetInfluences,_=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,x=_!==void 0?_.length:0;let w=i.get(h);if(w===void 0||w.count!==x){let z=function(){$.dispose(),i.delete(h),h.removeEventListener("dispose",z)};var E=z;w!==void 0&&w.texture.dispose();const A=h.morphAttributes.position!==void 0,P=h.morphAttributes.normal!==void 0,b=h.morphAttributes.color!==void 0,M=h.morphAttributes.position||[],O=h.morphAttributes.normal||[],U=h.morphAttributes.color||[];let k=0;A===!0&&(k=1),P===!0&&(k=2),b===!0&&(k=3);let B=h.attributes.position.count*k,H=1;B>e.maxTextureSize&&(H=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const G=new Float32Array(B*H*4*x),$=new $1(G,B,H,x);$.type=ss,$.needsUpdate=!0;const I=k*4;for(let q=0;q<x;q++){const re=M[q],ue=O[q],ge=U[q],Se=B*H*4*q;for(let ae=0;ae<re.count;ae++){const te=ae*I;A===!0&&(o.fromBufferAttribute(re,ae),G[Se+te+0]=o.x,G[Se+te+1]=o.y,G[Se+te+2]=o.z,G[Se+te+3]=0),P===!0&&(o.fromBufferAttribute(ue,ae),G[Se+te+4]=o.x,G[Se+te+5]=o.y,G[Se+te+6]=o.z,G[Se+te+7]=0),b===!0&&(o.fromBufferAttribute(ge,ae),G[Se+te+8]=o.x,G[Se+te+9]=o.y,G[Se+te+10]=o.z,G[Se+te+11]=ge.itemSize===4?o.w:1)}}w={count:x,texture:$,size:new cn(B,H)},i.set(h,w),h.addEventListener("dispose",z)}if(u.isInstancedMesh===!0&&u.morphTexture!==null)f.getUniforms().setValue(n,"morphTexture",u.morphTexture,t);else{let A=0;for(let b=0;b<m.length;b++)A+=m[b];const P=h.morphTargetsRelative?1:1-A;f.getUniforms().setValue(n,"morphTargetBaseInfluence",P),f.getUniforms().setValue(n,"morphTargetInfluences",m)}f.getUniforms().setValue(n,"morphTargetsTexture",w.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",w.size)}return{update:l}}function QI(n,e,t,i){let o=new WeakMap;function l(f){const m=i.render.frame,_=f.geometry,x=e.get(f,_);if(o.get(x)!==m&&(e.update(x),o.set(x,m)),f.isInstancedMesh&&(f.hasEventListener("dispose",h)===!1&&f.addEventListener("dispose",h),o.get(f)!==m&&(t.update(f.instanceMatrix,n.ARRAY_BUFFER),f.instanceColor!==null&&t.update(f.instanceColor,n.ARRAY_BUFFER),o.set(f,m))),f.isSkinnedMesh){const w=f.skeleton;o.get(w)!==m&&(w.update(),o.set(w,m))}return x}function u(){o=new WeakMap}function h(f){const m=f.target;m.removeEventListener("dispose",h),t.remove(m.instanceMatrix),m.instanceColor!==null&&t.remove(m.instanceColor)}return{update:l,dispose:u}}const eU={[U1]:"LINEAR_TONE_MAPPING",[O1]:"REINHARD_TONE_MAPPING",[F1]:"CINEON_TONE_MAPPING",[k1]:"ACES_FILMIC_TONE_MAPPING",[z1]:"AGX_TONE_MAPPING",[j1]:"NEUTRAL_TONE_MAPPING",[B1]:"CUSTOM_TONE_MAPPING"};function tU(n,e,t,i,o){const l=new us(e,t,{type:n,depthBuffer:i,stencilBuffer:o}),u=new us(e,t,{type:qs,depthBuffer:!1,stencilBuffer:!1}),h=new $s;h.setAttribute("position",new Xs([-1,3,0,-1,-1,0,3,-1,0],3)),h.setAttribute("uv",new Xs([0,2,0,0,2,0],2));const f=new KL({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),m=new ps(h,f),_=new Iv(-1,1,1,-1,0,1);let x=null,w=null,E=!1,A,P=null,b=[],M=!1;this.setSize=function(O,U){l.setSize(O,U),u.setSize(O,U);for(let k=0;k<b.length;k++){const B=b[k];B.setSize&&B.setSize(O,U)}},this.setEffects=function(O){b=O,M=b.length>0&&b[0].isRenderPass===!0;const U=l.width,k=l.height;for(let B=0;B<b.length;B++){const H=b[B];H.setSize&&H.setSize(U,k)}},this.begin=function(O,U){if(E||O.toneMapping===cs&&b.length===0)return!1;if(P=U,U!==null){const k=U.width,B=U.height;(l.width!==k||l.height!==B)&&this.setSize(k,B)}return M===!1&&O.setRenderTarget(l),A=O.toneMapping,O.toneMapping=cs,!0},this.hasRenderPass=function(){return M},this.end=function(O,U){O.toneMapping=A,E=!0;let k=l,B=u;for(let H=0;H<b.length;H++){const G=b[H];if(G.enabled!==!1&&(G.render(O,B,k,U),G.needsSwap!==!1)){const $=k;k=B,B=$}}if(x!==O.outputColorSpace||w!==O.toneMapping){x=O.outputColorSpace,w=O.toneMapping,f.defines={},Qt.getTransfer(x)===ln&&(f.defines.SRGB_TRANSFER="");const H=eU[w];H&&(f.defines[H]=""),f.needsUpdate=!0}f.uniforms.tDiffuse.value=k.texture,O.setRenderTarget(P),O.render(m,_),P=null,E=!1},this.isCompositing=function(){return E},this.dispose=function(){l.dispose(),u.dispose(),h.dispose(),f.dispose()}}const uM=new Ai,T0=new Bu(1,1),dM=new $1,hM=new EL,fM=new sM,VS=[],HS=[],GS=new Float32Array(16),WS=new Float32Array(9),XS=new Float32Array(4);function vc(n,e,t){const i=n[0];if(i<=0||i>0)return n;const o=e*t;let l=VS[o];if(l===void 0&&(l=new Float32Array(o),VS[o]=l),e!==0){i.toArray(l,0);for(let u=1,h=0;u!==e;++u)h+=t,n[u].toArray(l,h)}return l}function Xn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Zn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function If(n,e){let t=HS[e];t===void 0&&(t=new Int32Array(e),HS[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function nU(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function iU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Xn(t,e))return;n.uniform2fv(this.addr,e),Zn(t,e)}}function rU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Xn(t,e))return;n.uniform3fv(this.addr,e),Zn(t,e)}}function sU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Xn(t,e))return;n.uniform4fv(this.addr,e),Zn(t,e)}}function oU(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Xn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Zn(t,e)}else{if(Xn(t,i))return;XS.set(i),n.uniformMatrix2fv(this.addr,!1,XS),Zn(t,i)}}function aU(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Xn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Zn(t,e)}else{if(Xn(t,i))return;WS.set(i),n.uniformMatrix3fv(this.addr,!1,WS),Zn(t,i)}}function lU(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Xn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Zn(t,e)}else{if(Xn(t,i))return;GS.set(i),n.uniformMatrix4fv(this.addr,!1,GS),Zn(t,i)}}function cU(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function uU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Xn(t,e))return;n.uniform2iv(this.addr,e),Zn(t,e)}}function dU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Xn(t,e))return;n.uniform3iv(this.addr,e),Zn(t,e)}}function hU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Xn(t,e))return;n.uniform4iv(this.addr,e),Zn(t,e)}}function fU(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function pU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Xn(t,e))return;n.uniform2uiv(this.addr,e),Zn(t,e)}}function mU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Xn(t,e))return;n.uniform3uiv(this.addr,e),Zn(t,e)}}function gU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Xn(t,e))return;n.uniform4uiv(this.addr,e),Zn(t,e)}}function vU(n,e,t){const i=this.cache,o=t.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o);let l;this.type===n.SAMPLER_2D_SHADOW?(T0.compareFunction=t.isReversedDepthBuffer()?Nv:Rv,l=T0):l=uM,t.setTexture2D(e||l,o)}function _U(n,e,t){const i=this.cache,o=t.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),t.setTexture3D(e||hM,o)}function xU(n,e,t){const i=this.cache,o=t.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),t.setTextureCube(e||fM,o)}function yU(n,e,t){const i=this.cache,o=t.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),t.setTexture2DArray(e||dM,o)}function SU(n){switch(n){case 5126:return nU;case 35664:return iU;case 35665:return rU;case 35666:return sU;case 35674:return oU;case 35675:return aU;case 35676:return lU;case 5124:case 35670:return cU;case 35667:case 35671:return uU;case 35668:case 35672:return dU;case 35669:case 35673:return hU;case 5125:return fU;case 36294:return pU;case 36295:return mU;case 36296:return gU;case 35678:case 36198:case 36298:case 36306:case 35682:return vU;case 35679:case 36299:case 36307:return _U;case 35680:case 36300:case 36308:case 36293:return xU;case 36289:case 36303:case 36311:case 36292:return yU}}function wU(n,e){n.uniform1fv(this.addr,e)}function bU(n,e){const t=vc(e,this.size,2);n.uniform2fv(this.addr,t)}function MU(n,e){const t=vc(e,this.size,3);n.uniform3fv(this.addr,t)}function EU(n,e){const t=vc(e,this.size,4);n.uniform4fv(this.addr,t)}function TU(n,e){const t=vc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function AU(n,e){const t=vc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function CU(n,e){const t=vc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function PU(n,e){n.uniform1iv(this.addr,e)}function RU(n,e){n.uniform2iv(this.addr,e)}function NU(n,e){n.uniform3iv(this.addr,e)}function LU(n,e){n.uniform4iv(this.addr,e)}function DU(n,e){n.uniform1uiv(this.addr,e)}function IU(n,e){n.uniform2uiv(this.addr,e)}function UU(n,e){n.uniform3uiv(this.addr,e)}function OU(n,e){n.uniform4uiv(this.addr,e)}function FU(n,e,t){const i=this.cache,o=e.length,l=If(t,o);Xn(i,l)||(n.uniform1iv(this.addr,l),Zn(i,l));let u;this.type===n.SAMPLER_2D_SHADOW?u=T0:u=uM;for(let h=0;h!==o;++h)t.setTexture2D(e[h]||u,l[h])}function kU(n,e,t){const i=this.cache,o=e.length,l=If(t,o);Xn(i,l)||(n.uniform1iv(this.addr,l),Zn(i,l));for(let u=0;u!==o;++u)t.setTexture3D(e[u]||hM,l[u])}function BU(n,e,t){const i=this.cache,o=e.length,l=If(t,o);Xn(i,l)||(n.uniform1iv(this.addr,l),Zn(i,l));for(let u=0;u!==o;++u)t.setTextureCube(e[u]||fM,l[u])}function zU(n,e,t){const i=this.cache,o=e.length,l=If(t,o);Xn(i,l)||(n.uniform1iv(this.addr,l),Zn(i,l));for(let u=0;u!==o;++u)t.setTexture2DArray(e[u]||dM,l[u])}function jU(n){switch(n){case 5126:return wU;case 35664:return bU;case 35665:return MU;case 35666:return EU;case 35674:return TU;case 35675:return AU;case 35676:return CU;case 5124:case 35670:return PU;case 35667:case 35671:return RU;case 35668:case 35672:return NU;case 35669:case 35673:return LU;case 5125:return DU;case 36294:return IU;case 36295:return UU;case 36296:return OU;case 35678:case 36198:case 36298:case 36306:case 35682:return FU;case 35679:case 36299:case 36307:return kU;case 35680:case 36300:case 36308:case 36293:return BU;case 36289:case 36303:case 36311:case 36292:return zU}}class VU{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=SU(t.type)}}class HU{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=jU(t.type)}}class GU{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const o=this.seq;for(let l=0,u=o.length;l!==u;++l){const h=o[l];h.setValue(e,t[h.id],i)}}}const ig=/(\w+)(\])?(\[|\.)?/g;function ZS(n,e){n.seq.push(e),n.map[e.id]=e}function WU(n,e,t){const i=n.name,o=i.length;for(ig.lastIndex=0;;){const l=ig.exec(i),u=ig.lastIndex;let h=l[1];const f=l[2]==="]",m=l[3];if(f&&(h=h|0),m===void 0||m==="["&&u+2===o){ZS(t,m===void 0?new VU(h,n,e):new HU(h,n,e));break}else{let x=t.map[h];x===void 0&&(x=new GU(h),ZS(t,x)),t=x}}}class $h{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let u=0;u<i;++u){const h=e.getActiveUniform(t,u),f=e.getUniformLocation(t,h.name);WU(h,f,this)}const o=[],l=[];for(const u of this.seq)u.type===e.SAMPLER_2D_SHADOW||u.type===e.SAMPLER_CUBE_SHADOW||u.type===e.SAMPLER_2D_ARRAY_SHADOW?o.push(u):l.push(u);o.length>0&&(this.seq=o.concat(l))}setValue(e,t,i,o){const l=this.map[t];l!==void 0&&l.setValue(e,i,o)}setOptional(e,t,i){const o=t[i];o!==void 0&&this.setValue(e,i,o)}static upload(e,t,i,o){for(let l=0,u=t.length;l!==u;++l){const h=t[l],f=i[h.id];f.needsUpdate!==!1&&h.setValue(e,f.value,o)}}static seqWithValue(e,t){const i=[];for(let o=0,l=e.length;o!==l;++o){const u=e[o];u.id in t&&i.push(u)}return i}}function qS(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const XU=37297;let ZU=0;function qU(n,e){const t=n.split(`
`),i=[],o=Math.max(e-6,0),l=Math.min(e+6,t.length);for(let u=o;u<l;u++){const h=u+1;i.push(`${h===e?">":" "} ${h}: ${t[u]}`)}return i.join(`
`)}const YS=new Bt;function YU(n){Qt._getMatrix(YS,Qt.workingColorSpace,n);const e=`mat3( ${YS.elements.map(t=>t.toFixed(4))} )`;switch(Qt.getTransfer(n)){case ff:return[e,"LinearTransferOETF"];case ln:return[e,"sRGBTransferOETF"];default:return Lt("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function KS(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),l=(n.getShaderInfoLog(e)||"").trim();if(i&&l==="")return"";const u=/ERROR: 0:(\d+)/.exec(l);if(u){const h=parseInt(u[1]);return t.toUpperCase()+`

`+l+`

`+qU(n.getShaderSource(e),h)}else return l}function KU(n,e){const t=YU(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const $U={[U1]:"Linear",[O1]:"Reinhard",[F1]:"Cineon",[k1]:"ACESFilmic",[z1]:"AgX",[j1]:"Neutral",[B1]:"Custom"};function JU(n,e){const t=$U[e];return t===void 0?(Lt("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Oh=new xe;function QU(){Qt.getLuminanceCoefficients(Oh);const n=Oh.x.toFixed(4),e=Oh.y.toFixed(4),t=Oh.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function eO(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Su).join(`
`)}function tO(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function nO(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let o=0;o<i;o++){const l=n.getActiveAttrib(e,o),u=l.name;let h=1;l.type===n.FLOAT_MAT2&&(h=2),l.type===n.FLOAT_MAT3&&(h=3),l.type===n.FLOAT_MAT4&&(h=4),t[u]={type:l.type,location:n.getAttribLocation(e,u),locationSize:h}}return t}function Su(n){return n!==""}function $S(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function JS(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const iO=/^[ \t]*#include +<([\w\d./]+)>/gm;function A0(n){return n.replace(iO,sO)}const rO=new Map;function sO(n,e){let t=jt[e];if(t===void 0){const i=rO.get(e);if(i!==void 0)t=jt[i],Lt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return A0(t)}const oO=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function QS(n){return n.replace(oO,aO)}function aO(n,e,t,i){let o="";for(let l=parseInt(e);l<parseInt(t);l++)o+=i.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return o}function ew(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const lO={[Xh]:"SHADOWMAP_TYPE_PCF",[yu]:"SHADOWMAP_TYPE_VSM"};function cO(n){return lO[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const uO={[Xa]:"ENVMAP_TYPE_CUBE",[sc]:"ENVMAP_TYPE_CUBE",[Nf]:"ENVMAP_TYPE_CUBE_UV"};function dO(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":uO[n.envMapMode]||"ENVMAP_TYPE_CUBE"}const hO={[sc]:"ENVMAP_MODE_REFRACTION"};function fO(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":hO[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}const pO={[I1]:"ENVMAP_BLENDING_MULTIPLY",[sL]:"ENVMAP_BLENDING_MIX",[oL]:"ENVMAP_BLENDING_ADD"};function mO(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":pO[n.combine]||"ENVMAP_BLENDING_NONE"}function gO(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function vO(n,e,t,i){const o=n.getContext(),l=t.defines;let u=t.vertexShader,h=t.fragmentShader;const f=cO(t),m=dO(t),_=fO(t),x=mO(t),w=gO(t),E=eO(t),A=tO(l),P=o.createProgram();let b,M,O=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(Su).join(`
`),b.length>0&&(b+=`
`),M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(Su).join(`
`),M.length>0&&(M+=`
`)):(b=[ew(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+_:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Su).join(`
`),M=[ew(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.envMap?"#define "+_:"",t.envMap?"#define "+x:"",w?"#define CUBEUV_TEXEL_WIDTH "+w.texelWidth:"",w?"#define CUBEUV_TEXEL_HEIGHT "+w.texelHeight:"",w?"#define CUBEUV_MAX_MIP "+w.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==cs?"#define TONE_MAPPING":"",t.toneMapping!==cs?jt.tonemapping_pars_fragment:"",t.toneMapping!==cs?JU("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",jt.colorspace_pars_fragment,KU("linearToOutputTexel",t.outputColorSpace),QU(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Su).join(`
`)),u=A0(u),u=$S(u,t),u=JS(u,t),h=A0(h),h=$S(h,t),h=JS(h,t),u=QS(u),h=QS(h),t.isRawShaderMaterial!==!0&&(O=`#version 300 es
`,b=[E,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,M=["#define varying in",t.glslVersion===gS?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===gS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const U=O+b+u,k=O+M+h,B=qS(o,o.VERTEX_SHADER,U),H=qS(o,o.FRAGMENT_SHADER,k);o.attachShader(P,B),o.attachShader(P,H),t.index0AttributeName!==void 0?o.bindAttribLocation(P,0,t.index0AttributeName):t.morphTargets===!0&&o.bindAttribLocation(P,0,"position"),o.linkProgram(P);function G(q){if(n.debug.checkShaderErrors){const re=o.getProgramInfoLog(P)||"",ue=o.getShaderInfoLog(B)||"",ge=o.getShaderInfoLog(H)||"",Se=re.trim(),ae=ue.trim(),te=ge.trim();let X=!0,we=!0;if(o.getProgramParameter(P,o.LINK_STATUS)===!1)if(X=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(o,P,B,H);else{const Q=KS(o,B,"vertex"),j=KS(o,H,"fragment");tn("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(P,o.VALIDATE_STATUS)+`

Material Name: `+q.name+`
Material Type: `+q.type+`

Program Info Log: `+Se+`
`+Q+`
`+j)}else Se!==""?Lt("WebGLProgram: Program Info Log:",Se):(ae===""||te==="")&&(we=!1);we&&(q.diagnostics={runnable:X,programLog:Se,vertexShader:{log:ae,prefix:b},fragmentShader:{log:te,prefix:M}})}o.deleteShader(B),o.deleteShader(H),$=new $h(o,P),I=nO(o,P)}let $;this.getUniforms=function(){return $===void 0&&G(this),$};let I;this.getAttributes=function(){return I===void 0&&G(this),I};let z=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return z===!1&&(z=o.getProgramParameter(P,XU)),z},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(P),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=ZU++,this.cacheKey=e,this.usedTimes=1,this.program=P,this.vertexShader=B,this.fragmentShader=H,this}let _O=0;class xO{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,o=this._getShaderStage(t),l=this._getShaderStage(i),u=this._getShaderCacheForMaterial(e);return u.has(o)===!1&&(u.add(o),o.usedTimes++),u.has(l)===!1&&(u.add(l),l.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new yO(e),t.set(e,i)),i}}class yO{constructor(e){this.id=_O++,this.code=e,this.usedTimes=0}}function SO(n,e,t,i,o,l,u){const h=new J1,f=new xO,m=new Set,_=[],x=new Map,w=o.logarithmicDepthBuffer;let E=o.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function P(I){return m.add(I),I===0?"uv":`uv${I}`}function b(I,z,q,re,ue){const ge=re.fog,Se=ue.geometry,ae=I.isMeshStandardMaterial?re.environment:null,te=(I.isMeshStandardMaterial?t:e).get(I.envMap||ae),X=te&&te.mapping===Nf?te.image.height:null,we=A[I.type];I.precision!==null&&(E=o.getMaxPrecision(I.precision),E!==I.precision&&Lt("WebGLProgram.getParameters:",I.precision,"not supported, using",E,"instead."));const Q=Se.morphAttributes.position||Se.morphAttributes.normal||Se.morphAttributes.color,j=Q!==void 0?Q.length:0;let he=0;Se.morphAttributes.position!==void 0&&(he=1),Se.morphAttributes.normal!==void 0&&(he=2),Se.morphAttributes.color!==void 0&&(he=3);let De,je,ke,oe;if(we){const Yt=is[we];De=Yt.vertexShader,je=Yt.fragmentShader}else De=I.vertexShader,je=I.fragmentShader,f.update(I),ke=f.getVertexShaderID(I),oe=f.getFragmentShaderID(I);const be=n.getRenderTarget(),Re=n.state.buffers.depth.getReversed(),nt=ue.isInstancedMesh===!0,qe=ue.isBatchedMesh===!0,Ft=!!I.map,mn=!!I.matcap,It=!!te,qt=!!I.aoMap,$t=!!I.lightMap,Rt=!!I.bumpMap,un=!!I.normalMap,Y=!!I.displacementMap,vn=!!I.emissiveMap,Vt=!!I.metalnessMap,Wt=!!I.roughnessMap,ot=I.anisotropy>0,V=I.clearcoat>0,R=I.dispersion>0,ie=I.iridescence>0,Ee=I.sheen>0,Ae=I.transmission>0,Me=ot&&!!I.anisotropyMap,dt=V&&!!I.clearcoatMap,Ve=V&&!!I.clearcoatNormalMap,it=V&&!!I.clearcoatRoughnessMap,St=ie&&!!I.iridescenceMap,Ie=ie&&!!I.iridescenceThicknessMap,We=Ee&&!!I.sheenColorMap,st=Ee&&!!I.sheenRoughnessMap,lt=!!I.specularMap,ze=!!I.specularColorMap,Nt=!!I.specularIntensityMap,J=Ae&&!!I.transmissionMap,Ze=Ae&&!!I.thicknessMap,Oe=!!I.gradientMap,Ye=!!I.alphaMap,Ue=I.alphaTest>0,Te=!!I.alphaHash,Xe=!!I.extensions;let Mt=cs;I.toneMapped&&(be===null||be.isXRRenderTarget===!0)&&(Mt=n.toneMapping);const rn={shaderID:we,shaderType:I.type,shaderName:I.name,vertexShader:De,fragmentShader:je,defines:I.defines,customVertexShaderID:ke,customFragmentShaderID:oe,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:E,batching:qe,batchingColor:qe&&ue._colorsTexture!==null,instancing:nt,instancingColor:nt&&ue.instanceColor!==null,instancingMorph:nt&&ue.morphTexture!==null,outputColorSpace:be===null?n.outputColorSpace:be.isXRRenderTarget===!0?be.texture.colorSpace:ac,alphaToCoverage:!!I.alphaToCoverage,map:Ft,matcap:mn,envMap:It,envMapMode:It&&te.mapping,envMapCubeUVHeight:X,aoMap:qt,lightMap:$t,bumpMap:Rt,normalMap:un,displacementMap:Y,emissiveMap:vn,normalMapObjectSpace:un&&I.normalMapType===uL,normalMapTangentSpace:un&&I.normalMapType===cL,metalnessMap:Vt,roughnessMap:Wt,anisotropy:ot,anisotropyMap:Me,clearcoat:V,clearcoatMap:dt,clearcoatNormalMap:Ve,clearcoatRoughnessMap:it,dispersion:R,iridescence:ie,iridescenceMap:St,iridescenceThicknessMap:Ie,sheen:Ee,sheenColorMap:We,sheenRoughnessMap:st,specularMap:lt,specularColorMap:ze,specularIntensityMap:Nt,transmission:Ae,transmissionMap:J,thicknessMap:Ze,gradientMap:Oe,opaque:I.transparent===!1&&I.blending===Jl&&I.alphaToCoverage===!1,alphaMap:Ye,alphaTest:Ue,alphaHash:Te,combine:I.combine,mapUv:Ft&&P(I.map.channel),aoMapUv:qt&&P(I.aoMap.channel),lightMapUv:$t&&P(I.lightMap.channel),bumpMapUv:Rt&&P(I.bumpMap.channel),normalMapUv:un&&P(I.normalMap.channel),displacementMapUv:Y&&P(I.displacementMap.channel),emissiveMapUv:vn&&P(I.emissiveMap.channel),metalnessMapUv:Vt&&P(I.metalnessMap.channel),roughnessMapUv:Wt&&P(I.roughnessMap.channel),anisotropyMapUv:Me&&P(I.anisotropyMap.channel),clearcoatMapUv:dt&&P(I.clearcoatMap.channel),clearcoatNormalMapUv:Ve&&P(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:it&&P(I.clearcoatRoughnessMap.channel),iridescenceMapUv:St&&P(I.iridescenceMap.channel),iridescenceThicknessMapUv:Ie&&P(I.iridescenceThicknessMap.channel),sheenColorMapUv:We&&P(I.sheenColorMap.channel),sheenRoughnessMapUv:st&&P(I.sheenRoughnessMap.channel),specularMapUv:lt&&P(I.specularMap.channel),specularColorMapUv:ze&&P(I.specularColorMap.channel),specularIntensityMapUv:Nt&&P(I.specularIntensityMap.channel),transmissionMapUv:J&&P(I.transmissionMap.channel),thicknessMapUv:Ze&&P(I.thicknessMap.channel),alphaMapUv:Ye&&P(I.alphaMap.channel),vertexTangents:!!Se.attributes.tangent&&(un||ot),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!Se.attributes.color&&Se.attributes.color.itemSize===4,pointsUvs:ue.isPoints===!0&&!!Se.attributes.uv&&(Ft||Ye),fog:!!ge,useFog:I.fog===!0,fogExp2:!!ge&&ge.isFogExp2,flatShading:I.flatShading===!0&&I.wireframe===!1,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:w,reversedDepthBuffer:Re,skinning:ue.isSkinnedMesh===!0,morphTargets:Se.morphAttributes.position!==void 0,morphNormals:Se.morphAttributes.normal!==void 0,morphColors:Se.morphAttributes.color!==void 0,morphTargetsCount:j,morphTextureStride:he,numDirLights:z.directional.length,numPointLights:z.point.length,numSpotLights:z.spot.length,numSpotLightMaps:z.spotLightMap.length,numRectAreaLights:z.rectArea.length,numHemiLights:z.hemi.length,numDirLightShadows:z.directionalShadowMap.length,numPointLightShadows:z.pointShadowMap.length,numSpotLightShadows:z.spotShadowMap.length,numSpotLightShadowsWithMaps:z.numSpotLightShadowsWithMaps,numLightProbes:z.numLightProbes,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&q.length>0,shadowMapType:n.shadowMap.type,toneMapping:Mt,decodeVideoTexture:Ft&&I.map.isVideoTexture===!0&&Qt.getTransfer(I.map.colorSpace)===ln,decodeVideoTextureEmissive:vn&&I.emissiveMap.isVideoTexture===!0&&Qt.getTransfer(I.emissiveMap.colorSpace)===ln,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===zs,flipSided:I.side===zi,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:Xe&&I.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Xe&&I.extensions.multiDraw===!0||qe)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return rn.vertexUv1s=m.has(1),rn.vertexUv2s=m.has(2),rn.vertexUv3s=m.has(3),m.clear(),rn}function M(I){const z=[];if(I.shaderID?z.push(I.shaderID):(z.push(I.customVertexShaderID),z.push(I.customFragmentShaderID)),I.defines!==void 0)for(const q in I.defines)z.push(q),z.push(I.defines[q]);return I.isRawShaderMaterial===!1&&(O(z,I),U(z,I),z.push(n.outputColorSpace)),z.push(I.customProgramCacheKey),z.join()}function O(I,z){I.push(z.precision),I.push(z.outputColorSpace),I.push(z.envMapMode),I.push(z.envMapCubeUVHeight),I.push(z.mapUv),I.push(z.alphaMapUv),I.push(z.lightMapUv),I.push(z.aoMapUv),I.push(z.bumpMapUv),I.push(z.normalMapUv),I.push(z.displacementMapUv),I.push(z.emissiveMapUv),I.push(z.metalnessMapUv),I.push(z.roughnessMapUv),I.push(z.anisotropyMapUv),I.push(z.clearcoatMapUv),I.push(z.clearcoatNormalMapUv),I.push(z.clearcoatRoughnessMapUv),I.push(z.iridescenceMapUv),I.push(z.iridescenceThicknessMapUv),I.push(z.sheenColorMapUv),I.push(z.sheenRoughnessMapUv),I.push(z.specularMapUv),I.push(z.specularColorMapUv),I.push(z.specularIntensityMapUv),I.push(z.transmissionMapUv),I.push(z.thicknessMapUv),I.push(z.combine),I.push(z.fogExp2),I.push(z.sizeAttenuation),I.push(z.morphTargetsCount),I.push(z.morphAttributeCount),I.push(z.numDirLights),I.push(z.numPointLights),I.push(z.numSpotLights),I.push(z.numSpotLightMaps),I.push(z.numHemiLights),I.push(z.numRectAreaLights),I.push(z.numDirLightShadows),I.push(z.numPointLightShadows),I.push(z.numSpotLightShadows),I.push(z.numSpotLightShadowsWithMaps),I.push(z.numLightProbes),I.push(z.shadowMapType),I.push(z.toneMapping),I.push(z.numClippingPlanes),I.push(z.numClipIntersection),I.push(z.depthPacking)}function U(I,z){h.disableAll(),z.instancing&&h.enable(0),z.instancingColor&&h.enable(1),z.instancingMorph&&h.enable(2),z.matcap&&h.enable(3),z.envMap&&h.enable(4),z.normalMapObjectSpace&&h.enable(5),z.normalMapTangentSpace&&h.enable(6),z.clearcoat&&h.enable(7),z.iridescence&&h.enable(8),z.alphaTest&&h.enable(9),z.vertexColors&&h.enable(10),z.vertexAlphas&&h.enable(11),z.vertexUv1s&&h.enable(12),z.vertexUv2s&&h.enable(13),z.vertexUv3s&&h.enable(14),z.vertexTangents&&h.enable(15),z.anisotropy&&h.enable(16),z.alphaHash&&h.enable(17),z.batching&&h.enable(18),z.dispersion&&h.enable(19),z.batchingColor&&h.enable(20),z.gradientMap&&h.enable(21),I.push(h.mask),h.disableAll(),z.fog&&h.enable(0),z.useFog&&h.enable(1),z.flatShading&&h.enable(2),z.logarithmicDepthBuffer&&h.enable(3),z.reversedDepthBuffer&&h.enable(4),z.skinning&&h.enable(5),z.morphTargets&&h.enable(6),z.morphNormals&&h.enable(7),z.morphColors&&h.enable(8),z.premultipliedAlpha&&h.enable(9),z.shadowMapEnabled&&h.enable(10),z.doubleSided&&h.enable(11),z.flipSided&&h.enable(12),z.useDepthPacking&&h.enable(13),z.dithering&&h.enable(14),z.transmission&&h.enable(15),z.sheen&&h.enable(16),z.opaque&&h.enable(17),z.pointsUvs&&h.enable(18),z.decodeVideoTexture&&h.enable(19),z.decodeVideoTextureEmissive&&h.enable(20),z.alphaToCoverage&&h.enable(21),I.push(h.mask)}function k(I){const z=A[I.type];let q;if(z){const re=is[z];q=BL.clone(re.uniforms)}else q=I.uniforms;return q}function B(I,z){let q=x.get(z);return q!==void 0?++q.usedTimes:(q=new vO(n,z,I,l),_.push(q),x.set(z,q)),q}function H(I){if(--I.usedTimes===0){const z=_.indexOf(I);_[z]=_[_.length-1],_.pop(),x.delete(I.cacheKey),I.destroy()}}function G(I){f.remove(I)}function $(){f.dispose()}return{getParameters:b,getProgramCacheKey:M,getUniforms:k,acquireProgram:B,releaseProgram:H,releaseShaderCache:G,programs:_,dispose:$}}function wO(){let n=new WeakMap;function e(u){return n.has(u)}function t(u){let h=n.get(u);return h===void 0&&(h={},n.set(u,h)),h}function i(u){n.delete(u)}function o(u,h,f){n.get(u)[h]=f}function l(){n=new WeakMap}return{has:e,get:t,remove:i,update:o,dispose:l}}function bO(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function tw(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function nw(){const n=[];let e=0;const t=[],i=[],o=[];function l(){e=0,t.length=0,i.length=0,o.length=0}function u(x,w,E,A,P,b){let M=n[e];return M===void 0?(M={id:x.id,object:x,geometry:w,material:E,groupOrder:A,renderOrder:x.renderOrder,z:P,group:b},n[e]=M):(M.id=x.id,M.object=x,M.geometry=w,M.material=E,M.groupOrder=A,M.renderOrder=x.renderOrder,M.z=P,M.group=b),e++,M}function h(x,w,E,A,P,b){const M=u(x,w,E,A,P,b);E.transmission>0?i.push(M):E.transparent===!0?o.push(M):t.push(M)}function f(x,w,E,A,P,b){const M=u(x,w,E,A,P,b);E.transmission>0?i.unshift(M):E.transparent===!0?o.unshift(M):t.unshift(M)}function m(x,w){t.length>1&&t.sort(x||bO),i.length>1&&i.sort(w||tw),o.length>1&&o.sort(w||tw)}function _(){for(let x=e,w=n.length;x<w;x++){const E=n[x];if(E.id===null)break;E.id=null,E.object=null,E.geometry=null,E.material=null,E.group=null}}return{opaque:t,transmissive:i,transparent:o,init:l,push:h,unshift:f,finish:_,sort:m}}function MO(){let n=new WeakMap;function e(i,o){const l=n.get(i);let u;return l===void 0?(u=new nw,n.set(i,[u])):o>=l.length?(u=new nw,l.push(u)):u=l[o],u}function t(){n=new WeakMap}return{get:e,dispose:t}}function EO(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new xe,color:new pn};break;case"SpotLight":t={position:new xe,direction:new xe,color:new pn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new xe,color:new pn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new xe,skyColor:new pn,groundColor:new pn};break;case"RectAreaLight":t={color:new pn,position:new xe,halfWidth:new xe,halfHeight:new xe};break}return n[e.id]=t,t}}}function TO(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new cn};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new cn};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new cn,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let AO=0;function CO(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function PO(n){const e=new EO,t=TO(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let m=0;m<9;m++)i.probe.push(new xe);const o=new xe,l=new zn,u=new zn;function h(m){let _=0,x=0,w=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let E=0,A=0,P=0,b=0,M=0,O=0,U=0,k=0,B=0,H=0,G=0;m.sort(CO);for(let I=0,z=m.length;I<z;I++){const q=m[I],re=q.color,ue=q.intensity,ge=q.distance;let Se=null;if(q.shadow&&q.shadow.map&&(q.shadow.map.texture.format===oc?Se=q.shadow.map.texture:Se=q.shadow.map.depthTexture||q.shadow.map.texture),q.isAmbientLight)_+=re.r*ue,x+=re.g*ue,w+=re.b*ue;else if(q.isLightProbe){for(let ae=0;ae<9;ae++)i.probe[ae].addScaledVector(q.sh.coefficients[ae],ue);G++}else if(q.isDirectionalLight){const ae=e.get(q);if(ae.color.copy(q.color).multiplyScalar(q.intensity),q.castShadow){const te=q.shadow,X=t.get(q);X.shadowIntensity=te.intensity,X.shadowBias=te.bias,X.shadowNormalBias=te.normalBias,X.shadowRadius=te.radius,X.shadowMapSize=te.mapSize,i.directionalShadow[E]=X,i.directionalShadowMap[E]=Se,i.directionalShadowMatrix[E]=q.shadow.matrix,O++}i.directional[E]=ae,E++}else if(q.isSpotLight){const ae=e.get(q);ae.position.setFromMatrixPosition(q.matrixWorld),ae.color.copy(re).multiplyScalar(ue),ae.distance=ge,ae.coneCos=Math.cos(q.angle),ae.penumbraCos=Math.cos(q.angle*(1-q.penumbra)),ae.decay=q.decay,i.spot[P]=ae;const te=q.shadow;if(q.map&&(i.spotLightMap[B]=q.map,B++,te.updateMatrices(q),q.castShadow&&H++),i.spotLightMatrix[P]=te.matrix,q.castShadow){const X=t.get(q);X.shadowIntensity=te.intensity,X.shadowBias=te.bias,X.shadowNormalBias=te.normalBias,X.shadowRadius=te.radius,X.shadowMapSize=te.mapSize,i.spotShadow[P]=X,i.spotShadowMap[P]=Se,k++}P++}else if(q.isRectAreaLight){const ae=e.get(q);ae.color.copy(re).multiplyScalar(ue),ae.halfWidth.set(q.width*.5,0,0),ae.halfHeight.set(0,q.height*.5,0),i.rectArea[b]=ae,b++}else if(q.isPointLight){const ae=e.get(q);if(ae.color.copy(q.color).multiplyScalar(q.intensity),ae.distance=q.distance,ae.decay=q.decay,q.castShadow){const te=q.shadow,X=t.get(q);X.shadowIntensity=te.intensity,X.shadowBias=te.bias,X.shadowNormalBias=te.normalBias,X.shadowRadius=te.radius,X.shadowMapSize=te.mapSize,X.shadowCameraNear=te.camera.near,X.shadowCameraFar=te.camera.far,i.pointShadow[A]=X,i.pointShadowMap[A]=Se,i.pointShadowMatrix[A]=q.shadow.matrix,U++}i.point[A]=ae,A++}else if(q.isHemisphereLight){const ae=e.get(q);ae.skyColor.copy(q.color).multiplyScalar(ue),ae.groundColor.copy(q.groundColor).multiplyScalar(ue),i.hemi[M]=ae,M++}}b>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ke.LTC_FLOAT_1,i.rectAreaLTC2=Ke.LTC_FLOAT_2):(i.rectAreaLTC1=Ke.LTC_HALF_1,i.rectAreaLTC2=Ke.LTC_HALF_2)),i.ambient[0]=_,i.ambient[1]=x,i.ambient[2]=w;const $=i.hash;($.directionalLength!==E||$.pointLength!==A||$.spotLength!==P||$.rectAreaLength!==b||$.hemiLength!==M||$.numDirectionalShadows!==O||$.numPointShadows!==U||$.numSpotShadows!==k||$.numSpotMaps!==B||$.numLightProbes!==G)&&(i.directional.length=E,i.spot.length=P,i.rectArea.length=b,i.point.length=A,i.hemi.length=M,i.directionalShadow.length=O,i.directionalShadowMap.length=O,i.pointShadow.length=U,i.pointShadowMap.length=U,i.spotShadow.length=k,i.spotShadowMap.length=k,i.directionalShadowMatrix.length=O,i.pointShadowMatrix.length=U,i.spotLightMatrix.length=k+B-H,i.spotLightMap.length=B,i.numSpotLightShadowsWithMaps=H,i.numLightProbes=G,$.directionalLength=E,$.pointLength=A,$.spotLength=P,$.rectAreaLength=b,$.hemiLength=M,$.numDirectionalShadows=O,$.numPointShadows=U,$.numSpotShadows=k,$.numSpotMaps=B,$.numLightProbes=G,i.version=AO++)}function f(m,_){let x=0,w=0,E=0,A=0,P=0;const b=_.matrixWorldInverse;for(let M=0,O=m.length;M<O;M++){const U=m[M];if(U.isDirectionalLight){const k=i.directional[x];k.direction.setFromMatrixPosition(U.matrixWorld),o.setFromMatrixPosition(U.target.matrixWorld),k.direction.sub(o),k.direction.transformDirection(b),x++}else if(U.isSpotLight){const k=i.spot[E];k.position.setFromMatrixPosition(U.matrixWorld),k.position.applyMatrix4(b),k.direction.setFromMatrixPosition(U.matrixWorld),o.setFromMatrixPosition(U.target.matrixWorld),k.direction.sub(o),k.direction.transformDirection(b),E++}else if(U.isRectAreaLight){const k=i.rectArea[A];k.position.setFromMatrixPosition(U.matrixWorld),k.position.applyMatrix4(b),u.identity(),l.copy(U.matrixWorld),l.premultiply(b),u.extractRotation(l),k.halfWidth.set(U.width*.5,0,0),k.halfHeight.set(0,U.height*.5,0),k.halfWidth.applyMatrix4(u),k.halfHeight.applyMatrix4(u),A++}else if(U.isPointLight){const k=i.point[w];k.position.setFromMatrixPosition(U.matrixWorld),k.position.applyMatrix4(b),w++}else if(U.isHemisphereLight){const k=i.hemi[P];k.direction.setFromMatrixPosition(U.matrixWorld),k.direction.transformDirection(b),P++}}}return{setup:h,setupView:f,state:i}}function iw(n){const e=new PO(n),t=[],i=[];function o(_){m.camera=_,t.length=0,i.length=0}function l(_){t.push(_)}function u(_){i.push(_)}function h(){e.setup(t)}function f(_){e.setupView(t,_)}const m={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:o,state:m,setupLights:h,setupLightsView:f,pushLight:l,pushShadow:u}}function RO(n){let e=new WeakMap;function t(o,l=0){const u=e.get(o);let h;return u===void 0?(h=new iw(n),e.set(o,[h])):l>=u.length?(h=new iw(n),u.push(h)):h=u[l],h}function i(){e=new WeakMap}return{get:t,dispose:i}}const NO=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,LO=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,DO=[new xe(1,0,0),new xe(-1,0,0),new xe(0,1,0),new xe(0,-1,0),new xe(0,0,1),new xe(0,0,-1)],IO=[new xe(0,-1,0),new xe(0,-1,0),new xe(0,0,1),new xe(0,0,-1),new xe(0,-1,0),new xe(0,-1,0)],rw=new zn,mu=new xe,rg=new xe;function UO(n,e,t){let i=new aM;const o=new cn,l=new cn,u=new In,h=new $L,f=new JL,m={},_=t.maxTextureSize,x={[Zo]:zi,[zi]:Zo,[zs]:zs},w=new Fr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new cn},radius:{value:4}},vertexShader:NO,fragmentShader:LO}),E=w.clone();E.defines.HORIZONTAL_PASS=1;const A=new $s;A.setAttribute("position",new ds(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const P=new ps(A,w),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Xh;let M=this.type;this.render=function(H,G,$){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||H.length===0)return;H.type===zN&&(Lt("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),H.type=Xh);const I=n.getRenderTarget(),z=n.getActiveCubeFace(),q=n.getActiveMipmapLevel(),re=n.state;re.setBlending(Gs),re.buffers.depth.getReversed()===!0?re.buffers.color.setClear(0,0,0,0):re.buffers.color.setClear(1,1,1,1),re.buffers.depth.setTest(!0),re.setScissorTest(!1);const ue=M!==this.type;ue&&G.traverse(function(ge){ge.material&&(Array.isArray(ge.material)?ge.material.forEach(Se=>Se.needsUpdate=!0):ge.material.needsUpdate=!0)});for(let ge=0,Se=H.length;ge<Se;ge++){const ae=H[ge],te=ae.shadow;if(te===void 0){Lt("WebGLShadowMap:",ae,"has no shadow.");continue}if(te.autoUpdate===!1&&te.needsUpdate===!1)continue;o.copy(te.mapSize);const X=te.getFrameExtents();if(o.multiply(X),l.copy(te.mapSize),(o.x>_||o.y>_)&&(o.x>_&&(l.x=Math.floor(_/X.x),o.x=l.x*X.x,te.mapSize.x=l.x),o.y>_&&(l.y=Math.floor(_/X.y),o.y=l.y*X.y,te.mapSize.y=l.y)),te.map===null||ue===!0){if(te.map!==null&&(te.map.depthTexture!==null&&(te.map.depthTexture.dispose(),te.map.depthTexture=null),te.map.dispose()),this.type===yu){if(ae.isPointLight){Lt("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}te.map=new us(o.x,o.y,{format:oc,type:qs,minFilter:vi,magFilter:vi,generateMipmaps:!1}),te.map.texture.name=ae.name+".shadowMap",te.map.depthTexture=new Bu(o.x,o.y,ss),te.map.depthTexture.name=ae.name+".shadowMapDepth",te.map.depthTexture.format=Ys,te.map.depthTexture.compareFunction=null,te.map.depthTexture.minFilter=oi,te.map.depthTexture.magFilter=oi}else{ae.isPointLight?(te.map=new oM(o.x),te.map.depthTexture=new YL(o.x,fs)):(te.map=new us(o.x,o.y),te.map.depthTexture=new Bu(o.x,o.y,fs)),te.map.depthTexture.name=ae.name+".shadowMap",te.map.depthTexture.format=Ys;const Q=n.state.buffers.depth.getReversed();this.type===Xh?(te.map.depthTexture.compareFunction=Q?Nv:Rv,te.map.depthTexture.minFilter=vi,te.map.depthTexture.magFilter=vi):(te.map.depthTexture.compareFunction=null,te.map.depthTexture.minFilter=oi,te.map.depthTexture.magFilter=oi)}te.camera.updateProjectionMatrix()}const we=te.map.isWebGLCubeRenderTarget?6:1;for(let Q=0;Q<we;Q++){if(te.map.isWebGLCubeRenderTarget)n.setRenderTarget(te.map,Q),n.clear();else{Q===0&&(n.setRenderTarget(te.map),n.clear());const j=te.getViewport(Q);u.set(l.x*j.x,l.y*j.y,l.x*j.z,l.y*j.w),re.viewport(u)}if(ae.isPointLight){const j=te.camera,he=te.matrix,De=ae.distance||j.far;De!==j.far&&(j.far=De,j.updateProjectionMatrix()),mu.setFromMatrixPosition(ae.matrixWorld),j.position.copy(mu),rg.copy(j.position),rg.add(DO[Q]),j.up.copy(IO[Q]),j.lookAt(rg),j.updateMatrixWorld(),he.makeTranslation(-mu.x,-mu.y,-mu.z),rw.multiplyMatrices(j.projectionMatrix,j.matrixWorldInverse),te._frustum.setFromProjectionMatrix(rw,j.coordinateSystem,j.reversedDepth)}else te.updateMatrices(ae);i=te.getFrustum(),k(G,$,te.camera,ae,this.type)}te.isPointLightShadow!==!0&&this.type===yu&&O(te,$),te.needsUpdate=!1}M=this.type,b.needsUpdate=!1,n.setRenderTarget(I,z,q)};function O(H,G){const $=e.update(P);w.defines.VSM_SAMPLES!==H.blurSamples&&(w.defines.VSM_SAMPLES=H.blurSamples,E.defines.VSM_SAMPLES=H.blurSamples,w.needsUpdate=!0,E.needsUpdate=!0),H.mapPass===null&&(H.mapPass=new us(o.x,o.y,{format:oc,type:qs})),w.uniforms.shadow_pass.value=H.map.depthTexture,w.uniforms.resolution.value=H.mapSize,w.uniforms.radius.value=H.radius,n.setRenderTarget(H.mapPass),n.clear(),n.renderBufferDirect(G,null,$,w,P,null),E.uniforms.shadow_pass.value=H.mapPass.texture,E.uniforms.resolution.value=H.mapSize,E.uniforms.radius.value=H.radius,n.setRenderTarget(H.map),n.clear(),n.renderBufferDirect(G,null,$,E,P,null)}function U(H,G,$,I){let z=null;const q=$.isPointLight===!0?H.customDistanceMaterial:H.customDepthMaterial;if(q!==void 0)z=q;else if(z=$.isPointLight===!0?f:h,n.localClippingEnabled&&G.clipShadows===!0&&Array.isArray(G.clippingPlanes)&&G.clippingPlanes.length!==0||G.displacementMap&&G.displacementScale!==0||G.alphaMap&&G.alphaTest>0||G.map&&G.alphaTest>0||G.alphaToCoverage===!0){const re=z.uuid,ue=G.uuid;let ge=m[re];ge===void 0&&(ge={},m[re]=ge);let Se=ge[ue];Se===void 0&&(Se=z.clone(),ge[ue]=Se,G.addEventListener("dispose",B)),z=Se}if(z.visible=G.visible,z.wireframe=G.wireframe,I===yu?z.side=G.shadowSide!==null?G.shadowSide:G.side:z.side=G.shadowSide!==null?G.shadowSide:x[G.side],z.alphaMap=G.alphaMap,z.alphaTest=G.alphaToCoverage===!0?.5:G.alphaTest,z.map=G.map,z.clipShadows=G.clipShadows,z.clippingPlanes=G.clippingPlanes,z.clipIntersection=G.clipIntersection,z.displacementMap=G.displacementMap,z.displacementScale=G.displacementScale,z.displacementBias=G.displacementBias,z.wireframeLinewidth=G.wireframeLinewidth,z.linewidth=G.linewidth,$.isPointLight===!0&&z.isMeshDistanceMaterial===!0){const re=n.properties.get(z);re.light=$}return z}function k(H,G,$,I,z){if(H.visible===!1)return;if(H.layers.test(G.layers)&&(H.isMesh||H.isLine||H.isPoints)&&(H.castShadow||H.receiveShadow&&z===yu)&&(!H.frustumCulled||i.intersectsObject(H))){H.modelViewMatrix.multiplyMatrices($.matrixWorldInverse,H.matrixWorld);const ue=e.update(H),ge=H.material;if(Array.isArray(ge)){const Se=ue.groups;for(let ae=0,te=Se.length;ae<te;ae++){const X=Se[ae],we=ge[X.materialIndex];if(we&&we.visible){const Q=U(H,we,I,z);H.onBeforeShadow(n,H,G,$,ue,Q,X),n.renderBufferDirect($,null,ue,Q,H,X),H.onAfterShadow(n,H,G,$,ue,Q,X)}}}else if(ge.visible){const Se=U(H,ge,I,z);H.onBeforeShadow(n,H,G,$,ue,Se,null),n.renderBufferDirect($,null,ue,Se,H,null),H.onAfterShadow(n,H,G,$,ue,Se,null)}}const re=H.children;for(let ue=0,ge=re.length;ue<ge;ue++)k(re[ue],G,$,I,z)}function B(H){H.target.removeEventListener("dispose",B);for(const $ in m){const I=m[$],z=H.target.uuid;z in I&&(I[z].dispose(),delete I[z])}}}const OO={[Og]:Fg,[kg]:jg,[Bg]:Vg,[rc]:zg,[Fg]:Og,[jg]:kg,[Vg]:Bg,[zg]:rc};function FO(n,e){function t(){let J=!1;const Ze=new In;let Oe=null;const Ye=new In(0,0,0,0);return{setMask:function(Ue){Oe!==Ue&&!J&&(n.colorMask(Ue,Ue,Ue,Ue),Oe=Ue)},setLocked:function(Ue){J=Ue},setClear:function(Ue,Te,Xe,Mt,rn){rn===!0&&(Ue*=Mt,Te*=Mt,Xe*=Mt),Ze.set(Ue,Te,Xe,Mt),Ye.equals(Ze)===!1&&(n.clearColor(Ue,Te,Xe,Mt),Ye.copy(Ze))},reset:function(){J=!1,Oe=null,Ye.set(-1,0,0,0)}}}function i(){let J=!1,Ze=!1,Oe=null,Ye=null,Ue=null;return{setReversed:function(Te){if(Ze!==Te){const Xe=e.get("EXT_clip_control");Te?Xe.clipControlEXT(Xe.LOWER_LEFT_EXT,Xe.ZERO_TO_ONE_EXT):Xe.clipControlEXT(Xe.LOWER_LEFT_EXT,Xe.NEGATIVE_ONE_TO_ONE_EXT),Ze=Te;const Mt=Ue;Ue=null,this.setClear(Mt)}},getReversed:function(){return Ze},setTest:function(Te){Te?be(n.DEPTH_TEST):Re(n.DEPTH_TEST)},setMask:function(Te){Oe!==Te&&!J&&(n.depthMask(Te),Oe=Te)},setFunc:function(Te){if(Ze&&(Te=OO[Te]),Ye!==Te){switch(Te){case Og:n.depthFunc(n.NEVER);break;case Fg:n.depthFunc(n.ALWAYS);break;case kg:n.depthFunc(n.LESS);break;case rc:n.depthFunc(n.LEQUAL);break;case Bg:n.depthFunc(n.EQUAL);break;case zg:n.depthFunc(n.GEQUAL);break;case jg:n.depthFunc(n.GREATER);break;case Vg:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ye=Te}},setLocked:function(Te){J=Te},setClear:function(Te){Ue!==Te&&(Ze&&(Te=1-Te),n.clearDepth(Te),Ue=Te)},reset:function(){J=!1,Oe=null,Ye=null,Ue=null,Ze=!1}}}function o(){let J=!1,Ze=null,Oe=null,Ye=null,Ue=null,Te=null,Xe=null,Mt=null,rn=null;return{setTest:function(Yt){J||(Yt?be(n.STENCIL_TEST):Re(n.STENCIL_TEST))},setMask:function(Yt){Ze!==Yt&&!J&&(n.stencilMask(Yt),Ze=Yt)},setFunc:function(Yt,ti,ni){(Oe!==Yt||Ye!==ti||Ue!==ni)&&(n.stencilFunc(Yt,ti,ni),Oe=Yt,Ye=ti,Ue=ni)},setOp:function(Yt,ti,ni){(Te!==Yt||Xe!==ti||Mt!==ni)&&(n.stencilOp(Yt,ti,ni),Te=Yt,Xe=ti,Mt=ni)},setLocked:function(Yt){J=Yt},setClear:function(Yt){rn!==Yt&&(n.clearStencil(Yt),rn=Yt)},reset:function(){J=!1,Ze=null,Oe=null,Ye=null,Ue=null,Te=null,Xe=null,Mt=null,rn=null}}}const l=new t,u=new i,h=new o,f=new WeakMap,m=new WeakMap;let _={},x={},w=new WeakMap,E=[],A=null,P=!1,b=null,M=null,O=null,U=null,k=null,B=null,H=null,G=new pn(0,0,0),$=0,I=!1,z=null,q=null,re=null,ue=null,ge=null;const Se=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ae=!1,te=0;const X=n.getParameter(n.VERSION);X.indexOf("WebGL")!==-1?(te=parseFloat(/^WebGL (\d)/.exec(X)[1]),ae=te>=1):X.indexOf("OpenGL ES")!==-1&&(te=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),ae=te>=2);let we=null,Q={};const j=n.getParameter(n.SCISSOR_BOX),he=n.getParameter(n.VIEWPORT),De=new In().fromArray(j),je=new In().fromArray(he);function ke(J,Ze,Oe,Ye){const Ue=new Uint8Array(4),Te=n.createTexture();n.bindTexture(J,Te),n.texParameteri(J,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(J,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Xe=0;Xe<Oe;Xe++)J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY?n.texImage3D(Ze,0,n.RGBA,1,1,Ye,0,n.RGBA,n.UNSIGNED_BYTE,Ue):n.texImage2D(Ze+Xe,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ue);return Te}const oe={};oe[n.TEXTURE_2D]=ke(n.TEXTURE_2D,n.TEXTURE_2D,1),oe[n.TEXTURE_CUBE_MAP]=ke(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),oe[n.TEXTURE_2D_ARRAY]=ke(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),oe[n.TEXTURE_3D]=ke(n.TEXTURE_3D,n.TEXTURE_3D,1,1),l.setClear(0,0,0,1),u.setClear(1),h.setClear(0),be(n.DEPTH_TEST),u.setFunc(rc),Rt(!1),un(uS),be(n.CULL_FACE),qt(Gs);function be(J){_[J]!==!0&&(n.enable(J),_[J]=!0)}function Re(J){_[J]!==!1&&(n.disable(J),_[J]=!1)}function nt(J,Ze){return x[J]!==Ze?(n.bindFramebuffer(J,Ze),x[J]=Ze,J===n.DRAW_FRAMEBUFFER&&(x[n.FRAMEBUFFER]=Ze),J===n.FRAMEBUFFER&&(x[n.DRAW_FRAMEBUFFER]=Ze),!0):!1}function qe(J,Ze){let Oe=E,Ye=!1;if(J){Oe=w.get(Ze),Oe===void 0&&(Oe=[],w.set(Ze,Oe));const Ue=J.textures;if(Oe.length!==Ue.length||Oe[0]!==n.COLOR_ATTACHMENT0){for(let Te=0,Xe=Ue.length;Te<Xe;Te++)Oe[Te]=n.COLOR_ATTACHMENT0+Te;Oe.length=Ue.length,Ye=!0}}else Oe[0]!==n.BACK&&(Oe[0]=n.BACK,Ye=!0);Ye&&n.drawBuffers(Oe)}function Ft(J){return A!==J?(n.useProgram(J),A=J,!0):!1}const mn={[Ua]:n.FUNC_ADD,[VN]:n.FUNC_SUBTRACT,[HN]:n.FUNC_REVERSE_SUBTRACT};mn[GN]=n.MIN,mn[WN]=n.MAX;const It={[XN]:n.ZERO,[ZN]:n.ONE,[qN]:n.SRC_COLOR,[Ig]:n.SRC_ALPHA,[eL]:n.SRC_ALPHA_SATURATE,[JN]:n.DST_COLOR,[KN]:n.DST_ALPHA,[YN]:n.ONE_MINUS_SRC_COLOR,[Ug]:n.ONE_MINUS_SRC_ALPHA,[QN]:n.ONE_MINUS_DST_COLOR,[$N]:n.ONE_MINUS_DST_ALPHA,[tL]:n.CONSTANT_COLOR,[nL]:n.ONE_MINUS_CONSTANT_COLOR,[iL]:n.CONSTANT_ALPHA,[rL]:n.ONE_MINUS_CONSTANT_ALPHA};function qt(J,Ze,Oe,Ye,Ue,Te,Xe,Mt,rn,Yt){if(J===Gs){P===!0&&(Re(n.BLEND),P=!1);return}if(P===!1&&(be(n.BLEND),P=!0),J!==jN){if(J!==b||Yt!==I){if((M!==Ua||k!==Ua)&&(n.blendEquation(n.FUNC_ADD),M=Ua,k=Ua),Yt)switch(J){case Jl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case dS:n.blendFunc(n.ONE,n.ONE);break;case hS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case fS:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:tn("WebGLState: Invalid blending: ",J);break}else switch(J){case Jl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case dS:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case hS:tn("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case fS:tn("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:tn("WebGLState: Invalid blending: ",J);break}O=null,U=null,B=null,H=null,G.set(0,0,0),$=0,b=J,I=Yt}return}Ue=Ue||Ze,Te=Te||Oe,Xe=Xe||Ye,(Ze!==M||Ue!==k)&&(n.blendEquationSeparate(mn[Ze],mn[Ue]),M=Ze,k=Ue),(Oe!==O||Ye!==U||Te!==B||Xe!==H)&&(n.blendFuncSeparate(It[Oe],It[Ye],It[Te],It[Xe]),O=Oe,U=Ye,B=Te,H=Xe),(Mt.equals(G)===!1||rn!==$)&&(n.blendColor(Mt.r,Mt.g,Mt.b,rn),G.copy(Mt),$=rn),b=J,I=!1}function $t(J,Ze){J.side===zs?Re(n.CULL_FACE):be(n.CULL_FACE);let Oe=J.side===zi;Ze&&(Oe=!Oe),Rt(Oe),J.blending===Jl&&J.transparent===!1?qt(Gs):qt(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.blendColor,J.blendAlpha,J.premultipliedAlpha),u.setFunc(J.depthFunc),u.setTest(J.depthTest),u.setMask(J.depthWrite),l.setMask(J.colorWrite);const Ye=J.stencilWrite;h.setTest(Ye),Ye&&(h.setMask(J.stencilWriteMask),h.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),h.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),vn(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits),J.alphaToCoverage===!0?be(n.SAMPLE_ALPHA_TO_COVERAGE):Re(n.SAMPLE_ALPHA_TO_COVERAGE)}function Rt(J){z!==J&&(J?n.frontFace(n.CW):n.frontFace(n.CCW),z=J)}function un(J){J!==kN?(be(n.CULL_FACE),J!==q&&(J===uS?n.cullFace(n.BACK):J===BN?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Re(n.CULL_FACE),q=J}function Y(J){J!==re&&(ae&&n.lineWidth(J),re=J)}function vn(J,Ze,Oe){J?(be(n.POLYGON_OFFSET_FILL),(ue!==Ze||ge!==Oe)&&(n.polygonOffset(Ze,Oe),ue=Ze,ge=Oe)):Re(n.POLYGON_OFFSET_FILL)}function Vt(J){J?be(n.SCISSOR_TEST):Re(n.SCISSOR_TEST)}function Wt(J){J===void 0&&(J=n.TEXTURE0+Se-1),we!==J&&(n.activeTexture(J),we=J)}function ot(J,Ze,Oe){Oe===void 0&&(we===null?Oe=n.TEXTURE0+Se-1:Oe=we);let Ye=Q[Oe];Ye===void 0&&(Ye={type:void 0,texture:void 0},Q[Oe]=Ye),(Ye.type!==J||Ye.texture!==Ze)&&(we!==Oe&&(n.activeTexture(Oe),we=Oe),n.bindTexture(J,Ze||oe[J]),Ye.type=J,Ye.texture=Ze)}function V(){const J=Q[we];J!==void 0&&J.type!==void 0&&(n.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function R(){try{n.compressedTexImage2D(...arguments)}catch(J){tn("WebGLState:",J)}}function ie(){try{n.compressedTexImage3D(...arguments)}catch(J){tn("WebGLState:",J)}}function Ee(){try{n.texSubImage2D(...arguments)}catch(J){tn("WebGLState:",J)}}function Ae(){try{n.texSubImage3D(...arguments)}catch(J){tn("WebGLState:",J)}}function Me(){try{n.compressedTexSubImage2D(...arguments)}catch(J){tn("WebGLState:",J)}}function dt(){try{n.compressedTexSubImage3D(...arguments)}catch(J){tn("WebGLState:",J)}}function Ve(){try{n.texStorage2D(...arguments)}catch(J){tn("WebGLState:",J)}}function it(){try{n.texStorage3D(...arguments)}catch(J){tn("WebGLState:",J)}}function St(){try{n.texImage2D(...arguments)}catch(J){tn("WebGLState:",J)}}function Ie(){try{n.texImage3D(...arguments)}catch(J){tn("WebGLState:",J)}}function We(J){De.equals(J)===!1&&(n.scissor(J.x,J.y,J.z,J.w),De.copy(J))}function st(J){je.equals(J)===!1&&(n.viewport(J.x,J.y,J.z,J.w),je.copy(J))}function lt(J,Ze){let Oe=m.get(Ze);Oe===void 0&&(Oe=new WeakMap,m.set(Ze,Oe));let Ye=Oe.get(J);Ye===void 0&&(Ye=n.getUniformBlockIndex(Ze,J.name),Oe.set(J,Ye))}function ze(J,Ze){const Ye=m.get(Ze).get(J);f.get(Ze)!==Ye&&(n.uniformBlockBinding(Ze,Ye,J.__bindingPointIndex),f.set(Ze,Ye))}function Nt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),u.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),_={},we=null,Q={},x={},w=new WeakMap,E=[],A=null,P=!1,b=null,M=null,O=null,U=null,k=null,B=null,H=null,G=new pn(0,0,0),$=0,I=!1,z=null,q=null,re=null,ue=null,ge=null,De.set(0,0,n.canvas.width,n.canvas.height),je.set(0,0,n.canvas.width,n.canvas.height),l.reset(),u.reset(),h.reset()}return{buffers:{color:l,depth:u,stencil:h},enable:be,disable:Re,bindFramebuffer:nt,drawBuffers:qe,useProgram:Ft,setBlending:qt,setMaterial:$t,setFlipSided:Rt,setCullFace:un,setLineWidth:Y,setPolygonOffset:vn,setScissorTest:Vt,activeTexture:Wt,bindTexture:ot,unbindTexture:V,compressedTexImage2D:R,compressedTexImage3D:ie,texImage2D:St,texImage3D:Ie,updateUBOMapping:lt,uniformBlockBinding:ze,texStorage2D:Ve,texStorage3D:it,texSubImage2D:Ee,texSubImage3D:Ae,compressedTexSubImage2D:Me,compressedTexSubImage3D:dt,scissor:We,viewport:st,reset:Nt}}function kO(n,e,t,i,o,l,u){const h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new cn,_=new WeakMap;let x;const w=new WeakMap;let E=!1;try{E=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(V,R){return E?new OffscreenCanvas(V,R):mf("canvas")}function P(V,R,ie){let Ee=1;const Ae=ot(V);if((Ae.width>ie||Ae.height>ie)&&(Ee=ie/Math.max(Ae.width,Ae.height)),Ee<1)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap||typeof VideoFrame<"u"&&V instanceof VideoFrame){const Me=Math.floor(Ee*Ae.width),dt=Math.floor(Ee*Ae.height);x===void 0&&(x=A(Me,dt));const Ve=R?A(Me,dt):x;return Ve.width=Me,Ve.height=dt,Ve.getContext("2d").drawImage(V,0,0,Me,dt),Lt("WebGLRenderer: Texture has been resized from ("+Ae.width+"x"+Ae.height+") to ("+Me+"x"+dt+")."),Ve}else return"data"in V&&Lt("WebGLRenderer: Image in DataTexture is too big ("+Ae.width+"x"+Ae.height+")."),V;return V}function b(V){return V.generateMipmaps}function M(V){n.generateMipmap(V)}function O(V){return V.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:V.isWebGL3DRenderTarget?n.TEXTURE_3D:V.isWebGLArrayRenderTarget||V.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function U(V,R,ie,Ee,Ae=!1){if(V!==null){if(n[V]!==void 0)return n[V];Lt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let Me=R;if(R===n.RED&&(ie===n.FLOAT&&(Me=n.R32F),ie===n.HALF_FLOAT&&(Me=n.R16F),ie===n.UNSIGNED_BYTE&&(Me=n.R8)),R===n.RED_INTEGER&&(ie===n.UNSIGNED_BYTE&&(Me=n.R8UI),ie===n.UNSIGNED_SHORT&&(Me=n.R16UI),ie===n.UNSIGNED_INT&&(Me=n.R32UI),ie===n.BYTE&&(Me=n.R8I),ie===n.SHORT&&(Me=n.R16I),ie===n.INT&&(Me=n.R32I)),R===n.RG&&(ie===n.FLOAT&&(Me=n.RG32F),ie===n.HALF_FLOAT&&(Me=n.RG16F),ie===n.UNSIGNED_BYTE&&(Me=n.RG8)),R===n.RG_INTEGER&&(ie===n.UNSIGNED_BYTE&&(Me=n.RG8UI),ie===n.UNSIGNED_SHORT&&(Me=n.RG16UI),ie===n.UNSIGNED_INT&&(Me=n.RG32UI),ie===n.BYTE&&(Me=n.RG8I),ie===n.SHORT&&(Me=n.RG16I),ie===n.INT&&(Me=n.RG32I)),R===n.RGB_INTEGER&&(ie===n.UNSIGNED_BYTE&&(Me=n.RGB8UI),ie===n.UNSIGNED_SHORT&&(Me=n.RGB16UI),ie===n.UNSIGNED_INT&&(Me=n.RGB32UI),ie===n.BYTE&&(Me=n.RGB8I),ie===n.SHORT&&(Me=n.RGB16I),ie===n.INT&&(Me=n.RGB32I)),R===n.RGBA_INTEGER&&(ie===n.UNSIGNED_BYTE&&(Me=n.RGBA8UI),ie===n.UNSIGNED_SHORT&&(Me=n.RGBA16UI),ie===n.UNSIGNED_INT&&(Me=n.RGBA32UI),ie===n.BYTE&&(Me=n.RGBA8I),ie===n.SHORT&&(Me=n.RGBA16I),ie===n.INT&&(Me=n.RGBA32I)),R===n.RGB&&(ie===n.UNSIGNED_INT_5_9_9_9_REV&&(Me=n.RGB9_E5),ie===n.UNSIGNED_INT_10F_11F_11F_REV&&(Me=n.R11F_G11F_B10F)),R===n.RGBA){const dt=Ae?ff:Qt.getTransfer(Ee);ie===n.FLOAT&&(Me=n.RGBA32F),ie===n.HALF_FLOAT&&(Me=n.RGBA16F),ie===n.UNSIGNED_BYTE&&(Me=dt===ln?n.SRGB8_ALPHA8:n.RGBA8),ie===n.UNSIGNED_SHORT_4_4_4_4&&(Me=n.RGBA4),ie===n.UNSIGNED_SHORT_5_5_5_1&&(Me=n.RGB5_A1)}return(Me===n.R16F||Me===n.R32F||Me===n.RG16F||Me===n.RG32F||Me===n.RGBA16F||Me===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Me}function k(V,R){let ie;return V?R===null||R===fs||R===Fu?ie=n.DEPTH24_STENCIL8:R===ss?ie=n.DEPTH32F_STENCIL8:R===Ou&&(ie=n.DEPTH24_STENCIL8,Lt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):R===null||R===fs||R===Fu?ie=n.DEPTH_COMPONENT24:R===ss?ie=n.DEPTH_COMPONENT32F:R===Ou&&(ie=n.DEPTH_COMPONENT16),ie}function B(V,R){return b(V)===!0||V.isFramebufferTexture&&V.minFilter!==oi&&V.minFilter!==vi?Math.log2(Math.max(R.width,R.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?R.mipmaps.length:1}function H(V){const R=V.target;R.removeEventListener("dispose",H),$(R),R.isVideoTexture&&_.delete(R)}function G(V){const R=V.target;R.removeEventListener("dispose",G),z(R)}function $(V){const R=i.get(V);if(R.__webglInit===void 0)return;const ie=V.source,Ee=w.get(ie);if(Ee){const Ae=Ee[R.__cacheKey];Ae.usedTimes--,Ae.usedTimes===0&&I(V),Object.keys(Ee).length===0&&w.delete(ie)}i.remove(V)}function I(V){const R=i.get(V);n.deleteTexture(R.__webglTexture);const ie=V.source,Ee=w.get(ie);delete Ee[R.__cacheKey],u.memory.textures--}function z(V){const R=i.get(V);if(V.depthTexture&&(V.depthTexture.dispose(),i.remove(V.depthTexture)),V.isWebGLCubeRenderTarget)for(let Ee=0;Ee<6;Ee++){if(Array.isArray(R.__webglFramebuffer[Ee]))for(let Ae=0;Ae<R.__webglFramebuffer[Ee].length;Ae++)n.deleteFramebuffer(R.__webglFramebuffer[Ee][Ae]);else n.deleteFramebuffer(R.__webglFramebuffer[Ee]);R.__webglDepthbuffer&&n.deleteRenderbuffer(R.__webglDepthbuffer[Ee])}else{if(Array.isArray(R.__webglFramebuffer))for(let Ee=0;Ee<R.__webglFramebuffer.length;Ee++)n.deleteFramebuffer(R.__webglFramebuffer[Ee]);else n.deleteFramebuffer(R.__webglFramebuffer);if(R.__webglDepthbuffer&&n.deleteRenderbuffer(R.__webglDepthbuffer),R.__webglMultisampledFramebuffer&&n.deleteFramebuffer(R.__webglMultisampledFramebuffer),R.__webglColorRenderbuffer)for(let Ee=0;Ee<R.__webglColorRenderbuffer.length;Ee++)R.__webglColorRenderbuffer[Ee]&&n.deleteRenderbuffer(R.__webglColorRenderbuffer[Ee]);R.__webglDepthRenderbuffer&&n.deleteRenderbuffer(R.__webglDepthRenderbuffer)}const ie=V.textures;for(let Ee=0,Ae=ie.length;Ee<Ae;Ee++){const Me=i.get(ie[Ee]);Me.__webglTexture&&(n.deleteTexture(Me.__webglTexture),u.memory.textures--),i.remove(ie[Ee])}i.remove(V)}let q=0;function re(){q=0}function ue(){const V=q;return V>=o.maxTextures&&Lt("WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+o.maxTextures),q+=1,V}function ge(V){const R=[];return R.push(V.wrapS),R.push(V.wrapT),R.push(V.wrapR||0),R.push(V.magFilter),R.push(V.minFilter),R.push(V.anisotropy),R.push(V.internalFormat),R.push(V.format),R.push(V.type),R.push(V.generateMipmaps),R.push(V.premultiplyAlpha),R.push(V.flipY),R.push(V.unpackAlignment),R.push(V.colorSpace),R.join()}function Se(V,R){const ie=i.get(V);if(V.isVideoTexture&&Vt(V),V.isRenderTargetTexture===!1&&V.isExternalTexture!==!0&&V.version>0&&ie.__version!==V.version){const Ee=V.image;if(Ee===null)Lt("WebGLRenderer: Texture marked for update but no image data found.");else if(Ee.complete===!1)Lt("WebGLRenderer: Texture marked for update but image is incomplete");else{oe(ie,V,R);return}}else V.isExternalTexture&&(ie.__webglTexture=V.sourceTexture?V.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,ie.__webglTexture,n.TEXTURE0+R)}function ae(V,R){const ie=i.get(V);if(V.isRenderTargetTexture===!1&&V.version>0&&ie.__version!==V.version){oe(ie,V,R);return}else V.isExternalTexture&&(ie.__webglTexture=V.sourceTexture?V.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,ie.__webglTexture,n.TEXTURE0+R)}function te(V,R){const ie=i.get(V);if(V.isRenderTargetTexture===!1&&V.version>0&&ie.__version!==V.version){oe(ie,V,R);return}t.bindTexture(n.TEXTURE_3D,ie.__webglTexture,n.TEXTURE0+R)}function X(V,R){const ie=i.get(V);if(V.isCubeDepthTexture!==!0&&V.version>0&&ie.__version!==V.version){be(ie,V,R);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ie.__webglTexture,n.TEXTURE0+R)}const we={[Wg]:n.REPEAT,[js]:n.CLAMP_TO_EDGE,[Xg]:n.MIRRORED_REPEAT},Q={[oi]:n.NEAREST,[aL]:n.NEAREST_MIPMAP_NEAREST,[gh]:n.NEAREST_MIPMAP_LINEAR,[vi]:n.LINEAR,[Cm]:n.LINEAR_MIPMAP_NEAREST,[ka]:n.LINEAR_MIPMAP_LINEAR},j={[dL]:n.NEVER,[gL]:n.ALWAYS,[hL]:n.LESS,[Rv]:n.LEQUAL,[fL]:n.EQUAL,[Nv]:n.GEQUAL,[pL]:n.GREATER,[mL]:n.NOTEQUAL};function he(V,R){if(R.type===ss&&e.has("OES_texture_float_linear")===!1&&(R.magFilter===vi||R.magFilter===Cm||R.magFilter===gh||R.magFilter===ka||R.minFilter===vi||R.minFilter===Cm||R.minFilter===gh||R.minFilter===ka)&&Lt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(V,n.TEXTURE_WRAP_S,we[R.wrapS]),n.texParameteri(V,n.TEXTURE_WRAP_T,we[R.wrapT]),(V===n.TEXTURE_3D||V===n.TEXTURE_2D_ARRAY)&&n.texParameteri(V,n.TEXTURE_WRAP_R,we[R.wrapR]),n.texParameteri(V,n.TEXTURE_MAG_FILTER,Q[R.magFilter]),n.texParameteri(V,n.TEXTURE_MIN_FILTER,Q[R.minFilter]),R.compareFunction&&(n.texParameteri(V,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(V,n.TEXTURE_COMPARE_FUNC,j[R.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(R.magFilter===oi||R.minFilter!==gh&&R.minFilter!==ka||R.type===ss&&e.has("OES_texture_float_linear")===!1)return;if(R.anisotropy>1||i.get(R).__currentAnisotropy){const ie=e.get("EXT_texture_filter_anisotropic");n.texParameterf(V,ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(R.anisotropy,o.getMaxAnisotropy())),i.get(R).__currentAnisotropy=R.anisotropy}}}function De(V,R){let ie=!1;V.__webglInit===void 0&&(V.__webglInit=!0,R.addEventListener("dispose",H));const Ee=R.source;let Ae=w.get(Ee);Ae===void 0&&(Ae={},w.set(Ee,Ae));const Me=ge(R);if(Me!==V.__cacheKey){Ae[Me]===void 0&&(Ae[Me]={texture:n.createTexture(),usedTimes:0},u.memory.textures++,ie=!0),Ae[Me].usedTimes++;const dt=Ae[V.__cacheKey];dt!==void 0&&(Ae[V.__cacheKey].usedTimes--,dt.usedTimes===0&&I(R)),V.__cacheKey=Me,V.__webglTexture=Ae[Me].texture}return ie}function je(V,R,ie){return Math.floor(Math.floor(V/ie)/R)}function ke(V,R,ie,Ee){const Me=V.updateRanges;if(Me.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,R.width,R.height,ie,Ee,R.data);else{Me.sort((Ie,We)=>Ie.start-We.start);let dt=0;for(let Ie=1;Ie<Me.length;Ie++){const We=Me[dt],st=Me[Ie],lt=We.start+We.count,ze=je(st.start,R.width,4),Nt=je(We.start,R.width,4);st.start<=lt+1&&ze===Nt&&je(st.start+st.count-1,R.width,4)===ze?We.count=Math.max(We.count,st.start+st.count-We.start):(++dt,Me[dt]=st)}Me.length=dt+1;const Ve=n.getParameter(n.UNPACK_ROW_LENGTH),it=n.getParameter(n.UNPACK_SKIP_PIXELS),St=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,R.width);for(let Ie=0,We=Me.length;Ie<We;Ie++){const st=Me[Ie],lt=Math.floor(st.start/4),ze=Math.ceil(st.count/4),Nt=lt%R.width,J=Math.floor(lt/R.width),Ze=ze,Oe=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Nt),n.pixelStorei(n.UNPACK_SKIP_ROWS,J),t.texSubImage2D(n.TEXTURE_2D,0,Nt,J,Ze,Oe,ie,Ee,R.data)}V.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Ve),n.pixelStorei(n.UNPACK_SKIP_PIXELS,it),n.pixelStorei(n.UNPACK_SKIP_ROWS,St)}}function oe(V,R,ie){let Ee=n.TEXTURE_2D;(R.isDataArrayTexture||R.isCompressedArrayTexture)&&(Ee=n.TEXTURE_2D_ARRAY),R.isData3DTexture&&(Ee=n.TEXTURE_3D);const Ae=De(V,R),Me=R.source;t.bindTexture(Ee,V.__webglTexture,n.TEXTURE0+ie);const dt=i.get(Me);if(Me.version!==dt.__version||Ae===!0){t.activeTexture(n.TEXTURE0+ie);const Ve=Qt.getPrimaries(Qt.workingColorSpace),it=R.colorSpace===jo?null:Qt.getPrimaries(R.colorSpace),St=R.colorSpace===jo||Ve===it?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,R.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,R.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,St);let Ie=P(R.image,!1,o.maxTextureSize);Ie=Wt(R,Ie);const We=l.convert(R.format,R.colorSpace),st=l.convert(R.type);let lt=U(R.internalFormat,We,st,R.colorSpace,R.isVideoTexture);he(Ee,R);let ze;const Nt=R.mipmaps,J=R.isVideoTexture!==!0,Ze=dt.__version===void 0||Ae===!0,Oe=Me.dataReady,Ye=B(R,Ie);if(R.isDepthTexture)lt=k(R.format===Ba,R.type),Ze&&(J?t.texStorage2D(n.TEXTURE_2D,1,lt,Ie.width,Ie.height):t.texImage2D(n.TEXTURE_2D,0,lt,Ie.width,Ie.height,0,We,st,null));else if(R.isDataTexture)if(Nt.length>0){J&&Ze&&t.texStorage2D(n.TEXTURE_2D,Ye,lt,Nt[0].width,Nt[0].height);for(let Ue=0,Te=Nt.length;Ue<Te;Ue++)ze=Nt[Ue],J?Oe&&t.texSubImage2D(n.TEXTURE_2D,Ue,0,0,ze.width,ze.height,We,st,ze.data):t.texImage2D(n.TEXTURE_2D,Ue,lt,ze.width,ze.height,0,We,st,ze.data);R.generateMipmaps=!1}else J?(Ze&&t.texStorage2D(n.TEXTURE_2D,Ye,lt,Ie.width,Ie.height),Oe&&ke(R,Ie,We,st)):t.texImage2D(n.TEXTURE_2D,0,lt,Ie.width,Ie.height,0,We,st,Ie.data);else if(R.isCompressedTexture)if(R.isCompressedArrayTexture){J&&Ze&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ye,lt,Nt[0].width,Nt[0].height,Ie.depth);for(let Ue=0,Te=Nt.length;Ue<Te;Ue++)if(ze=Nt[Ue],R.format!==Ur)if(We!==null)if(J){if(Oe)if(R.layerUpdates.size>0){const Xe=US(ze.width,ze.height,R.format,R.type);for(const Mt of R.layerUpdates){const rn=ze.data.subarray(Mt*Xe/ze.data.BYTES_PER_ELEMENT,(Mt+1)*Xe/ze.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,Mt,ze.width,ze.height,1,We,rn)}R.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,0,ze.width,ze.height,Ie.depth,We,ze.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ue,lt,ze.width,ze.height,Ie.depth,0,ze.data,0,0);else Lt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else J?Oe&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,0,ze.width,ze.height,Ie.depth,We,st,ze.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ue,lt,ze.width,ze.height,Ie.depth,0,We,st,ze.data)}else{J&&Ze&&t.texStorage2D(n.TEXTURE_2D,Ye,lt,Nt[0].width,Nt[0].height);for(let Ue=0,Te=Nt.length;Ue<Te;Ue++)ze=Nt[Ue],R.format!==Ur?We!==null?J?Oe&&t.compressedTexSubImage2D(n.TEXTURE_2D,Ue,0,0,ze.width,ze.height,We,ze.data):t.compressedTexImage2D(n.TEXTURE_2D,Ue,lt,ze.width,ze.height,0,ze.data):Lt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):J?Oe&&t.texSubImage2D(n.TEXTURE_2D,Ue,0,0,ze.width,ze.height,We,st,ze.data):t.texImage2D(n.TEXTURE_2D,Ue,lt,ze.width,ze.height,0,We,st,ze.data)}else if(R.isDataArrayTexture)if(J){if(Ze&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ye,lt,Ie.width,Ie.height,Ie.depth),Oe)if(R.layerUpdates.size>0){const Ue=US(Ie.width,Ie.height,R.format,R.type);for(const Te of R.layerUpdates){const Xe=Ie.data.subarray(Te*Ue/Ie.data.BYTES_PER_ELEMENT,(Te+1)*Ue/Ie.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Te,Ie.width,Ie.height,1,We,st,Xe)}R.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ie.width,Ie.height,Ie.depth,We,st,Ie.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,lt,Ie.width,Ie.height,Ie.depth,0,We,st,Ie.data);else if(R.isData3DTexture)J?(Ze&&t.texStorage3D(n.TEXTURE_3D,Ye,lt,Ie.width,Ie.height,Ie.depth),Oe&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ie.width,Ie.height,Ie.depth,We,st,Ie.data)):t.texImage3D(n.TEXTURE_3D,0,lt,Ie.width,Ie.height,Ie.depth,0,We,st,Ie.data);else if(R.isFramebufferTexture){if(Ze)if(J)t.texStorage2D(n.TEXTURE_2D,Ye,lt,Ie.width,Ie.height);else{let Ue=Ie.width,Te=Ie.height;for(let Xe=0;Xe<Ye;Xe++)t.texImage2D(n.TEXTURE_2D,Xe,lt,Ue,Te,0,We,st,null),Ue>>=1,Te>>=1}}else if(Nt.length>0){if(J&&Ze){const Ue=ot(Nt[0]);t.texStorage2D(n.TEXTURE_2D,Ye,lt,Ue.width,Ue.height)}for(let Ue=0,Te=Nt.length;Ue<Te;Ue++)ze=Nt[Ue],J?Oe&&t.texSubImage2D(n.TEXTURE_2D,Ue,0,0,We,st,ze):t.texImage2D(n.TEXTURE_2D,Ue,lt,We,st,ze);R.generateMipmaps=!1}else if(J){if(Ze){const Ue=ot(Ie);t.texStorage2D(n.TEXTURE_2D,Ye,lt,Ue.width,Ue.height)}Oe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,We,st,Ie)}else t.texImage2D(n.TEXTURE_2D,0,lt,We,st,Ie);b(R)&&M(Ee),dt.__version=Me.version,R.onUpdate&&R.onUpdate(R)}V.__version=R.version}function be(V,R,ie){if(R.image.length!==6)return;const Ee=De(V,R),Ae=R.source;t.bindTexture(n.TEXTURE_CUBE_MAP,V.__webglTexture,n.TEXTURE0+ie);const Me=i.get(Ae);if(Ae.version!==Me.__version||Ee===!0){t.activeTexture(n.TEXTURE0+ie);const dt=Qt.getPrimaries(Qt.workingColorSpace),Ve=R.colorSpace===jo?null:Qt.getPrimaries(R.colorSpace),it=R.colorSpace===jo||dt===Ve?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,R.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,R.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,it);const St=R.isCompressedTexture||R.image[0].isCompressedTexture,Ie=R.image[0]&&R.image[0].isDataTexture,We=[];for(let Te=0;Te<6;Te++)!St&&!Ie?We[Te]=P(R.image[Te],!0,o.maxCubemapSize):We[Te]=Ie?R.image[Te].image:R.image[Te],We[Te]=Wt(R,We[Te]);const st=We[0],lt=l.convert(R.format,R.colorSpace),ze=l.convert(R.type),Nt=U(R.internalFormat,lt,ze,R.colorSpace),J=R.isVideoTexture!==!0,Ze=Me.__version===void 0||Ee===!0,Oe=Ae.dataReady;let Ye=B(R,st);he(n.TEXTURE_CUBE_MAP,R);let Ue;if(St){J&&Ze&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ye,Nt,st.width,st.height);for(let Te=0;Te<6;Te++){Ue=We[Te].mipmaps;for(let Xe=0;Xe<Ue.length;Xe++){const Mt=Ue[Xe];R.format!==Ur?lt!==null?J?Oe&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Xe,0,0,Mt.width,Mt.height,lt,Mt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Xe,Nt,Mt.width,Mt.height,0,Mt.data):Lt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):J?Oe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Xe,0,0,Mt.width,Mt.height,lt,ze,Mt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Xe,Nt,Mt.width,Mt.height,0,lt,ze,Mt.data)}}}else{if(Ue=R.mipmaps,J&&Ze){Ue.length>0&&Ye++;const Te=ot(We[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ye,Nt,Te.width,Te.height)}for(let Te=0;Te<6;Te++)if(Ie){J?Oe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,We[Te].width,We[Te].height,lt,ze,We[Te].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,Nt,We[Te].width,We[Te].height,0,lt,ze,We[Te].data);for(let Xe=0;Xe<Ue.length;Xe++){const rn=Ue[Xe].image[Te].image;J?Oe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Xe+1,0,0,rn.width,rn.height,lt,ze,rn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Xe+1,Nt,rn.width,rn.height,0,lt,ze,rn.data)}}else{J?Oe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,lt,ze,We[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,Nt,lt,ze,We[Te]);for(let Xe=0;Xe<Ue.length;Xe++){const Mt=Ue[Xe];J?Oe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Xe+1,0,0,lt,ze,Mt.image[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Xe+1,Nt,lt,ze,Mt.image[Te])}}}b(R)&&M(n.TEXTURE_CUBE_MAP),Me.__version=Ae.version,R.onUpdate&&R.onUpdate(R)}V.__version=R.version}function Re(V,R,ie,Ee,Ae,Me){const dt=l.convert(ie.format,ie.colorSpace),Ve=l.convert(ie.type),it=U(ie.internalFormat,dt,Ve,ie.colorSpace),St=i.get(R),Ie=i.get(ie);if(Ie.__renderTarget=R,!St.__hasExternalTextures){const We=Math.max(1,R.width>>Me),st=Math.max(1,R.height>>Me);Ae===n.TEXTURE_3D||Ae===n.TEXTURE_2D_ARRAY?t.texImage3D(Ae,Me,it,We,st,R.depth,0,dt,Ve,null):t.texImage2D(Ae,Me,it,We,st,0,dt,Ve,null)}t.bindFramebuffer(n.FRAMEBUFFER,V),vn(R)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ee,Ae,Ie.__webglTexture,0,Y(R)):(Ae===n.TEXTURE_2D||Ae>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ae<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ee,Ae,Ie.__webglTexture,Me),t.bindFramebuffer(n.FRAMEBUFFER,null)}function nt(V,R,ie){if(n.bindRenderbuffer(n.RENDERBUFFER,V),R.depthBuffer){const Ee=R.depthTexture,Ae=Ee&&Ee.isDepthTexture?Ee.type:null,Me=k(R.stencilBuffer,Ae),dt=R.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;vn(R)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Y(R),Me,R.width,R.height):ie?n.renderbufferStorageMultisample(n.RENDERBUFFER,Y(R),Me,R.width,R.height):n.renderbufferStorage(n.RENDERBUFFER,Me,R.width,R.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,dt,n.RENDERBUFFER,V)}else{const Ee=R.textures;for(let Ae=0;Ae<Ee.length;Ae++){const Me=Ee[Ae],dt=l.convert(Me.format,Me.colorSpace),Ve=l.convert(Me.type),it=U(Me.internalFormat,dt,Ve,Me.colorSpace);vn(R)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Y(R),it,R.width,R.height):ie?n.renderbufferStorageMultisample(n.RENDERBUFFER,Y(R),it,R.width,R.height):n.renderbufferStorage(n.RENDERBUFFER,it,R.width,R.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function qe(V,R,ie){const Ee=R.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(n.FRAMEBUFFER,V),!(R.depthTexture&&R.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ae=i.get(R.depthTexture);if(Ae.__renderTarget=R,(!Ae.__webglTexture||R.depthTexture.image.width!==R.width||R.depthTexture.image.height!==R.height)&&(R.depthTexture.image.width=R.width,R.depthTexture.image.height=R.height,R.depthTexture.needsUpdate=!0),Ee){if(Ae.__webglInit===void 0&&(Ae.__webglInit=!0,R.depthTexture.addEventListener("dispose",H)),Ae.__webglTexture===void 0){Ae.__webglTexture=n.createTexture(),t.bindTexture(n.TEXTURE_CUBE_MAP,Ae.__webglTexture),he(n.TEXTURE_CUBE_MAP,R.depthTexture);const St=l.convert(R.depthTexture.format),Ie=l.convert(R.depthTexture.type);let We;R.depthTexture.format===Ys?We=n.DEPTH_COMPONENT24:R.depthTexture.format===Ba&&(We=n.DEPTH24_STENCIL8);for(let st=0;st<6;st++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+st,0,We,R.width,R.height,0,St,Ie,null)}}else Se(R.depthTexture,0);const Me=Ae.__webglTexture,dt=Y(R),Ve=Ee?n.TEXTURE_CUBE_MAP_POSITIVE_X+ie:n.TEXTURE_2D,it=R.depthTexture.format===Ba?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(R.depthTexture.format===Ys)vn(R)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,it,Ve,Me,0,dt):n.framebufferTexture2D(n.FRAMEBUFFER,it,Ve,Me,0);else if(R.depthTexture.format===Ba)vn(R)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,it,Ve,Me,0,dt):n.framebufferTexture2D(n.FRAMEBUFFER,it,Ve,Me,0);else throw new Error("Unknown depthTexture format")}function Ft(V){const R=i.get(V),ie=V.isWebGLCubeRenderTarget===!0;if(R.__boundDepthTexture!==V.depthTexture){const Ee=V.depthTexture;if(R.__depthDisposeCallback&&R.__depthDisposeCallback(),Ee){const Ae=()=>{delete R.__boundDepthTexture,delete R.__depthDisposeCallback,Ee.removeEventListener("dispose",Ae)};Ee.addEventListener("dispose",Ae),R.__depthDisposeCallback=Ae}R.__boundDepthTexture=Ee}if(V.depthTexture&&!R.__autoAllocateDepthBuffer)if(ie)for(let Ee=0;Ee<6;Ee++)qe(R.__webglFramebuffer[Ee],V,Ee);else{const Ee=V.texture.mipmaps;Ee&&Ee.length>0?qe(R.__webglFramebuffer[0],V,0):qe(R.__webglFramebuffer,V,0)}else if(ie){R.__webglDepthbuffer=[];for(let Ee=0;Ee<6;Ee++)if(t.bindFramebuffer(n.FRAMEBUFFER,R.__webglFramebuffer[Ee]),R.__webglDepthbuffer[Ee]===void 0)R.__webglDepthbuffer[Ee]=n.createRenderbuffer(),nt(R.__webglDepthbuffer[Ee],V,!1);else{const Ae=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Me=R.__webglDepthbuffer[Ee];n.bindRenderbuffer(n.RENDERBUFFER,Me),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ae,n.RENDERBUFFER,Me)}}else{const Ee=V.texture.mipmaps;if(Ee&&Ee.length>0?t.bindFramebuffer(n.FRAMEBUFFER,R.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,R.__webglFramebuffer),R.__webglDepthbuffer===void 0)R.__webglDepthbuffer=n.createRenderbuffer(),nt(R.__webglDepthbuffer,V,!1);else{const Ae=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Me=R.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Me),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ae,n.RENDERBUFFER,Me)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function mn(V,R,ie){const Ee=i.get(V);R!==void 0&&Re(Ee.__webglFramebuffer,V,V.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ie!==void 0&&Ft(V)}function It(V){const R=V.texture,ie=i.get(V),Ee=i.get(R);V.addEventListener("dispose",G);const Ae=V.textures,Me=V.isWebGLCubeRenderTarget===!0,dt=Ae.length>1;if(dt||(Ee.__webglTexture===void 0&&(Ee.__webglTexture=n.createTexture()),Ee.__version=R.version,u.memory.textures++),Me){ie.__webglFramebuffer=[];for(let Ve=0;Ve<6;Ve++)if(R.mipmaps&&R.mipmaps.length>0){ie.__webglFramebuffer[Ve]=[];for(let it=0;it<R.mipmaps.length;it++)ie.__webglFramebuffer[Ve][it]=n.createFramebuffer()}else ie.__webglFramebuffer[Ve]=n.createFramebuffer()}else{if(R.mipmaps&&R.mipmaps.length>0){ie.__webglFramebuffer=[];for(let Ve=0;Ve<R.mipmaps.length;Ve++)ie.__webglFramebuffer[Ve]=n.createFramebuffer()}else ie.__webglFramebuffer=n.createFramebuffer();if(dt)for(let Ve=0,it=Ae.length;Ve<it;Ve++){const St=i.get(Ae[Ve]);St.__webglTexture===void 0&&(St.__webglTexture=n.createTexture(),u.memory.textures++)}if(V.samples>0&&vn(V)===!1){ie.__webglMultisampledFramebuffer=n.createFramebuffer(),ie.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ie.__webglMultisampledFramebuffer);for(let Ve=0;Ve<Ae.length;Ve++){const it=Ae[Ve];ie.__webglColorRenderbuffer[Ve]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ie.__webglColorRenderbuffer[Ve]);const St=l.convert(it.format,it.colorSpace),Ie=l.convert(it.type),We=U(it.internalFormat,St,Ie,it.colorSpace,V.isXRRenderTarget===!0),st=Y(V);n.renderbufferStorageMultisample(n.RENDERBUFFER,st,We,V.width,V.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.RENDERBUFFER,ie.__webglColorRenderbuffer[Ve])}n.bindRenderbuffer(n.RENDERBUFFER,null),V.depthBuffer&&(ie.__webglDepthRenderbuffer=n.createRenderbuffer(),nt(ie.__webglDepthRenderbuffer,V,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Me){t.bindTexture(n.TEXTURE_CUBE_MAP,Ee.__webglTexture),he(n.TEXTURE_CUBE_MAP,R);for(let Ve=0;Ve<6;Ve++)if(R.mipmaps&&R.mipmaps.length>0)for(let it=0;it<R.mipmaps.length;it++)Re(ie.__webglFramebuffer[Ve][it],V,R,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,it);else Re(ie.__webglFramebuffer[Ve],V,R,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0);b(R)&&M(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(dt){for(let Ve=0,it=Ae.length;Ve<it;Ve++){const St=Ae[Ve],Ie=i.get(St);let We=n.TEXTURE_2D;(V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(We=V.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(We,Ie.__webglTexture),he(We,St),Re(ie.__webglFramebuffer,V,St,n.COLOR_ATTACHMENT0+Ve,We,0),b(St)&&M(We)}t.unbindTexture()}else{let Ve=n.TEXTURE_2D;if((V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(Ve=V.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ve,Ee.__webglTexture),he(Ve,R),R.mipmaps&&R.mipmaps.length>0)for(let it=0;it<R.mipmaps.length;it++)Re(ie.__webglFramebuffer[it],V,R,n.COLOR_ATTACHMENT0,Ve,it);else Re(ie.__webglFramebuffer,V,R,n.COLOR_ATTACHMENT0,Ve,0);b(R)&&M(Ve),t.unbindTexture()}V.depthBuffer&&Ft(V)}function qt(V){const R=V.textures;for(let ie=0,Ee=R.length;ie<Ee;ie++){const Ae=R[ie];if(b(Ae)){const Me=O(V),dt=i.get(Ae).__webglTexture;t.bindTexture(Me,dt),M(Me),t.unbindTexture()}}}const $t=[],Rt=[];function un(V){if(V.samples>0){if(vn(V)===!1){const R=V.textures,ie=V.width,Ee=V.height;let Ae=n.COLOR_BUFFER_BIT;const Me=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,dt=i.get(V),Ve=R.length>1;if(Ve)for(let St=0;St<R.length;St++)t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+St,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+St,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,dt.__webglMultisampledFramebuffer);const it=V.texture.mipmaps;it&&it.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,dt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,dt.__webglFramebuffer);for(let St=0;St<R.length;St++){if(V.resolveDepthBuffer&&(V.depthBuffer&&(Ae|=n.DEPTH_BUFFER_BIT),V.stencilBuffer&&V.resolveStencilBuffer&&(Ae|=n.STENCIL_BUFFER_BIT)),Ve){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,dt.__webglColorRenderbuffer[St]);const Ie=i.get(R[St]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ie,0)}n.blitFramebuffer(0,0,ie,Ee,0,0,ie,Ee,Ae,n.NEAREST),f===!0&&($t.length=0,Rt.length=0,$t.push(n.COLOR_ATTACHMENT0+St),V.depthBuffer&&V.resolveDepthBuffer===!1&&($t.push(Me),Rt.push(Me),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Rt)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,$t))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ve)for(let St=0;St<R.length;St++){t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+St,n.RENDERBUFFER,dt.__webglColorRenderbuffer[St]);const Ie=i.get(R[St]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+St,n.TEXTURE_2D,Ie,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,dt.__webglMultisampledFramebuffer)}else if(V.depthBuffer&&V.resolveDepthBuffer===!1&&f){const R=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[R])}}}function Y(V){return Math.min(o.maxSamples,V.samples)}function vn(V){const R=i.get(V);return V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&R.__useRenderToTexture!==!1}function Vt(V){const R=u.render.frame;_.get(V)!==R&&(_.set(V,R),V.update())}function Wt(V,R){const ie=V.colorSpace,Ee=V.format,Ae=V.type;return V.isCompressedTexture===!0||V.isVideoTexture===!0||ie!==ac&&ie!==jo&&(Qt.getTransfer(ie)===ln?(Ee!==Ur||Ae!==xr)&&Lt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):tn("WebGLTextures: Unsupported texture color space:",ie)),R}function ot(V){return typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement?(m.width=V.naturalWidth||V.width,m.height=V.naturalHeight||V.height):typeof VideoFrame<"u"&&V instanceof VideoFrame?(m.width=V.displayWidth,m.height=V.displayHeight):(m.width=V.width,m.height=V.height),m}this.allocateTextureUnit=ue,this.resetTextureUnits=re,this.setTexture2D=Se,this.setTexture2DArray=ae,this.setTexture3D=te,this.setTextureCube=X,this.rebindTextures=mn,this.setupRenderTarget=It,this.updateRenderTargetMipmap=qt,this.updateMultisampleRenderTarget=un,this.setupDepthRenderbuffer=Ft,this.setupFrameBufferTexture=Re,this.useMultisampledRTT=vn,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function BO(n,e){function t(i,o=jo){let l;const u=Qt.getTransfer(o);if(i===xr)return n.UNSIGNED_BYTE;if(i===Ev)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Tv)return n.UNSIGNED_SHORT_5_5_5_1;if(i===W1)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===X1)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===H1)return n.BYTE;if(i===G1)return n.SHORT;if(i===Ou)return n.UNSIGNED_SHORT;if(i===Mv)return n.INT;if(i===fs)return n.UNSIGNED_INT;if(i===ss)return n.FLOAT;if(i===qs)return n.HALF_FLOAT;if(i===Z1)return n.ALPHA;if(i===q1)return n.RGB;if(i===Ur)return n.RGBA;if(i===Ys)return n.DEPTH_COMPONENT;if(i===Ba)return n.DEPTH_STENCIL;if(i===Y1)return n.RED;if(i===Av)return n.RED_INTEGER;if(i===oc)return n.RG;if(i===Cv)return n.RG_INTEGER;if(i===Pv)return n.RGBA_INTEGER;if(i===Zh||i===qh||i===Yh||i===Kh)if(u===ln)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(i===Zh)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===qh)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Yh)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Kh)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(i===Zh)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===qh)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Yh)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Kh)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Zg||i===qg||i===Yg||i===Kg)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(i===Zg)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===qg)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Yg)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Kg)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===$g||i===Jg||i===Qg||i===e0||i===t0||i===n0||i===i0)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(i===$g||i===Jg)return u===ln?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(i===Qg)return u===ln?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC;if(i===e0)return l.COMPRESSED_R11_EAC;if(i===t0)return l.COMPRESSED_SIGNED_R11_EAC;if(i===n0)return l.COMPRESSED_RG11_EAC;if(i===i0)return l.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===r0||i===s0||i===o0||i===a0||i===l0||i===c0||i===u0||i===d0||i===h0||i===f0||i===p0||i===m0||i===g0||i===v0)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(i===r0)return u===ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===s0)return u===ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===o0)return u===ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===a0)return u===ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===l0)return u===ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===c0)return u===ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===u0)return u===ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===d0)return u===ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===h0)return u===ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===f0)return u===ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===p0)return u===ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===m0)return u===ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===g0)return u===ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===v0)return u===ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===_0||i===x0||i===y0)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(i===_0)return u===ln?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===x0)return l.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===y0)return l.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===S0||i===w0||i===b0||i===M0)if(l=e.get("EXT_texture_compression_rgtc"),l!==null){if(i===S0)return l.COMPRESSED_RED_RGTC1_EXT;if(i===w0)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===b0)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===M0)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Fu?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const zO=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,jO=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class VO{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new lM(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Fr({vertexShader:zO,fragmentShader:jO,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ps(new Ju(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class HO extends gc{constructor(e,t){super();const i=this;let o=null,l=1,u=null,h="local-floor",f=1,m=null,_=null,x=null,w=null,E=null,A=null;const P=typeof XRWebGLBinding<"u",b=new VO,M={},O=t.getContextAttributes();let U=null,k=null;const B=[],H=[],G=new cn;let $=null;const I=new Dr;I.viewport=new In;const z=new Dr;z.viewport=new In;const q=[I,z],re=new QL;let ue=null,ge=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let be=B[oe];return be===void 0&&(be=new $m,B[oe]=be),be.getTargetRaySpace()},this.getControllerGrip=function(oe){let be=B[oe];return be===void 0&&(be=new $m,B[oe]=be),be.getGripSpace()},this.getHand=function(oe){let be=B[oe];return be===void 0&&(be=new $m,B[oe]=be),be.getHandSpace()};function Se(oe){const be=H.indexOf(oe.inputSource);if(be===-1)return;const Re=B[be];Re!==void 0&&(Re.update(oe.inputSource,oe.frame,m||u),Re.dispatchEvent({type:oe.type,data:oe.inputSource}))}function ae(){o.removeEventListener("select",Se),o.removeEventListener("selectstart",Se),o.removeEventListener("selectend",Se),o.removeEventListener("squeeze",Se),o.removeEventListener("squeezestart",Se),o.removeEventListener("squeezeend",Se),o.removeEventListener("end",ae),o.removeEventListener("inputsourceschange",te);for(let oe=0;oe<B.length;oe++){const be=H[oe];be!==null&&(H[oe]=null,B[oe].disconnect(be))}ue=null,ge=null,b.reset();for(const oe in M)delete M[oe];e.setRenderTarget(U),E=null,w=null,x=null,o=null,k=null,ke.stop(),i.isPresenting=!1,e.setPixelRatio($),e.setSize(G.width,G.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){l=oe,i.isPresenting===!0&&Lt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){h=oe,i.isPresenting===!0&&Lt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return m||u},this.setReferenceSpace=function(oe){m=oe},this.getBaseLayer=function(){return w!==null?w:E},this.getBinding=function(){return x===null&&P&&(x=new XRWebGLBinding(o,t)),x},this.getFrame=function(){return A},this.getSession=function(){return o},this.setSession=async function(oe){if(o=oe,o!==null){if(U=e.getRenderTarget(),o.addEventListener("select",Se),o.addEventListener("selectstart",Se),o.addEventListener("selectend",Se),o.addEventListener("squeeze",Se),o.addEventListener("squeezestart",Se),o.addEventListener("squeezeend",Se),o.addEventListener("end",ae),o.addEventListener("inputsourceschange",te),O.xrCompatible!==!0&&await t.makeXRCompatible(),$=e.getPixelRatio(),e.getSize(G),P&&"createProjectionLayer"in XRWebGLBinding.prototype){let Re=null,nt=null,qe=null;O.depth&&(qe=O.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Re=O.stencil?Ba:Ys,nt=O.stencil?Fu:fs);const Ft={colorFormat:t.RGBA8,depthFormat:qe,scaleFactor:l};x=this.getBinding(),w=x.createProjectionLayer(Ft),o.updateRenderState({layers:[w]}),e.setPixelRatio(1),e.setSize(w.textureWidth,w.textureHeight,!1),k=new us(w.textureWidth,w.textureHeight,{format:Ur,type:xr,depthTexture:new Bu(w.textureWidth,w.textureHeight,nt,void 0,void 0,void 0,void 0,void 0,void 0,Re),stencilBuffer:O.stencil,colorSpace:e.outputColorSpace,samples:O.antialias?4:0,resolveDepthBuffer:w.ignoreDepthValues===!1,resolveStencilBuffer:w.ignoreDepthValues===!1})}else{const Re={antialias:O.antialias,alpha:!0,depth:O.depth,stencil:O.stencil,framebufferScaleFactor:l};E=new XRWebGLLayer(o,t,Re),o.updateRenderState({baseLayer:E}),e.setPixelRatio(1),e.setSize(E.framebufferWidth,E.framebufferHeight,!1),k=new us(E.framebufferWidth,E.framebufferHeight,{format:Ur,type:xr,colorSpace:e.outputColorSpace,stencilBuffer:O.stencil,resolveDepthBuffer:E.ignoreDepthValues===!1,resolveStencilBuffer:E.ignoreDepthValues===!1})}k.isXRRenderTarget=!0,this.setFoveation(f),m=null,u=await o.requestReferenceSpace(h),ke.setContext(o),ke.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode},this.getDepthTexture=function(){return b.getDepthTexture()};function te(oe){for(let be=0;be<oe.removed.length;be++){const Re=oe.removed[be],nt=H.indexOf(Re);nt>=0&&(H[nt]=null,B[nt].disconnect(Re))}for(let be=0;be<oe.added.length;be++){const Re=oe.added[be];let nt=H.indexOf(Re);if(nt===-1){for(let Ft=0;Ft<B.length;Ft++)if(Ft>=H.length){H.push(Re),nt=Ft;break}else if(H[Ft]===null){H[Ft]=Re,nt=Ft;break}if(nt===-1)break}const qe=B[nt];qe&&qe.connect(Re)}}const X=new xe,we=new xe;function Q(oe,be,Re){X.setFromMatrixPosition(be.matrixWorld),we.setFromMatrixPosition(Re.matrixWorld);const nt=X.distanceTo(we),qe=be.projectionMatrix.elements,Ft=Re.projectionMatrix.elements,mn=qe[14]/(qe[10]-1),It=qe[14]/(qe[10]+1),qt=(qe[9]+1)/qe[5],$t=(qe[9]-1)/qe[5],Rt=(qe[8]-1)/qe[0],un=(Ft[8]+1)/Ft[0],Y=mn*Rt,vn=mn*un,Vt=nt/(-Rt+un),Wt=Vt*-Rt;if(be.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(Wt),oe.translateZ(Vt),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert(),qe[10]===-1)oe.projectionMatrix.copy(be.projectionMatrix),oe.projectionMatrixInverse.copy(be.projectionMatrixInverse);else{const ot=mn+Vt,V=It+Vt,R=Y-Wt,ie=vn+(nt-Wt),Ee=qt*It/V*ot,Ae=$t*It/V*ot;oe.projectionMatrix.makePerspective(R,ie,Ee,Ae,ot,V),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert()}}function j(oe,be){be===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(be.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(o===null)return;let be=oe.near,Re=oe.far;b.texture!==null&&(b.depthNear>0&&(be=b.depthNear),b.depthFar>0&&(Re=b.depthFar)),re.near=z.near=I.near=be,re.far=z.far=I.far=Re,(ue!==re.near||ge!==re.far)&&(o.updateRenderState({depthNear:re.near,depthFar:re.far}),ue=re.near,ge=re.far),re.layers.mask=oe.layers.mask|6,I.layers.mask=re.layers.mask&3,z.layers.mask=re.layers.mask&5;const nt=oe.parent,qe=re.cameras;j(re,nt);for(let Ft=0;Ft<qe.length;Ft++)j(qe[Ft],nt);qe.length===2?Q(re,I,z):re.projectionMatrix.copy(I.projectionMatrix),he(oe,re,nt)};function he(oe,be,Re){Re===null?oe.matrix.copy(be.matrixWorld):(oe.matrix.copy(Re.matrixWorld),oe.matrix.invert(),oe.matrix.multiply(be.matrixWorld)),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.updateMatrixWorld(!0),oe.projectionMatrix.copy(be.projectionMatrix),oe.projectionMatrixInverse.copy(be.projectionMatrixInverse),oe.isPerspectiveCamera&&(oe.fov=E0*2*Math.atan(1/oe.projectionMatrix.elements[5]),oe.zoom=1)}this.getCamera=function(){return re},this.getFoveation=function(){if(!(w===null&&E===null))return f},this.setFoveation=function(oe){f=oe,w!==null&&(w.fixedFoveation=oe),E!==null&&E.fixedFoveation!==void 0&&(E.fixedFoveation=oe)},this.hasDepthSensing=function(){return b.texture!==null},this.getDepthSensingMesh=function(){return b.getMesh(re)},this.getCameraTexture=function(oe){return M[oe]};let De=null;function je(oe,be){if(_=be.getViewerPose(m||u),A=be,_!==null){const Re=_.views;E!==null&&(e.setRenderTargetFramebuffer(k,E.framebuffer),e.setRenderTarget(k));let nt=!1;Re.length!==re.cameras.length&&(re.cameras.length=0,nt=!0);for(let It=0;It<Re.length;It++){const qt=Re[It];let $t=null;if(E!==null)$t=E.getViewport(qt);else{const un=x.getViewSubImage(w,qt);$t=un.viewport,It===0&&(e.setRenderTargetTextures(k,un.colorTexture,un.depthStencilTexture),e.setRenderTarget(k))}let Rt=q[It];Rt===void 0&&(Rt=new Dr,Rt.layers.enable(It),Rt.viewport=new In,q[It]=Rt),Rt.matrix.fromArray(qt.transform.matrix),Rt.matrix.decompose(Rt.position,Rt.quaternion,Rt.scale),Rt.projectionMatrix.fromArray(qt.projectionMatrix),Rt.projectionMatrixInverse.copy(Rt.projectionMatrix).invert(),Rt.viewport.set($t.x,$t.y,$t.width,$t.height),It===0&&(re.matrix.copy(Rt.matrix),re.matrix.decompose(re.position,re.quaternion,re.scale)),nt===!0&&re.cameras.push(Rt)}const qe=o.enabledFeatures;if(qe&&qe.includes("depth-sensing")&&o.depthUsage=="gpu-optimized"&&P){x=i.getBinding();const It=x.getDepthInformation(Re[0]);It&&It.isValid&&It.texture&&b.init(It,o.renderState)}if(qe&&qe.includes("camera-access")&&P){e.state.unbindTexture(),x=i.getBinding();for(let It=0;It<Re.length;It++){const qt=Re[It].camera;if(qt){let $t=M[qt];$t||($t=new lM,M[qt]=$t);const Rt=x.getCameraImage(qt);$t.sourceTexture=Rt}}}}for(let Re=0;Re<B.length;Re++){const nt=H[Re],qe=B[Re];nt!==null&&qe!==void 0&&qe.update(nt,be,m||u)}De&&De(oe,be),be.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:be}),A=null}const ke=new cM;ke.setAnimationLoop(je),this.setAnimationLoop=function(oe){De=oe},this.dispose=function(){}}}const Na=new Ks,GO=new zn;function WO(n,e){function t(b,M){b.matrixAutoUpdate===!0&&b.updateMatrix(),M.value.copy(b.matrix)}function i(b,M){M.color.getRGB(b.fogColor.value,iM(n)),M.isFog?(b.fogNear.value=M.near,b.fogFar.value=M.far):M.isFogExp2&&(b.fogDensity.value=M.density)}function o(b,M,O,U,k){M.isMeshBasicMaterial||M.isMeshLambertMaterial?l(b,M):M.isMeshToonMaterial?(l(b,M),x(b,M)):M.isMeshPhongMaterial?(l(b,M),_(b,M)):M.isMeshStandardMaterial?(l(b,M),w(b,M),M.isMeshPhysicalMaterial&&E(b,M,k)):M.isMeshMatcapMaterial?(l(b,M),A(b,M)):M.isMeshDepthMaterial?l(b,M):M.isMeshDistanceMaterial?(l(b,M),P(b,M)):M.isMeshNormalMaterial?l(b,M):M.isLineBasicMaterial?(u(b,M),M.isLineDashedMaterial&&h(b,M)):M.isPointsMaterial?f(b,M,O,U):M.isSpriteMaterial?m(b,M):M.isShadowMaterial?(b.color.value.copy(M.color),b.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function l(b,M){b.opacity.value=M.opacity,M.color&&b.diffuse.value.copy(M.color),M.emissive&&b.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(b.map.value=M.map,t(M.map,b.mapTransform)),M.alphaMap&&(b.alphaMap.value=M.alphaMap,t(M.alphaMap,b.alphaMapTransform)),M.bumpMap&&(b.bumpMap.value=M.bumpMap,t(M.bumpMap,b.bumpMapTransform),b.bumpScale.value=M.bumpScale,M.side===zi&&(b.bumpScale.value*=-1)),M.normalMap&&(b.normalMap.value=M.normalMap,t(M.normalMap,b.normalMapTransform),b.normalScale.value.copy(M.normalScale),M.side===zi&&b.normalScale.value.negate()),M.displacementMap&&(b.displacementMap.value=M.displacementMap,t(M.displacementMap,b.displacementMapTransform),b.displacementScale.value=M.displacementScale,b.displacementBias.value=M.displacementBias),M.emissiveMap&&(b.emissiveMap.value=M.emissiveMap,t(M.emissiveMap,b.emissiveMapTransform)),M.specularMap&&(b.specularMap.value=M.specularMap,t(M.specularMap,b.specularMapTransform)),M.alphaTest>0&&(b.alphaTest.value=M.alphaTest);const O=e.get(M),U=O.envMap,k=O.envMapRotation;U&&(b.envMap.value=U,Na.copy(k),Na.x*=-1,Na.y*=-1,Na.z*=-1,U.isCubeTexture&&U.isRenderTargetTexture===!1&&(Na.y*=-1,Na.z*=-1),b.envMapRotation.value.setFromMatrix4(GO.makeRotationFromEuler(Na)),b.flipEnvMap.value=U.isCubeTexture&&U.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=M.reflectivity,b.ior.value=M.ior,b.refractionRatio.value=M.refractionRatio),M.lightMap&&(b.lightMap.value=M.lightMap,b.lightMapIntensity.value=M.lightMapIntensity,t(M.lightMap,b.lightMapTransform)),M.aoMap&&(b.aoMap.value=M.aoMap,b.aoMapIntensity.value=M.aoMapIntensity,t(M.aoMap,b.aoMapTransform))}function u(b,M){b.diffuse.value.copy(M.color),b.opacity.value=M.opacity,M.map&&(b.map.value=M.map,t(M.map,b.mapTransform))}function h(b,M){b.dashSize.value=M.dashSize,b.totalSize.value=M.dashSize+M.gapSize,b.scale.value=M.scale}function f(b,M,O,U){b.diffuse.value.copy(M.color),b.opacity.value=M.opacity,b.size.value=M.size*O,b.scale.value=U*.5,M.map&&(b.map.value=M.map,t(M.map,b.uvTransform)),M.alphaMap&&(b.alphaMap.value=M.alphaMap,t(M.alphaMap,b.alphaMapTransform)),M.alphaTest>0&&(b.alphaTest.value=M.alphaTest)}function m(b,M){b.diffuse.value.copy(M.color),b.opacity.value=M.opacity,b.rotation.value=M.rotation,M.map&&(b.map.value=M.map,t(M.map,b.mapTransform)),M.alphaMap&&(b.alphaMap.value=M.alphaMap,t(M.alphaMap,b.alphaMapTransform)),M.alphaTest>0&&(b.alphaTest.value=M.alphaTest)}function _(b,M){b.specular.value.copy(M.specular),b.shininess.value=Math.max(M.shininess,1e-4)}function x(b,M){M.gradientMap&&(b.gradientMap.value=M.gradientMap)}function w(b,M){b.metalness.value=M.metalness,M.metalnessMap&&(b.metalnessMap.value=M.metalnessMap,t(M.metalnessMap,b.metalnessMapTransform)),b.roughness.value=M.roughness,M.roughnessMap&&(b.roughnessMap.value=M.roughnessMap,t(M.roughnessMap,b.roughnessMapTransform)),M.envMap&&(b.envMapIntensity.value=M.envMapIntensity)}function E(b,M,O){b.ior.value=M.ior,M.sheen>0&&(b.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),b.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(b.sheenColorMap.value=M.sheenColorMap,t(M.sheenColorMap,b.sheenColorMapTransform)),M.sheenRoughnessMap&&(b.sheenRoughnessMap.value=M.sheenRoughnessMap,t(M.sheenRoughnessMap,b.sheenRoughnessMapTransform))),M.clearcoat>0&&(b.clearcoat.value=M.clearcoat,b.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(b.clearcoatMap.value=M.clearcoatMap,t(M.clearcoatMap,b.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,t(M.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(b.clearcoatNormalMap.value=M.clearcoatNormalMap,t(M.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===zi&&b.clearcoatNormalScale.value.negate())),M.dispersion>0&&(b.dispersion.value=M.dispersion),M.iridescence>0&&(b.iridescence.value=M.iridescence,b.iridescenceIOR.value=M.iridescenceIOR,b.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(b.iridescenceMap.value=M.iridescenceMap,t(M.iridescenceMap,b.iridescenceMapTransform)),M.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=M.iridescenceThicknessMap,t(M.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),M.transmission>0&&(b.transmission.value=M.transmission,b.transmissionSamplerMap.value=O.texture,b.transmissionSamplerSize.value.set(O.width,O.height),M.transmissionMap&&(b.transmissionMap.value=M.transmissionMap,t(M.transmissionMap,b.transmissionMapTransform)),b.thickness.value=M.thickness,M.thicknessMap&&(b.thicknessMap.value=M.thicknessMap,t(M.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=M.attenuationDistance,b.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(b.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(b.anisotropyMap.value=M.anisotropyMap,t(M.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=M.specularIntensity,b.specularColor.value.copy(M.specularColor),M.specularColorMap&&(b.specularColorMap.value=M.specularColorMap,t(M.specularColorMap,b.specularColorMapTransform)),M.specularIntensityMap&&(b.specularIntensityMap.value=M.specularIntensityMap,t(M.specularIntensityMap,b.specularIntensityMapTransform))}function A(b,M){M.matcap&&(b.matcap.value=M.matcap)}function P(b,M){const O=e.get(M).light;b.referencePosition.value.setFromMatrixPosition(O.matrixWorld),b.nearDistance.value=O.shadow.camera.near,b.farDistance.value=O.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:o}}function XO(n,e,t,i){let o={},l={},u=[];const h=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function f(O,U){const k=U.program;i.uniformBlockBinding(O,k)}function m(O,U){let k=o[O.id];k===void 0&&(A(O),k=_(O),o[O.id]=k,O.addEventListener("dispose",b));const B=U.program;i.updateUBOMapping(O,B);const H=e.render.frame;l[O.id]!==H&&(w(O),l[O.id]=H)}function _(O){const U=x();O.__bindingPointIndex=U;const k=n.createBuffer(),B=O.__size,H=O.usage;return n.bindBuffer(n.UNIFORM_BUFFER,k),n.bufferData(n.UNIFORM_BUFFER,B,H),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,U,k),k}function x(){for(let O=0;O<h;O++)if(u.indexOf(O)===-1)return u.push(O),O;return tn("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function w(O){const U=o[O.id],k=O.uniforms,B=O.__cache;n.bindBuffer(n.UNIFORM_BUFFER,U);for(let H=0,G=k.length;H<G;H++){const $=Array.isArray(k[H])?k[H]:[k[H]];for(let I=0,z=$.length;I<z;I++){const q=$[I];if(E(q,H,I,B)===!0){const re=q.__offset,ue=Array.isArray(q.value)?q.value:[q.value];let ge=0;for(let Se=0;Se<ue.length;Se++){const ae=ue[Se],te=P(ae);typeof ae=="number"||typeof ae=="boolean"?(q.__data[0]=ae,n.bufferSubData(n.UNIFORM_BUFFER,re+ge,q.__data)):ae.isMatrix3?(q.__data[0]=ae.elements[0],q.__data[1]=ae.elements[1],q.__data[2]=ae.elements[2],q.__data[3]=0,q.__data[4]=ae.elements[3],q.__data[5]=ae.elements[4],q.__data[6]=ae.elements[5],q.__data[7]=0,q.__data[8]=ae.elements[6],q.__data[9]=ae.elements[7],q.__data[10]=ae.elements[8],q.__data[11]=0):(ae.toArray(q.__data,ge),ge+=te.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,re,q.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function E(O,U,k,B){const H=O.value,G=U+"_"+k;if(B[G]===void 0)return typeof H=="number"||typeof H=="boolean"?B[G]=H:B[G]=H.clone(),!0;{const $=B[G];if(typeof H=="number"||typeof H=="boolean"){if($!==H)return B[G]=H,!0}else if($.equals(H)===!1)return $.copy(H),!0}return!1}function A(O){const U=O.uniforms;let k=0;const B=16;for(let G=0,$=U.length;G<$;G++){const I=Array.isArray(U[G])?U[G]:[U[G]];for(let z=0,q=I.length;z<q;z++){const re=I[z],ue=Array.isArray(re.value)?re.value:[re.value];for(let ge=0,Se=ue.length;ge<Se;ge++){const ae=ue[ge],te=P(ae),X=k%B,we=X%te.boundary,Q=X+we;k+=we,Q!==0&&B-Q<te.storage&&(k+=B-Q),re.__data=new Float32Array(te.storage/Float32Array.BYTES_PER_ELEMENT),re.__offset=k,k+=te.storage}}}const H=k%B;return H>0&&(k+=B-H),O.__size=k,O.__cache={},this}function P(O){const U={boundary:0,storage:0};return typeof O=="number"||typeof O=="boolean"?(U.boundary=4,U.storage=4):O.isVector2?(U.boundary=8,U.storage=8):O.isVector3||O.isColor?(U.boundary=16,U.storage=12):O.isVector4?(U.boundary=16,U.storage=16):O.isMatrix3?(U.boundary=48,U.storage=48):O.isMatrix4?(U.boundary=64,U.storage=64):O.isTexture?Lt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Lt("WebGLRenderer: Unsupported uniform value type.",O),U}function b(O){const U=O.target;U.removeEventListener("dispose",b);const k=u.indexOf(U.__bindingPointIndex);u.splice(k,1),n.deleteBuffer(o[U.id]),delete o[U.id],delete l[U.id]}function M(){for(const O in o)n.deleteBuffer(o[O]);u=[],o={},l={}}return{bind:f,update:m,dispose:M}}const ZO=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let es=null;function qO(){return es===null&&(es=new WL(ZO,16,16,oc,qs),es.name="DFG_LUT",es.minFilter=vi,es.magFilter=vi,es.wrapS=js,es.wrapT=js,es.generateMipmaps=!1,es.needsUpdate=!0),es}class YO{constructor(e={}){const{canvas:t=vL(),context:i=null,depth:o=!0,stencil:l=!1,alpha:u=!1,antialias:h=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:m=!1,powerPreference:_="default",failIfMajorPerformanceCaveat:x=!1,reversedDepthBuffer:w=!1,outputBufferType:E=xr}=e;this.isWebGLRenderer=!0;let A;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");A=i.getContextAttributes().alpha}else A=u;const P=E,b=new Set([Pv,Cv,Av]),M=new Set([xr,fs,Ou,Fu,Ev,Tv]),O=new Uint32Array(4),U=new Int32Array(4);let k=null,B=null;const H=[],G=[];let $=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=cs,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const I=this;let z=!1;this._outputColorSpace=_r;let q=0,re=0,ue=null,ge=-1,Se=null;const ae=new In,te=new In;let X=null;const we=new pn(0);let Q=0,j=t.width,he=t.height,De=1,je=null,ke=null;const oe=new In(0,0,j,he),be=new In(0,0,j,he);let Re=!1;const nt=new aM;let qe=!1,Ft=!1;const mn=new zn,It=new xe,qt=new In,$t={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Rt=!1;function un(){return ue===null?De:1}let Y=i;function vn(F,se){return t.getContext(F,se)}try{const F={alpha:!0,depth:o,stencil:l,antialias:h,premultipliedAlpha:f,preserveDrawingBuffer:m,powerPreference:_,failIfMajorPerformanceCaveat:x};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${bv}`),t.addEventListener("webglcontextlost",Mt,!1),t.addEventListener("webglcontextrestored",rn,!1),t.addEventListener("webglcontextcreationerror",Yt,!1),Y===null){const se="webgl2";if(Y=vn(se,F),Y===null)throw vn(se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(F){throw tn("WebGLRenderer: "+F.message),F}let Vt,Wt,ot,V,R,ie,Ee,Ae,Me,dt,Ve,it,St,Ie,We,st,lt,ze,Nt,J,Ze,Oe,Ye,Ue;function Te(){Vt=new qI(Y),Vt.init(),Oe=new BO(Y,Vt),Wt=new BI(Y,Vt,e,Oe),ot=new FO(Y,Vt),Wt.reversedDepthBuffer&&w&&ot.buffers.depth.setReversed(!0),V=new $I(Y),R=new wO,ie=new kO(Y,Vt,ot,R,Wt,Oe,V),Ee=new jI(I),Ae=new ZI(I),Me=new t3(Y),Ye=new FI(Y,Me),dt=new YI(Y,Me,V,Ye),Ve=new QI(Y,dt,Me,V),Nt=new JI(Y,Wt,ie),st=new zI(R),it=new SO(I,Ee,Ae,Vt,Wt,Ye,st),St=new WO(I,R),Ie=new MO,We=new RO(Vt),ze=new OI(I,Ee,Ae,ot,Ve,A,f),lt=new UO(I,Ve,Wt),Ue=new XO(Y,V,Wt,ot),J=new kI(Y,Vt,V),Ze=new KI(Y,Vt,V),V.programs=it.programs,I.capabilities=Wt,I.extensions=Vt,I.properties=R,I.renderLists=Ie,I.shadowMap=lt,I.state=ot,I.info=V}Te(),P!==xr&&($=new tU(P,t.width,t.height,o,l));const Xe=new HO(I,Y);this.xr=Xe,this.getContext=function(){return Y},this.getContextAttributes=function(){return Y.getContextAttributes()},this.forceContextLoss=function(){const F=Vt.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){const F=Vt.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return De},this.setPixelRatio=function(F){F!==void 0&&(De=F,this.setSize(j,he,!1))},this.getSize=function(F){return F.set(j,he)},this.setSize=function(F,se,_e=!0){if(Xe.isPresenting){Lt("WebGLRenderer: Can't change size while VR device is presenting.");return}j=F,he=se,t.width=Math.floor(F*De),t.height=Math.floor(se*De),_e===!0&&(t.style.width=F+"px",t.style.height=se+"px"),$!==null&&$.setSize(t.width,t.height),this.setViewport(0,0,F,se)},this.getDrawingBufferSize=function(F){return F.set(j*De,he*De).floor()},this.setDrawingBufferSize=function(F,se,_e){j=F,he=se,De=_e,t.width=Math.floor(F*_e),t.height=Math.floor(se*_e),this.setViewport(0,0,F,se)},this.setEffects=function(F){if(P===xr){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(F){for(let se=0;se<F.length;se++)if(F[se].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}$.setEffects(F||[])},this.getCurrentViewport=function(F){return F.copy(ae)},this.getViewport=function(F){return F.copy(oe)},this.setViewport=function(F,se,_e,pe){F.isVector4?oe.set(F.x,F.y,F.z,F.w):oe.set(F,se,_e,pe),ot.viewport(ae.copy(oe).multiplyScalar(De).round())},this.getScissor=function(F){return F.copy(be)},this.setScissor=function(F,se,_e,pe){F.isVector4?be.set(F.x,F.y,F.z,F.w):be.set(F,se,_e,pe),ot.scissor(te.copy(be).multiplyScalar(De).round())},this.getScissorTest=function(){return Re},this.setScissorTest=function(F){ot.setScissorTest(Re=F)},this.setOpaqueSort=function(F){je=F},this.setTransparentSort=function(F){ke=F},this.getClearColor=function(F){return F.copy(ze.getClearColor())},this.setClearColor=function(){ze.setClearColor(...arguments)},this.getClearAlpha=function(){return ze.getClearAlpha()},this.setClearAlpha=function(){ze.setClearAlpha(...arguments)},this.clear=function(F=!0,se=!0,_e=!0){let pe=0;if(F){let le=!1;if(ue!==null){const Ge=ue.texture.format;le=b.has(Ge)}if(le){const Ge=ue.texture.type,$e=M.has(Ge),He=ze.getClearColor(),et=ze.getClearAlpha(),Ne=He.r,Je=He.g,pt=He.b;$e?(O[0]=Ne,O[1]=Je,O[2]=pt,O[3]=et,Y.clearBufferuiv(Y.COLOR,0,O)):(U[0]=Ne,U[1]=Je,U[2]=pt,U[3]=et,Y.clearBufferiv(Y.COLOR,0,U))}else pe|=Y.COLOR_BUFFER_BIT}se&&(pe|=Y.DEPTH_BUFFER_BIT),_e&&(pe|=Y.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Y.clear(pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Mt,!1),t.removeEventListener("webglcontextrestored",rn,!1),t.removeEventListener("webglcontextcreationerror",Yt,!1),ze.dispose(),Ie.dispose(),We.dispose(),R.dispose(),Ee.dispose(),Ae.dispose(),Ve.dispose(),Ye.dispose(),Ue.dispose(),it.dispose(),Xe.dispose(),Xe.removeEventListener("sessionstart",ct),Xe.removeEventListener("sessionend",zr),Pi.stop()};function Mt(F){F.preventDefault(),_S("WebGLRenderer: Context Lost."),z=!0}function rn(){_S("WebGLRenderer: Context Restored."),z=!1;const F=V.autoReset,se=lt.enabled,_e=lt.autoUpdate,pe=lt.needsUpdate,le=lt.type;Te(),V.autoReset=F,lt.enabled=se,lt.autoUpdate=_e,lt.needsUpdate=pe,lt.type=le}function Yt(F){tn("WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function ti(F){const se=F.target;se.removeEventListener("dispose",ti),ni(se)}function ni(F){$o(F),R.remove(F)}function $o(F){const se=R.get(F).programs;se!==void 0&&(se.forEach(function(_e){it.releaseProgram(_e)}),F.isShaderMaterial&&it.releaseShaderCache(F))}this.renderBufferDirect=function(F,se,_e,pe,le,Ge){se===null&&(se=$t);const $e=le.isMesh&&le.matrixWorld.determinant()<0,He=$a(F,se,_e,pe,le);ot.setMaterial(pe,$e);let et=_e.index,Ne=1;if(pe.wireframe===!0){if(et=dt.getWireframeAttribute(_e),et===void 0)return;Ne=2}const Je=_e.drawRange,pt=_e.attributes.position;let Ct=Je.start*Ne,zt=(Je.start+Je.count)*Ne;Ge!==null&&(Ct=Math.max(Ct,Ge.start*Ne),zt=Math.min(zt,(Ge.start+Ge.count)*Ne)),et!==null?(Ct=Math.max(Ct,0),zt=Math.min(zt,et.count)):pt!=null&&(Ct=Math.max(Ct,0),zt=Math.min(zt,pt.count));const sn=zt-Ct;if(sn<0||sn===1/0)return;Ye.setup(le,pe,He,_e,et);let rt,vt=J;if(et!==null&&(rt=Me.get(et),vt=Ze,vt.setIndex(rt)),le.isMesh)pe.wireframe===!0?(ot.setLineWidth(pe.wireframeLinewidth*un()),vt.setMode(Y.LINES)):vt.setMode(Y.TRIANGLES);else if(le.isLine){let mt=pe.linewidth;mt===void 0&&(mt=1),ot.setLineWidth(mt*un()),le.isLineSegments?vt.setMode(Y.LINES):le.isLineLoop?vt.setMode(Y.LINE_LOOP):vt.setMode(Y.LINE_STRIP)}else le.isPoints?vt.setMode(Y.POINTS):le.isSprite&&vt.setMode(Y.TRIANGLES);if(le.isBatchedMesh)if(le._multiDrawInstances!==null)ku("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),vt.renderMultiDrawInstances(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount,le._multiDrawInstances);else if(Vt.get("WEBGL_multi_draw"))vt.renderMultiDraw(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount);else{const mt=le._multiDrawStarts,Zt=le._multiDrawCounts,Et=le._multiDrawCount,Yn=et?Me.get(et).bytesPerElement:1,xi=R.get(pe).currentProgram.getUniforms();for(let gn=0;gn<Et;gn++)xi.setValue(Y,"_gl_DrawID",gn),vt.render(mt[gn]/Yn,Zt[gn])}else if(le.isInstancedMesh)vt.renderInstances(Ct,sn,le.count);else if(_e.isInstancedBufferGeometry){const mt=_e._maxInstanceCount!==void 0?_e._maxInstanceCount:1/0,Zt=Math.min(_e.instanceCount,mt);vt.renderInstances(Ct,sn,Zt)}else vt.render(Ct,sn)};function Br(F,se,_e){F.transparent===!0&&F.side===zs&&F.forceSinglePass===!1?(F.side=zi,F.needsUpdate=!0,jr(F,se,_e),F.side=Zo,F.needsUpdate=!0,jr(F,se,_e),F.side=zs):jr(F,se,_e)}this.compile=function(F,se,_e=null){_e===null&&(_e=F),B=We.get(_e),B.init(se),G.push(B),_e.traverseVisible(function(le){le.isLight&&le.layers.test(se.layers)&&(B.pushLight(le),le.castShadow&&B.pushShadow(le))}),F!==_e&&F.traverseVisible(function(le){le.isLight&&le.layers.test(se.layers)&&(B.pushLight(le),le.castShadow&&B.pushShadow(le))}),B.setupLights();const pe=new Set;return F.traverse(function(le){if(!(le.isMesh||le.isPoints||le.isLine||le.isSprite))return;const Ge=le.material;if(Ge)if(Array.isArray(Ge))for(let $e=0;$e<Ge.length;$e++){const He=Ge[$e];Br(He,_e,le),pe.add(He)}else Br(Ge,_e,le),pe.add(Ge)}),B=G.pop(),pe},this.compileAsync=function(F,se,_e=null){const pe=this.compile(F,se,_e);return new Promise(le=>{function Ge(){if(pe.forEach(function($e){R.get($e).currentProgram.isReady()&&pe.delete($e)}),pe.size===0){le(F);return}setTimeout(Ge,10)}Vt.get("KHR_parallel_shader_compile")!==null?Ge():setTimeout(Ge,10)})};let Jo=null;function qn(F){Jo&&Jo(F)}function ct(){Pi.stop()}function zr(){Pi.start()}const Pi=new cM;Pi.setAnimationLoop(qn),typeof self<"u"&&Pi.setContext(self),this.setAnimationLoop=function(F){Jo=F,Xe.setAnimationLoop(F),F===null?Pi.stop():Pi.start()},Xe.addEventListener("sessionstart",ct),Xe.addEventListener("sessionend",zr),this.render=function(F,se){if(se!==void 0&&se.isCamera!==!0){tn("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(z===!0)return;const _e=Xe.enabled===!0&&Xe.isPresenting===!0,pe=$!==null&&(ue===null||_e)&&$.begin(I,ue);if(F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),se.parent===null&&se.matrixWorldAutoUpdate===!0&&se.updateMatrixWorld(),Xe.enabled===!0&&Xe.isPresenting===!0&&($===null||$.isCompositing()===!1)&&(Xe.cameraAutoUpdate===!0&&Xe.updateCamera(se),se=Xe.getCamera()),F.isScene===!0&&F.onBeforeRender(I,F,se,ue),B=We.get(F,G.length),B.init(se),G.push(B),mn.multiplyMatrices(se.projectionMatrix,se.matrixWorldInverse),nt.setFromProjectionMatrix(mn,os,se.reversedDepth),Ft=this.localClippingEnabled,qe=st.init(this.clippingPlanes,Ft),k=Ie.get(F,H.length),k.init(),H.push(k),Xe.enabled===!0&&Xe.isPresenting===!0){const $e=I.xr.getDepthSensingMesh();$e!==null&&Js($e,se,-1/0,I.sortObjects)}Js(F,se,0,I.sortObjects),k.finish(),I.sortObjects===!0&&k.sort(je,ke),Rt=Xe.enabled===!1||Xe.isPresenting===!1||Xe.hasDepthSensing()===!1,Rt&&ze.addToRenderList(k,F),this.info.render.frame++,qe===!0&&st.beginShadows();const le=B.state.shadowsArray;if(lt.render(le,F,se),qe===!0&&st.endShadows(),this.info.autoReset===!0&&this.info.reset(),(pe&&$.hasRenderPass())===!1){const $e=k.opaque,He=k.transmissive;if(B.setupLights(),se.isArrayCamera){const et=se.cameras;if(He.length>0)for(let Ne=0,Je=et.length;Ne<Je;Ne++){const pt=et[Ne];Qs($e,He,F,pt)}Rt&&ze.render(F);for(let Ne=0,Je=et.length;Ne<Je;Ne++){const pt=et[Ne];Qo(k,F,pt,pt.viewport)}}else He.length>0&&Qs($e,He,F,se),Rt&&ze.render(F),Qo(k,F,se)}ue!==null&&re===0&&(ie.updateMultisampleRenderTarget(ue),ie.updateRenderTargetMipmap(ue)),pe&&$.end(I),F.isScene===!0&&F.onAfterRender(I,F,se),Ye.resetDefaultState(),ge=-1,Se=null,G.pop(),G.length>0?(B=G[G.length-1],qe===!0&&st.setGlobalState(I.clippingPlanes,B.state.camera)):B=null,H.pop(),H.length>0?k=H[H.length-1]:k=null};function Js(F,se,_e,pe){if(F.visible===!1)return;if(F.layers.test(se.layers)){if(F.isGroup)_e=F.renderOrder;else if(F.isLOD)F.autoUpdate===!0&&F.update(se);else if(F.isLight)B.pushLight(F),F.castShadow&&B.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||nt.intersectsSprite(F)){pe&&qt.setFromMatrixPosition(F.matrixWorld).applyMatrix4(mn);const $e=Ve.update(F),He=F.material;He.visible&&k.push(F,$e,He,_e,qt.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||nt.intersectsObject(F))){const $e=Ve.update(F),He=F.material;if(pe&&(F.boundingSphere!==void 0?(F.boundingSphere===null&&F.computeBoundingSphere(),qt.copy(F.boundingSphere.center)):($e.boundingSphere===null&&$e.computeBoundingSphere(),qt.copy($e.boundingSphere.center)),qt.applyMatrix4(F.matrixWorld).applyMatrix4(mn)),Array.isArray(He)){const et=$e.groups;for(let Ne=0,Je=et.length;Ne<Je;Ne++){const pt=et[Ne],Ct=He[pt.materialIndex];Ct&&Ct.visible&&k.push(F,$e,Ct,_e,qt.z,pt)}}else He.visible&&k.push(F,$e,He,_e,qt.z,null)}}const Ge=F.children;for(let $e=0,He=Ge.length;$e<He;$e++)Js(Ge[$e],se,_e,pe)}function Qo(F,se,_e,pe){const{opaque:le,transmissive:Ge,transparent:$e}=F;B.setupLightsView(_e),qe===!0&&st.setGlobalState(I.clippingPlanes,_e),pe&&ot.viewport(ae.copy(pe)),le.length>0&&_i(le,se,_e),Ge.length>0&&_i(Ge,se,_e),$e.length>0&&_i($e,se,_e),ot.buffers.depth.setTest(!0),ot.buffers.depth.setMask(!0),ot.buffers.color.setMask(!0),ot.setPolygonOffset(!1)}function Qs(F,se,_e,pe){if((_e.isScene===!0?_e.overrideMaterial:null)!==null)return;if(B.state.transmissionRenderTarget[pe.id]===void 0){const Ct=Vt.has("EXT_color_buffer_half_float")||Vt.has("EXT_color_buffer_float");B.state.transmissionRenderTarget[pe.id]=new us(1,1,{generateMipmaps:!0,type:Ct?qs:xr,minFilter:ka,samples:Wt.samples,stencilBuffer:l,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Qt.workingColorSpace})}const Ge=B.state.transmissionRenderTarget[pe.id],$e=pe.viewport||ae;Ge.setSize($e.z*I.transmissionResolutionScale,$e.w*I.transmissionResolutionScale);const He=I.getRenderTarget(),et=I.getActiveCubeFace(),Ne=I.getActiveMipmapLevel();I.setRenderTarget(Ge),I.getClearColor(we),Q=I.getClearAlpha(),Q<1&&I.setClearColor(16777215,.5),I.clear(),Rt&&ze.render(_e);const Je=I.toneMapping;I.toneMapping=cs;const pt=pe.viewport;if(pe.viewport!==void 0&&(pe.viewport=void 0),B.setupLightsView(pe),qe===!0&&st.setGlobalState(I.clippingPlanes,pe),_i(F,_e,pe),ie.updateMultisampleRenderTarget(Ge),ie.updateRenderTargetMipmap(Ge),Vt.has("WEBGL_multisampled_render_to_texture")===!1){let Ct=!1;for(let zt=0,sn=se.length;zt<sn;zt++){const rt=se[zt],{object:vt,geometry:mt,material:Zt,group:Et}=rt;if(Zt.side===zs&&vt.layers.test(pe.layers)){const Yn=Zt.side;Zt.side=zi,Zt.needsUpdate=!0,nr(vt,_e,pe,mt,Zt,Et),Zt.side=Yn,Zt.needsUpdate=!0,Ct=!0}}Ct===!0&&(ie.updateMultisampleRenderTarget(Ge),ie.updateRenderTargetMipmap(Ge))}I.setRenderTarget(He,et,Ne),I.setClearColor(we,Q),pt!==void 0&&(pe.viewport=pt),I.toneMapping=Je}function _i(F,se,_e){const pe=se.isScene===!0?se.overrideMaterial:null;for(let le=0,Ge=F.length;le<Ge;le++){const $e=F[le],{object:He,geometry:et,group:Ne}=$e;let Je=$e.material;Je.allowOverride===!0&&pe!==null&&(Je=pe),He.layers.test(_e.layers)&&nr(He,se,_e,et,Je,Ne)}}function nr(F,se,_e,pe,le,Ge){F.onBeforeRender(I,se,_e,pe,le,Ge),F.modelViewMatrix.multiplyMatrices(_e.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),le.onBeforeRender(I,se,_e,pe,F,Ge),le.transparent===!0&&le.side===zs&&le.forceSinglePass===!1?(le.side=zi,le.needsUpdate=!0,I.renderBufferDirect(_e,se,pe,le,F,Ge),le.side=Zo,le.needsUpdate=!0,I.renderBufferDirect(_e,se,pe,le,F,Ge),le.side=zs):I.renderBufferDirect(_e,se,pe,le,F,Ge),F.onAfterRender(I,se,_e,pe,le,Ge)}function jr(F,se,_e){se.isScene!==!0&&(se=$t);const pe=R.get(F),le=B.state.lights,Ge=B.state.shadowsArray,$e=le.state.version,He=it.getParameters(F,le.state,Ge,se,_e),et=it.getProgramCacheKey(He);let Ne=pe.programs;pe.environment=F.isMeshStandardMaterial?se.environment:null,pe.fog=se.fog,pe.envMap=(F.isMeshStandardMaterial?Ae:Ee).get(F.envMap||pe.environment),pe.envMapRotation=pe.environment!==null&&F.envMap===null?se.environmentRotation:F.envMapRotation,Ne===void 0&&(F.addEventListener("dispose",ti),Ne=new Map,pe.programs=Ne);let Je=Ne.get(et);if(Je!==void 0){if(pe.currentProgram===Je&&pe.lightsStateVersion===$e)return ea(F,He),Je}else He.uniforms=it.getUniforms(F),F.onBeforeCompile(He,I),Je=it.acquireProgram(He,et),Ne.set(et,Je),pe.uniforms=He.uniforms;const pt=pe.uniforms;return(!F.isShaderMaterial&&!F.isRawShaderMaterial||F.clipping===!0)&&(pt.clippingPlanes=st.uniform),ea(F,He),pe.needsLights=ta(F),pe.lightsStateVersion=$e,pe.needsLights&&(pt.ambientLightColor.value=le.state.ambient,pt.lightProbe.value=le.state.probe,pt.directionalLights.value=le.state.directional,pt.directionalLightShadows.value=le.state.directionalShadow,pt.spotLights.value=le.state.spot,pt.spotLightShadows.value=le.state.spotShadow,pt.rectAreaLights.value=le.state.rectArea,pt.ltc_1.value=le.state.rectAreaLTC1,pt.ltc_2.value=le.state.rectAreaLTC2,pt.pointLights.value=le.state.point,pt.pointLightShadows.value=le.state.pointShadow,pt.hemisphereLights.value=le.state.hemi,pt.directionalShadowMap.value=le.state.directionalShadowMap,pt.directionalShadowMatrix.value=le.state.directionalShadowMatrix,pt.spotShadowMap.value=le.state.spotShadowMap,pt.spotLightMatrix.value=le.state.spotLightMatrix,pt.spotLightMap.value=le.state.spotLightMap,pt.pointShadowMap.value=le.state.pointShadowMap,pt.pointShadowMatrix.value=le.state.pointShadowMatrix),pe.currentProgram=Je,pe.uniformsList=null,Je}function Ka(F){if(F.uniformsList===null){const se=F.currentProgram.getUniforms();F.uniformsList=$h.seqWithValue(se.seq,F.uniforms)}return F.uniformsList}function ea(F,se){const _e=R.get(F);_e.outputColorSpace=se.outputColorSpace,_e.batching=se.batching,_e.batchingColor=se.batchingColor,_e.instancing=se.instancing,_e.instancingColor=se.instancingColor,_e.instancingMorph=se.instancingMorph,_e.skinning=se.skinning,_e.morphTargets=se.morphTargets,_e.morphNormals=se.morphNormals,_e.morphColors=se.morphColors,_e.morphTargetsCount=se.morphTargetsCount,_e.numClippingPlanes=se.numClippingPlanes,_e.numIntersection=se.numClipIntersection,_e.vertexAlphas=se.vertexAlphas,_e.vertexTangents=se.vertexTangents,_e.toneMapping=se.toneMapping}function $a(F,se,_e,pe,le){se.isScene!==!0&&(se=$t),ie.resetTextureUnits();const Ge=se.fog,$e=pe.isMeshStandardMaterial?se.environment:null,He=ue===null?I.outputColorSpace:ue.isXRRenderTarget===!0?ue.texture.colorSpace:ac,et=(pe.isMeshStandardMaterial?Ae:Ee).get(pe.envMap||$e),Ne=pe.vertexColors===!0&&!!_e.attributes.color&&_e.attributes.color.itemSize===4,Je=!!_e.attributes.tangent&&(!!pe.normalMap||pe.anisotropy>0),pt=!!_e.morphAttributes.position,Ct=!!_e.morphAttributes.normal,zt=!!_e.morphAttributes.color;let sn=cs;pe.toneMapped&&(ue===null||ue.isXRRenderTarget===!0)&&(sn=I.toneMapping);const rt=_e.morphAttributes.position||_e.morphAttributes.normal||_e.morphAttributes.color,vt=rt!==void 0?rt.length:0,mt=R.get(pe),Zt=B.state.lights;if(qe===!0&&(Ft===!0||F!==Se)){const Cn=F===Se&&pe.id===ge;st.setState(pe,F,Cn)}let Et=!1;pe.version===mt.__version?(mt.needsLights&&mt.lightsStateVersion!==Zt.state.version||mt.outputColorSpace!==He||le.isBatchedMesh&&mt.batching===!1||!le.isBatchedMesh&&mt.batching===!0||le.isBatchedMesh&&mt.batchingColor===!0&&le.colorTexture===null||le.isBatchedMesh&&mt.batchingColor===!1&&le.colorTexture!==null||le.isInstancedMesh&&mt.instancing===!1||!le.isInstancedMesh&&mt.instancing===!0||le.isSkinnedMesh&&mt.skinning===!1||!le.isSkinnedMesh&&mt.skinning===!0||le.isInstancedMesh&&mt.instancingColor===!0&&le.instanceColor===null||le.isInstancedMesh&&mt.instancingColor===!1&&le.instanceColor!==null||le.isInstancedMesh&&mt.instancingMorph===!0&&le.morphTexture===null||le.isInstancedMesh&&mt.instancingMorph===!1&&le.morphTexture!==null||mt.envMap!==et||pe.fog===!0&&mt.fog!==Ge||mt.numClippingPlanes!==void 0&&(mt.numClippingPlanes!==st.numPlanes||mt.numIntersection!==st.numIntersection)||mt.vertexAlphas!==Ne||mt.vertexTangents!==Je||mt.morphTargets!==pt||mt.morphNormals!==Ct||mt.morphColors!==zt||mt.toneMapping!==sn||mt.morphTargetsCount!==vt)&&(Et=!0):(Et=!0,mt.__version=pe.version);let Yn=mt.currentProgram;Et===!0&&(Yn=jr(pe,se,le));let xi=!1,gn=!1,dn=!1;const Ht=Yn.getUniforms(),wt=mt.uniforms;if(ot.useProgram(Yn.program)&&(xi=!0,gn=!0,dn=!0),pe.id!==ge&&(ge=pe.id,gn=!0),xi||Se!==F){ot.buffers.depth.getReversed()&&F.reversedDepth!==!0&&(F._reversedDepth=!0,F.updateProjectionMatrix()),Ht.setValue(Y,"projectionMatrix",F.projectionMatrix),Ht.setValue(Y,"viewMatrix",F.matrixWorldInverse);const wn=Ht.map.cameraPosition;wn!==void 0&&wn.setValue(Y,It.setFromMatrixPosition(F.matrixWorld)),Wt.logarithmicDepthBuffer&&Ht.setValue(Y,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial)&&Ht.setValue(Y,"isOrthographic",F.isOrthographicCamera===!0),Se!==F&&(Se=F,gn=!0,dn=!0)}if(mt.needsLights&&(Zt.state.directionalShadowMap.length>0&&Ht.setValue(Y,"directionalShadowMap",Zt.state.directionalShadowMap,ie),Zt.state.spotShadowMap.length>0&&Ht.setValue(Y,"spotShadowMap",Zt.state.spotShadowMap,ie),Zt.state.pointShadowMap.length>0&&Ht.setValue(Y,"pointShadowMap",Zt.state.pointShadowMap,ie)),le.isSkinnedMesh){Ht.setOptional(Y,le,"bindMatrix"),Ht.setOptional(Y,le,"bindMatrixInverse");const Cn=le.skeleton;Cn&&(Cn.boneTexture===null&&Cn.computeBoneTexture(),Ht.setValue(Y,"boneTexture",Cn.boneTexture,ie))}le.isBatchedMesh&&(Ht.setOptional(Y,le,"batchingTexture"),Ht.setValue(Y,"batchingTexture",le._matricesTexture,ie),Ht.setOptional(Y,le,"batchingIdTexture"),Ht.setValue(Y,"batchingIdTexture",le._indirectTexture,ie),Ht.setOptional(Y,le,"batchingColorTexture"),le._colorsTexture!==null&&Ht.setValue(Y,"batchingColorTexture",le._colorsTexture,ie));const Nn=_e.morphAttributes;if((Nn.position!==void 0||Nn.normal!==void 0||Nn.color!==void 0)&&Nt.update(le,_e,Yn),(gn||mt.receiveShadow!==le.receiveShadow)&&(mt.receiveShadow=le.receiveShadow,Ht.setValue(Y,"receiveShadow",le.receiveShadow)),pe.isMeshGouraudMaterial&&pe.envMap!==null&&(wt.envMap.value=et,wt.flipEnvMap.value=et.isCubeTexture&&et.isRenderTargetTexture===!1?-1:1),pe.isMeshStandardMaterial&&pe.envMap===null&&se.environment!==null&&(wt.envMapIntensity.value=se.environmentIntensity),wt.dfgLUT!==void 0&&(wt.dfgLUT.value=qO()),gn&&(Ht.setValue(Y,"toneMappingExposure",I.toneMappingExposure),mt.needsLights&&Ja(wt,dn),Ge&&pe.fog===!0&&St.refreshFogUniforms(wt,Ge),St.refreshMaterialUniforms(wt,pe,De,he,B.state.transmissionRenderTarget[F.id]),$h.upload(Y,Ka(mt),wt,ie)),pe.isShaderMaterial&&pe.uniformsNeedUpdate===!0&&($h.upload(Y,Ka(mt),wt,ie),pe.uniformsNeedUpdate=!1),pe.isSpriteMaterial&&Ht.setValue(Y,"center",le.center),Ht.setValue(Y,"modelViewMatrix",le.modelViewMatrix),Ht.setValue(Y,"normalMatrix",le.normalMatrix),Ht.setValue(Y,"modelMatrix",le.matrixWorld),pe.isShaderMaterial||pe.isRawShaderMaterial){const Cn=pe.uniformsGroups;for(let wn=0,Vr=Cn.length;wn<Vr;wn++){const Ri=Cn[wn];Ue.update(Ri,Yn),Ue.bind(Ri,Yn)}}return Yn}function Ja(F,se){F.ambientLightColor.needsUpdate=se,F.lightProbe.needsUpdate=se,F.directionalLights.needsUpdate=se,F.directionalLightShadows.needsUpdate=se,F.pointLights.needsUpdate=se,F.pointLightShadows.needsUpdate=se,F.spotLights.needsUpdate=se,F.spotLightShadows.needsUpdate=se,F.rectAreaLights.needsUpdate=se,F.hemisphereLights.needsUpdate=se}function ta(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&F.lights===!0}this.getActiveCubeFace=function(){return q},this.getActiveMipmapLevel=function(){return re},this.getRenderTarget=function(){return ue},this.setRenderTargetTextures=function(F,se,_e){const pe=R.get(F);pe.__autoAllocateDepthBuffer=F.resolveDepthBuffer===!1,pe.__autoAllocateDepthBuffer===!1&&(pe.__useRenderToTexture=!1),R.get(F.texture).__webglTexture=se,R.get(F.depthTexture).__webglTexture=pe.__autoAllocateDepthBuffer?void 0:_e,pe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(F,se){const _e=R.get(F);_e.__webglFramebuffer=se,_e.__useDefaultFramebuffer=se===void 0};const yc=Y.createFramebuffer();this.setRenderTarget=function(F,se=0,_e=0){ue=F,q=se,re=_e;let pe=null,le=!1,Ge=!1;if(F){const He=R.get(F);if(He.__useDefaultFramebuffer!==void 0){ot.bindFramebuffer(Y.FRAMEBUFFER,He.__webglFramebuffer),ae.copy(F.viewport),te.copy(F.scissor),X=F.scissorTest,ot.viewport(ae),ot.scissor(te),ot.setScissorTest(X),ge=-1;return}else if(He.__webglFramebuffer===void 0)ie.setupRenderTarget(F);else if(He.__hasExternalTextures)ie.rebindTextures(F,R.get(F.texture).__webglTexture,R.get(F.depthTexture).__webglTexture);else if(F.depthBuffer){const Je=F.depthTexture;if(He.__boundDepthTexture!==Je){if(Je!==null&&R.has(Je)&&(F.width!==Je.image.width||F.height!==Je.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ie.setupDepthRenderbuffer(F)}}const et=F.texture;(et.isData3DTexture||et.isDataArrayTexture||et.isCompressedArrayTexture)&&(Ge=!0);const Ne=R.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(Array.isArray(Ne[se])?pe=Ne[se][_e]:pe=Ne[se],le=!0):F.samples>0&&ie.useMultisampledRTT(F)===!1?pe=R.get(F).__webglMultisampledFramebuffer:Array.isArray(Ne)?pe=Ne[_e]:pe=Ne,ae.copy(F.viewport),te.copy(F.scissor),X=F.scissorTest}else ae.copy(oe).multiplyScalar(De).floor(),te.copy(be).multiplyScalar(De).floor(),X=Re;if(_e!==0&&(pe=yc),ot.bindFramebuffer(Y.FRAMEBUFFER,pe)&&ot.drawBuffers(F,pe),ot.viewport(ae),ot.scissor(te),ot.setScissorTest(X),le){const He=R.get(F.texture);Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_CUBE_MAP_POSITIVE_X+se,He.__webglTexture,_e)}else if(Ge){const He=se;for(let et=0;et<F.textures.length;et++){const Ne=R.get(F.textures[et]);Y.framebufferTextureLayer(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0+et,Ne.__webglTexture,_e,He)}}else if(F!==null&&_e!==0){const He=R.get(F.texture);Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,He.__webglTexture,_e)}ge=-1},this.readRenderTargetPixels=function(F,se,_e,pe,le,Ge,$e,He=0){if(!(F&&F.isWebGLRenderTarget)){tn("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let et=R.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&$e!==void 0&&(et=et[$e]),et){ot.bindFramebuffer(Y.FRAMEBUFFER,et);try{const Ne=F.textures[He],Je=Ne.format,pt=Ne.type;if(!Wt.textureFormatReadable(Je)){tn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Wt.textureTypeReadable(pt)){tn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}se>=0&&se<=F.width-pe&&_e>=0&&_e<=F.height-le&&(F.textures.length>1&&Y.readBuffer(Y.COLOR_ATTACHMENT0+He),Y.readPixels(se,_e,pe,le,Oe.convert(Je),Oe.convert(pt),Ge))}finally{const Ne=ue!==null?R.get(ue).__webglFramebuffer:null;ot.bindFramebuffer(Y.FRAMEBUFFER,Ne)}}},this.readRenderTargetPixelsAsync=async function(F,se,_e,pe,le,Ge,$e,He=0){if(!(F&&F.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let et=R.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&$e!==void 0&&(et=et[$e]),et)if(se>=0&&se<=F.width-pe&&_e>=0&&_e<=F.height-le){ot.bindFramebuffer(Y.FRAMEBUFFER,et);const Ne=F.textures[He],Je=Ne.format,pt=Ne.type;if(!Wt.textureFormatReadable(Je))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Wt.textureTypeReadable(pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ct=Y.createBuffer();Y.bindBuffer(Y.PIXEL_PACK_BUFFER,Ct),Y.bufferData(Y.PIXEL_PACK_BUFFER,Ge.byteLength,Y.STREAM_READ),F.textures.length>1&&Y.readBuffer(Y.COLOR_ATTACHMENT0+He),Y.readPixels(se,_e,pe,le,Oe.convert(Je),Oe.convert(pt),0);const zt=ue!==null?R.get(ue).__webglFramebuffer:null;ot.bindFramebuffer(Y.FRAMEBUFFER,zt);const sn=Y.fenceSync(Y.SYNC_GPU_COMMANDS_COMPLETE,0);return Y.flush(),await _L(Y,sn,4),Y.bindBuffer(Y.PIXEL_PACK_BUFFER,Ct),Y.getBufferSubData(Y.PIXEL_PACK_BUFFER,0,Ge),Y.deleteBuffer(Ct),Y.deleteSync(sn),Ge}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(F,se=null,_e=0){const pe=Math.pow(2,-_e),le=Math.floor(F.image.width*pe),Ge=Math.floor(F.image.height*pe),$e=se!==null?se.x:0,He=se!==null?se.y:0;ie.setTexture2D(F,0),Y.copyTexSubImage2D(Y.TEXTURE_2D,_e,0,0,$e,He,le,Ge),ot.unbindTexture()};const eo=Y.createFramebuffer(),xn=Y.createFramebuffer();this.copyTextureToTexture=function(F,se,_e=null,pe=null,le=0,Ge=null){Ge===null&&(le!==0?(ku("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ge=le,le=0):Ge=0);let $e,He,et,Ne,Je,pt,Ct,zt,sn;const rt=F.isCompressedTexture?F.mipmaps[Ge]:F.image;if(_e!==null)$e=_e.max.x-_e.min.x,He=_e.max.y-_e.min.y,et=_e.isBox3?_e.max.z-_e.min.z:1,Ne=_e.min.x,Je=_e.min.y,pt=_e.isBox3?_e.min.z:0;else{const Nn=Math.pow(2,-le);$e=Math.floor(rt.width*Nn),He=Math.floor(rt.height*Nn),F.isDataArrayTexture?et=rt.depth:F.isData3DTexture?et=Math.floor(rt.depth*Nn):et=1,Ne=0,Je=0,pt=0}pe!==null?(Ct=pe.x,zt=pe.y,sn=pe.z):(Ct=0,zt=0,sn=0);const vt=Oe.convert(se.format),mt=Oe.convert(se.type);let Zt;se.isData3DTexture?(ie.setTexture3D(se,0),Zt=Y.TEXTURE_3D):se.isDataArrayTexture||se.isCompressedArrayTexture?(ie.setTexture2DArray(se,0),Zt=Y.TEXTURE_2D_ARRAY):(ie.setTexture2D(se,0),Zt=Y.TEXTURE_2D),Y.pixelStorei(Y.UNPACK_FLIP_Y_WEBGL,se.flipY),Y.pixelStorei(Y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),Y.pixelStorei(Y.UNPACK_ALIGNMENT,se.unpackAlignment);const Et=Y.getParameter(Y.UNPACK_ROW_LENGTH),Yn=Y.getParameter(Y.UNPACK_IMAGE_HEIGHT),xi=Y.getParameter(Y.UNPACK_SKIP_PIXELS),gn=Y.getParameter(Y.UNPACK_SKIP_ROWS),dn=Y.getParameter(Y.UNPACK_SKIP_IMAGES);Y.pixelStorei(Y.UNPACK_ROW_LENGTH,rt.width),Y.pixelStorei(Y.UNPACK_IMAGE_HEIGHT,rt.height),Y.pixelStorei(Y.UNPACK_SKIP_PIXELS,Ne),Y.pixelStorei(Y.UNPACK_SKIP_ROWS,Je),Y.pixelStorei(Y.UNPACK_SKIP_IMAGES,pt);const Ht=F.isDataArrayTexture||F.isData3DTexture,wt=se.isDataArrayTexture||se.isData3DTexture;if(F.isDepthTexture){const Nn=R.get(F),Cn=R.get(se),wn=R.get(Nn.__renderTarget),Vr=R.get(Cn.__renderTarget);ot.bindFramebuffer(Y.READ_FRAMEBUFFER,wn.__webglFramebuffer),ot.bindFramebuffer(Y.DRAW_FRAMEBUFFER,Vr.__webglFramebuffer);for(let Ri=0;Ri<et;Ri++)Ht&&(Y.framebufferTextureLayer(Y.READ_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,R.get(F).__webglTexture,le,pt+Ri),Y.framebufferTextureLayer(Y.DRAW_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,R.get(se).__webglTexture,Ge,sn+Ri)),Y.blitFramebuffer(Ne,Je,$e,He,Ct,zt,$e,He,Y.DEPTH_BUFFER_BIT,Y.NEAREST);ot.bindFramebuffer(Y.READ_FRAMEBUFFER,null),ot.bindFramebuffer(Y.DRAW_FRAMEBUFFER,null)}else if(le!==0||F.isRenderTargetTexture||R.has(F)){const Nn=R.get(F),Cn=R.get(se);ot.bindFramebuffer(Y.READ_FRAMEBUFFER,eo),ot.bindFramebuffer(Y.DRAW_FRAMEBUFFER,xn);for(let wn=0;wn<et;wn++)Ht?Y.framebufferTextureLayer(Y.READ_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Nn.__webglTexture,le,pt+wn):Y.framebufferTexture2D(Y.READ_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,Nn.__webglTexture,le),wt?Y.framebufferTextureLayer(Y.DRAW_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Cn.__webglTexture,Ge,sn+wn):Y.framebufferTexture2D(Y.DRAW_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,Cn.__webglTexture,Ge),le!==0?Y.blitFramebuffer(Ne,Je,$e,He,Ct,zt,$e,He,Y.COLOR_BUFFER_BIT,Y.NEAREST):wt?Y.copyTexSubImage3D(Zt,Ge,Ct,zt,sn+wn,Ne,Je,$e,He):Y.copyTexSubImage2D(Zt,Ge,Ct,zt,Ne,Je,$e,He);ot.bindFramebuffer(Y.READ_FRAMEBUFFER,null),ot.bindFramebuffer(Y.DRAW_FRAMEBUFFER,null)}else wt?F.isDataTexture||F.isData3DTexture?Y.texSubImage3D(Zt,Ge,Ct,zt,sn,$e,He,et,vt,mt,rt.data):se.isCompressedArrayTexture?Y.compressedTexSubImage3D(Zt,Ge,Ct,zt,sn,$e,He,et,vt,rt.data):Y.texSubImage3D(Zt,Ge,Ct,zt,sn,$e,He,et,vt,mt,rt):F.isDataTexture?Y.texSubImage2D(Y.TEXTURE_2D,Ge,Ct,zt,$e,He,vt,mt,rt.data):F.isCompressedTexture?Y.compressedTexSubImage2D(Y.TEXTURE_2D,Ge,Ct,zt,rt.width,rt.height,vt,rt.data):Y.texSubImage2D(Y.TEXTURE_2D,Ge,Ct,zt,$e,He,vt,mt,rt);Y.pixelStorei(Y.UNPACK_ROW_LENGTH,Et),Y.pixelStorei(Y.UNPACK_IMAGE_HEIGHT,Yn),Y.pixelStorei(Y.UNPACK_SKIP_PIXELS,xi),Y.pixelStorei(Y.UNPACK_SKIP_ROWS,gn),Y.pixelStorei(Y.UNPACK_SKIP_IMAGES,dn),Ge===0&&se.generateMipmaps&&Y.generateMipmap(Zt),ot.unbindTexture()},this.initRenderTarget=function(F){R.get(F).__webglFramebuffer===void 0&&ie.setupRenderTarget(F)},this.initTexture=function(F){F.isCubeTexture?ie.setTextureCube(F,0):F.isData3DTexture?ie.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?ie.setTexture2DArray(F,0):ie.setTexture2D(F,0),ot.unbindTexture()},this.resetState=function(){q=0,re=0,ue=null,ot.reset(),Ye.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return os}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Qt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Qt._getUnpackColorSpace()}}const KO=()=>{const n=ne.useRef(null);return ne.useEffect(()=>{const e=n.current;if(!e)return;const t=new GL,i=new Iv(-1,1,1,-1,0,1),o=new YO({antialias:!0});o.setSize(e.clientWidth,e.clientHeight),e.appendChild(o.domElement);const l=new Fr({uniforms:{iTime:{value:0},iResolution:{value:new cn(e.clientWidth,e.clientHeight)}},vertexShader:`
        void main() {
          gl_Position = vec4(position, 1.0);
        }
      `,fragmentShader:`
        uniform float iTime;
        uniform vec2 iResolution;

        #define NUM_OCTAVES 3

        float rand(vec2 n) {
          return fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);
        }

        float noise(vec2 p) {
          vec2 ip = floor(p);
          vec2 u = fract(p);
          u = u*u*(3.0-2.0*u);

          float res = mix(
            mix(rand(ip), rand(ip + vec2(1.0, 0.0)), u.x),
            mix(rand(ip + vec2(0.0, 1.0)), rand(ip + vec2(1.0, 1.0)), u.x), u.y);
          return res * res;
        }

        float fbm(vec2 x) {
          float v = 0.0;
          float a = 0.3;
          vec2 shift = vec2(100);
          mat2 rot = mat2(cos(0.5), sin(0.5), -sin(0.5), cos(0.5));
          for (int i = 0; i < NUM_OCTAVES; ++i) {
            v += a * noise(x);
            x = rot * x * 2.0 + shift;
            a *= 0.4;
          }
          return v;
        }

        void main() {
          vec2 shake = vec2(sin(iTime * 1.2) * 0.005, cos(iTime * 2.1) * 0.005);
          vec2 p = ((gl_FragCoord.xy + shake * iResolution.xy) - iResolution.xy * 0.5) / iResolution.y * mat2(6.0, -4.0, 4.0, 6.0);
          vec2 v;
          vec4 o = vec4(0.0);

          float f = 2.0 + fbm(p + vec2(iTime * 5.0, 0.0)) * 0.5;

          for (float i = 0.0; i < 35.0; i++) {
            v = p + cos(i * i + (iTime + p.x * 0.08) * 0.025 + i * vec2(13.0, 11.0)) * 3.5 + vec2(sin(iTime * 3.0 + i) * 0.003, cos(iTime * 3.5 - i) * 0.003);
            float tailNoise = fbm(v + vec2(iTime * 0.5, i)) * 0.3 * (1.0 - (i / 35.0));
            // Original bright aurora colors
            vec4 auroraColors = vec4(
              0.1 + 0.3 * sin(i * 0.2 + iTime * 0.4),
              0.3 + 0.5 * cos(i * 0.3 + iTime * 0.5),
              0.7 + 0.3 * sin(i * 0.4 + iTime * 0.3),
              1.0
            );
            vec4 currentContribution = auroraColors * exp(sin(i * i + iTime * 0.8)) / length(max(v, vec2(v.x * f * 0.015, v.y * 1.5)));
            float thinnessFactor = smoothstep(0.0, 1.0, i / 35.0) * 0.6;
            o += currentContribution * (1.0 + tailNoise * 0.8) * thinnessFactor;
          }

          o = tanh(pow(o / 100.0, vec4(1.6)));
          // Dark black background with aurora on top
          vec3 bgColor = vec3(0.02, 0.02, 0.04); // Very dark navy-black
          gl_FragColor = vec4(bgColor + o.rgb * 1.5, 1.0);
        }
      `}),u=new Ju(2,2),h=new ps(u,l);t.add(h);let f;const m=()=>{l.uniforms.iTime.value+=.016,o.render(t,i),f=requestAnimationFrame(m)};m();const _=()=>{e&&(o.setSize(e.clientWidth,e.clientHeight),l.uniforms.iResolution.value.set(e.clientWidth,e.clientHeight))};return window.addEventListener("resize",_),()=>{cancelAnimationFrame(f),window.removeEventListener("resize",_),e.contains(o.domElement)&&e.removeChild(o.domElement),u.dispose(),l.dispose(),o.dispose()}},[]),v.jsx("div",{ref:n,className:"absolute inset-0 overflow-hidden",children:v.jsx("div",{className:"relative z-10"})})},$O=({words:n,className:e,cursorClassName:t})=>{const[i,o]=ne.useState(0),u=n.map(f=>f.text).join(" ").length;ne.useEffect(()=>{if(i<u){const f=setTimeout(()=>{o(m=>m+1)},50);return()=>clearTimeout(f)}},[i,u]);let h=0;return v.jsx("div",{className:on("text-center",e),children:v.jsx("h1",{className:"font-display text-4xl font-bold tracking-tight sm:text-5xl md:text-6xl lg:text-7xl",children:n.map((f,m)=>{var A;const _=h,x=h+f.text.length;h=x+1;const w=i>=_&&i<=x,E=i-_;return v.jsxs("span",{children:[f.newLine&&v.jsx("br",{}),v.jsxs("span",{className:on("text-white",f.className),children:[f.text.split("").map((P,b)=>{const O=_+b<i,U=w&&b===E;return v.jsxs("span",{children:[U&&i<u&&v.jsx(gt.span,{animate:{opacity:[1,0,1]},transition:{duration:.8,repeat:1/0,ease:"linear"},className:on("inline-block w-[3px] h-[1em] bg-lime-400 align-middle rounded-sm",t)}),v.jsx("span",{className:on("transition-opacity duration-75",O?"opacity-100":"opacity-0"),children:P})]},b)}),w&&E===f.text.length&&i<u&&v.jsx(gt.span,{animate:{opacity:[1,0,1]},transition:{duration:.8,repeat:1/0,ease:"linear"},className:on("inline-block w-[3px] h-[1em] bg-lime-400 align-middle rounded-sm",t)})]}),m<n.length-1&&!((A=n[m+1])!=null&&A.newLine)&&" "]},m)})})})},JO=({titleComponent:n,children:e})=>{const t=ne.useRef(null),{scrollYProgress:i}=_v({target:t,offset:["start start","end end"]}),o=RR(i,{stiffness:120,damping:30,mass:.6}),[l,u]=ne.useState(!1);ne.useEffect(()=>{const x=()=>u(window.innerWidth<=768);return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const h=Kl(o,[0,1],[12,0]),f=Kl(o,[0,1],l?[.92,.98]:[1.02,1]),m=Kl(o,[0,1],[0,-30]),_=Kl(o,[0,.2,1],[.95,1,1]);return v.jsx("div",{ref:t,className:"h-[50rem] md:h-[60rem] flex items-center justify-center relative p-2 md:p-10",children:v.jsxs("div",{className:"py-1 md:py-10 w-full relative",style:{perspective:"1000px"},children:[v.jsx(QO,{translate:m,titleComponent:n}),v.jsx(eF,{rotate:h,scale:f,opacity:_,children:e})]})})},QO=({translate:n,titleComponent:e})=>v.jsx(gt.div,{style:{translateY:n},className:"max-w-5xl mx-auto text-center",children:e}),eF=({rotate:n,scale:e,opacity:t,children:i})=>v.jsx(gt.div,{style:{rotateX:n,scale:e,opacity:t,willChange:"transform",transformStyle:"preserve-3d",backfaceVisibility:"hidden",boxShadow:"0 0 #0000004d, 0 9px 20px #0000004a, 0 37px 37px #00000042, 0 84px 50px #00000026, 0 149px 60px #0000000a, 0 233px 65px #00000003"},className:"max-w-3xl mt-12 md:mt-24 mx-auto h-[22rem] md:h-[28rem] w-full border-4 border-[#6C6C6C] p-2 md:p-4 bg-[#222222] rounded-[30px] shadow-2xl",children:v.jsx("div",{className:"h-full w-full overflow-hidden rounded-2xl bg-neutral-100 dark:bg-zinc-900 md:p-4",children:i})});var wu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var tF=wu.exports,sw;function nF(){return sw||(sw=1,(function(n,e){(function(t,i){i(e)})(tF,(function(t){var i="1.9.4";function o(s){var c,p,y,C;for(p=1,y=arguments.length;p<y;p++){C=arguments[p];for(c in C)s[c]=C[c]}return s}var l=Object.create||(function(){function s(){}return function(c){return s.prototype=c,new s}})();function u(s,c){var p=Array.prototype.slice;if(s.bind)return s.bind.apply(s,p.call(arguments,1));var y=p.call(arguments,2);return function(){return s.apply(c,y.length?y.concat(p.call(arguments)):arguments)}}var h=0;function f(s){return"_leaflet_id"in s||(s._leaflet_id=++h),s._leaflet_id}function m(s,c,p){var y,C,D,Z;return Z=function(){y=!1,C&&(D.apply(p,C),C=!1)},D=function(){y?C=arguments:(s.apply(p,arguments),setTimeout(Z,c),y=!0)},D}function _(s,c,p){var y=c[1],C=c[0],D=y-C;return s===y&&p?s:((s-C)%D+D)%D+C}function x(){return!1}function w(s,c){if(c===!1)return s;var p=Math.pow(10,c===void 0?6:c);return Math.round(s*p)/p}function E(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function A(s){return E(s).split(/\s+/)}function P(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?l(s.options):{});for(var p in c)s.options[p]=c[p];return s.options}function b(s,c,p){var y=[];for(var C in s)y.push(encodeURIComponent(p?C.toUpperCase():C)+"="+encodeURIComponent(s[C]));return(!c||c.indexOf("?")===-1?"?":"&")+y.join("&")}var M=/\{ *([\w_ -]+) *\}/g;function O(s,c){return s.replace(M,function(p,y){var C=c[y];if(C===void 0)throw new Error("No value provided for variable "+p);return typeof C=="function"&&(C=C(c)),C})}var U=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function k(s,c){for(var p=0;p<s.length;p++)if(s[p]===c)return p;return-1}var B="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function H(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var G=0;function $(s){var c=+new Date,p=Math.max(0,16-(c-G));return G=c+p,window.setTimeout(s,p)}var I=window.requestAnimationFrame||H("RequestAnimationFrame")||$,z=window.cancelAnimationFrame||H("CancelAnimationFrame")||H("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function q(s,c,p){if(p&&I===$)s.call(c);else return I.call(window,u(s,c))}function re(s){s&&z.call(window,s)}var ue={__proto__:null,extend:o,create:l,bind:u,get lastId(){return h},stamp:f,throttle:m,wrapNum:_,falseFn:x,formatNum:w,trim:E,splitWords:A,setOptions:P,getParamString:b,template:O,isArray:U,indexOf:k,emptyImageUrl:B,requestFn:I,cancelFn:z,requestAnimFrame:q,cancelAnimFrame:re};function ge(){}ge.extend=function(s){var c=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=c.__super__=this.prototype,y=l(p);y.constructor=c,c.prototype=y;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(c[C]=this[C]);return s.statics&&o(c,s.statics),s.includes&&(Se(s.includes),o.apply(null,[y].concat(s.includes))),o(y,s),delete y.statics,delete y.includes,y.options&&(y.options=p.options?l(p.options):{},o(y.options,s.options)),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var D=0,Z=y._initHooks.length;D<Z;D++)y._initHooks[D].call(this)}},c},ge.include=function(s){var c=this.prototype.options;return o(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},ge.mergeOptions=function(s){return o(this.prototype.options,s),this},ge.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),p=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function Se(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=U(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ae={on:function(s,c,p){if(typeof s=="object")for(var y in s)this._on(y,s[y],c);else{s=A(s);for(var C=0,D=s.length;C<D;C++)this._on(s[C],c,p)}return this},off:function(s,c,p){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var y in s)this._off(y,s[y],c);else{s=A(s);for(var C=arguments.length===1,D=0,Z=s.length;D<Z;D++)C?this._off(s[D]):this._off(s[D],c,p)}return this},_on:function(s,c,p,y){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,p)===!1){p===this&&(p=void 0);var C={fn:c,ctx:p};y&&(C.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(C)}},_off:function(s,c,p){var y,C,D;if(this._events&&(y=this._events[s],!!y)){if(arguments.length===1){if(this._firingCount)for(C=0,D=y.length;C<D;C++)y[C].fn=x;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var Z=this._listens(s,c,p);if(Z!==!1){var ce=y[Z];this._firingCount&&(ce.fn=x,this._events[s]=y=y.slice()),y.splice(Z,1)}}},fire:function(s,c,p){if(!this.listens(s,p))return this;var y=o({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var C=this._events[s];if(C){this._firingCount=this._firingCount+1||1;for(var D=0,Z=C.length;D<Z;D++){var ce=C[D],me=ce.fn;ce.once&&this.off(s,me,ce.ctx),me.call(ce.ctx||this,y)}this._firingCount--}}return p&&this._propagateEvent(y),this},listens:function(s,c,p,y){typeof s!="string"&&console.warn('"string" type argument expected');var C=c;typeof c!="function"&&(y=!!c,C=void 0,p=void 0);var D=this._events&&this._events[s];if(D&&D.length&&this._listens(s,C,p)!==!1)return!0;if(y){for(var Z in this._eventParents)if(this._eventParents[Z].listens(s,c,p,y))return!0}return!1},_listens:function(s,c,p){if(!this._events)return!1;var y=this._events[s]||[];if(!c)return!!y.length;p===this&&(p=void 0);for(var C=0,D=y.length;C<D;C++)if(y[C].fn===c&&y[C].ctx===p)return C;return!1},once:function(s,c,p){if(typeof s=="object")for(var y in s)this._on(y,s[y],c,!0);else{s=A(s);for(var C=0,D=s.length;C<D;C++)this._on(s[C],c,p,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[f(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[f(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,o({layer:s.target,propagatedFrom:s.target},s),!0)}};ae.addEventListener=ae.on,ae.removeEventListener=ae.clearAllEventListeners=ae.off,ae.addOneTimeEventListener=ae.once,ae.fireEvent=ae.fire,ae.hasEventListeners=ae.listens;var te=ge.extend(ae);function X(s,c,p){this.x=p?Math.round(s):s,this.y=p?Math.round(c):c}var we=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};X.prototype={clone:function(){return new X(this.x,this.y)},add:function(s){return this.clone()._add(Q(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(Q(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new X(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new X(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=we(this.x),this.y=we(this.y),this},distanceTo:function(s){s=Q(s);var c=s.x-this.x,p=s.y-this.y;return Math.sqrt(c*c+p*p)},equals:function(s){return s=Q(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=Q(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function Q(s,c,p){return s instanceof X?s:U(s)?new X(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new X(s.x,s.y):new X(s,c,p)}function j(s,c){if(s)for(var p=c?[s,c]:s,y=0,C=p.length;y<C;y++)this.extend(p[y])}j.prototype={extend:function(s){var c,p;if(!s)return this;if(s instanceof X||typeof s[0]=="number"||"x"in s)c=p=Q(s);else if(s=he(s),c=s.min,p=s.max,!c||!p)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=p.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(s){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,p;return typeof s[0]=="number"||s instanceof X?s=Q(s):s=he(s),s instanceof j?(c=s.min,p=s.max):c=p=s,c.x>=this.min.x&&p.x<=this.max.x&&c.y>=this.min.y&&p.y<=this.max.y},intersects:function(s){s=he(s);var c=this.min,p=this.max,y=s.min,C=s.max,D=C.x>=c.x&&y.x<=p.x,Z=C.y>=c.y&&y.y<=p.y;return D&&Z},overlaps:function(s){s=he(s);var c=this.min,p=this.max,y=s.min,C=s.max,D=C.x>c.x&&y.x<p.x,Z=C.y>c.y&&y.y<p.y;return D&&Z},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,p=this.max,y=Math.abs(c.x-p.x)*s,C=Math.abs(c.y-p.y)*s;return he(Q(c.x-y,c.y-C),Q(p.x+y,p.y+C))},equals:function(s){return s?(s=he(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function he(s,c){return!s||s instanceof j?s:new j(s,c)}function De(s,c){if(s)for(var p=c?[s,c]:s,y=0,C=p.length;y<C;y++)this.extend(p[y])}De.prototype={extend:function(s){var c=this._southWest,p=this._northEast,y,C;if(s instanceof ke)y=s,C=s;else if(s instanceof De){if(y=s._southWest,C=s._northEast,!y||!C)return this}else return s?this.extend(oe(s)||je(s)):this;return!c&&!p?(this._southWest=new ke(y.lat,y.lng),this._northEast=new ke(C.lat,C.lng)):(c.lat=Math.min(y.lat,c.lat),c.lng=Math.min(y.lng,c.lng),p.lat=Math.max(C.lat,p.lat),p.lng=Math.max(C.lng,p.lng)),this},pad:function(s){var c=this._southWest,p=this._northEast,y=Math.abs(c.lat-p.lat)*s,C=Math.abs(c.lng-p.lng)*s;return new De(new ke(c.lat-y,c.lng-C),new ke(p.lat+y,p.lng+C))},getCenter:function(){return new ke((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ke(this.getNorth(),this.getWest())},getSouthEast:function(){return new ke(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ke||"lat"in s?s=oe(s):s=je(s);var c=this._southWest,p=this._northEast,y,C;return s instanceof De?(y=s.getSouthWest(),C=s.getNorthEast()):y=C=s,y.lat>=c.lat&&C.lat<=p.lat&&y.lng>=c.lng&&C.lng<=p.lng},intersects:function(s){s=je(s);var c=this._southWest,p=this._northEast,y=s.getSouthWest(),C=s.getNorthEast(),D=C.lat>=c.lat&&y.lat<=p.lat,Z=C.lng>=c.lng&&y.lng<=p.lng;return D&&Z},overlaps:function(s){s=je(s);var c=this._southWest,p=this._northEast,y=s.getSouthWest(),C=s.getNorthEast(),D=C.lat>c.lat&&y.lat<p.lat,Z=C.lng>c.lng&&y.lng<p.lng;return D&&Z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=je(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function je(s,c){return s instanceof De?s:new De(s,c)}function ke(s,c,p){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,p!==void 0&&(this.alt=+p)}ke.prototype={equals:function(s,c){if(!s)return!1;s=oe(s);var p=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return p<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+w(this.lat,s)+", "+w(this.lng,s)+")"},distanceTo:function(s){return Re.distance(this,oe(s))},wrap:function(){return Re.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,p=c/Math.cos(Math.PI/180*this.lat);return je([this.lat-c,this.lng-p],[this.lat+c,this.lng+p])},clone:function(){return new ke(this.lat,this.lng,this.alt)}};function oe(s,c,p){return s instanceof ke?s:U(s)&&typeof s[0]!="object"?s.length===3?new ke(s[0],s[1],s[2]):s.length===2?new ke(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ke(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new ke(s,c,p)}var be={latLngToPoint:function(s,c){var p=this.projection.project(s),y=this.scale(c);return this.transformation._transform(p,y)},pointToLatLng:function(s,c){var p=this.scale(c),y=this.transformation.untransform(s,p);return this.projection.unproject(y)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,p=this.scale(s),y=this.transformation.transform(c.min,p),C=this.transformation.transform(c.max,p);return new j(y,C)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?_(s.lng,this.wrapLng,!0):s.lng,p=this.wrapLat?_(s.lat,this.wrapLat,!0):s.lat,y=s.alt;return new ke(p,c,y)},wrapLatLngBounds:function(s){var c=s.getCenter(),p=this.wrapLatLng(c),y=c.lat-p.lat,C=c.lng-p.lng;if(y===0&&C===0)return s;var D=s.getSouthWest(),Z=s.getNorthEast(),ce=new ke(D.lat-y,D.lng-C),me=new ke(Z.lat-y,Z.lng-C);return new De(ce,me)}},Re=o({},be,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var p=Math.PI/180,y=s.lat*p,C=c.lat*p,D=Math.sin((c.lat-s.lat)*p/2),Z=Math.sin((c.lng-s.lng)*p/2),ce=D*D+Math.cos(y)*Math.cos(C)*Z*Z,me=2*Math.atan2(Math.sqrt(ce),Math.sqrt(1-ce));return this.R*me}}),nt=6378137,qe={R:nt,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,p=this.MAX_LATITUDE,y=Math.max(Math.min(p,s.lat),-p),C=Math.sin(y*c);return new X(this.R*s.lng*c,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(s){var c=180/Math.PI;return new ke((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:(function(){var s=nt*Math.PI;return new j([-s,-s],[s,s])})()};function Ft(s,c,p,y){if(U(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=p,this._d=y}Ft.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new X((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function mn(s,c,p,y){return new Ft(s,c,p,y)}var It=o({},Re,{code:"EPSG:3857",projection:qe,transformation:(function(){var s=.5/(Math.PI*qe.R);return mn(s,.5,-s,.5)})()}),qt=o({},It,{code:"EPSG:900913"});function $t(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Rt(s,c){var p="",y,C,D,Z,ce,me;for(y=0,D=s.length;y<D;y++){for(ce=s[y],C=0,Z=ce.length;C<Z;C++)me=ce[C],p+=(C?"L":"M")+me.x+" "+me.y;p+=c?ct.svg?"z":"x":""}return p||"M0 0"}var un=document.documentElement.style,Y="ActiveXObject"in window,vn=Y&&!document.addEventListener,Vt="msLaunchUri"in navigator&&!("documentMode"in document),Wt=qn("webkit"),ot=qn("android"),V=qn("android 2")||qn("android 3"),R=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ie=ot&&qn("Google")&&R<537&&!("AudioNode"in window),Ee=!!window.opera,Ae=!Vt&&qn("chrome"),Me=qn("gecko")&&!Wt&&!Ee&&!Y,dt=!Ae&&qn("safari"),Ve=qn("phantom"),it="OTransition"in un,St=navigator.platform.indexOf("Win")===0,Ie=Y&&"transition"in un,We="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!V,st="MozPerspective"in un,lt=!window.L_DISABLE_3D&&(Ie||We||st)&&!it&&!Ve,ze=typeof orientation<"u"||qn("mobile"),Nt=ze&&Wt,J=ze&&We,Ze=!window.PointerEvent&&window.MSPointerEvent,Oe=!!(window.PointerEvent||Ze),Ye="ontouchstart"in window||!!window.TouchEvent,Ue=!window.L_NO_TOUCH&&(Ye||Oe),Te=ze&&Ee,Xe=ze&&Me,Mt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,rn=(function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",x,c),window.removeEventListener("testPassiveEventSupport",x,c)}catch{}return s})(),Yt=(function(){return!!document.createElement("canvas").getContext})(),ti=!!(document.createElementNS&&$t("svg").createSVGRect),ni=!!ti&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),$o=!ti&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}})(),Br=navigator.platform.indexOf("Mac")===0,Jo=navigator.platform.indexOf("Linux")===0;function qn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ct={ie:Y,ielt9:vn,edge:Vt,webkit:Wt,android:ot,android23:V,androidStock:ie,opera:Ee,chrome:Ae,gecko:Me,safari:dt,phantom:Ve,opera12:it,win:St,ie3d:Ie,webkit3d:We,gecko3d:st,any3d:lt,mobile:ze,mobileWebkit:Nt,mobileWebkit3d:J,msPointer:Ze,pointer:Oe,touch:Ue,touchNative:Ye,mobileOpera:Te,mobileGecko:Xe,retina:Mt,passiveEvents:rn,canvas:Yt,svg:ti,vml:$o,inlineSvg:ni,mac:Br,linux:Jo},zr=ct.msPointer?"MSPointerDown":"pointerdown",Pi=ct.msPointer?"MSPointerMove":"pointermove",Js=ct.msPointer?"MSPointerUp":"pointerup",Qo=ct.msPointer?"MSPointerCancel":"pointercancel",Qs={touchstart:zr,touchmove:Pi,touchend:Js,touchcancel:Qo},_i={touchstart:xn,touchmove:eo,touchend:eo,touchcancel:eo},nr={},jr=!1;function Ka(s,c,p){return c==="touchstart"&&yc(),_i[c]?(p=_i[c].bind(this,p),s.addEventListener(Qs[c],p,!1),p):(console.warn("wrong event specified:",c),x)}function ea(s,c,p){if(!Qs[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(Qs[c],p,!1)}function $a(s){nr[s.pointerId]=s}function Ja(s){nr[s.pointerId]&&(nr[s.pointerId]=s)}function ta(s){delete nr[s.pointerId]}function yc(){jr||(document.addEventListener(zr,$a,!0),document.addEventListener(Pi,Ja,!0),document.addEventListener(Js,ta,!0),document.addEventListener(Qo,ta,!0),jr=!0)}function eo(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var p in nr)c.touches.push(nr[p]);c.changedTouches=[c],s(c)}}function xn(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Mn(c),eo(s,c)}function F(s){var c={},p,y;for(y in s)p=s[y],c[y]=p&&p.bind?p.bind(s):p;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var se=200;function _e(s,c){s.addEventListener("dblclick",c);var p=0,y;function C(D){if(D.detail!==1){y=D.detail;return}if(!(D.pointerType==="mouse"||D.sourceCapabilities&&!D.sourceCapabilities.firesTouchEvents)){var Z=vs(D);if(!(Z.some(function(me){return me instanceof HTMLLabelElement&&me.attributes.for})&&!Z.some(function(me){return me instanceof HTMLInputElement||me instanceof HTMLSelectElement}))){var ce=Date.now();ce-p<=se?(y++,y===2&&c(F(D))):y=1,p=ce}}}return s.addEventListener("click",C),{dblclick:c,simDblclick:C}}function pe(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var le=xi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ge=xi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),$e=Ge==="webkitTransition"||Ge==="OTransition"?Ge+"End":"transitionend";function He(s){return typeof s=="string"?document.getElementById(s):s}function et(s,c){var p=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!p||p==="auto")&&document.defaultView){var y=document.defaultView.getComputedStyle(s,null);p=y?y[c]:null}return p==="auto"?null:p}function Ne(s,c,p){var y=document.createElement(s);return y.className=c||"",p&&p.appendChild(y),y}function Je(s){var c=s.parentNode;c&&c.removeChild(s)}function pt(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Ct(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function zt(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function sn(s,c){if(s.classList!==void 0)return s.classList.contains(c);var p=Zt(s);return p.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(p)}function rt(s,c){if(s.classList!==void 0)for(var p=A(c),y=0,C=p.length;y<C;y++)s.classList.add(p[y]);else if(!sn(s,c)){var D=Zt(s);mt(s,(D?D+" ":"")+c)}}function vt(s,c){s.classList!==void 0?s.classList.remove(c):mt(s,E((" "+Zt(s)+" ").replace(" "+c+" "," ")))}function mt(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function Zt(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Et(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&Yn(s,c)}function Yn(s,c){var p=!1,y="DXImageTransform.Microsoft.Alpha";try{p=s.filters.item(y)}catch{if(c===1)return}c=Math.round(c*100),p?(p.Enabled=c!==100,p.Opacity=c):s.style.filter+=" progid:"+y+"(opacity="+c+")"}function xi(s){for(var c=document.documentElement.style,p=0;p<s.length;p++)if(s[p]in c)return s[p];return!1}function gn(s,c,p){var y=c||new X(0,0);s.style[le]=(ct.ie3d?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(p?" scale("+p+")":"")}function dn(s,c){s._leaflet_pos=c,ct.any3d?gn(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function Ht(s){return s._leaflet_pos||new X(0,0)}var wt,Nn,Cn;if("onselectstart"in document)wt=function(){Tt(window,"selectstart",Mn)},Nn=function(){hn(window,"selectstart",Mn)};else{var wn=xi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);wt=function(){if(wn){var s=document.documentElement.style;Cn=s[wn],s[wn]="none"}},Nn=function(){wn&&(document.documentElement.style[wn]=Cn,Cn=void 0)}}function Vr(){Tt(window,"dragstart",Mn)}function Ri(){hn(window,"dragstart",Mn)}var na,ia;function to(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Hi(),na=s,ia=s.style.outlineStyle,s.style.outlineStyle="none",Tt(window,"keydown",Hi))}function Hi(){na&&(na.style.outlineStyle=ia,na=void 0,ia=void 0,hn(window,"keydown",Hi))}function yr(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function ir(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var ra={__proto__:null,TRANSFORM:le,TRANSITION:Ge,TRANSITION_END:$e,get:He,getStyle:et,create:Ne,remove:Je,empty:pt,toFront:Ct,toBack:zt,hasClass:sn,addClass:rt,removeClass:vt,setClass:mt,getClass:Zt,setOpacity:Et,testProp:xi,setTransform:gn,setPosition:dn,getPosition:Ht,get disableTextSelection(){return wt},get enableTextSelection(){return Nn},disableImageDrag:Vr,enableImageDrag:Ri,preventOutline:to,restoreOutline:Hi,getSizedParentNode:yr,getScale:ir};function Tt(s,c,p,y){if(c&&typeof c=="object")for(var C in c)wc(s,C,c[C],p);else{c=A(c);for(var D=0,Z=c.length;D<Z;D++)wc(s,c[D],p,y)}return this}var jn="_leaflet_events";function hn(s,c,p,y){if(arguments.length===1)Sc(s),delete s[jn];else if(c&&typeof c=="object")for(var C in c)Qa(s,C,c[C],p);else if(c=A(c),arguments.length===2)Sc(s,function(ce){return k(c,ce)!==-1});else for(var D=0,Z=c.length;D<Z;D++)Qa(s,c[D],p,y);return this}function Sc(s,c){for(var p in s[jn]){var y=p.split(/\d/)[0];(!c||c(y))&&Qa(s,y,null,null,p)}}var gs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function wc(s,c,p,y){var C=c+f(p)+(y?"_"+f(y):"");if(s[jn]&&s[jn][C])return this;var D=function(ce){return p.call(y||s,ce||window.event)},Z=D;!ct.touchNative&&ct.pointer&&c.indexOf("touch")===0?D=Ka(s,c,D):ct.touch&&c==="dblclick"?D=_e(s,D):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(gs[c]||c,D,ct.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(D=function(ce){ce=ce||window.event,aa(s,ce)&&Z(ce)},s.addEventListener(gs[c],D,!1)):s.addEventListener(c,Z,!1):s.attachEvent("on"+c,D),s[jn]=s[jn]||{},s[jn][C]=D}function Qa(s,c,p,y,C){C=C||c+f(p)+(y?"_"+f(y):"");var D=s[jn]&&s[jn][C];if(!D)return this;!ct.touchNative&&ct.pointer&&c.indexOf("touch")===0?ea(s,c,D):ct.touch&&c==="dblclick"?pe(s,D):"removeEventListener"in s?s.removeEventListener(gs[c]||c,D,!1):s.detachEvent("on"+c,D),s[jn][C]=null}function rr(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function el(s){return wc(s,"wheel",rr),this}function sa(s){return Tt(s,"mousedown touchstart dblclick contextmenu",rr),s._leaflet_disable_click=!0,this}function Mn(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Gi(s){return Mn(s),rr(s),this}function vs(s){if(s.composedPath)return s.composedPath();for(var c=[],p=s.target;p;)c.push(p),p=p.parentNode;return c}function oa(s,c){if(!c)return new X(s.clientX,s.clientY);var p=ir(c),y=p.boundingClientRect;return new X((s.clientX-y.left)/p.x-c.clientLeft,(s.clientY-y.top)/p.y-c.clientTop)}var zf=ct.linux&&ct.chrome?window.devicePixelRatio:ct.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function rd(s){return ct.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/zf:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function aa(s,c){var p=c.relatedTarget;if(!p)return!0;try{for(;p&&p!==s;)p=p.parentNode}catch{return!1}return p!==s}var tl={__proto__:null,on:Tt,off:hn,stopPropagation:rr,disableScrollPropagation:el,disableClickPropagation:sa,preventDefault:Mn,stop:Gi,getPropagationPath:vs,getMousePosition:oa,getWheelDelta:rd,isExternalTarget:aa,addListener:Tt,removeListener:hn},nl=te.extend({run:function(s,c,p,y){this.stop(),this._el=s,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=Ht(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=q(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,p=this._duration*1e3;c<p?this._runFrame(this._easeOut(c/p),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var p=this._startPos.add(this._offset.multiplyBy(s));c&&p._round(),dn(this._el,p),this.fire("step")},_complete:function(){re(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Xt=te.extend({options:{crs:It,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=P(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(oe(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ge&&ct.any3d&&!ct.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Tt(this._proxy,$e,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,p){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(oe(s),c,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=o({animate:p.animate},p.zoom),p.pan=o({animate:p.animate,duration:p.duration},p.pan));var y=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,p.zoom):this._tryAnimatedPan(s,p.pan);if(y)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,p.pan&&p.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(ct.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(ct.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,p){var y=this.getZoomScale(c),C=this.getSize().divideBy(2),D=s instanceof X?s:this.latLngToContainerPoint(s),Z=D.subtract(C).multiplyBy(1-1/y),ce=this.containerPointToLatLng(C.add(Z));return this.setView(ce,c,{zoom:p})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():je(s);var p=Q(c.paddingTopLeft||c.padding||[0,0]),y=Q(c.paddingBottomRight||c.padding||[0,0]),C=this.getBoundsZoom(s,!1,p.add(y));if(C=typeof c.maxZoom=="number"?Math.min(c.maxZoom,C):C,C===1/0)return{center:s.getCenter(),zoom:C};var D=y.subtract(p).divideBy(2),Z=this.project(s.getSouthWest(),C),ce=this.project(s.getNorthEast(),C),me=this.unproject(Z.add(ce).divideBy(2).add(D),C);return{center:me,zoom:C}},fitBounds:function(s,c){if(s=je(s),!s.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(s,c);return this.setView(p.center,p.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=Q(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new nl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){rt(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,p,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,p){if(p=p||{},p.animate===!1||!ct.any3d)return this.setView(s,c,p);this._stop();var y=this.project(this.getCenter()),C=this.project(s),D=this.getSize(),Z=this._zoom;s=oe(s),c=c===void 0?Z:c;var ce=Math.max(D.x,D.y),me=ce*this.getZoomScale(Z,c),Ce=C.distanceTo(y)||1,Qe=1.42,_t=Qe*Qe;function Ut(an){var vo=an?-1:1,ep=an?me:ce,tp=me*me-ce*ce+vo*_t*_t*Ce*Ce,Ms=2*ep*_t*Ce,Es=tp/Ms,Ts=Math.sqrt(Es*Es+1)-Es,gl=Ts<1e-9?-18:Math.log(Ts);return gl}function Vn(an){return(Math.exp(an)-Math.exp(-an))/2}function On(an){return(Math.exp(an)+Math.exp(-an))/2}function wi(an){return Vn(an)/On(an)}var li=Ut(0);function mo(an){return ce*(On(li)/On(li+Qe*an))}function Hc(an){return ce*(On(li)*wi(li+Qe*an)-Vn(li))/_t}function Kr(an){return 1-Math.pow(1-an,1.5)}var Ed=Date.now(),bs=(Ut(1)-li)/Qe,lr=p.duration?1e3*p.duration:1e3*bs*.8;function go(){var an=(Date.now()-Ed)/lr,vo=Kr(an)*bs;an<=1?(this._flyToFrame=q(go,this),this._move(this.unproject(y.add(C.subtract(y).multiplyBy(Hc(vo)/Ce)),Z),this.getScaleZoom(ce/mo(vo),Z),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),go.call(this),this},flyToBounds:function(s,c){var p=this._getBoundsCenterZoom(s,c);return this.flyTo(p.center,p.zoom,c)},setMaxBounds:function(s){return s=je(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var p=this.getCenter(),y=this._limitCenter(p,this._zoom,je(s));return p.equals(y)||this.panTo(y,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var p=Q(c.paddingTopLeft||c.padding||[0,0]),y=Q(c.paddingBottomRight||c.padding||[0,0]),C=this.project(this.getCenter()),D=this.project(s),Z=this.getPixelBounds(),ce=he([Z.min.add(p),Z.max.subtract(y)]),me=ce.getSize();if(!ce.contains(D)){this._enforcingBounds=!0;var Ce=D.subtract(ce.getCenter()),Qe=ce.extend(D).getSize().subtract(me);C.x+=Ce.x<0?-Qe.x:Qe.x,C.y+=Ce.y<0?-Qe.y:Qe.y,this.panTo(this.unproject(C),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=o({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),y=c.divideBy(2).round(),C=p.divideBy(2).round(),D=y.subtract(C);return!D.x&&!D.y?this:(s.animate&&s.pan?this.panBy(D):(s.pan&&this._rawPanBy(D),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=o({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=u(this._handleGeolocationResponse,this),p=u(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,p,s):navigator.geolocation.getCurrentPosition(c,p,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,p=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,p=s.coords.longitude,y=new ke(c,p),C=y.toBounds(s.coords.accuracy*2),D=this._locateOptions;if(D.setView){var Z=this.getBoundsZoom(C);this.setView(y,D.maxZoom?Math.min(Z,D.maxZoom):Z)}var ce={latlng:y,bounds:C,timestamp:s.timestamp};for(var me in s.coords)typeof s.coords[me]=="number"&&(ce[me]=s.coords[me]);this.fire("locationfound",ce)}},addHandler:function(s,c){if(!c)return this;var p=this[s]=new c(this);return this._handlers.push(p),this.options[s]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Je(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(re(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Je(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var p="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),y=Ne("div",p,c||this._mapPane);return s&&(this._panes[s]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),p=this.unproject(s.getTopRight());return new De(c,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,p){s=je(s),p=Q(p||[0,0]);var y=this.getZoom()||0,C=this.getMinZoom(),D=this.getMaxZoom(),Z=s.getNorthWest(),ce=s.getSouthEast(),me=this.getSize().subtract(p),Ce=he(this.project(ce,y),this.project(Z,y)).getSize(),Qe=ct.any3d?this.options.zoomSnap:1,_t=me.x/Ce.x,Ut=me.y/Ce.y,Vn=c?Math.max(_t,Ut):Math.min(_t,Ut);return y=this.getScaleZoom(Vn,y),Qe&&(y=Math.round(y/(Qe/100))*(Qe/100),y=c?Math.ceil(y/Qe)*Qe:Math.floor(y/Qe)*Qe),Math.max(C,Math.min(D,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new X(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var p=this._getTopLeftPoint(s,c);return new j(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var p=this.options.crs;return c=c===void 0?this._zoom:c,p.scale(s)/p.scale(c)},getScaleZoom:function(s,c){var p=this.options.crs;c=c===void 0?this._zoom:c;var y=p.zoom(s*p.scale(c));return isNaN(y)?1/0:y},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(oe(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(Q(s),c)},layerPointToLatLng:function(s){var c=Q(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(oe(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(oe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(je(s))},distance:function(s,c){return this.options.crs.distance(oe(s),oe(c))},containerPointToLayerPoint:function(s){return Q(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return Q(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(Q(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(oe(s)))},mouseEventToContainerPoint:function(s){return oa(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=He(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Tt(c,"scroll",this._onScroll,this),this._containerId=f(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ct.any3d,rt(s,"leaflet-container"+(ct.touch?" leaflet-touch":"")+(ct.retina?" leaflet-retina":"")+(ct.ielt9?" leaflet-oldie":"")+(ct.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=et(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),dn(this._mapPane,new X(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(rt(s.markerPane,"leaflet-zoom-hide"),rt(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,p){dn(this._mapPane,new X(0,0));var y=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var C=this._zoom!==c;this._moveStart(C,p)._move(s,c)._moveEnd(C),this.fire("viewreset"),y&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,p,y){c===void 0&&(c=this._zoom);var C=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),y?p&&p.pinch&&this.fire("zoom",p):((C||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return re(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){dn(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[f(this._container)]=this;var c=s?hn:Tt;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),ct.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){re(this._resizeRequest),this._resizeRequest=q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var p=[],y,C=c==="mouseout"||c==="mouseover",D=s.target||s.srcElement,Z=!1;D;){if(y=this._targets[f(D)],y&&(c==="click"||c==="preclick")&&this._draggableMoved(y)){Z=!0;break}if(y&&y.listens(c,!0)&&(C&&!aa(D,s)||(p.push(y),C))||D===this._container)break;D=D.parentNode}return!p.length&&!Z&&!C&&this.listens(c,!0)&&(p=[this]),p},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var p=s.type;p==="mousedown"&&to(c),this._fireDOMEvent(s,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,p){if(s.type==="click"){var y=o({},s);y.type="preclick",this._fireDOMEvent(y,y.type,p)}var C=this._findEventTargets(s,c);if(p){for(var D=[],Z=0;Z<p.length;Z++)p[Z].listens(c,!0)&&D.push(p[Z]);C=D.concat(C)}if(C.length){c==="contextmenu"&&Mn(s);var ce=C[0],me={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Ce=ce.getLatLng&&(!ce._radius||ce._radius<=10);me.containerPoint=Ce?this.latLngToContainerPoint(ce.getLatLng()):this.mouseEventToContainerPoint(s),me.layerPoint=this.containerPointToLayerPoint(me.containerPoint),me.latlng=Ce?ce.getLatLng():this.layerPointToLatLng(me.layerPoint)}for(Z=0;Z<C.length;Z++)if(C[Z].fire(c,me,!0),me.originalEvent._stopped||C[Z].options.bubblingMouseEvents===!1&&k(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return Ht(this._mapPane)||new X(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var p=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var p=this.getSize()._divideBy(2);return this.project(s,c)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,p){var y=this._getNewPixelOrigin(p,c);return this.project(s,c)._subtract(y)},_latLngBoundsToNewLayerBounds:function(s,c,p){var y=this._getNewPixelOrigin(p,c);return he([this.project(s.getSouthWest(),c)._subtract(y),this.project(s.getNorthWest(),c)._subtract(y),this.project(s.getSouthEast(),c)._subtract(y),this.project(s.getNorthEast(),c)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,p){if(!p)return s;var y=this.project(s,c),C=this.getSize().divideBy(2),D=new j(y.subtract(C),y.add(C)),Z=this._getBoundsOffset(D,p,c);return Math.abs(Z.x)<=1&&Math.abs(Z.y)<=1?s:this.unproject(y.add(Z),c)},_limitOffset:function(s,c){if(!c)return s;var p=this.getPixelBounds(),y=new j(p.min.add(s),p.max.add(s));return s.add(this._getBoundsOffset(y,c))},_getBoundsOffset:function(s,c,p){var y=he(this.project(c.getNorthEast(),p),this.project(c.getSouthWest(),p)),C=y.min.subtract(s.min),D=y.max.subtract(s.max),Z=this._rebound(C.x,-D.x),ce=this._rebound(C.y,-D.y);return new X(Z,ce)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),p=this.getMaxZoom(),y=ct.any3d?this.options.zoomSnap:1;return y&&(s=Math.round(s/y)*y),Math.max(c,Math.min(p,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){vt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var p=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,c),!0)},_createAnimProxy:function(){var s=this._proxy=Ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var p=le,y=this._proxy.style[p];gn(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),y===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Je(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();gn(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(c),C=this._getCenterOffset(s)._divideBy(1-1/y);return p.animate!==!0&&!this.getSize().contains(C)?!1:(q(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,p,y){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,rt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:y}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&vt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Hr(s,c){return new Xt(s,c)}var yi=ge.extend({options:{position:"topright"},initialize:function(s){P(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),p=this.getPosition(),y=s._controlCorners[p];return rt(c,"leaflet-control"),p.indexOf("bottom")!==-1?y.insertBefore(c,y.firstChild):y.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Je(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Gr=function(s){return new yi(s)};Xt.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",p=this._controlContainer=Ne("div",c+"control-container",this._container);function y(C,D){var Z=c+C+" "+c+D;s[C+D]=Ne("div",Z,p)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Je(this._controlCorners[s]);Je(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var bc=yi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,p,y){return p<y?-1:y<p?1:0}},initialize:function(s,c,p){P(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var y in s)this._addLayer(s[y],y);for(y in c)this._addLayer(c[y],y,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return yi.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(f(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){rt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(rt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):vt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return vt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=Ne("div",s),p=this.options.collapsed;c.setAttribute("aria-haspopup",!0),sa(c),el(c);var y=this._section=Ne("section",s+"-list");p&&(this._map.on("click",this.collapse,this),Tt(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=Ne("a",s+"-toggle",c);C.href="#",C.title="Layers",C.setAttribute("role","button"),Tt(C,{keydown:function(D){D.keyCode===13&&this._expandSafely()},click:function(D){Mn(D),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=Ne("div",s+"-base",y),this._separator=Ne("div",s+"-separator",y),this._overlaysList=Ne("div",s+"-overlays",y),c.appendChild(y)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&f(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,p){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:p}),this.options.sortLayers&&this._layers.sort(u(function(y,C){return this.options.sortFunction(y.layer,C.layer,y.name,C.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;pt(this._baseLayersList),pt(this._overlaysList),this._layerControlInputs=[];var s,c,p,y,C=0;for(p=0;p<this._layers.length;p++)y=this._layers[p],this._addItem(y),c=c||y.overlay,s=s||!y.overlay,C+=y.overlay?0:1;return this.options.hideSingleBase&&(s=s&&C>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(f(s.target)),p=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;p&&this._map.fire(p,c)},_createRadioElement:function(s,c){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=p,y.firstChild},_addItem:function(s){var c=document.createElement("label"),p=this._map.hasLayer(s.layer),y;s.overlay?(y=document.createElement("input"),y.type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=p):y=this._createRadioElement("leaflet-base-layers_"+f(this),p),this._layerControlInputs.push(y),y.layerId=f(s.layer),Tt(y,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+s.name;var D=document.createElement("span");c.appendChild(D),D.appendChild(y),D.appendChild(C);var Z=s.overlay?this._overlaysList:this._baseLayersList;return Z.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,p,y=[],C=[];this._handlingClick=!0;for(var D=s.length-1;D>=0;D--)c=s[D],p=this._getLayer(c.layerId).layer,c.checked?y.push(p):c.checked||C.push(p);for(D=0;D<C.length;D++)this._map.hasLayer(C[D])&&this._map.removeLayer(C[D]);for(D=0;D<y.length;D++)this._map.hasLayer(y[D])||this._map.addLayer(y[D]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,p,y=this._map.getZoom(),C=s.length-1;C>=0;C--)c=s[C],p=this._getLayer(c.layerId).layer,c.disabled=p.options.minZoom!==void 0&&y<p.options.minZoom||p.options.maxZoom!==void 0&&y>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Tt(s,"click",Mn),this.expand();var c=this;setTimeout(function(){hn(s,"click",Mn),c._preventClick=!1})}}),il=function(s,c,p){return new bc(s,c,p)},no=yi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",p=Ne("div",c+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,c+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,c+"-out",p,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,p,y,C){var D=Ne("a",p,y);return D.innerHTML=s,D.href="#",D.title=c,D.setAttribute("role","button"),D.setAttribute("aria-label",c),sa(D),Tt(D,"click",Gi),Tt(D,"click",C,this),Tt(D,"click",this._refocusOnMap,this),D},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";vt(this._zoomInButton,c),vt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(rt(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(rt(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Xt.mergeOptions({zoomControl:!0}),Xt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new no,this.addControl(this.zoomControl))});var sd=function(s){return new no(s)},ai=yi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",p=Ne("div",c),y=this.options;return this._addScales(y,c+"-line",p),s.on(y.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),p},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,p){s.metric&&(this._mScale=Ne("div",c,p)),s.imperial&&(this._iScale=Ne("div",c,p))},_update:function(){var s=this._map,c=s.getSize().y/2,p=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(p)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),p=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,p,c/s)},_updateImperial:function(s){var c=s*3.2808399,p,y,C;c>5280?(p=c/5280,y=this._getRoundNum(p),this._updateScale(this._iScale,y+" mi",y/p)):(C=this._getRoundNum(c),this._updateScale(this._iScale,C+" ft",C/c))},_updateScale:function(s,c,p){s.style.width=Math.round(this.options.maxWidth*p)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),p=s/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}}),io=function(s){return new ai(s)},Mc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',_s=yi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ct.inlineSvg?Mc+" ":"")+"Leaflet</a>"},initialize:function(s){P(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ne("div","leaflet-control-attribution"),sa(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var p=[];this.options.prefix&&p.push(this.options.prefix),s.length&&p.push(s.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});Xt.mergeOptions({attributionControl:!0}),Xt.addInitHook(function(){this.options.attributionControl&&new _s().addTo(this)});var jf=function(s){return new _s(s)};yi.Layers=bc,yi.Zoom=no,yi.Scale=ai,yi.Attribution=_s,Gr.layers=il,Gr.zoom=sd,Gr.scale=io,Gr.attribution=jf;var Ni=ge.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ni.addTo=function(s,c){return s.addHandler(c,this),this};var Ec={Events:ae},ro=ct.touch?"touchstart mousedown":"mousedown",Wi=te.extend({options:{clickTolerance:3},initialize:function(s,c,p,y){P(this,y),this._element=s,this._dragStartTarget=c||s,this._preventOutline=p},enable:function(){this._enabled||(Tt(this._dragStartTarget,ro,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Wi._dragging===this&&this.finishDrag(!0),hn(this._dragStartTarget,ro,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!sn(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Wi._dragging===this&&this.finishDrag();return}if(!(Wi._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Wi._dragging=this,this._preventOutline&&to(this._element),Vr(),wt(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,p=yr(this._element);this._startPoint=new X(c.clientX,c.clientY),this._startPos=Ht(this._element),this._parentScale=ir(p);var y=s.type==="mousedown";Tt(document,y?"mousemove":"touchmove",this._onMove,this),Tt(document,y?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,p=new X(c.clientX,c.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,Mn(s),this._moved||(this.fire("dragstart"),this._moved=!0,rt(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),rt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),dn(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){vt(document.body,"leaflet-dragging"),this._lastTarget&&(vt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),hn(document,"mousemove touchmove",this._onMove,this),hn(document,"mouseup touchend touchcancel",this._onUp,this),Ri(),Nn();var c=this._moved&&this._moving;this._moving=!1,Wi._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Tc(s,c,p){var y,C=[1,4,2,8],D,Z,ce,me,Ce,Qe,_t,Ut;for(D=0,Qe=s.length;D<Qe;D++)s[D]._code=xs(s[D],c);for(ce=0;ce<4;ce++){for(_t=C[ce],y=[],D=0,Qe=s.length,Z=Qe-1;D<Qe;Z=D++)me=s[D],Ce=s[Z],me._code&_t?Ce._code&_t||(Ut=sl(Ce,me,_t,c,p),Ut._code=xs(Ut,c),y.push(Ut)):(Ce._code&_t&&(Ut=sl(Ce,me,_t,c,p),Ut._code=xs(Ut,c),y.push(Ut)),y.push(me));s=y}return s}function od(s,c){var p,y,C,D,Z,ce,me,Ce,Qe;if(!s||s.length===0)throw new Error("latlngs not passed");Li(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var _t=oe([0,0]),Ut=je(s),Vn=Ut.getNorthWest().distanceTo(Ut.getSouthWest())*Ut.getNorthEast().distanceTo(Ut.getNorthWest());Vn<1700&&(_t=Ac(s));var On=s.length,wi=[];for(p=0;p<On;p++){var li=oe(s[p]);wi.push(c.project(oe([li.lat-_t.lat,li.lng-_t.lng])))}for(ce=me=Ce=0,p=0,y=On-1;p<On;y=p++)C=wi[p],D=wi[y],Z=C.y*D.x-D.y*C.x,me+=(C.x+D.x)*Z,Ce+=(C.y+D.y)*Z,ce+=Z*3;ce===0?Qe=wi[0]:Qe=[me/ce,Ce/ce];var mo=c.unproject(Q(Qe));return oe([mo.lat+_t.lat,mo.lng+_t.lng])}function Ac(s){for(var c=0,p=0,y=0,C=0;C<s.length;C++){var D=oe(s[C]);c+=D.lat,p+=D.lng,y++}return oe([c/y,p/y])}var Vf={__proto__:null,clipPolygon:Tc,polygonCenter:od,centroid:Ac};function rl(s,c){if(!c||!s.length)return s.slice();var p=c*c;return s=Wf(s,p),s=Gf(s,p),s}function ad(s,c,p){return Math.sqrt(ys(s,c,p,!0))}function Hf(s,c,p){return ys(s,c,p)}function Gf(s,c){var p=s.length,y=typeof Uint8Array<"u"?Uint8Array:Array,C=new y(p);C[0]=C[p-1]=1,Cc(s,C,c,0,p-1);var D,Z=[];for(D=0;D<p;D++)C[D]&&Z.push(s[D]);return Z}function Cc(s,c,p,y,C){var D=0,Z,ce,me;for(ce=y+1;ce<=C-1;ce++)me=ys(s[ce],s[y],s[C],!0),me>D&&(Z=ce,D=me);D>p&&(c[Z]=1,Cc(s,c,p,y,Z),Cc(s,c,p,Z,C))}function Wf(s,c){for(var p=[s[0]],y=1,C=0,D=s.length;y<D;y++)Xf(s[y],s[C])>c&&(p.push(s[y]),C=y);return C<D-1&&p.push(s[D-1]),p}var Pc;function ld(s,c,p,y,C){var D=y?Pc:xs(s,p),Z=xs(c,p),ce,me,Ce;for(Pc=Z;;){if(!(D|Z))return[s,c];if(D&Z)return!1;ce=D||Z,me=sl(s,c,ce,p,C),Ce=xs(me,p),ce===D?(s=me,D=Ce):(c=me,Z=Ce)}}function sl(s,c,p,y,C){var D=c.x-s.x,Z=c.y-s.y,ce=y.min,me=y.max,Ce,Qe;return p&8?(Ce=s.x+D*(me.y-s.y)/Z,Qe=me.y):p&4?(Ce=s.x+D*(ce.y-s.y)/Z,Qe=ce.y):p&2?(Ce=me.x,Qe=s.y+Z*(me.x-s.x)/D):p&1&&(Ce=ce.x,Qe=s.y+Z*(ce.x-s.x)/D),new X(Ce,Qe,C)}function xs(s,c){var p=0;return s.x<c.min.x?p|=1:s.x>c.max.x&&(p|=2),s.y<c.min.y?p|=4:s.y>c.max.y&&(p|=8),p}function Xf(s,c){var p=c.x-s.x,y=c.y-s.y;return p*p+y*y}function ys(s,c,p,y){var C=c.x,D=c.y,Z=p.x-C,ce=p.y-D,me=Z*Z+ce*ce,Ce;return me>0&&(Ce=((s.x-C)*Z+(s.y-D)*ce)/me,Ce>1?(C=p.x,D=p.y):Ce>0&&(C+=Z*Ce,D+=ce*Ce)),Z=s.x-C,ce=s.y-D,y?Z*Z+ce*ce:new X(C,D)}function Li(s){return!U(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function cd(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Li(s)}function ud(s,c){var p,y,C,D,Z,ce,me,Ce;if(!s||s.length===0)throw new Error("latlngs not passed");Li(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Qe=oe([0,0]),_t=je(s),Ut=_t.getNorthWest().distanceTo(_t.getSouthWest())*_t.getNorthEast().distanceTo(_t.getNorthWest());Ut<1700&&(Qe=Ac(s));var Vn=s.length,On=[];for(p=0;p<Vn;p++){var wi=oe(s[p]);On.push(c.project(oe([wi.lat-Qe.lat,wi.lng-Qe.lng])))}for(p=0,y=0;p<Vn-1;p++)y+=On[p].distanceTo(On[p+1])/2;if(y===0)Ce=On[0];else for(p=0,D=0;p<Vn-1;p++)if(Z=On[p],ce=On[p+1],C=Z.distanceTo(ce),D+=C,D>y){me=(D-y)/C,Ce=[ce.x-me*(ce.x-Z.x),ce.y-me*(ce.y-Z.y)];break}var li=c.unproject(Q(Ce));return oe([li.lat+Qe.lat,li.lng+Qe.lng])}var dd={__proto__:null,simplify:rl,pointToSegmentDistance:ad,closestPointOnSegment:Hf,clipSegment:ld,_getEdgeIntersection:sl,_getBitCode:xs,_sqClosestPointOnSegment:ys,isFlat:Li,_flat:cd,polylineCenter:ud},Rc={project:function(s){return new X(s.lng,s.lat)},unproject:function(s){return new ke(s.y,s.x)},bounds:new j([-180,-90],[180,90])},Nc={R:6378137,R_MINOR:6356752314245179e-9,bounds:new j([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,p=this.R,y=s.lat*c,C=this.R_MINOR/p,D=Math.sqrt(1-C*C),Z=D*Math.sin(y),ce=Math.tan(Math.PI/4-y/2)/Math.pow((1-Z)/(1+Z),D/2);return y=-p*Math.log(Math.max(ce,1e-10)),new X(s.lng*c*p,y)},unproject:function(s){for(var c=180/Math.PI,p=this.R,y=this.R_MINOR/p,C=Math.sqrt(1-y*y),D=Math.exp(-s.y/p),Z=Math.PI/2-2*Math.atan(D),ce=0,me=.1,Ce;ce<15&&Math.abs(me)>1e-7;ce++)Ce=C*Math.sin(Z),Ce=Math.pow((1-Ce)/(1+Ce),C/2),me=Math.PI/2-2*Math.atan(D*Ce)-Z,Z+=me;return new ke(Z*c,s.x*c/p)}},Zf={__proto__:null,LonLat:Rc,Mercator:Nc,SphericalMercator:qe},qf=o({},Re,{code:"EPSG:3395",projection:Nc,transformation:(function(){var s=.5/(Math.PI*Nc.R);return mn(s,.5,-s,.5)})()}),hd=o({},Re,{code:"EPSG:4326",projection:Rc,transformation:mn(1/180,1,-1/180,.5)}),Yf=o({},be,{projection:Rc,transformation:mn(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var p=c.lng-s.lng,y=c.lat-s.lat;return Math.sqrt(p*p+y*y)},infinite:!0});be.Earth=Re,be.EPSG3395=qf,be.EPSG3857=It,be.EPSG900913=qt,be.EPSG4326=hd,be.Simple=Yf;var Xi=te.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[f(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[f(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var p=this.getEvents();c.on(p,this),this.once("remove",function(){c.off(p,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Xt.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=f(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=f(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return f(s)in this._layers},eachLayer:function(s,c){for(var p in this._layers)s.call(c,this._layers[p]);return this},_addLayers:function(s){s=s?U(s)?s:[s]:[];for(var c=0,p=s.length;c<p;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[f(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=f(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,p=this._getZoomSpan();for(var y in this._zoomBoundLayers){var C=this._zoomBoundLayers[y].options;s=C.minZoom===void 0?s:Math.min(s,C.minZoom),c=C.maxZoom===void 0?c:Math.max(c,C.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Wr=Xi.extend({initialize:function(s,c){P(this,c),this._layers={};var p,y;if(s)for(p=0,y=s.length;p<y;p++)this.addLayer(s[p])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),p,y;for(p in this._layers)y=this._layers[p],y[s]&&y[s].apply(y,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var p in this._layers)s.call(c,this._layers[p]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return f(s)}}),la=function(s,c){return new Wr(s,c)},Sr=Wr.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Wr.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Wr.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new De;for(var c in this._layers){var p=this._layers[c];s.extend(p.getBounds?p.getBounds():p.getLatLng())}return s}}),fd=function(s,c){return new Sr(s,c)},Ss=ge.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){P(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var p=this._getIconUrl(s);if(!p){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(p,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(y,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),y},_setIconStyles:function(s,c){var p=this.options,y=p[c+"Size"];typeof y=="number"&&(y=[y,y]);var C=Q(y),D=Q(c==="shadow"&&p.shadowAnchor||p.iconAnchor||C&&C.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(p.className||""),D&&(s.style.marginLeft=-D.x+"px",s.style.marginTop=-D.y+"px"),C&&(s.style.width=C.x+"px",s.style.height=C.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return ct.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function pd(s){return new Ss(s)}var so=Ss.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof so.imagePath!="string"&&(so.imagePath=this._detectIconPath()),(this.options.imagePath||so.imagePath)+Ss.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(p,y,C){var D=y.exec(p);return D&&D[C]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ne("div","leaflet-default-icon-path",document.body),c=et(s,"background-image")||et(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),Lc=Ni.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Wi(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),rt(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&vt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,p=c._map,y=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,D=Ht(c._icon),Z=p.getPixelBounds(),ce=p.getPixelOrigin(),me=he(Z.min._subtract(ce).add(C),Z.max._subtract(ce).subtract(C));if(!me.contains(D)){var Ce=Q((Math.max(me.max.x,D.x)-me.max.x)/(Z.max.x-me.max.x)-(Math.min(me.min.x,D.x)-me.min.x)/(Z.min.x-me.min.x),(Math.max(me.max.y,D.y)-me.max.y)/(Z.max.y-me.max.y)-(Math.min(me.min.y,D.y)-me.min.y)/(Z.min.y-me.min.y)).multiplyBy(y);p.panBy(Ce,{animate:!1}),this._draggable._newPos._add(Ce),this._draggable._startPos._add(Ce),dn(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=q(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(re(this._panRequest),this._panRequest=q(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,p=c._shadow,y=Ht(c._icon),C=c._map.layerPointToLatLng(y);p&&dn(p,y),c._latlng=C,s.latlng=C,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){re(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),wr=Xi.extend({options:{icon:new so,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){P(this,c),this._latlng=oe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=oe(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=s.icon.createIcon(this._icon),y=!1;p!==this._icon&&(this._icon&&this._removeIcon(),y=!0,s.title&&(p.title=s.title),p.tagName==="IMG"&&(p.alt=s.alt||"")),rt(p,c),s.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Tt(p,"focus",this._panOnFocus,this);var C=s.icon.createShadow(this._shadow),D=!1;C!==this._shadow&&(this._removeShadow(),D=!0),C&&(rt(C,c),C.alt=""),this._shadow=C,s.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&D&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&hn(this._icon,"focus",this._panOnFocus,this),Je(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Je(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&dn(this._icon,s),this._shadow&&dn(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(rt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Lc)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Lc(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Et(this._icon,s),this._shadow&&Et(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,p=c.iconSize?Q(c.iconSize):Q(0,0),y=c.iconAnchor?Q(c.iconAnchor):Q(0,0);s.panInside(this._latlng,{paddingTopLeft:y,paddingBottomRight:p.subtract(y)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Kf(s,c){return new wr(s,c)}var Xr=Xi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return P(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ol=Xr.extend({options:{fill:!0,radius:10},initialize:function(s,c){P(this,c),this._latlng=oe(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=oe(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return Xr.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,p=this._clickTolerance(),y=[s+p,c+p];this._pxBounds=new j(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function md(s,c){return new ol(s,c)}var al=ol.extend({initialize:function(s,c,p){if(typeof c=="number"&&(c=o({},p,{radius:c})),P(this,c),this._latlng=oe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new De(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Xr.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,p=this._map,y=p.options.crs;if(y.distance===Re.distance){var C=Math.PI/180,D=this._mRadius/Re.R/C,Z=p.project([c+D,s]),ce=p.project([c-D,s]),me=Z.add(ce).divideBy(2),Ce=p.unproject(me).lat,Qe=Math.acos((Math.cos(D*C)-Math.sin(c*C)*Math.sin(Ce*C))/(Math.cos(c*C)*Math.cos(Ce*C)))/C;(isNaN(Qe)||Qe===0)&&(Qe=D/Math.cos(Math.PI/180*c)),this._point=me.subtract(p.getPixelOrigin()),this._radius=isNaN(Qe)?0:me.x-p.project([Ce,s-Qe]).x,this._radiusY=me.y-Z.y}else{var _t=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(_t).x}this._updateBounds()}});function ca(s,c,p){return new al(s,c,p)}var Si=Xr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){P(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,p=null,y=ys,C,D,Z=0,ce=this._parts.length;Z<ce;Z++)for(var me=this._parts[Z],Ce=1,Qe=me.length;Ce<Qe;Ce++){C=me[Ce-1],D=me[Ce];var _t=y(s,C,D,!0);_t<c&&(c=_t,p=y(s,C,D))}return p&&(p.distance=Math.sqrt(c)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ud(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=oe(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new De,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Li(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],p=Li(s),y=0,C=s.length;y<C;y++)p?(c[y]=oe(s[y]),this._bounds.extend(c[y])):c[y]=this._convertLatLngs(s[y]);return c},_project:function(){var s=new j;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new X(s,s);this._rawPxBounds&&(this._pxBounds=new j([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,p){var y=s[0]instanceof ke,C=s.length,D,Z;if(y){for(Z=[],D=0;D<C;D++)Z[D]=this._map.latLngToLayerPoint(s[D]),p.extend(Z[D]);c.push(Z)}else for(D=0;D<C;D++)this._projectLatlngs(s[D],c,p)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,p,y,C,D,Z,ce,me;for(p=0,C=0,D=this._rings.length;p<D;p++)for(me=this._rings[p],y=0,Z=me.length;y<Z-1;y++)ce=ld(me[y],me[y+1],s,y,!0),ce&&(c[C]=c[C]||[],c[C].push(ce[0]),(ce[1]!==me[y+1]||y===Z-2)&&(c[C].push(ce[1]),C++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,p=0,y=s.length;p<y;p++)s[p]=rl(s[p],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var p,y,C,D,Z,ce,me=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(p=0,D=this._parts.length;p<D;p++)for(ce=this._parts[p],y=0,Z=ce.length,C=Z-1;y<Z;C=y++)if(!(!c&&y===0)&&ad(s,ce[C],ce[y])<=me)return!0;return!1}});function $f(s,c){return new Si(s,c)}Si._flat=cd;var br=Si.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return od(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=Si.prototype._convertLatLngs.call(this,s),p=c.length;return p>=2&&c[0]instanceof ke&&c[0].equals(c[p-1])&&c.pop(),c},_setLatLngs:function(s){Si.prototype._setLatLngs.call(this,s),Li(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Li(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,p=new X(c,c);if(s=new j(s.min.subtract(p),s.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var y=0,C=this._rings.length,D;y<C;y++)D=Tc(this._rings[y],s,!0),D.length&&this._parts.push(D)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,p,y,C,D,Z,ce,me,Ce;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(D=0,me=this._parts.length;D<me;D++)for(p=this._parts[D],Z=0,Ce=p.length,ce=Ce-1;Z<Ce;ce=Z++)y=p[Z],C=p[ce],y.y>s.y!=C.y>s.y&&s.x<(C.x-y.x)*(s.y-y.y)/(C.y-y.y)+y.x&&(c=!c);return c||Si.prototype._containsPoint.call(this,s,!0)}});function Jf(s,c){return new br(s,c)}var sr=Sr.extend({initialize:function(s,c){P(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=U(s)?s:s.features,p,y,C;if(c){for(p=0,y=c.length;p<y;p++)C=c[p],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var D=this.options;if(D.filter&&!D.filter(s))return this;var Z=oo(s,D);return Z?(Z.feature=hl(s),Z.defaultOptions=Z.options,this.resetStyle(Z),D.onEachFeature&&D.onEachFeature(s,Z),this.addLayer(Z)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=o({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function oo(s,c){var p=s.type==="Feature"?s.geometry:s,y=p?p.coordinates:null,C=[],D=c&&c.pointToLayer,Z=c&&c.coordsToLatLng||cl,ce,me,Ce,Qe;if(!y&&!p)return null;switch(p.type){case"Point":return ce=Z(y),ll(D,s,ce,c);case"MultiPoint":for(Ce=0,Qe=y.length;Ce<Qe;Ce++)ce=Z(y[Ce]),C.push(ll(D,s,ce,c));return new Sr(C);case"LineString":case"MultiLineString":return me=ua(y,p.type==="LineString"?0:1,Z),new Si(me,c);case"Polygon":case"MultiPolygon":return me=ua(y,p.type==="Polygon"?1:2,Z),new br(me,c);case"GeometryCollection":for(Ce=0,Qe=p.geometries.length;Ce<Qe;Ce++){var _t=oo({geometry:p.geometries[Ce],type:"Feature",properties:s.properties},c);_t&&C.push(_t)}return new Sr(C);case"FeatureCollection":for(Ce=0,Qe=p.features.length;Ce<Qe;Ce++){var Ut=oo(p.features[Ce],c);Ut&&C.push(Ut)}return new Sr(C);default:throw new Error("Invalid GeoJSON object.")}}function ll(s,c,p,y){return s?s(c,p):new wr(p,y&&y.markersInheritOptions&&y)}function cl(s){return new ke(s[1],s[0],s[2])}function ua(s,c,p){for(var y=[],C=0,D=s.length,Z;C<D;C++)Z=c?ua(s[C],c-1,p):(p||cl)(s[C]),y.push(Z);return y}function ul(s,c){return s=oe(s),s.alt!==void 0?[w(s.lng,c),w(s.lat,c),w(s.alt,c)]:[w(s.lng,c),w(s.lat,c)]}function dl(s,c,p,y){for(var C=[],D=0,Z=s.length;D<Z;D++)C.push(c?dl(s[D],Li(s[D])?0:c-1,p,y):ul(s[D],y));return!c&&p&&C.length>0&&C.push(C[0].slice()),C}function ao(s,c){return s.feature?o({},s.feature,{geometry:c}):hl(c)}function hl(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Dc={toGeoJSON:function(s){return ao(this,{type:"Point",coordinates:ul(this.getLatLng(),s)})}};wr.include(Dc),al.include(Dc),ol.include(Dc),Si.include({toGeoJSON:function(s){var c=!Li(this._latlngs),p=dl(this._latlngs,c?1:0,!1,s);return ao(this,{type:(c?"Multi":"")+"LineString",coordinates:p})}}),br.include({toGeoJSON:function(s){var c=!Li(this._latlngs),p=c&&!Li(this._latlngs[0]),y=dl(this._latlngs,p?2:c?1:0,!0,s);return c||(y=[y]),ao(this,{type:(p?"Multi":"")+"Polygon",coordinates:y})}}),Wr.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(p){c.push(p.toGeoJSON(s).geometry.coordinates)}),ao(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var p=c==="GeometryCollection",y=[];return this.eachLayer(function(C){if(C.toGeoJSON){var D=C.toGeoJSON(s);if(p)y.push(D.geometry);else{var Z=hl(D);Z.type==="FeatureCollection"?y.push.apply(y,Z.features):y.push(Z)}}}),p?ao(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});function gd(s,c){return new sr(s,c)}var Zi=gd,Zr=Xi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,p){this._url=s,this._bounds=je(c),P(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(rt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Je(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Ct(this._image),this},bringToBack:function(){return this._map&&zt(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=je(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:Ne("img");if(rt(c,"leaflet-image-layer"),this._zoomAnimated&&rt(c,"leaflet-zoom-animated"),this.options.className&&rt(c,this.options.className),c.onselectstart=x,c.onmousemove=x,c.onload=u(this.fire,this,"load"),c.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;gn(this._image,p,c)},_reset:function(){var s=this._image,c=new j(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=c.getSize();dn(s,c.min),s.style.width=p.x+"px",s.style.height=p.y+"px"},_updateOpacity:function(){Et(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),vd=function(s,c,p){return new Zr(s,c,p)},Ic=Zr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:Ne("video");if(rt(c,"leaflet-image-layer"),this._zoomAnimated&&rt(c,"leaflet-zoom-animated"),this.options.className&&rt(c,this.options.className),c.onselectstart=x,c.onmousemove=x,c.onloadeddata=u(this.fire,this,"load"),s){for(var p=c.getElementsByTagName("source"),y=[],C=0;C<p.length;C++)y.push(p[C].src);this._url=p.length>0?y:[c.src];return}U(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var D=0;D<this._url.length;D++){var Z=Ne("source");Z.src=this._url[D],c.appendChild(Z)}}});function _d(s,c,p){return new Ic(s,c,p)}var Uc=Zr.extend({_initImage:function(){var s=this._image=this._url;rt(s,"leaflet-image-layer"),this._zoomAnimated&&rt(s,"leaflet-zoom-animated"),this.options.className&&rt(s,this.options.className),s.onselectstart=x,s.onmousemove=x}});function Oc(s,c,p){return new Uc(s,c,p)}var or=Xi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof ke||U(s))?(this._latlng=oe(s),P(this,c)):(P(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Et(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Et(this._container,1),this.bringToFront(),this.options.interactive&&(rt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Et(this._container,0),this._removeTimeout=setTimeout(u(Je,void 0,this._container),200)):Je(this._container),this.options.interactive&&(vt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=oe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ct(this._container),this},bringToBack:function(){return this._map&&zt(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof Sr){c=null;var p=this._source._layers;for(var y in p)if(p[y]._map){c=p[y];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=Q(this.options.offset),p=this._getAnchor();this._zoomAnimated?dn(this._container,s.add(p)):c=c.add(s).add(p);var y=this._containerBottom=-c.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=y+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});Xt.include({_initOverlay:function(s,c,p,y){var C=c;return C instanceof s||(C=new s(y).setContent(c)),p&&C.setLatLng(p),C}}),Xi.include({_initOverlay:function(s,c,p,y){var C=p;return C instanceof s?(P(C,y),C._source=this):(C=c&&!y?c:new s(y,this),C.setContent(p)),C}});var fl=or.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,or.prototype.openOn.call(this,s)},onAdd:function(s){or.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Xr||this._source.on("preclick",rr))},onRemove:function(s){or.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Xr||this._source.off("preclick",rr))},getEvents:function(){var s=or.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=Ne("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=Ne("div",s+"-content-wrapper",c);if(this._contentNode=Ne("div",s+"-content",p),sa(c),el(this._contentNode),Tt(c,"contextmenu",rr),this._tipContainer=Ne("div",s+"-tip-container",c),this._tip=Ne("div",s+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=Ne("a",s+"-close-button",c);y.setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',Tt(y,"click",function(C){Mn(C),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var p=s.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),c.width=p+1+"px",c.whiteSpace="",c.height="";var y=s.offsetHeight,C=this.options.maxHeight,D="leaflet-popup-scrolled";C&&y>C?(c.height=C+"px",rt(s,D)):vt(s,D),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),p=this._getAnchor();dn(this._container,c.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt(et(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+c,y=this._containerWidth,C=new X(this._containerLeft,-p-this._containerBottom);C._add(Ht(this._container));var D=s.layerPointToContainerPoint(C),Z=Q(this.options.autoPanPadding),ce=Q(this.options.autoPanPaddingTopLeft||Z),me=Q(this.options.autoPanPaddingBottomRight||Z),Ce=s.getSize(),Qe=0,_t=0;D.x+y+me.x>Ce.x&&(Qe=D.x+y-Ce.x+me.x),D.x-Qe-ce.x<0&&(Qe=D.x-ce.x),D.y+p+me.y>Ce.y&&(_t=D.y+p-Ce.y+me.y),D.y-_t-ce.y<0&&(_t=D.y-ce.y),(Qe||_t)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([Qe,_t]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),lo=function(s,c){return new fl(s,c)};Xt.mergeOptions({closePopupOnClick:!0}),Xt.include({openPopup:function(s,c,p){return this._initOverlay(fl,s,c,p).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Xi.include({bindPopup:function(s,c){return this._popup=this._initOverlay(fl,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Sr||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Gi(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof Xr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var co=or.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){or.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){or.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=or.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ne("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,p,y=this._map,C=this._container,D=y.latLngToContainerPoint(y.getCenter()),Z=y.layerPointToContainerPoint(s),ce=this.options.direction,me=C.offsetWidth,Ce=C.offsetHeight,Qe=Q(this.options.offset),_t=this._getAnchor();ce==="top"?(c=me/2,p=Ce):ce==="bottom"?(c=me/2,p=0):ce==="center"?(c=me/2,p=Ce/2):ce==="right"?(c=0,p=Ce/2):ce==="left"?(c=me,p=Ce/2):Z.x<D.x?(ce="right",c=0,p=Ce/2):(ce="left",c=me+(Qe.x+_t.x)*2,p=Ce/2),s=s.subtract(Q(c,p,!0)).add(Qe).add(_t),vt(C,"leaflet-tooltip-right"),vt(C,"leaflet-tooltip-left"),vt(C,"leaflet-tooltip-top"),vt(C,"leaflet-tooltip-bottom"),rt(C,"leaflet-tooltip-"+ce),dn(C,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Et(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),da=function(s,c){return new co(s,c)};Xt.include({openTooltip:function(s,c,p){return this._initOverlay(co,s,c,p).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Xi.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(co,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[c](p),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Sr||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(Tt(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Tt(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,p,y;this._tooltip.options.sticky&&s.originalEvent&&(p=this._map.mouseEventToContainerPoint(s.originalEvent),y=this._map.containerPointToLayerPoint(p),c=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(c)}});var pl=Ss.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),p=this.options;if(p.html instanceof Element?(pt(c),c.appendChild(p.html)):c.innerHTML=p.html!==!1?p.html:"",p.bgPos){var y=Q(p.bgPos);c.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function xd(s){return new pl(s)}Ss.Default=so;var qr=Xi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ct.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){P(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Je(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ct(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(zt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof X?s:new X(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,p=-s(-1/0,1/0),y=0,C=c.length,D;y<C;y++)D=c[y].style.zIndex,c[y]!==this._container&&D&&(p=s(p,+D));isFinite(p)&&(this.options.zIndex=p+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ct.ielt9){Et(this._container,this.options.opacity);var s=+new Date,c=!1,p=!1;for(var y in this._tiles){var C=this._tiles[y];if(!(!C.current||!C.loaded)){var D=Math.min(1,(s-C.loaded)/200);Et(C.el,D),D<1?c=!0:(C.active?p=!0:this._onOpaqueTile(C),C.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),c&&(re(this._fadeFrame),this._fadeFrame=q(this._updateOpacity,this))}},_onOpaqueTile:x,_initContainer:function(){this._container||(this._container=Ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===s?(this._levels[p].el.style.zIndex=c-Math.abs(s-p),this._onUpdateLevel(p)):(Je(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var y=this._levels[s],C=this._map;return y||(y=this._levels[s]={},y.el=Ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=c,y.origin=C.project(C.unproject(C.getPixelOrigin()),s).round(),y.zoom=s,this._setZoomTransform(y,C.getCenter(),C.getZoom()),x(y.el.offsetWidth),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:x,_onRemoveLevel:x,_onCreateLevel:x,_pruneTiles:function(){if(this._map){var s,c,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var y=c.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Je(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,p,y){var C=Math.floor(s/2),D=Math.floor(c/2),Z=p-1,ce=new X(+C,+D);ce.z=+Z;var me=this._tileCoordsToKey(ce),Ce=this._tiles[me];return Ce&&Ce.active?(Ce.retain=!0,!0):(Ce&&Ce.loaded&&(Ce.retain=!0),Z>y?this._retainParent(C,D,Z,y):!1)},_retainChildren:function(s,c,p,y){for(var C=2*s;C<2*s+2;C++)for(var D=2*c;D<2*c+2;D++){var Z=new X(C,D);Z.z=p+1;var ce=this._tileCoordsToKey(Z),me=this._tiles[ce];if(me&&me.active){me.retain=!0;continue}else me&&me.loaded&&(me.retain=!0);p+1<y&&this._retainChildren(C,D,p+1,y)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,p,y){var C=Math.round(c);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var D=this.options.updateWhenZooming&&C!==this._tileZoom;(!y||D)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(s),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var p in this._levels)this._setZoomTransform(this._levels[p],s,c)},_setZoomTransform:function(s,c,p){var y=this._map.getZoomScale(p,s.zoom),C=s.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(c,p)).round();ct.any3d?gn(s.el,C,y):dn(s.el,C)},_resetGrid:function(){var s=this._map,c=s.options.crs,p=this._tileSize=this.getTileSize(),y=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],y).x/p.x),Math.ceil(s.project([0,c.wrapLng[1]],y).x/p.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],y).y/p.x),Math.ceil(s.project([c.wrapLat[1],0],y).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,p=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),y=c.getZoomScale(p,this._tileZoom),C=c.project(s,this._tileZoom).floor(),D=c.getSize().divideBy(y*2);return new j(C.subtract(D),C.add(D))},_update:function(s){var c=this._map;if(c){var p=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var y=this._getTiledPixelBounds(s),C=this._pxBoundsToTileRange(y),D=C.getCenter(),Z=[],ce=this.options.keepBuffer,me=new j(C.getBottomLeft().subtract([ce,-ce]),C.getTopRight().add([ce,-ce]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ce in this._tiles){var Qe=this._tiles[Ce].coords;(Qe.z!==this._tileZoom||!me.contains(new X(Qe.x,Qe.y)))&&(this._tiles[Ce].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(s,p);return}for(var _t=C.min.y;_t<=C.max.y;_t++)for(var Ut=C.min.x;Ut<=C.max.x;Ut++){var Vn=new X(Ut,_t);if(Vn.z=this._tileZoom,!!this._isValidTile(Vn)){var On=this._tiles[this._tileCoordsToKey(Vn)];On?On.current=!0:Z.push(Vn)}}if(Z.sort(function(li,mo){return li.distanceTo(D)-mo.distanceTo(D)}),Z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var wi=document.createDocumentFragment();for(Ut=0;Ut<Z.length;Ut++)this._addTile(Z[Ut],wi);this._level.el.appendChild(wi)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var p=this._globalTileRange;if(!c.wrapLng&&(s.x<p.min.x||s.x>p.max.x)||!c.wrapLat&&(s.y<p.min.y||s.y>p.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(s);return je(this.options.bounds).overlaps(y)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,p=this.getTileSize(),y=s.scaleBy(p),C=y.add(p),D=c.unproject(y,s.z),Z=c.unproject(C,s.z);return[D,Z]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),p=new De(c[0],c[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),p=new X(+c[0],+c[1]);return p.z=+c[2],p},_removeTile:function(s){var c=this._tiles[s];c&&(Je(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){rt(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=x,s.onmousemove=x,ct.ielt9&&this.options.opacity<1&&Et(s,this.options.opacity)},_addTile:function(s,c){var p=this._getTilePos(s),y=this._tileCoordsToKey(s),C=this.createTile(this._wrapCoords(s),u(this._tileReady,this,s));this._initTile(C),this.createTile.length<2&&q(u(this._tileReady,this,s,null,C)),dn(C,p),this._tiles[y]={el:C,coords:s,current:!0},c.appendChild(C),this.fire("tileloadstart",{tile:C,coords:s})},_tileReady:function(s,c,p){c&&this.fire("tileerror",{error:c,tile:p,coords:s});var y=this._tileCoordsToKey(s);p=this._tiles[y],p&&(p.loaded=+new Date,this._map._fadeAnimated?(Et(p.el,0),re(this._fadeFrame),this._fadeFrame=q(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),c||(rt(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ct.ielt9||!this._map._fadeAnimated?q(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new X(this._wrapX?_(s.x,this._wrapX):s.x,this._wrapY?_(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new j(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function uo(s){return new qr(s)}var Yr=qr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=P(this,c),c.detectRetina&&ct.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var p=document.createElement("img");return Tt(p,"load",u(this._tileOnLoad,this,c,p)),Tt(p,"error",u(this._tileOnError,this,c,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(s),p},getTileUrl:function(s){var c={r:ct.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=p),c["-y"]=p}return O(this._url,o(c,this.options))},_tileOnLoad:function(s,c){ct.ielt9?setTimeout(u(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,p){var y=this.options.errorTileUrl;y&&c.getAttribute("src")!==y&&(c.src=y),s(p,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,p=this.options.zoomReverse,y=this.options.zoomOffset;return p&&(s=c-s),s+y},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=x,c.onerror=x,!c.complete)){c.src=B;var p=this._tiles[s].coords;Je(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:p})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",B),qr.prototype._removeTile.call(this,s)},_tileReady:function(s,c,p){if(!(!this._map||p&&p.getAttribute("src")===B))return qr.prototype._tileReady.call(this,s,c,p)}});function Fc(s,c){return new Yr(s,c)}var ha=Yr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var p=o({},this.defaultWmsParams);for(var y in c)y in this.options||(p[y]=c[y]);c=P(this,c);var C=c.detectRetina&&ct.retina?2:1,D=this.getTileSize();p.width=D.x*C,p.height=D.y*C,this.wmsParams=p},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Yr.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),p=this._crs,y=he(p.project(c[0]),p.project(c[1])),C=y.min,D=y.max,Z=(this._wmsVersion>=1.3&&this._crs===hd?[C.y,C.x,D.y,D.x]:[C.x,C.y,D.x,D.y]).join(","),ce=Yr.prototype.getTileUrl.call(this,s);return ce+b(this.wmsParams,ce,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Z},setParams:function(s,c){return o(this.wmsParams,s),c||this.redraw(),this}});function yd(s,c){return new ha(s,c)}Yr.WMS=ha,Fc.wms=yd;var ar=Xi.extend({options:{padding:.1},initialize:function(s){P(this,s),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),rt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var p=this._map.getZoomScale(c,this._zoom),y=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,c),D=y.multiplyBy(-p).add(C).subtract(this._map._getNewPixelOrigin(s,c));ct.any3d?gn(this._container,D,p):dn(this._container,D)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),p=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new j(p,p.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),kc=ar.extend({options:{tolerance:0},getEvents:function(){var s=ar.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ar.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Tt(s,"mousemove",this._onMouseMove,this),Tt(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Tt(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){re(this._redrawRequest),delete this._ctx,Je(this._container),hn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ar.prototype._update.call(this);var s=this._bounds,c=this._container,p=s.getSize(),y=ct.retina?2:1;dn(c,s.min),c.width=y*p.x,c.height=y*p.y,c.style.width=p.x+"px",c.style.height=p.y+"px",ct.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){ar.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[f(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,p=c.next,y=c.prev;p?p.prev=y:this._drawLast=y,y?y.next=p:this._drawFirst=p,delete s._order,delete this._layers[f(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),p=[],y,C;for(C=0;C<c.length;C++){if(y=Number(c[C]),isNaN(y))return;p.push(y)}s.options._dashArray=p}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||q(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new j,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var p=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)s=y.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var p,y,C,D,Z=s._parts,ce=Z.length,me=this._ctx;if(ce){for(me.beginPath(),p=0;p<ce;p++){for(y=0,C=Z[p].length;y<C;y++)D=Z[p][y],me[y?"lineTo":"moveTo"](D.x,D.y);c&&me.closePath()}this._fillStroke(me,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,p=this._ctx,y=Math.max(Math.round(s._radius),1),C=(Math.max(Math.round(s._radiusY),1)||y)/y;C!==1&&(p.save(),p.scale(1,C)),p.beginPath(),p.arc(c.x,c.y/C,y,0,Math.PI*2,!1),C!==1&&p.restore(),this._fillStroke(p,s)}},_fillStroke:function(s,c){var p=c.options;p.fill&&(s.globalAlpha=p.fillOpacity,s.fillStyle=p.fillColor||p.color,s.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=p.opacity,s.lineWidth=p.weight,s.strokeStyle=p.color,s.lineCap=p.lineCap,s.lineJoin=p.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),p,y,C=this._drawFirst;C;C=C.next)p=C.layer,p.options.interactive&&p._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(p))&&(y=p);this._fireEvent(y?[y]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(vt(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var p,y,C=this._drawFirst;C;C=C.next)p=C.layer,p.options.interactive&&p._containsPoint(c)&&(y=p);y!==this._hoveredLayer&&(this._handleMouseOut(s),y&&(rt(this._container,"leaflet-interactive"),this._fireEvent([y],s,"mouseover"),this._hoveredLayer=y)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,p){this._map._fireDOMEvent(c,p||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var p=c.next,y=c.prev;if(p)p.prev=y;else return;y?y.next=p:p&&(this._drawFirst=p),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var p=c.next,y=c.prev;if(y)y.next=p;else return;p?p.prev=y:y&&(this._drawLast=y),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function Bc(s){return ct.canvas?new kc(s):null}var ho=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Sd={_initContainer:function(){this._container=Ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ar.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=ho("shape");rt(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=ho("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[f(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;Je(c),s.removeInteractiveTarget(c),delete this._layers[f(s)]},_updateStyle:function(s){var c=s._stroke,p=s._fill,y=s.options,C=s._container;C.stroked=!!y.stroke,C.filled=!!y.fill,y.stroke?(c||(c=s._stroke=ho("stroke")),C.appendChild(c),c.weight=y.weight+"px",c.color=y.color,c.opacity=y.opacity,y.dashArray?c.dashStyle=U(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=y.lineCap.replace("butt","flat"),c.joinstyle=y.lineJoin):c&&(C.removeChild(c),s._stroke=null),y.fill?(p||(p=s._fill=ho("fill")),C.appendChild(p),p.color=y.fillColor||y.color,p.opacity=y.fillOpacity):p&&(C.removeChild(p),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),p=Math.round(s._radius),y=Math.round(s._radiusY||p);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+p+","+y+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){Ct(s._container)},_bringToBack:function(s){zt(s._container)}},qi=ct.vml?ho:$t,ws=ar.extend({_initContainer:function(){this._container=qi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=qi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Je(this._container),hn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ar.prototype._update.call(this);var s=this._bounds,c=s.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,p.setAttribute("width",c.x),p.setAttribute("height",c.y)),dn(p,s.min),p.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=qi("path");s.options.className&&rt(c,s.options.className),s.options.interactive&&rt(c,"leaflet-interactive"),this._updateStyle(s),this._layers[f(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Je(s._path),s.removeInteractiveTarget(s._path),delete this._layers[f(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,p=s.options;c&&(p.stroke?(c.setAttribute("stroke",p.color),c.setAttribute("stroke-opacity",p.opacity),c.setAttribute("stroke-width",p.weight),c.setAttribute("stroke-linecap",p.lineCap),c.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?c.setAttribute("stroke-dasharray",p.dashArray):c.removeAttribute("stroke-dasharray"),p.dashOffset?c.setAttribute("stroke-dashoffset",p.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),p.fill?(c.setAttribute("fill",p.fillColor||p.color),c.setAttribute("fill-opacity",p.fillOpacity),c.setAttribute("fill-rule",p.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,Rt(s._parts,c))},_updateCircle:function(s){var c=s._point,p=Math.max(Math.round(s._radius),1),y=Math.max(Math.round(s._radiusY),1)||p,C="a"+p+","+y+" 0 1,0 ",D=s._empty()?"M0 0":"M"+(c.x-p)+","+c.y+C+p*2+",0 "+C+-p*2+",0 ";this._setPath(s,D)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){Ct(s._path)},_bringToBack:function(s){zt(s._path)}});ct.vml&&ws.include(Sd);function ml(s){return ct.svg||ct.vml?new ws(s):null}Xt.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&Bc(s)||ml(s)}});var wd=br.extend({initialize:function(s,c){br.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=je(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Qf(s,c){return new wd(s,c)}ws.create=qi,ws.pointsToPath=Rt,sr.geometryToLayer=oo,sr.coordsToLatLng=cl,sr.coordsToLatLngs=ua,sr.latLngToCoords=ul,sr.latLngsToCoords=dl,sr.getFeature=ao,sr.asFeature=hl,Xt.mergeOptions({boxZoom:!0});var fo=Ni.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Tt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){hn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Je(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),wt(),Vr(),this._startPoint=this._map.mouseEventToContainerPoint(s),Tt(document,{contextmenu:Gi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ne("div","leaflet-zoom-box",this._container),rt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new j(this._point,this._startPoint),p=c.getSize();dn(this._box,c.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(Je(this._box),vt(this._container,"leaflet-crosshair")),Nn(),Ri(),hn(document,{contextmenu:Gi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var c=new De(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Xt.addInitHook("addHandler","boxZoom",fo),Xt.mergeOptions({doubleClickZoom:!0});var bd=Ni.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,p=c.getZoom(),y=c.options.zoomDelta,C=s.originalEvent.shiftKey?p-y:p+y;c.options.doubleClickZoom==="center"?c.setZoom(C):c.setZoomAround(s.containerPoint,C)}});Xt.addInitHook("addHandler","doubleClickZoom",bd),Xt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var zc=Ni.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Wi(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}rt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){vt(this._map._container,"leaflet-grab"),vt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=je(this._map.options.maxBounds);this._offsetLimit=he(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),p=this._initialWorldOffset,y=this._draggable._newPos.x,C=(y-c+p)%s+c-p,D=(y+c+p)%s-c-p,Z=Math.abs(C+p)<Math.abs(D+p)?C:D;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Z},_onDragEnd:function(s){var c=this._map,p=c.options,y=!p.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),y)c.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),D=(this._lastTime-this._times[0])/1e3,Z=p.easeLinearity,ce=C.multiplyBy(Z/D),me=ce.distanceTo([0,0]),Ce=Math.min(p.inertiaMaxSpeed,me),Qe=ce.multiplyBy(Ce/me),_t=Ce/(p.inertiaDeceleration*Z),Ut=Qe.multiplyBy(-_t/2).round();!Ut.x&&!Ut.y?c.fire("moveend"):(Ut=c._limitOffset(Ut,c.options.maxBounds),q(function(){c.panBy(Ut,{duration:_t,easeLinearity:Z,noMoveStart:!0,animate:!0})}))}}});Xt.addInitHook("addHandler","dragging",zc),Xt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var jc=Ni.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Tt(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),hn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,p=s.scrollTop||c.scrollTop,y=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(y,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},p=this.keyCodes,y,C;for(y=0,C=p.left.length;y<C;y++)c[p.left[y]]=[-1*s,0];for(y=0,C=p.right.length;y<C;y++)c[p.right[y]]=[s,0];for(y=0,C=p.down.length;y<C;y++)c[p.down[y]]=[0,s];for(y=0,C=p.up.length;y<C;y++)c[p.up[y]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},p=this.keyCodes,y,C;for(y=0,C=p.zoomIn.length;y<C;y++)c[p.zoomIn[y]]=s;for(y=0,C=p.zoomOut.length;y<C;y++)c[p.zoomOut[y]]=-s},_addHooks:function(){Tt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){hn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,p=this._map,y;if(c in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(y=this._panKeys[c],s.shiftKey&&(y=Q(y).multiplyBy(3)),p.options.maxBounds&&(y=p._limitOffset(Q(y),p.options.maxBounds)),p.options.worldCopyJump){var C=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(y)));p.panTo(C)}else p.panBy(y)}else if(c in this._zoomKeys)p.setZoom(p.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Gi(s)}}});Xt.addInitHook("addHandler","keyboard",jc),Xt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var fn=Ni.extend({addHooks:function(){Tt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){hn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=rd(s),p=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var y=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),y),Gi(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),p=this._map.options.zoomSnap||0;s._stop();var y=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(y))))/Math.LN2,D=p?Math.ceil(C/p)*p:C,Z=s._limitZoom(c+(this._delta>0?D:-D))-c;this._delta=0,this._startTime=null,Z&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+Z):s.setZoomAround(this._lastMousePos,c+Z))}});Xt.addInitHook("addHandler","scrollWheelZoom",fn);var Vc=600;Xt.mergeOptions({tapHold:ct.touchNative&&ct.safari&&ct.mobile,tapTolerance:15});var fa=Ni.extend({addHooks:function(){Tt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){hn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new X(c.clientX,c.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Tt(document,"touchend",Mn),Tt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),Vc),Tt(document,"touchend touchcancel contextmenu",this._cancel,this),Tt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){hn(document,"touchend",Mn),hn(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),hn(document,"touchend touchcancel contextmenu",this._cancel,this),hn(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new X(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var p=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});p._simulated=!0,c.target.dispatchEvent(p)}});Xt.addInitHook("addHandler","tapHold",fa),Xt.mergeOptions({touchZoom:ct.touch,bounceAtZoomLimits:!0});var po=Ni.extend({addHooks:function(){rt(this._map._container,"leaflet-touch-zoom"),Tt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){vt(this._map._container,"leaflet-touch-zoom"),hn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var p=c.mouseEventToContainerPoint(s.touches[0]),y=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(p.add(y)._divideBy(2))),this._startDist=p.distanceTo(y),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Tt(document,"touchmove",this._onTouchMove,this),Tt(document,"touchend touchcancel",this._onTouchEnd,this),Mn(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,p=c.mouseEventToContainerPoint(s.touches[0]),y=c.mouseEventToContainerPoint(s.touches[1]),C=p.distanceTo(y)/this._startDist;if(this._zoom=c.getScaleZoom(C,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&C<1||this._zoom>c.getMaxZoom()&&C>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var D=p._add(y)._divideBy(2)._subtract(this._centerPoint);if(C===1&&D.x===0&&D.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(D),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),re(this._animRequest);var Z=u(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=q(Z,this,!0),Mn(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,re(this._animRequest),hn(document,"touchmove",this._onTouchMove,this),hn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Xt.addInitHook("addHandler","touchZoom",po),Xt.BoxZoom=fo,Xt.DoubleClickZoom=bd,Xt.Drag=zc,Xt.Keyboard=jc,Xt.ScrollWheelZoom=fn,Xt.TapHold=fa,Xt.TouchZoom=po,t.Bounds=j,t.Browser=ct,t.CRS=be,t.Canvas=kc,t.Circle=al,t.CircleMarker=ol,t.Class=ge,t.Control=yi,t.DivIcon=pl,t.DivOverlay=or,t.DomEvent=tl,t.DomUtil=ra,t.Draggable=Wi,t.Evented=te,t.FeatureGroup=Sr,t.GeoJSON=sr,t.GridLayer=qr,t.Handler=Ni,t.Icon=Ss,t.ImageOverlay=Zr,t.LatLng=ke,t.LatLngBounds=De,t.Layer=Xi,t.LayerGroup=Wr,t.LineUtil=dd,t.Map=Xt,t.Marker=wr,t.Mixin=Ec,t.Path=Xr,t.Point=X,t.PolyUtil=Vf,t.Polygon=br,t.Polyline=Si,t.Popup=fl,t.PosAnimation=nl,t.Projection=Zf,t.Rectangle=wd,t.Renderer=ar,t.SVG=ws,t.SVGOverlay=Uc,t.TileLayer=Yr,t.Tooltip=co,t.Transformation=Ft,t.Util=ue,t.VideoOverlay=Ic,t.bind=u,t.bounds=he,t.canvas=Bc,t.circle=ca,t.circleMarker=md,t.control=Gr,t.divIcon=xd,t.extend=o,t.featureGroup=fd,t.geoJSON=gd,t.geoJson=Zi,t.gridLayer=uo,t.icon=pd,t.imageOverlay=vd,t.latLng=oe,t.latLngBounds=je,t.layerGroup=la,t.map=Hr,t.marker=Kf,t.point=Q,t.polygon=Jf,t.polyline=$f,t.popup=lo,t.rectangle=Qf,t.setOptions=P,t.stamp=f,t.svg=ml,t.svgOverlay=Oc,t.tileLayer=Fc,t.tooltip=da,t.transformation=mn,t.version=i,t.videoOverlay=_d;var Md=window.L;t.noConflict=function(){return window.L=Md,this},window.L=t}))})(wu,wu.exports)),wu.exports}var iF=nF();const Fh=Pw(iF),C0=["Maintenance","Safety","Harassment","Security Deposit","Illegal Eviction","Amenities","Noise","Pest Control"],ow=["Pending","Under Review","Resolved","Rejected"],gf=[{name:"Andheri East",lat:19.1136,lng:72.8697},{name:"Andheri West",lat:19.1362,lng:72.8296},{name:"Bandra",lat:19.0596,lng:72.8295},{name:"Powai",lat:19.1176,lng:72.906},{name:"Malad",lat:19.1874,lng:72.8484},{name:"Goregaon",lat:19.1663,lng:72.8526},{name:"Dadar",lat:19.0178,lng:72.8478},{name:"Kurla",lat:19.0726,lng:72.8845},{name:"Chembur",lat:19.0522,lng:72.8994},{name:"Thane",lat:19.2183,lng:72.9781},{name:"Borivali",lat:19.2307,lng:72.8567},{name:"Kandivali",lat:19.2045,lng:72.8525},{name:"Juhu",lat:19.1075,lng:72.8263},{name:"Versova",lat:19.132,lng:72.8172},{name:"Santacruz",lat:19.0837,lng:72.8368}],rF={Maintenance:["Severe water leakage from ceiling for over two weeks with no response from landlord.","Broken air conditioning unit not repaired despite multiple complaints.","Plumbing issues causing water damage to furniture and belongings.","Electrical wiring exposed and sparking, creating fire hazard.","Broken windows letting in rain and mosquitoes for over a month.","Water heater not working for three weeks, no hot water available.","Kitchen sink blocked, water overflowing onto floor daily."],Safety:["Fire exit blocked by landlord's storage items, violating safety codes.","Building elevator malfunctioning frequently, got stuck twice this month.","No fire extinguishers in the building despite repeated requests.","Loose railing on staircase, extremely dangerous for residents.","Gas leak reported but landlord refuses to call professional service.","Emergency exit doors locked from outside during night hours."],Harassment:["Landlord making unannounced visits at odd hours without permission.","Threatening messages from landlord demanding early lease termination.","Landlord cut off water supply as intimidation tactic.","Verbal abuse from landlord when requesting legitimate repairs.","Landlord harassing family members to vacate before lease end.","Privacy violation - landlord installed cameras without consent."],"Security Deposit":["Full security deposit withheld without valid reason after move-out.","Landlord demanding additional deposit mid-lease without justification.","Deposit not returned 3 months after lease ended despite clean handover.","False damage claims to retain security deposit.","Landlord refusing to provide receipt for security deposit paid.","Unauthorized deductions from deposit for normal wear and tear."],"Illegal Eviction":["Received illegal eviction notice with only 7 days to vacate.","Locks changed while tenant was at work, belongings inaccessible.","Landlord threatening to call police for false complaints to force eviction.","Utilities cut off to force tenant to leave before lease end.","Physical intimidation by landlord's associates to vacate property.","Eviction notice served during protected period without cause."],Amenities:["Gym and pool access denied despite being included in rent agreement.","Parking spot allocated to another tenant, no alternative provided.","Internet connection repeatedly cut without prior notice.","Common area lighting not working for weeks, safety concern.","Promised furnishings removed without rent reduction.","Water supply limited to specific hours despite 24/7 promise."],Noise:["Construction noise from landlord's renovation at 6 AM daily.","Loud parties hosted by landlord in common areas until midnight.","Industrial equipment operated in adjacent unit during night.","No sound insulation despite being advertised as quiet residence.","Persistent noise from landlord's commercial activity in building."],"Pest Control":["Severe cockroach infestation not addressed for over a month.","Rat sightings in kitchen, landlord refuses professional pest control.","Bed bug infestation spreading, no response from property management.","Termite damage to furniture, landlord denies responsibility.","Mosquito breeding in stagnant water on property grounds.","Ant infestation in entire apartment, DIY solutions not working."]},sF={Maintenance:["water_leak_1.jpg","water_leak_2.jpg","broken_pipe.jpg","ceiling_damage.jpg"],Safety:["blocked_exit.jpg","broken_railing.jpg","exposed_wiring.jpg","fire_hazard.jpg"],Harassment:["threatening_message.jpg","evidence_1.jpg","camera_installed.jpg"],"Security Deposit":["agreement_copy.jpg","receipt_scan.jpg","damage_before.jpg","damage_after.jpg"],"Illegal Eviction":["eviction_notice.jpg","changed_locks.jpg","cut_utilities.jpg"],Amenities:["gym_closed.jpg","parking_issue.jpg","common_area.jpg"],Noise:["noise_meter.jpg","construction_site.jpg","evidence_video.jpg"],"Pest Control":["cockroach_evidence.jpg","rat_droppings.jpg","termite_damage.jpg","infestation.jpg"]};function oF(){const n=[],e=new Date("2025-08-01");for(let t=1;t<=50;t++){const i=C0[Math.floor(Math.random()*C0.length)],o=gf[Math.floor(Math.random()*gf.length)],l=ow[Math.floor(Math.random()*ow.length)],u=Math.floor(Math.random()*5)+1,h=rF[i],f=h[Math.floor(Math.random()*h.length)],m=sF[i].slice(0,Math.floor(Math.random()*3)+1),_=Math.floor(Math.random()*180),x=new Date(e);x.setDate(x.getDate()+_);const w=Math.random()*.3,E=.7+Math.random()*.28,A=Math.floor(Math.random()*10)+1,P=Math.floor(Math.random()*5);let b="Pending";l==="Resolved"?b="Valid":l==="Rejected"?b="Invalid":A+P>=10&&(b=A>P?"Valid":"Invalid"),n.push({id:`ISS-${String(t).padStart(3,"0")}`,category:i,severity:u,description:f,location:{area:o.name,lat:o.lat+(Math.random()-.5)*.02,lng:o.lng+(Math.random()-.5)*.02},status:l,created_at:x.toISOString().split("T")[0],images:m,ai_verdict:{exif_valid:Math.random()>.15,tampering_probability:parseFloat(w.toFixed(2)),confidence_score:parseFloat(E.toFixed(2)),auto_category:i},dao_verdict:{votes_for:A,votes_against:P,final_decision:b},property_id:`PROP-${String(Math.floor(Math.random()*15)+1).padStart(3,"0")}`})}return n.sort((t,i)=>new Date(i.created_at).getTime()-new Date(t.created_at).getTime())}function aF(){const n=[],e=["Sunrise Realty","Metro Housing","Urban Dwellings","Golden Gate Properties","Horizon Homes","Prime Estates","Vista Living","Royal Residences","Neptune Builders","Skyline Apartments","Green Valley Housing","Pinnacle Properties","Oasis Homes","Harmony Residences","Elite Living Spaces"];for(let t=1;t<=15;t++){const i=gf[t-1],o=Math.floor(Math.random()*12)+3,l=Math.floor(Math.random()*o),u=Math.min(100,Math.floor((o-l)*8+Math.random()*30)),h={};C0.forEach(f=>{h[f]=Math.floor(Math.random()*4)}),n.push({property_id:`PROP-${String(t).padStart(3,"0")}`,area:i.name,address:`${Math.floor(Math.random()*500)+1}, ${i.name}, Mumbai - ${4e5+Math.floor(Math.random()*100)}`,landlord_name:e[t-1],risk_score:u,total_reports:o,resolved_percentage:Math.floor(l/o*100),categories_breakdown:h,lat:i.lat,lng:i.lng})}return n}const aw=oF();aF();const lF=gf;function cF(){const n=ne.useRef(null),e=ne.useRef(null);return ne.useEffect(()=>{if(!n.current||e.current)return;const t=Fh.map(n.current,{center:[19.1136,72.8697],zoom:11,zoomControl:!1,scrollWheelZoom:!1});return e.current=t,Fh.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}).addTo(t),Fh.control.zoom({position:"topleft"}).addTo(t),lF.map(o=>{const u=aw.filter(f=>f.location.area===o.name).length,h=Math.min(u/8,1);return{...o,count:u,intensity:h}}).filter(o=>o.count>0).forEach(o=>{const l=o.count>6?"#ef4444":o.count>3?"#f59e0b":"#22c55e";Fh.circleMarker([o.lat,o.lng],{radius:15+o.intensity*25,fillColor:l,color:l,weight:2,opacity:.8,fillOpacity:.4}).addTo(t).bindPopup(`
                <div style="text-align: center; padding: 8px;">
                    <strong style="font-size: 14px;">${o.name}</strong><br/>
                    <span style="color: ${l}; font-size: 18px; font-weight: bold;">${o.count}</span><br/>
                    <span style="font-size: 12px; color: #666;">Active Issues</span>
                </div>
            `)}),()=>{e.current&&(e.current.remove(),e.current=null)}},[]),v.jsxs("div",{className:"relative w-full h-full",children:[v.jsx("div",{ref:n,className:"w-full h-full rounded-2xl"}),v.jsxs("div",{className:"absolute bottom-4 left-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 text-neutral-900 text-sm z-[1000] border border-neutral-200 shadow-lg",children:[v.jsx("div",{className:"font-semibold mb-2",children:"Issue Density"}),v.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[v.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),v.jsx("span",{children:"High (>6 issues)"})]}),v.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[v.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),v.jsx("span",{children:"Medium (3-6)"})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),v.jsx("span",{children:"Low (<3)"})]})]}),v.jsxs("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm rounded-lg p-4 text-neutral-900 z-[1000] border border-neutral-200 shadow-lg",children:[v.jsx("div",{className:"text-2xl font-bold text-violet-600",children:aw.length}),v.jsx("div",{className:"text-sm text-neutral-600",children:"Active Issues"}),v.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Mumbai, IN"})]})]})}const uF=[{text:"Resolve"},{text:"Housing"},{text:"Disputes"},{text:"With",newLine:!0},{text:"Confidence.",className:"text-lime-400"}],dF=[{label:"Features",hasDropdown:!0},{label:"How it Works",hasDropdown:!1},{label:"Community",hasDropdown:!1},{label:"Resources",hasDropdown:!0}],hF=[{title:"Anonymous Reporting",description:"Report issues without revealing your identity. Your privacy is protected by design.",icon:v.jsx(TN,{className:"w-6 h-6 text-lime-400"})},{title:"AI Verification",description:"Advanced image analysis detects tampering and verifies evidence authenticity.",icon:v.jsx(yN,{className:"w-6 h-6 text-lime-400"})},{title:"DAO Arbitration",description:"Decentralized jury of verified community members ensures fair dispute resolution.",icon:v.jsx(Rf,{className:"w-6 h-6 text-lime-400"})},{title:"Community Heatmaps",description:"View issue density across neighborhoods to make informed housing decisions.",icon:v.jsx(_N,{className:"w-6 h-6 text-lime-400"})},{title:"Landlord Ratings",description:"Aggregated reputation scores help tenants avoid problematic properties.",icon:v.jsx(CN,{className:"w-6 h-6 text-lime-400"})},{title:"Transparent Verdicts",description:"All decisions are recorded on-chain for complete transparency and accountability.",icon:v.jsx(SN,{className:"w-6 h-6 text-lime-400"})}],fF=[{name:"Home",link:"/",icon:v.jsx(MN,{className:"h-4 w-4 text-neutral-500 dark:text-white"})},{name:"About",link:"/about",icon:v.jsx(D1,{className:"h-4 w-4 text-neutral-500 dark:text-white"})},{name:"Contact",link:"/contact",icon:v.jsx(RN,{className:"h-4 w-4 text-neutral-500 dark:text-white"})}];function pF(){const[n,e]=ne.useState(""),{scrollY:t}=_v(),i=Kl(t,[0,100],[1,0]),o=Kl(t,[0,100],["auto","none"]);return v.jsxs("div",{className:"min-h-screen bg-neutral-900 relative",children:[v.jsx("div",{className:"fixed inset-0 z-0",children:v.jsx(KO,{})}),v.jsx(pN,{navItems:fF}),v.jsx(gt.nav,{style:{opacity:i,pointerEvents:o},className:"fixed top-0 left-0 right-0 z-50 bg-neutral-900/80 backdrop-blur-md",children:v.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex h-16 items-center justify-between",children:[v.jsxs(Ot,{to:"/",className:"flex items-center gap-2",children:[v.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-lime-400",children:v.jsx(ic,{className:"h-5 w-5 text-neutral-900"})}),v.jsx("span",{className:"font-display text-xl font-bold text-white",children:"RentShield"})]}),v.jsx("div",{className:"hidden md:flex items-center gap-1",children:dF.map(l=>v.jsxs("button",{className:"flex items-center gap-1 px-4 py-2 text-sm font-medium text-neutral-300 hover:text-white transition-colors",children:[l.label,l.hasDropdown&&v.jsx(N1,{className:"h-4 w-4"})]},l.label))}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(Ot,{to:"/login",className:"text-sm font-medium text-neutral-300 hover:text-white transition-colors",children:"Log in"}),v.jsxs(Ot,{to:"/login",className:"inline-flex items-center gap-2 rounded-lg bg-lime-400 px-4 py-2 text-sm font-semibold text-neutral-900 hover:bg-lime-300 transition-colors",children:["Sign Up Free",v.jsx(Wh,{className:"h-4 w-4"})]})]})]})})}),v.jsx("div",{className:"pt-16 bg-lime-100",children:v.jsxs("div",{className:"py-2 text-center text-sm",children:[v.jsxs("span",{className:"text-neutral-600",children:["Introducing AI Evidence Analysis: verify photos instantly."," "]}),v.jsx(Ot,{to:"#",className:"font-medium text-violet-600 hover:text-violet-700",children:"Learn more "})]})}),v.jsx("section",{className:"relative z-10 overflow-hidden min-h-[40vh] flex items-center pt-8 pb-0",children:v.jsx("div",{className:"relative z-10 mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"text-center flex flex-col items-center",children:[v.jsx($O,{words:uF,className:"font-display"}),v.jsx(gt.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mx-auto mt-6 max-w-2xl text-lg text-violet-200",children:"AI-powered dispute resolution, transparent DAO governance, and identity protectionall with one simple platform."}),v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-10 flex flex-col sm:flex-row items-center justify-center gap-3",children:[v.jsx("input",{type:"email",value:n,onChange:l=>e(l.target.value),placeholder:"Work email",className:"w-full sm:w-80 px-5 py-3 rounded-lg border border-violet-600 bg-violet-800/50 text-white placeholder-violet-300 focus:outline-none focus:ring-2 focus:ring-lime-400 focus:border-transparent"}),v.jsxs(Ot,{to:"/login",className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 rounded-lg bg-lime-400 px-6 py-3 text-sm font-semibold text-neutral-900 hover:bg-lime-300 transition-colors",children:["Start my trial",v.jsx(Wh,{className:"h-4 w-4"})]})]}),v.jsxs(gt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mt-8 flex items-center justify-center gap-6 text-sm text-violet-300",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(mh,{className:"h-4 w-4 text-lime-400"}),"No credit card required"]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(mh,{className:"h-4 w-4 text-lime-400"}),"Free forever plan"]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(mh,{className:"h-4 w-4 text-lime-400"}),"Privacy protected"]})]})]})})}),v.jsx("section",{className:"relative z-10 -mt-24",children:v.jsx(JO,{titleComponent:v.jsxs(v.Fragment,{children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-white mb-4",children:"Explore Housing Issues in Your Area"}),v.jsxs("p",{className:"text-lg text-neutral-400 max-w-2xl mx-auto",children:["Our interactive heatmap shows real-time housing issues reported across neighborhoods.",v.jsx("span",{className:"text-lime-400 font-medium",children:" Make informed decisions"})," before you rent."]})]}),children:v.jsx(cF,{})})}),v.jsxs("section",{className:"relative z-10 pt-0 pb-20 -mt-20 overflow-hidden",children:[v.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 mb-12 text-center",children:[v.jsxs("h2",{className:"text-3xl md:text-5xl font-bold text-white mb-6",children:["How RentShield ",v.jsx("span",{className:"text-lime-400",children:"Protects You"})]}),v.jsx("p",{className:"text-lg text-neutral-400 max-w-2xl mx-auto",children:"A comprehensive platform designed to level the playing field between tenants and landlords."})]}),v.jsx(mN,{items:hF.map((l,u)=>v.jsxs("div",{className:"group/card bg-neutral-900/50 backdrop-blur-md border border-neutral-800 p-6 rounded-xl flex flex-col gap-4 hover:border-lime-500/50 transition-all duration-300 hover:scale-110 hover:shadow-2xl hover:shadow-lime-500/10 hover:bg-neutral-800/80 cursor-pointer h-full relative hover:z-20 group-hover/strip:blur-[2px] group-hover/strip:opacity-40 hover:!blur-none hover:!opacity-100",children:[v.jsx("div",{className:"w-12 h-12 rounded-lg bg-lime-500/10 flex items-center justify-center group-hover/card:bg-lime-500/20 transition-all duration-300",children:v.jsx("div",{className:"text-lime-400 transition-colors",children:l.icon})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-semibold text-white mb-2 text-lg",children:l.title}),v.jsx("p",{className:"text-sm text-neutral-400 leading-relaxed",children:l.description})]})]},u))})]}),v.jsx("section",{className:"relative z-10 py-20 bg-transparent",children:v.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"font-display text-3xl md:text-4xl font-bold text-white mb-6",children:"See RentShield in action"}),v.jsx("p",{className:"text-lg text-neutral-400 mb-8",children:"Watch how tenants report issues, AI analyzes evidence, and disputes get resolved fairly through our DAO governance system."}),v.jsx("ul",{className:"space-y-4",children:["Report issues in minutes","AI provides instant analysis","Transparent voting process","Fair resolutions for all"].map(l=>v.jsxs("li",{className:"flex items-center gap-3 text-neutral-300",children:[v.jsx("div",{className:"h-5 w-5 rounded-full bg-lime-400/20 flex items-center justify-center",children:v.jsx(mh,{className:"h-3 w-3 text-lime-400"})}),l]},l))})]}),v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"aspect-video rounded-2xl bg-neutral-800/80 backdrop-blur-sm border border-neutral-700 flex items-center justify-center overflow-hidden",children:v.jsx("button",{className:"h-20 w-20 rounded-full bg-lime-400 flex items-center justify-center hover:bg-lime-300 transition-colors",children:v.jsx(NN,{className:"h-8 w-8 text-neutral-900 ml-1"})})}),v.jsx("div",{className:"absolute -inset-4 rounded-3xl bg-gradient-to-r from-violet-600/20 to-lime-400/20 -z-10 blur-2xl"})]})]})})}),v.jsx("section",{className:"relative z-10 py-20 bg-transparent",children:v.jsx("div",{className:"mx-auto max-w-5xl px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"bg-neutral-900/50 backdrop-blur-md border border-white/10 rounded-3xl p-8 md:p-12 text-center shadow-2xl",children:[v.jsx("h2",{className:"font-display text-3xl md:text-4xl font-bold text-white mb-6",children:"Ready to resolve disputes fairly?"}),v.jsx("p",{className:"text-lg text-neutral-300 mb-8 max-w-2xl mx-auto",children:"Join thousands of tenants, landlords, and community members building a fairer housing future."}),v.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[v.jsxs(Ot,{to:"/login",className:"inline-flex items-center gap-2 rounded-lg bg-lime-400 px-8 py-4 text-base font-semibold text-neutral-900 hover:bg-lime-300 transition-colors",children:["Get Started Free",v.jsx(Wh,{className:"h-5 w-5"})]}),v.jsxs(Ot,{to:"#",className:"inline-flex items-center gap-2 rounded-lg border border-neutral-600 px-8 py-4 text-base font-semibold text-white hover:bg-neutral-800 hover:border-neutral-500 transition-all bg-black/20",children:[v.jsx(Rf,{className:"h-5 w-5"}),"Talk to Sales"]})]})]})})}),v.jsx("footer",{className:"relative z-10 bg-black/40 backdrop-blur-md border-t border-white/10 py-12",children:v.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-lime-400",children:v.jsx(ic,{className:"h-5 w-5 text-neutral-900"})}),v.jsx("span",{className:"font-display text-xl font-bold text-white",children:"RentShield"})]}),v.jsxs("div",{className:"flex items-center gap-8 text-sm text-neutral-400",children:[v.jsx(Ot,{to:"#",className:"hover:text-white transition-colors",children:"Privacy"}),v.jsx(Ot,{to:"#",className:"hover:text-white transition-colors",children:"Terms"}),v.jsx(Ot,{to:"#",className:"hover:text-white transition-colors",children:"Contact"})]}),v.jsx("p",{className:"text-sm text-neutral-500",children:" 2026 RentShield. All rights reserved."})]})})})]})}function pM(n,e){return function(){return n.apply(e,arguments)}}const{toString:mF}=Object.prototype,{getPrototypeOf:Uv}=Object,{iterator:Uf,toStringTag:mM}=Symbol,Of=(n=>e=>{const t=mF.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),kr=n=>(n=n.toLowerCase(),e=>Of(e)===n),Ff=n=>e=>typeof e===n,{isArray:_c}=Array,cc=Ff("undefined");function Qu(n){return n!==null&&!cc(n)&&n.constructor!==null&&!cc(n.constructor)&&ji(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const gM=kr("ArrayBuffer");function gF(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&gM(n.buffer),e}const vF=Ff("string"),ji=Ff("function"),vM=Ff("number"),ed=n=>n!==null&&typeof n=="object",_F=n=>n===!0||n===!1,Jh=n=>{if(Of(n)!=="object")return!1;const e=Uv(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(mM in n)&&!(Uf in n)},xF=n=>{if(!ed(n)||Qu(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},yF=kr("Date"),SF=kr("File"),wF=kr("Blob"),bF=kr("FileList"),MF=n=>ed(n)&&ji(n.pipe),EF=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ji(n.append)&&((e=Of(n))==="formdata"||e==="object"&&ji(n.toString)&&n.toString()==="[object FormData]"))},TF=kr("URLSearchParams"),[AF,CF,PF,RF]=["ReadableStream","Request","Response","Headers"].map(kr),NF=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function td(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),_c(n))for(i=0,o=n.length;i<o;i++)e.call(null,n[i],i,n);else{if(Qu(n))return;const l=t?Object.getOwnPropertyNames(n):Object.keys(n),u=l.length;let h;for(i=0;i<u;i++)h=l[i],e.call(null,n[h],h,n)}}function _M(n,e){if(Qu(n))return null;e=e.toLowerCase();const t=Object.keys(n);let i=t.length,o;for(;i-- >0;)if(o=t[i],e===o.toLowerCase())return o;return null}const za=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xM=n=>!cc(n)&&n!==za;function P0(){const{caseless:n,skipUndefined:e}=xM(this)&&this||{},t={},i=(o,l)=>{const u=n&&_M(t,l)||l;Jh(t[u])&&Jh(o)?t[u]=P0(t[u],o):Jh(o)?t[u]=P0({},o):_c(o)?t[u]=o.slice():(!e||!cc(o))&&(t[u]=o)};for(let o=0,l=arguments.length;o<l;o++)arguments[o]&&td(arguments[o],i);return t}const LF=(n,e,t,{allOwnKeys:i}={})=>(td(e,(o,l)=>{t&&ji(o)?Object.defineProperty(n,l,{value:pM(o,t),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(n,l,{value:o,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:i}),n),DF=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),IF=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),Object.defineProperty(n.prototype,"constructor",{value:n,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},UF=(n,e,t,i)=>{let o,l,u;const h={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),l=o.length;l-- >0;)u=o[l],(!i||i(u,n,e))&&!h[u]&&(e[u]=n[u],h[u]=!0);n=t!==!1&&Uv(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},OF=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},FF=n=>{if(!n)return null;if(_c(n))return n;let e=n.length;if(!vM(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},kF=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Uv(Uint8Array)),BF=(n,e)=>{const i=(n&&n[Uf]).call(n);let o;for(;(o=i.next())&&!o.done;){const l=o.value;e.call(n,l[0],l[1])}},zF=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},jF=kr("HTMLFormElement"),VF=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,o){return i.toUpperCase()+o}),lw=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),HF=kr("RegExp"),yM=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};td(t,(o,l)=>{let u;(u=e(o,l,n))!==!1&&(i[l]=u||o)}),Object.defineProperties(n,i)},GF=n=>{yM(n,(e,t)=>{if(ji(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(ji(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},WF=(n,e)=>{const t={},i=o=>{o.forEach(l=>{t[l]=!0})};return _c(n)?i(n):i(String(n).split(e)),t},XF=()=>{},ZF=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function qF(n){return!!(n&&ji(n.append)&&n[mM]==="FormData"&&n[Uf])}const YF=n=>{const e=new Array(10),t=(i,o)=>{if(ed(i)){if(e.indexOf(i)>=0)return;if(Qu(i))return i;if(!("toJSON"in i)){e[o]=i;const l=_c(i)?[]:{};return td(i,(u,h)=>{const f=t(u,o+1);!cc(f)&&(l[h]=f)}),e[o]=void 0,l}}return i};return t(n,0)},KF=kr("AsyncFunction"),$F=n=>n&&(ed(n)||ji(n))&&ji(n.then)&&ji(n.catch),SM=((n,e)=>n?setImmediate:e?((t,i)=>(za.addEventListener("message",({source:o,data:l})=>{o===za&&l===t&&i.length&&i.shift()()},!1),o=>{i.push(o),za.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ji(za.postMessage)),JF=typeof queueMicrotask<"u"?queueMicrotask.bind(za):typeof process<"u"&&process.nextTick||SM,QF=n=>n!=null&&ji(n[Uf]),ye={isArray:_c,isArrayBuffer:gM,isBuffer:Qu,isFormData:EF,isArrayBufferView:gF,isString:vF,isNumber:vM,isBoolean:_F,isObject:ed,isPlainObject:Jh,isEmptyObject:xF,isReadableStream:AF,isRequest:CF,isResponse:PF,isHeaders:RF,isUndefined:cc,isDate:yF,isFile:SF,isBlob:wF,isRegExp:HF,isFunction:ji,isStream:MF,isURLSearchParams:TF,isTypedArray:kF,isFileList:bF,forEach:td,merge:P0,extend:LF,trim:NF,stripBOM:DF,inherits:IF,toFlatObject:UF,kindOf:Of,kindOfTest:kr,endsWith:OF,toArray:FF,forEachEntry:BF,matchAll:zF,isHTMLForm:jF,hasOwnProperty:lw,hasOwnProp:lw,reduceDescriptors:yM,freezeMethods:GF,toObjectSet:WF,toCamelCase:VF,noop:XF,toFiniteNumber:ZF,findKey:_M,global:za,isContextDefined:xM,isSpecCompliantForm:qF,toJSONObject:YF,isAsyncFn:KF,isThenable:$F,setImmediate:SM,asap:JF,isIterable:QF};let At=class wM extends Error{static from(e,t,i,o,l,u){const h=new wM(e.message,t||e.code,i,o,l);return h.cause=e,h.name=e.name,u&&Object.assign(h,u),h}constructor(e,t,i,o,l){super(e),this.name="AxiosError",this.isAxiosError=!0,t&&(this.code=t),i&&(this.config=i),o&&(this.request=o),l&&(this.response=l,this.status=l.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ye.toJSONObject(this.config),code:this.code,status:this.status}}};At.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";At.ERR_BAD_OPTION="ERR_BAD_OPTION";At.ECONNABORTED="ECONNABORTED";At.ETIMEDOUT="ETIMEDOUT";At.ERR_NETWORK="ERR_NETWORK";At.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";At.ERR_DEPRECATED="ERR_DEPRECATED";At.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";At.ERR_BAD_REQUEST="ERR_BAD_REQUEST";At.ERR_CANCELED="ERR_CANCELED";At.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";At.ERR_INVALID_URL="ERR_INVALID_URL";const ek=null;function R0(n){return ye.isPlainObject(n)||ye.isArray(n)}function bM(n){return ye.endsWith(n,"[]")?n.slice(0,-2):n}function cw(n,e,t){return n?n.concat(e).map(function(o,l){return o=bM(o),!t&&l?"["+o+"]":o}).join(t?".":""):e}function tk(n){return ye.isArray(n)&&!n.some(R0)}const nk=ye.toFlatObject(ye,{},null,function(e){return/^is[A-Z]/.test(e)});function kf(n,e,t){if(!ye.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ye.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(P,b){return!ye.isUndefined(b[P])});const i=t.metaTokens,o=t.visitor||_,l=t.dots,u=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&ye.isSpecCompliantForm(e);if(!ye.isFunction(o))throw new TypeError("visitor must be a function");function m(A){if(A===null)return"";if(ye.isDate(A))return A.toISOString();if(ye.isBoolean(A))return A.toString();if(!f&&ye.isBlob(A))throw new At("Blob is not supported. Use a Buffer instead.");return ye.isArrayBuffer(A)||ye.isTypedArray(A)?f&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function _(A,P,b){let M=A;if(A&&!b&&typeof A=="object"){if(ye.endsWith(P,"{}"))P=i?P:P.slice(0,-2),A=JSON.stringify(A);else if(ye.isArray(A)&&tk(A)||(ye.isFileList(A)||ye.endsWith(P,"[]"))&&(M=ye.toArray(A)))return P=bM(P),M.forEach(function(U,k){!(ye.isUndefined(U)||U===null)&&e.append(u===!0?cw([P],k,l):u===null?P:P+"[]",m(U))}),!1}return R0(A)?!0:(e.append(cw(b,P,l),m(A)),!1)}const x=[],w=Object.assign(nk,{defaultVisitor:_,convertValue:m,isVisitable:R0});function E(A,P){if(!ye.isUndefined(A)){if(x.indexOf(A)!==-1)throw Error("Circular reference detected in "+P.join("."));x.push(A),ye.forEach(A,function(M,O){(!(ye.isUndefined(M)||M===null)&&o.call(e,M,ye.isString(O)?O.trim():O,P,w))===!0&&E(M,P?P.concat(O):[O])}),x.pop()}}if(!ye.isObject(n))throw new TypeError("data must be an object");return E(n),e}function uw(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Ov(n,e){this._pairs=[],n&&kf(n,this,e)}const MM=Ov.prototype;MM.append=function(e,t){this._pairs.push([e,t])};MM.toString=function(e){const t=e?function(i){return e.call(this,i,uw)}:uw;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function ik(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function EM(n,e,t){if(!e)return n;const i=t&&t.encode||ik,o=ye.isFunction(t)?{serialize:t}:t,l=o&&o.serialize;let u;if(l?u=l(e,o):u=ye.isURLSearchParams(e)?e.toString():new Ov(e,o).toString(i),u){const h=n.indexOf("#");h!==-1&&(n=n.slice(0,h)),n+=(n.indexOf("?")===-1?"?":"&")+u}return n}class dw{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ye.forEach(this.handlers,function(i){i!==null&&e(i)})}}const TM={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rk=typeof URLSearchParams<"u"?URLSearchParams:Ov,sk=typeof FormData<"u"?FormData:null,ok=typeof Blob<"u"?Blob:null,ak={isBrowser:!0,classes:{URLSearchParams:rk,FormData:sk,Blob:ok},protocols:["http","https","file","blob","url","data"]},Fv=typeof window<"u"&&typeof document<"u",N0=typeof navigator=="object"&&navigator||void 0,lk=Fv&&(!N0||["ReactNative","NativeScript","NS"].indexOf(N0.product)<0),ck=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",uk=Fv&&window.location.href||"http://localhost",dk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Fv,hasStandardBrowserEnv:lk,hasStandardBrowserWebWorkerEnv:ck,navigator:N0,origin:uk},Symbol.toStringTag,{value:"Module"})),gi={...dk,...ak};function hk(n,e){return kf(n,new gi.classes.URLSearchParams,{visitor:function(t,i,o,l){return gi.isNode&&ye.isBuffer(t)?(this.append(i,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function fk(n){return ye.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function pk(n){const e={},t=Object.keys(n);let i;const o=t.length;let l;for(i=0;i<o;i++)l=t[i],e[l]=n[l];return e}function AM(n){function e(t,i,o,l){let u=t[l++];if(u==="__proto__")return!0;const h=Number.isFinite(+u),f=l>=t.length;return u=!u&&ye.isArray(o)?o.length:u,f?(ye.hasOwnProp(o,u)?o[u]=[o[u],i]:o[u]=i,!h):((!o[u]||!ye.isObject(o[u]))&&(o[u]=[]),e(t,i,o[u],l)&&ye.isArray(o[u])&&(o[u]=pk(o[u])),!h)}if(ye.isFormData(n)&&ye.isFunction(n.entries)){const t={};return ye.forEachEntry(n,(i,o)=>{e(fk(i),o,t,0)}),t}return null}function mk(n,e,t){if(ye.isString(n))try{return(e||JSON.parse)(n),ye.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const nd={transitional:TM,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",o=i.indexOf("application/json")>-1,l=ye.isObject(e);if(l&&ye.isHTMLForm(e)&&(e=new FormData(e)),ye.isFormData(e))return o?JSON.stringify(AM(e)):e;if(ye.isArrayBuffer(e)||ye.isBuffer(e)||ye.isStream(e)||ye.isFile(e)||ye.isBlob(e)||ye.isReadableStream(e))return e;if(ye.isArrayBufferView(e))return e.buffer;if(ye.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let h;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return hk(e,this.formSerializer).toString();if((h=ye.isFileList(e))||i.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return kf(h?{"files[]":e}:e,f&&new f,this.formSerializer)}}return l||o?(t.setContentType("application/json",!1),mk(e)):e}],transformResponse:[function(e){const t=this.transitional||nd.transitional,i=t&&t.forcedJSONParsing,o=this.responseType==="json";if(ye.isResponse(e)||ye.isReadableStream(e))return e;if(e&&ye.isString(e)&&(i&&!this.responseType||o)){const u=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(h){if(u)throw h.name==="SyntaxError"?At.from(h,At.ERR_BAD_RESPONSE,this,null,this.response):h}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gi.classes.FormData,Blob:gi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ye.forEach(["delete","get","head","post","put","patch"],n=>{nd.headers[n]={}});const gk=ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vk=n=>{const e={};let t,i,o;return n&&n.split(`
`).forEach(function(u){o=u.indexOf(":"),t=u.substring(0,o).trim().toLowerCase(),i=u.substring(o+1).trim(),!(!t||e[t]&&gk[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},hw=Symbol("internals");function gu(n){return n&&String(n).trim().toLowerCase()}function Qh(n){return n===!1||n==null?n:ye.isArray(n)?n.map(Qh):String(n)}function _k(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const xk=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function sg(n,e,t,i,o){if(ye.isFunction(i))return i.call(this,e,t);if(o&&(e=t),!!ye.isString(e)){if(ye.isString(i))return e.indexOf(i)!==-1;if(ye.isRegExp(i))return i.test(e)}}function yk(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function Sk(n,e){const t=ye.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(o,l,u){return this[i].call(this,e,o,l,u)},configurable:!0})})}let Vi=class{constructor(e){e&&this.set(e)}set(e,t,i){const o=this;function l(h,f,m){const _=gu(f);if(!_)throw new Error("header name must be a non-empty string");const x=ye.findKey(o,_);(!x||o[x]===void 0||m===!0||m===void 0&&o[x]!==!1)&&(o[x||f]=Qh(h))}const u=(h,f)=>ye.forEach(h,(m,_)=>l(m,_,f));if(ye.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(ye.isString(e)&&(e=e.trim())&&!xk(e))u(vk(e),t);else if(ye.isObject(e)&&ye.isIterable(e)){let h={},f,m;for(const _ of e){if(!ye.isArray(_))throw TypeError("Object iterator must return a key-value pair");h[m=_[0]]=(f=h[m])?ye.isArray(f)?[...f,_[1]]:[f,_[1]]:_[1]}u(h,t)}else e!=null&&l(t,e,i);return this}get(e,t){if(e=gu(e),e){const i=ye.findKey(this,e);if(i){const o=this[i];if(!t)return o;if(t===!0)return _k(o);if(ye.isFunction(t))return t.call(this,o,i);if(ye.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=gu(e),e){const i=ye.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||sg(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let o=!1;function l(u){if(u=gu(u),u){const h=ye.findKey(i,u);h&&(!t||sg(i,i[h],h,t))&&(delete i[h],o=!0)}}return ye.isArray(e)?e.forEach(l):l(e),o}clear(e){const t=Object.keys(this);let i=t.length,o=!1;for(;i--;){const l=t[i];(!e||sg(this,this[l],l,e,!0))&&(delete this[l],o=!0)}return o}normalize(e){const t=this,i={};return ye.forEach(this,(o,l)=>{const u=ye.findKey(i,l);if(u){t[u]=Qh(o),delete t[l];return}const h=e?yk(l):String(l).trim();h!==l&&delete t[l],t[h]=Qh(o),i[h]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ye.forEach(this,(i,o)=>{i!=null&&i!==!1&&(t[o]=e&&ye.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[hw]=this[hw]={accessors:{}}).accessors,o=this.prototype;function l(u){const h=gu(u);i[h]||(Sk(o,u),i[h]=!0)}return ye.isArray(e)?e.forEach(l):l(e),this}};Vi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ye.reduceDescriptors(Vi.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});ye.freezeMethods(Vi);function og(n,e){const t=this||nd,i=e||t,o=Vi.from(i.headers);let l=i.data;return ye.forEach(n,function(h){l=h.call(t,l,o.normalize(),e?e.status:void 0)}),o.normalize(),l}function CM(n){return!!(n&&n.__CANCEL__)}let id=class extends At{constructor(e,t,i){super(e??"canceled",At.ERR_CANCELED,t,i),this.name="CanceledError",this.__CANCEL__=!0}};function PM(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new At("Request failed with status code "+t.status,[At.ERR_BAD_REQUEST,At.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function wk(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function bk(n,e){n=n||10;const t=new Array(n),i=new Array(n);let o=0,l=0,u;return e=e!==void 0?e:1e3,function(f){const m=Date.now(),_=i[l];u||(u=m),t[o]=f,i[o]=m;let x=l,w=0;for(;x!==o;)w+=t[x++],x=x%n;if(o=(o+1)%n,o===l&&(l=(l+1)%n),m-u<e)return;const E=_&&m-_;return E?Math.round(w*1e3/E):void 0}}function Mk(n,e){let t=0,i=1e3/e,o,l;const u=(m,_=Date.now())=>{t=_,o=null,l&&(clearTimeout(l),l=null),n(...m)};return[(...m)=>{const _=Date.now(),x=_-t;x>=i?u(m,_):(o=m,l||(l=setTimeout(()=>{l=null,u(o)},i-x)))},()=>o&&u(o)]}const vf=(n,e,t=3)=>{let i=0;const o=bk(50,250);return Mk(l=>{const u=l.loaded,h=l.lengthComputable?l.total:void 0,f=u-i,m=o(f),_=u<=h;i=u;const x={loaded:u,total:h,progress:h?u/h:void 0,bytes:f,rate:m||void 0,estimated:m&&h&&_?(h-u)/m:void 0,event:l,lengthComputable:h!=null,[e?"download":"upload"]:!0};n(x)},t)},fw=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},pw=n=>(...e)=>ye.asap(()=>n(...e)),Ek=gi.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,gi.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(gi.origin),gi.navigator&&/(msie|trident)/i.test(gi.navigator.userAgent)):()=>!0,Tk=gi.hasStandardBrowserEnv?{write(n,e,t,i,o,l,u){if(typeof document>"u")return;const h=[`${n}=${encodeURIComponent(e)}`];ye.isNumber(t)&&h.push(`expires=${new Date(t).toUTCString()}`),ye.isString(i)&&h.push(`path=${i}`),ye.isString(o)&&h.push(`domain=${o}`),l===!0&&h.push("secure"),ye.isString(u)&&h.push(`SameSite=${u}`),document.cookie=h.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Ak(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Ck(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function RM(n,e,t){let i=!Ak(e);return n&&(i||t==!1)?Ck(n,e):e}const mw=n=>n instanceof Vi?{...n}:n;function Za(n,e){e=e||{};const t={};function i(m,_,x,w){return ye.isPlainObject(m)&&ye.isPlainObject(_)?ye.merge.call({caseless:w},m,_):ye.isPlainObject(_)?ye.merge({},_):ye.isArray(_)?_.slice():_}function o(m,_,x,w){if(ye.isUndefined(_)){if(!ye.isUndefined(m))return i(void 0,m,x,w)}else return i(m,_,x,w)}function l(m,_){if(!ye.isUndefined(_))return i(void 0,_)}function u(m,_){if(ye.isUndefined(_)){if(!ye.isUndefined(m))return i(void 0,m)}else return i(void 0,_)}function h(m,_,x){if(x in e)return i(m,_);if(x in n)return i(void 0,m)}const f={url:l,method:l,data:l,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:h,headers:(m,_,x)=>o(mw(m),mw(_),x,!0)};return ye.forEach(Object.keys({...n,...e}),function(_){const x=f[_]||o,w=x(n[_],e[_],_);ye.isUndefined(w)&&x!==h||(t[_]=w)}),t}const NM=n=>{const e=Za({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:l,headers:u,auth:h}=e;if(e.headers=u=Vi.from(u),e.url=EM(RM(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),h&&u.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),ye.isFormData(t)){if(gi.hasStandardBrowserEnv||gi.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(ye.isFunction(t.getHeaders)){const f=t.getHeaders(),m=["content-type","content-length"];Object.entries(f).forEach(([_,x])=>{m.includes(_.toLowerCase())&&u.set(_,x)})}}if(gi.hasStandardBrowserEnv&&(i&&ye.isFunction(i)&&(i=i(e)),i||i!==!1&&Ek(e.url))){const f=o&&l&&Tk.read(l);f&&u.set(o,f)}return e},Pk=typeof XMLHttpRequest<"u",Rk=Pk&&function(n){return new Promise(function(t,i){const o=NM(n);let l=o.data;const u=Vi.from(o.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:m}=o,_,x,w,E,A;function P(){E&&E(),A&&A(),o.cancelToken&&o.cancelToken.unsubscribe(_),o.signal&&o.signal.removeEventListener("abort",_)}let b=new XMLHttpRequest;b.open(o.method.toUpperCase(),o.url,!0),b.timeout=o.timeout;function M(){if(!b)return;const U=Vi.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),B={data:!h||h==="text"||h==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:U,config:n,request:b};PM(function(G){t(G),P()},function(G){i(G),P()},B),b=null}"onloadend"in b?b.onloadend=M:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(M)},b.onabort=function(){b&&(i(new At("Request aborted",At.ECONNABORTED,n,b)),b=null)},b.onerror=function(k){const B=k&&k.message?k.message:"Network Error",H=new At(B,At.ERR_NETWORK,n,b);H.event=k||null,i(H),b=null},b.ontimeout=function(){let k=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const B=o.transitional||TM;o.timeoutErrorMessage&&(k=o.timeoutErrorMessage),i(new At(k,B.clarifyTimeoutError?At.ETIMEDOUT:At.ECONNABORTED,n,b)),b=null},l===void 0&&u.setContentType(null),"setRequestHeader"in b&&ye.forEach(u.toJSON(),function(k,B){b.setRequestHeader(B,k)}),ye.isUndefined(o.withCredentials)||(b.withCredentials=!!o.withCredentials),h&&h!=="json"&&(b.responseType=o.responseType),m&&([w,A]=vf(m,!0),b.addEventListener("progress",w)),f&&b.upload&&([x,E]=vf(f),b.upload.addEventListener("progress",x),b.upload.addEventListener("loadend",E)),(o.cancelToken||o.signal)&&(_=U=>{b&&(i(!U||U.type?new id(null,n,b):U),b.abort(),b=null)},o.cancelToken&&o.cancelToken.subscribe(_),o.signal&&(o.signal.aborted?_():o.signal.addEventListener("abort",_)));const O=wk(o.url);if(O&&gi.protocols.indexOf(O)===-1){i(new At("Unsupported protocol "+O+":",At.ERR_BAD_REQUEST,n));return}b.send(l||null)})},Nk=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,o;const l=function(m){if(!o){o=!0,h();const _=m instanceof Error?m:this.reason;i.abort(_ instanceof At?_:new id(_ instanceof Error?_.message:_))}};let u=e&&setTimeout(()=>{u=null,l(new At(`timeout of ${e}ms exceeded`,At.ETIMEDOUT))},e);const h=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(m=>{m.unsubscribe?m.unsubscribe(l):m.removeEventListener("abort",l)}),n=null)};n.forEach(m=>m.addEventListener("abort",l));const{signal:f}=i;return f.unsubscribe=()=>ye.asap(h),f}},Lk=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,o;for(;i<t;)o=i+e,yield n.slice(i,o),i=o},Dk=async function*(n,e){for await(const t of Ik(n))yield*Lk(t,e)},Ik=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},gw=(n,e,t,i)=>{const o=Dk(n,e);let l=0,u,h=f=>{u||(u=!0,i&&i(f))};return new ReadableStream({async pull(f){try{const{done:m,value:_}=await o.next();if(m){h(),f.close();return}let x=_.byteLength;if(t){let w=l+=x;t(w)}f.enqueue(new Uint8Array(_))}catch(m){throw h(m),m}},cancel(f){return h(f),o.return()}},{highWaterMark:2})},vw=64*1024,{isFunction:kh}=ye,Uk=(({Request:n,Response:e})=>({Request:n,Response:e}))(ye.global),{ReadableStream:_w,TextEncoder:xw}=ye.global,yw=(n,...e)=>{try{return!!n(...e)}catch{return!1}},Ok=n=>{n=ye.merge.call({skipUndefined:!0},Uk,n);const{fetch:e,Request:t,Response:i}=n,o=e?kh(e):typeof fetch=="function",l=kh(t),u=kh(i);if(!o)return!1;const h=o&&kh(_w),f=o&&(typeof xw=="function"?(A=>P=>A.encode(P))(new xw):async A=>new Uint8Array(await new t(A).arrayBuffer())),m=l&&h&&yw(()=>{let A=!1;const P=new t(gi.origin,{body:new _w,method:"POST",get duplex(){return A=!0,"half"}}).headers.has("Content-Type");return A&&!P}),_=u&&h&&yw(()=>ye.isReadableStream(new i("").body)),x={stream:_&&(A=>A.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(A=>{!x[A]&&(x[A]=(P,b)=>{let M=P&&P[A];if(M)return M.call(P);throw new At(`Response type '${A}' is not supported`,At.ERR_NOT_SUPPORT,b)})});const w=async A=>{if(A==null)return 0;if(ye.isBlob(A))return A.size;if(ye.isSpecCompliantForm(A))return(await new t(gi.origin,{method:"POST",body:A}).arrayBuffer()).byteLength;if(ye.isArrayBufferView(A)||ye.isArrayBuffer(A))return A.byteLength;if(ye.isURLSearchParams(A)&&(A=A+""),ye.isString(A))return(await f(A)).byteLength},E=async(A,P)=>{const b=ye.toFiniteNumber(A.getContentLength());return b??w(P)};return async A=>{let{url:P,method:b,data:M,signal:O,cancelToken:U,timeout:k,onDownloadProgress:B,onUploadProgress:H,responseType:G,headers:$,withCredentials:I="same-origin",fetchOptions:z}=NM(A),q=e||fetch;G=G?(G+"").toLowerCase():"text";let re=Nk([O,U&&U.toAbortSignal()],k),ue=null;const ge=re&&re.unsubscribe&&(()=>{re.unsubscribe()});let Se;try{if(H&&m&&b!=="get"&&b!=="head"&&(Se=await E($,M))!==0){let j=new t(P,{method:"POST",body:M,duplex:"half"}),he;if(ye.isFormData(M)&&(he=j.headers.get("content-type"))&&$.setContentType(he),j.body){const[De,je]=fw(Se,vf(pw(H)));M=gw(j.body,vw,De,je)}}ye.isString(I)||(I=I?"include":"omit");const ae=l&&"credentials"in t.prototype,te={...z,signal:re,method:b.toUpperCase(),headers:$.normalize().toJSON(),body:M,duplex:"half",credentials:ae?I:void 0};ue=l&&new t(P,te);let X=await(l?q(ue,z):q(P,te));const we=_&&(G==="stream"||G==="response");if(_&&(B||we&&ge)){const j={};["status","statusText","headers"].forEach(ke=>{j[ke]=X[ke]});const he=ye.toFiniteNumber(X.headers.get("content-length")),[De,je]=B&&fw(he,vf(pw(B),!0))||[];X=new i(gw(X.body,vw,De,()=>{je&&je(),ge&&ge()}),j)}G=G||"text";let Q=await x[ye.findKey(x,G)||"text"](X,A);return!we&&ge&&ge(),await new Promise((j,he)=>{PM(j,he,{data:Q,headers:Vi.from(X.headers),status:X.status,statusText:X.statusText,config:A,request:ue})})}catch(ae){throw ge&&ge(),ae&&ae.name==="TypeError"&&/Load failed|fetch/i.test(ae.message)?Object.assign(new At("Network Error",At.ERR_NETWORK,A,ue),{cause:ae.cause||ae}):At.from(ae,ae&&ae.code,A,ue)}}},Fk=new Map,LM=n=>{let e=n&&n.env||{};const{fetch:t,Request:i,Response:o}=e,l=[i,o,t];let u=l.length,h=u,f,m,_=Fk;for(;h--;)f=l[h],m=_.get(f),m===void 0&&_.set(f,m=h?new Map:Ok(e)),_=m;return m};LM();const kv={http:ek,xhr:Rk,fetch:{get:LM}};ye.forEach(kv,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Sw=n=>`- ${n}`,kk=n=>ye.isFunction(n)||n===null||n===!1;function Bk(n,e){n=ye.isArray(n)?n:[n];const{length:t}=n;let i,o;const l={};for(let u=0;u<t;u++){i=n[u];let h;if(o=i,!kk(i)&&(o=kv[(h=String(i)).toLowerCase()],o===void 0))throw new At(`Unknown adapter '${h}'`);if(o&&(ye.isFunction(o)||(o=o.get(e))))break;l[h||"#"+u]=o}if(!o){const u=Object.entries(l).map(([f,m])=>`adapter ${f} `+(m===!1?"is not supported by the environment":"is not available in the build"));let h=t?u.length>1?`since :
`+u.map(Sw).join(`
`):" "+Sw(u[0]):"as no adapter specified";throw new At("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return o}const DM={getAdapter:Bk,adapters:kv};function ag(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new id(null,n)}function ww(n){return ag(n),n.headers=Vi.from(n.headers),n.data=og.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),DM.getAdapter(n.adapter||nd.adapter,n)(n).then(function(i){return ag(n),i.data=og.call(n,n.transformResponse,i),i.headers=Vi.from(i.headers),i},function(i){return CM(i)||(ag(n),i&&i.response&&(i.response.data=og.call(n,n.transformResponse,i.response),i.response.headers=Vi.from(i.response.headers))),Promise.reject(i)})}const IM="1.13.4",Bf={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Bf[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const bw={};Bf.transitional=function(e,t,i){function o(l,u){return"[Axios v"+IM+"] Transitional option '"+l+"'"+u+(i?". "+i:"")}return(l,u,h)=>{if(e===!1)throw new At(o(u," has been removed"+(t?" in "+t:"")),At.ERR_DEPRECATED);return t&&!bw[u]&&(bw[u]=!0,console.warn(o(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,u,h):!0}};Bf.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function zk(n,e,t){if(typeof n!="object")throw new At("options must be an object",At.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let o=i.length;for(;o-- >0;){const l=i[o],u=e[l];if(u){const h=n[l],f=h===void 0||u(h,l,n);if(f!==!0)throw new At("option "+l+" must be "+f,At.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new At("Unknown option "+l,At.ERR_BAD_OPTION)}}const ef={assertOptions:zk,validators:Bf},ts=ef.validators;let Ha=class{constructor(e){this.defaults=e||{},this.interceptors={request:new dw,response:new dw}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Za(this.defaults,t);const{transitional:i,paramsSerializer:o,headers:l}=t;i!==void 0&&ef.assertOptions(i,{silentJSONParsing:ts.transitional(ts.boolean),forcedJSONParsing:ts.transitional(ts.boolean),clarifyTimeoutError:ts.transitional(ts.boolean)},!1),o!=null&&(ye.isFunction(o)?t.paramsSerializer={serialize:o}:ef.assertOptions(o,{encode:ts.function,serialize:ts.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ef.assertOptions(t,{baseUrl:ts.spelling("baseURL"),withXsrfToken:ts.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=l&&ye.merge(l.common,l[t.method]);l&&ye.forEach(["delete","get","head","post","put","patch","common"],A=>{delete l[A]}),t.headers=Vi.concat(u,l);const h=[];let f=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(t)===!1||(f=f&&P.synchronous,h.unshift(P.fulfilled,P.rejected))});const m=[];this.interceptors.response.forEach(function(P){m.push(P.fulfilled,P.rejected)});let _,x=0,w;if(!f){const A=[ww.bind(this),void 0];for(A.unshift(...h),A.push(...m),w=A.length,_=Promise.resolve(t);x<w;)_=_.then(A[x++],A[x++]);return _}w=h.length;let E=t;for(;x<w;){const A=h[x++],P=h[x++];try{E=A(E)}catch(b){P.call(this,b);break}}try{_=ww.call(this,E)}catch(A){return Promise.reject(A)}for(x=0,w=m.length;x<w;)_=_.then(m[x++],m[x++]);return _}getUri(e){e=Za(this.defaults,e);const t=RM(e.baseURL,e.url,e.allowAbsoluteUrls);return EM(t,e.params,e.paramsSerializer)}};ye.forEach(["delete","get","head","options"],function(e){Ha.prototype[e]=function(t,i){return this.request(Za(i||{},{method:e,url:t,data:(i||{}).data}))}});ye.forEach(["post","put","patch"],function(e){function t(i){return function(l,u,h){return this.request(Za(h||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:u}))}}Ha.prototype[e]=t(),Ha.prototype[e+"Form"]=t(!0)});let jk=class UM{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const i=this;this.promise.then(o=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](o);i._listeners=null}),this.promise.then=o=>{let l;const u=new Promise(h=>{i.subscribe(h),l=h}).then(o);return u.cancel=function(){i.unsubscribe(l)},u},e(function(l,u,h){i.reason||(i.reason=new id(l,u,h),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new UM(function(o){e=o}),cancel:e}}};function Vk(n){return function(t){return n.apply(null,t)}}function Hk(n){return ye.isObject(n)&&n.isAxiosError===!0}const L0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(L0).forEach(([n,e])=>{L0[e]=n});function OM(n){const e=new Ha(n),t=pM(Ha.prototype.request,e);return ye.extend(t,Ha.prototype,e,{allOwnKeys:!0}),ye.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return OM(Za(n,o))},t}const Un=OM(nd);Un.Axios=Ha;Un.CanceledError=id;Un.CancelToken=jk;Un.isCancel=CM;Un.VERSION=IM;Un.toFormData=kf;Un.AxiosError=At;Un.Cancel=Un.CanceledError;Un.all=function(e){return Promise.all(e)};Un.spread=Vk;Un.isAxiosError=Hk;Un.mergeConfig=Za;Un.AxiosHeaders=Vi;Un.formToJSON=n=>AM(ye.isHTMLForm(n)?new FormData(n):n);Un.getAdapter=DM.getAdapter;Un.HttpStatusCode=L0;Un.default=Un;const{Axios:SB,AxiosError:wB,CanceledError:bB,isCancel:MB,CancelToken:EB,VERSION:TB,all:AB,Cancel:CB,isAxiosError:PB,spread:RB,toFormData:NB,AxiosHeaders:LB,HttpStatusCode:DB,formToJSON:IB,getAdapter:UB,mergeConfig:OB}=Un,Gk=[{id:"tenant-1",email:"john.tenant@email.com",name:"John Smith",role:"tenant",createdAt:"2024-01-15T10:00:00Z"},{id:"landlord-1",email:"sarah.landlord@email.com",name:"Sarah Johnson",role:"landlord",createdAt:"2024-01-10T10:00:00Z"},{id:"dao-1",email:"mike.dao@email.com",name:"Mike Chen",role:"dao",createdAt:"2024-01-05T10:00:00Z"}],zo=[{id:"issue-1",category:"maintenance",severity:7,status:"in-review",title:"Broken Heating System",description:"The heating system has been broken for 2 weeks. Multiple requests to the landlord have been ignored. Temperature inside the apartment drops to 50F at night.",propertyAddress:"123 Oak Street, Apt 4B, San Francisco, CA 94102",createdAt:"2024-01-20T10:00:00Z",updatedAt:"2024-01-25T14:30:00Z",tenantId:"tenant-1",landlordId:"landlord-1",images:["https://images.unsplash.com/photo-1585771724684-38269d6639fd?w=800","https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800"],timeline:[{id:"event-1",type:"created",message:"Issue reported by tenant",createdAt:"2024-01-20T10:00:00Z",actorId:"tenant-1",actorRole:"tenant"},{id:"event-2",type:"updated",message:"AI evidence verification completed",createdAt:"2024-01-20T10:05:00Z",actorId:"system",actorRole:"dao"},{id:"event-3",type:"response",message:"Landlord has been notified",createdAt:"2024-01-20T10:10:00Z",actorId:"system",actorRole:"dao"}]},{id:"issue-2",category:"pest",severity:8,status:"pending",title:"Cockroach Infestation",description:"Severe cockroach infestation in the kitchen area. Found multiple roaches in cabinets and near food storage. Issue has persisted for over a month.",propertyAddress:"456 Pine Avenue, Unit 2, Oakland, CA 94612",createdAt:"2024-01-22T15:00:00Z",updatedAt:"2024-01-22T15:00:00Z",tenantId:"tenant-1",images:["https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800"],timeline:[{id:"event-4",type:"created",message:"Issue reported by tenant",createdAt:"2024-01-22T15:00:00Z",actorId:"tenant-1",actorRole:"tenant"}]},{id:"issue-3",category:"safety",severity:9,status:"escalated",title:"Faulty Smoke Detectors",description:"All smoke detectors in the apartment are non-functional. Landlord was notified 3 weeks ago but no action has been taken. This is a serious safety hazard.",propertyAddress:"789 Elm Street, Apt 12C, Berkeley, CA 94704",createdAt:"2024-01-18T09:00:00Z",updatedAt:"2024-01-28T11:00:00Z",tenantId:"tenant-1",landlordId:"landlord-1",images:["https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800","https://images.unsplash.com/photo-1585771724684-38269d6639fd?w=800"],timeline:[{id:"event-5",type:"created",message:"Issue reported by tenant",createdAt:"2024-01-18T09:00:00Z",actorId:"tenant-1",actorRole:"tenant"},{id:"event-6",type:"escalated",message:"Case escalated to DAO review due to safety concerns",createdAt:"2024-01-28T11:00:00Z",actorId:"system",actorRole:"dao"}]},{id:"issue-4",category:"security-deposit",severity:6,status:"resolved",title:"Unfair Security Deposit Deduction",description:"Landlord deducted $800 from security deposit for normal wear and tear. I have photos proving the condition of the apartment upon move-out.",propertyAddress:"321 Maple Drive, San Jose, CA 95112",createdAt:"2024-01-10T14:00:00Z",updatedAt:"2024-01-30T16:00:00Z",tenantId:"tenant-1",landlordId:"landlord-1",images:[],timeline:[{id:"event-7",type:"created",message:"Issue reported by tenant",createdAt:"2024-01-10T14:00:00Z",actorId:"tenant-1",actorRole:"tenant"},{id:"event-8",type:"resolved",message:"Case resolved in favor of tenant. Landlord agreed to refund $600.",createdAt:"2024-01-30T16:00:00Z",actorId:"dao-1",actorRole:"dao"}]}],_f={"issue-1":{caseId:"issue-1",tenantConfidence:78,landlordConfidence:15,neutralConfidence:7,recommendedAction:"Escalate to DAO review. High confidence in tenant claim validity.",reasoning:"Evidence analysis indicates heating system malfunction consistent with tenant description. Timestamp analysis shows issue duration aligns with reported timeline. No signs of evidence tampering detected.",redFlags:["Landlord has not responded within required timeframe","Health and safety violation potential"],evidenceAnalysis:[{imageUrl:"https://images.unsplash.com/photo-1585771724684-38269d6639fd?w=800",findings:["Thermostat shows low temperature reading","Visible frost on windows"],authenticity:"verified",confidenceScore:92},{imageUrl:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800",findings:["HVAC unit appears non-operational","Maintenance stickers outdated"],authenticity:"verified",confidenceScore:85}],generatedAt:"2024-01-20T10:05:00Z"},"issue-3":{caseId:"issue-3",tenantConfidence:91,landlordConfidence:5,neutralConfidence:4,recommendedAction:"Immediate DAO intervention recommended. Critical safety violation.",reasoning:"Multiple non-functional smoke detectors confirmed via image analysis. This represents a clear violation of housing safety codes. The extended timeframe without landlord response is concerning.",redFlags:["Critical safety equipment non-functional","Extended period without landlord action","Potential habitability violation"],evidenceAnalysis:[{imageUrl:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800",findings:["Smoke detector battery compartment empty","Device appears damaged"],authenticity:"verified",confidenceScore:95}],generatedAt:"2024-01-28T11:05:00Z"}},Bh=[{id:"case-1",issueId:"issue-3",issue:zo.find(n=>n.id==="issue-3"),aiVerdict:_f["issue-3"],status:"voting",votes:[{id:"vote-1",caseId:"case-1",voterId:"dao-1",option:"favor-tenant",createdAt:"2024-01-28T12:00:00Z"},{id:"vote-2",caseId:"case-1",voterId:"dao-2",option:"favor-tenant",createdAt:"2024-01-28T13:00:00Z"},{id:"vote-3",caseId:"case-1",voterId:"dao-3",option:"favor-landlord",createdAt:"2024-01-28T14:00:00Z"}],deadline:"2024-02-05T23:59:59Z",createdAt:"2024-01-28T11:00:00Z"},{id:"case-2",issueId:"issue-1",issue:zo.find(n=>n.id==="issue-1"),aiVerdict:_f["issue-1"],status:"pending",votes:[],deadline:"2024-02-10T23:59:59Z",createdAt:"2024-01-25T14:30:00Z"}],Wk={totalComplaints:12,pendingResponses:3,reputationScore:72,responseRate:85,averageResponseTime:"2.5 days"},Mw=[{id:"area-1",name:"Mission District",coordinates:[-122.4194,37.7599],issueCount:145,successRate:78,positiveOutcomes:113,avgResolutionDays:12},{id:"area-2",name:"SoMa",coordinates:[-122.3999,37.7785],issueCount:98,successRate:82,positiveOutcomes:80,avgResolutionDays:10},{id:"area-3",name:"Tenderloin",coordinates:[-122.4147,37.7847],issueCount:234,successRate:65,positiveOutcomes:152,avgResolutionDays:18},{id:"area-4",name:"Financial District",coordinates:[-122.4001,37.7946],issueCount:32,successRate:91,positiveOutcomes:29,avgResolutionDays:7},{id:"area-5",name:"Castro",coordinates:[-122.435,37.7609],issueCount:67,successRate:85,positiveOutcomes:57,avgResolutionDays:9},{id:"area-6",name:"Haight-Ashbury",coordinates:[-122.4477,37.7692],issueCount:89,successRate:76,positiveOutcomes:68,avgResolutionDays:14}],Xk="http://localhost:3001/api",Zk=Un.create({baseURL:Xk,headers:{"Content-Type":"application/json"}});Zk.interceptors.request.use(n=>{const e=localStorage.getItem("auth_token");return e&&(n.headers.Authorization=`Bearer ${e}`),n});const si=n=>new Promise(e=>setTimeout(e,n)),Pu={async login(n,e,t){await si(500);const i=Gk.find(o=>o.email===n)||{id:`user-${Date.now()}`,email:n,name:n.split("@")[0],role:t,createdAt:new Date().toISOString()};return localStorage.setItem("auth_token","mock-token-"+i.id),localStorage.setItem("current_user",JSON.stringify(i)),i},async logout(){await si(200),localStorage.removeItem("auth_token"),localStorage.removeItem("current_user")},getCurrentUser(){const n=localStorage.getItem("current_user");return n?JSON.parse(n):null}},qk={async getAll(){return await si(300),zo},async getById(n){return await si(200),zo.find(e=>e.id===n)||null},async getByTenantId(n){return await si(300),zo.filter(e=>e.tenantId===n)},async getByLandlordId(n){return await si(300),zo.filter(e=>e.landlordId===n)},async create(n){var t,i;await si(500);const e={id:`issue-${Date.now()}`,category:n.category,severity:5,status:"pending",title:`${n.category} Issue`,description:n.description,propertyAddress:n.propertyAddress,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),tenantId:((t=Pu.getCurrentUser())==null?void 0:t.id)||"unknown",images:n.images.map(()=>"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800"),timeline:[{id:`event-${Date.now()}`,type:"created",message:"Issue reported by tenant",createdAt:new Date().toISOString(),actorId:((i=Pu.getCurrentUser())==null?void 0:i.id)||"unknown",actorRole:"tenant"}]};return zo.push(e),e},async respondToIssue(n,e){var i;await si(400);const t=zo.find(o=>o.id===n);if(!t)throw new Error("Issue not found");return t.timeline.push({id:`event-${Date.now()}`,type:"response",message:e,createdAt:new Date().toISOString(),actorId:((i=Pu.getCurrentUser())==null?void 0:i.id)||"unknown",actorRole:"landlord"}),t.updatedAt=new Date().toISOString(),t}},Yk={async getVerdict(n){return await si(400),_f[n]||null},async requestVerification(n){await si(1e3);const e={caseId:n,tenantConfidence:Math.floor(Math.random()*40)+60,landlordConfidence:Math.floor(Math.random()*30),neutralConfidence:Math.floor(Math.random()*20),recommendedAction:"Review evidence and proceed to DAO voting",reasoning:"AI analysis completed. Evidence appears consistent with tenant claims.",redFlags:[],evidenceAnalysis:[],generatedAt:new Date().toISOString()};return _f[n]=e,e}},Kk={async getAllCases(){return await si(300),Bh},async getCaseById(n){return await si(200),Bh.find(e=>e.id===n)||null},async getPendingCases(){return await si(300),Bh.filter(n=>n.status==="pending"||n.status==="voting")},async vote(n,e){var i;await si(300);const t=Bh.find(o=>o.id===n);if(!t)throw new Error("Case not found");t.votes.push({id:`vote-${Date.now()}`,caseId:n,voterId:((i=Pu.getCurrentUser())==null?void 0:i.id)||"unknown",option:e,createdAt:new Date().toISOString()})}},$k={async getStats(n){return await si(200),console.log("Fetching stats for landlord:",n),Wk}},Jk={async getAreas(){return await si(300),Mw},async getAreaById(n){return await si(200),Mw.find(e=>e.id===n)||null}},Ci={auth:Pu,issues:qk,ai:Yk,dao:Kk,landlord:$k,heatmap:Jk},Ew=[{id:"tenant",title:"Tenant",description:"Report housing issues and track resolutions",icon:D1,color:"bg-primary-100 text-primary-600 border-primary-200",selectedColor:"bg-primary-600 text-white border-primary-600"},{id:"landlord",title:"Landlord",description:"Respond to complaints and manage reputation",icon:R1,color:"bg-accent-100 text-accent-600 border-accent-200",selectedColor:"bg-accent-600 text-white border-accent-600"},{id:"dao",title:"DAO Member",description:"Review cases and vote on disputes",icon:df,color:"bg-success-100 text-success-600 border-success-200",selectedColor:"bg-success-600 text-white border-success-600"}];function Qk(){var w;const n=kw(),[e,t]=ne.useState("tenant"),[i,o]=ne.useState(""),[l,u]=ne.useState(""),[h,f]=ne.useState(!1),[m,_]=ne.useState(""),x=async E=>{E.preventDefault(),_(""),f(!0);try{await Ci.auth.login(i,l,e),n({tenant:"/tenant/dashboard",landlord:"/landlord/dashboard",dao:"/dao/dashboard"}[e])}catch{_("Invalid email or password. Please try again.")}finally{f(!1)}};return v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-neutral-50 to-primary-50 flex items-center justify-center p-4",children:[v.jsx("div",{className:"absolute inset-0 opacity-30",children:v.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("defs",{children:v.jsx("pattern",{id:"grid",width:"60",height:"60",patternUnits:"userSpaceOnUse",children:v.jsx("path",{d:"M 60 0 L 0 0 0 60",fill:"none",stroke:"currentColor",strokeWidth:"0.5",className:"text-primary-200"})})}),v.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative w-full max-w-md",children:[v.jsxs(Ot,{to:"/",className:"inline-flex items-center gap-2 text-sm text-neutral-600 hover:text-neutral-900 mb-6 transition-colors",children:[v.jsx(nc,{className:"h-4 w-4"}),"Back to Home"]}),v.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-neutral-100",children:[v.jsxs("div",{className:"flex items-center justify-center gap-2 mb-8",children:[v.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-primary-500 to-accent-600 shadow-lg",children:v.jsx(ic,{className:"h-6 w-6 text-white"})}),v.jsxs("span",{className:"font-display text-2xl font-bold text-neutral-900",children:["Rent",v.jsx("span",{className:"text-primary-600",children:"Shield"})]})]}),v.jsx("h1",{className:"text-xl font-semibold text-neutral-900 text-center mb-2",children:"Welcome back"}),v.jsx("p",{className:"text-sm text-neutral-500 text-center mb-6",children:"Sign in to access your dashboard"}),v.jsx("div",{className:"grid grid-cols-3 gap-3 mb-6",children:Ew.map(E=>v.jsxs(gt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(E.id),className:`p-3 rounded-xl border-2 transition-all ${e===E.id?E.selectedColor:E.color}`,children:[v.jsx(E.icon,{className:"h-6 w-6 mx-auto mb-1"}),v.jsx("p",{className:"text-xs font-medium",children:E.title})]},E.id))}),v.jsx("p",{className:"text-xs text-neutral-500 text-center mb-6 h-8",children:(w=Ew.find(E=>E.id===e))==null?void 0:w.description}),v.jsxs("form",{onSubmit:x,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"label",children:"Email Address"}),v.jsx("input",{id:"email",type:"email",value:i,onChange:E=>o(E.target.value),className:"input-field",placeholder:"you@example.com",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"label",children:"Password"}),v.jsx("input",{id:"password",type:"password",value:l,onChange:E=>u(E.target.value),className:"input-field",placeholder:"",required:!0})]}),m&&v.jsx(gt.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm text-danger-600 bg-danger-50 px-3 py-2 rounded-lg",children:m}),v.jsx("button",{type:"submit",disabled:h,className:"btn-primary w-full",children:h?v.jsxs(v.Fragment,{children:[v.jsx(Pf,{className:"h-4 w-4 animate-spin mr-2"}),"Signing in..."]}):"Sign In"})]}),v.jsxs("div",{className:"relative my-6",children:[v.jsx("div",{className:"absolute inset-0 flex items-center",children:v.jsx("div",{className:"w-full border-t border-neutral-200"})}),v.jsx("div",{className:"relative flex justify-center text-xs",children:v.jsx("span",{className:"bg-white px-2 text-neutral-500",children:"Demo Accounts"})})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("button",{type:"button",onClick:()=>{o("john.tenant@email.com"),u("demo"),t("tenant")},className:"w-full text-left text-xs p-2 rounded-lg bg-neutral-50 hover:bg-neutral-100 transition-colors",children:[v.jsx("span",{className:"font-medium text-neutral-700",children:"Tenant Demo:"}),v.jsx("span",{className:"text-neutral-500 ml-1",children:"john.tenant@email.com"})]}),v.jsxs("button",{type:"button",onClick:()=>{o("sarah.landlord@email.com"),u("demo"),t("landlord")},className:"w-full text-left text-xs p-2 rounded-lg bg-neutral-50 hover:bg-neutral-100 transition-colors",children:[v.jsx("span",{className:"font-medium text-neutral-700",children:"Landlord Demo:"}),v.jsx("span",{className:"text-neutral-500 ml-1",children:"sarah.landlord@email.com"})]}),v.jsxs("button",{type:"button",onClick:()=>{o("mike.dao@email.com"),u("demo"),t("dao")},className:"w-full text-left text-xs p-2 rounded-lg bg-neutral-50 hover:bg-neutral-100 transition-colors",children:[v.jsx("span",{className:"font-medium text-neutral-700",children:"DAO Demo:"}),v.jsx("span",{className:"text-neutral-500 ml-1",children:"mike.dao@email.com"})]})]})]}),v.jsxs("p",{className:"text-center text-xs text-neutral-500 mt-6",children:["By signing in, you agree to our"," ",v.jsx(Ot,{to:"#",className:"text-primary-600 hover:underline",children:"Terms of Service"})," ","and"," ",v.jsx(Ot,{to:"#",className:"text-primary-600 hover:underline",children:"Privacy Policy"})]})]})]})}const Tw=[{name:"Home",href:"/"},{name:"How It Works",href:"/#how-it-works"},{name:"FAQ",href:"/#faq"}],Aw={tenant:"/tenant/dashboard",landlord:"/landlord/dashboard",dao:"/dao/dashboard"};function ms(){const[n,e]=ne.useState(!1),t=ju(),i=Ci.auth.getCurrentUser(),o=l=>l==="/"?t.pathname==="/":t.pathname.startsWith(l);return v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 glass border-b border-neutral-200/50",children:v.jsxs("nav",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8","aria-label":"Top",children:[v.jsxs("div",{className:"flex h-16 items-center justify-between",children:[v.jsx("div",{className:"flex items-center",children:v.jsxs(Ot,{to:"/",className:"flex items-center gap-2 group",children:[v.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-primary-500 to-accent-600 shadow-md transition-transform group-hover:scale-105",children:v.jsx(ic,{className:"h-5 w-5 text-white"})}),v.jsxs("span",{className:"font-display text-xl font-bold text-neutral-900",children:["Rent",v.jsx("span",{className:"text-primary-600",children:"Shield"})]})]})}),v.jsx("div",{className:"hidden md:flex md:items-center md:gap-8",children:Tw.map(l=>v.jsx(Ot,{to:l.href,className:on("text-sm font-medium transition-colors duration-200",o(l.href)?"text-primary-600":"text-neutral-600 hover:text-neutral-900"),children:l.name},l.name))}),v.jsx("div",{className:"hidden md:flex md:items-center md:gap-4",children:i?v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs(Ot,{to:Aw[i.role],className:"flex items-center gap-2 text-sm font-medium text-neutral-700 hover:text-neutral-900",children:["Dashboard",v.jsx(N1,{className:"h-4 w-4"})]}),v.jsx("button",{onClick:()=>{Ci.auth.logout(),window.location.href="/"},className:"btn-secondary text-sm py-2 px-4",children:"Sign Out"})]}):v.jsxs(v.Fragment,{children:[v.jsx(Ot,{to:"/login",className:"text-sm font-semibold text-neutral-700 hover:text-neutral-900 transition-colors",children:"Sign In"}),v.jsx(Ot,{to:"/tenant/report",className:"btn-primary text-sm py-2.5 px-5",children:"Report Issue"})]})}),v.jsx("div",{className:"flex md:hidden",children:v.jsxs("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg p-2 text-neutral-600 hover:bg-neutral-100 hover:text-neutral-900",onClick:()=>e(!n),children:[v.jsx("span",{className:"sr-only",children:"Open main menu"}),n?v.jsx(wv,{className:"h-6 w-6","aria-hidden":"true"}):v.jsx(PN,{className:"h-6 w-6","aria-hidden":"true"})]})})]}),v.jsx(Sf,{children:n&&v.jsx(gt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden overflow-hidden",children:v.jsxs("div",{className:"space-y-1 pb-4 pt-2",children:[Tw.map(l=>v.jsx(Ot,{to:l.href,onClick:()=>e(!1),className:on("block rounded-lg px-3 py-2 text-base font-medium transition-colors",o(l.href)?"bg-primary-50 text-primary-600":"text-neutral-700 hover:bg-neutral-50 hover:text-neutral-900"),children:l.name},l.name)),v.jsx("div",{className:"mt-4 flex flex-col gap-2 px-3",children:i?v.jsxs(v.Fragment,{children:[v.jsx(Ot,{to:Aw[i.role],onClick:()=>e(!1),className:"btn-secondary w-full text-center",children:"Dashboard"}),v.jsx("button",{onClick:()=>{Ci.auth.logout(),e(!1),window.location.href="/"},className:"btn-secondary w-full",children:"Sign Out"})]}):v.jsxs(v.Fragment,{children:[v.jsx(Ot,{to:"/login",onClick:()=>e(!1),className:"btn-secondary w-full text-center",children:"Sign In"}),v.jsx(Ot,{to:"/tenant/report",onClick:()=>e(!1),className:"btn-primary w-full text-center",children:"Report Issue"})]})})]})})})]})})}const lg={product:[{name:"How It Works",href:"/#how-it-works"},{name:"For Tenants",href:"/tenant/dashboard"},{name:"For Landlords",href:"/landlord/dashboard"},{name:"DAO Governance",href:"/dao/dashboard"}],resources:[{name:"FAQ",href:"/#faq"},{name:"Documentation",href:"#"},{name:"API Reference",href:"#"},{name:"Community",href:"#"}],legal:[{name:"Privacy Policy",href:"#"},{name:"Terms of Service",href:"#"},{name:"Cookie Policy",href:"#"}]},eB=[{name:"Twitter",href:"#",icon:UN},{name:"GitHub",href:"#",icon:wN},{name:"LinkedIn",href:"#",icon:EN}];function xc(){return v.jsx("footer",{className:"bg-neutral-900 text-neutral-300",children:v.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-12 sm:px-6 lg:px-8 lg:py-16",children:[v.jsxs("div",{className:"xl:grid xl:grid-cols-3 xl:gap-8",children:[v.jsxs("div",{className:"space-y-8 xl:col-span-1",children:[v.jsxs(Ot,{to:"/",className:"flex items-center gap-2",children:[v.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-primary-500 to-accent-600",children:v.jsx(ic,{className:"h-5 w-5 text-white"})}),v.jsxs("span",{className:"font-display text-xl font-bold text-white",children:["Rent",v.jsx("span",{className:"text-primary-400",children:"Shield"})]})]}),v.jsx("p",{className:"text-sm text-neutral-400 max-w-xs",children:"AI-powered tenant protection with community-driven justice. Making housing disputes transparent, verified, and fair."}),v.jsx("div",{className:"flex items-center gap-4",children:v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[v.jsx(AN,{className:"h-4 w-4 text-neutral-500"}),v.jsx("a",{href:"mailto:support@rentshield.io",className:"hover:text-white transition-colors",children:"support@rentshield.io"})]})}),v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[v.jsx(mc,{className:"h-4 w-4 text-neutral-500"}),v.jsx("span",{children:"San Francisco, CA"})]})]}),v.jsxs("div",{className:"mt-12 grid grid-cols-2 gap-8 xl:col-span-2 xl:mt-0",children:[v.jsxs("div",{className:"md:grid md:grid-cols-2 md:gap-8",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-semibold text-white uppercase tracking-wider",children:"Product"}),v.jsx("ul",{role:"list",className:"mt-4 space-y-3",children:lg.product.map(n=>v.jsx("li",{children:v.jsx(Ot,{to:n.href,className:"text-sm hover:text-white transition-colors",children:n.name})},n.name))})]}),v.jsxs("div",{className:"mt-10 md:mt-0",children:[v.jsx("h3",{className:"text-sm font-semibold text-white uppercase tracking-wider",children:"Resources"}),v.jsx("ul",{role:"list",className:"mt-4 space-y-3",children:lg.resources.map(n=>v.jsx("li",{children:v.jsx(Ot,{to:n.href,className:"text-sm hover:text-white transition-colors",children:n.name})},n.name))})]})]}),v.jsxs("div",{className:"md:grid md:grid-cols-2 md:gap-8",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-semibold text-white uppercase tracking-wider",children:"Legal"}),v.jsx("ul",{role:"list",className:"mt-4 space-y-3",children:lg.legal.map(n=>v.jsx("li",{children:v.jsx(Ot,{to:n.href,className:"text-sm hover:text-white transition-colors",children:n.name})},n.name))})]}),v.jsxs("div",{className:"mt-10 md:mt-0",children:[v.jsx("h3",{className:"text-sm font-semibold text-white uppercase tracking-wider",children:"Connect"}),v.jsx("div",{className:"mt-4 flex gap-4",children:eB.map(n=>v.jsxs("a",{href:n.href,className:"flex h-10 w-10 items-center justify-center rounded-lg bg-neutral-800 hover:bg-neutral-700 transition-colors",children:[v.jsx("span",{className:"sr-only",children:n.name}),v.jsx(n.icon,{className:"h-5 w-5","aria-hidden":"true"})]},n.name))})]})]})]})]}),v.jsx("div",{className:"mt-12 border-t border-neutral-800 pt-8",children:v.jsxs("p",{className:"text-sm text-neutral-500 text-center",children:[" ",new Date().getFullYear()," RentShield. All rights reserved. Built with transparency and trust in mind."]})})]})})}const Cw={pending:{label:"Pending",className:"bg-warning-50 text-warning-700 border-warning-200",dotColor:"bg-warning-500"},"in-review":{label:"In Review",className:"bg-primary-50 text-primary-700 border-primary-200",dotColor:"bg-primary-500"},"under-investigation":{label:"Under Investigation",className:"bg-accent-50 text-accent-700 border-accent-200",dotColor:"bg-accent-500"},resolved:{label:"Resolved",className:"bg-success-50 text-success-700 border-success-200",dotColor:"bg-success-500"},dismissed:{label:"Dismissed",className:"bg-neutral-50 text-neutral-600 border-neutral-200",dotColor:"bg-neutral-400"},escalated:{label:"Escalated",className:"bg-danger-50 text-danger-700 border-danger-200",dotColor:"bg-danger-500"},voting:{label:"Voting",className:"bg-accent-50 text-accent-700 border-accent-200",dotColor:"bg-accent-500 animate-pulse"}},tB={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-sm px-3 py-1.5"};function qo({status:n,size:e="md",showDot:t=!0}){const i=Cw[n.toLowerCase()]||Cw.pending;return v.jsxs("span",{className:on("inline-flex items-center gap-1.5 rounded-full border font-medium",i.className,tB[e]),children:[t&&v.jsx("span",{className:on("h-1.5 w-1.5 rounded-full",i.dotColor)}),i.label]})}const nB={maintenance:"",safety:"",pest:"",noise:"","lease-violation":"",utilities:"","security-deposit":"",other:""},iB=["bg-success-100 text-success-700","bg-success-100 text-success-700","bg-success-100 text-success-700","bg-warning-100 text-warning-700","bg-warning-100 text-warning-700","bg-warning-100 text-warning-700","bg-warning-100 text-warning-700","bg-danger-100 text-danger-700","bg-danger-100 text-danger-700","bg-danger-100 text-danger-700"];function FM({issue:n,variant:e="default",linkPrefix:t="/tenant/issue",showSeverity:i=!0}){const o=e==="compact";return v.jsx(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:v.jsx(Ot,{to:`${t}/${n.id}`,className:on("block rounded-xl border border-transparent transition-all duration-200",o?"p-0":"p-6 bg-neutral-900/50 backdrop-blur-md border-neutral-800 hover:border-lime-500/30"),children:v.jsxs("div",{className:"flex items-start justify-between gap-4",children:[v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx("span",{className:"text-lg",role:"img","aria-label":n.category,children:nB[n.category]||""}),v.jsx(qo,{status:n.status,size:o?"sm":"md"}),i&&v.jsxs("span",{className:on("inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium",iB[n.severity-1]),children:[v.jsx(Wa,{className:"h-3 w-3"}),n.severity,"/10"]})]}),v.jsx("h3",{className:on("font-semibold text-white group-hover:text-lime-400 transition-colors",o?"text-sm":"text-base"),children:n.title}),!o&&v.jsx("p",{className:"mt-1 text-sm text-neutral-400",children:Ng(n.description,120)}),v.jsxs("div",{className:on("flex items-center gap-4 text-neutral-500",o?"mt-2 text-xs":"mt-3 text-sm"),children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(mc,{className:"h-3.5 w-3.5"}),Ng(n.propertyAddress.split(",")[0],25)]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(Zs,{className:"h-3.5 w-3.5"}),Cf(n.createdAt)]})]}),!o&&n.images.length>0&&v.jsxs("div",{className:"mt-3 flex gap-2",children:[n.images.slice(0,3).map((l,u)=>v.jsx("div",{className:"h-12 w-12 rounded-lg bg-neutral-800 overflow-hidden border border-neutral-700",children:v.jsx("img",{src:l,alt:`Evidence ${u+1}`,className:"h-full w-full object-cover"})},u)),n.images.length>3&&v.jsxs("div",{className:"h-12 w-12 rounded-lg bg-neutral-800 flex items-center justify-center text-xs font-medium text-neutral-400 border border-neutral-700",children:["+",n.images.length-3]})]})]}),v.jsx(yv,{className:on("flex-shrink-0 text-neutral-600 group-hover:text-lime-400 transition-colors",o?"h-4 w-4":"h-5 w-5")})]})})})}function Bv({images:n,analysis:e}){const[t,i]=ne.useState(null);if(n.length===0)return v.jsx("div",{className:"rounded-lg border-2 border-dashed border-neutral-200 p-8 text-center",children:v.jsx("p",{className:"text-sm text-neutral-500",children:"No evidence images uploaded"})});const o=u=>e==null?void 0:e.find(h=>h.imageUrl===u),l=u=>{switch(u){case"verified":return v.jsx(Wo,{className:"h-4 w-4 text-success-500"});case"suspicious":return v.jsx(uf,{className:"h-4 w-4 text-danger-500"});default:return v.jsx(bN,{className:"h-4 w-4 text-neutral-400"})}};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:n.map((u,h)=>{const f=o(u);return v.jsxs(gt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i(h),className:"relative group aspect-square rounded-lg overflow-hidden bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:[v.jsx("img",{src:u,alt:`Evidence ${h+1}`,className:"h-full w-full object-cover transition-transform group-hover:scale-105"}),v.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:v.jsx(FN,{className:"h-6 w-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),f&&v.jsx("div",{className:"absolute top-2 right-2 p-1 rounded-full bg-white shadow-md",children:l(f.authenticity)})]},h)})}),v.jsx(Sf,{children:t!==null&&v.jsxs(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4",onClick:()=>i(null),children:[v.jsx("button",{onClick:()=>i(null),className:"absolute top-4 right-4 p-2 rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors",children:v.jsx(wv,{className:"h-6 w-6"})}),n.length>1&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:u=>{u.stopPropagation(),i((t-1+n.length)%n.length)},className:"absolute left-4 p-2 rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors",children:v.jsx(xN,{className:"h-6 w-6"})}),v.jsx("button",{onClick:u=>{u.stopPropagation(),i((t+1)%n.length)},className:"absolute right-4 p-2 rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors",children:v.jsx(yv,{className:"h-6 w-6"})})]}),v.jsxs(gt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"max-w-4xl w-full flex flex-col gap-4",onClick:u=>u.stopPropagation(),children:[v.jsx("img",{src:n[t],alt:`Evidence ${t+1}`,className:"w-full max-h-[60vh] object-contain rounded-lg"}),o(n[t])&&v.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("h4",{className:"font-semibold text-neutral-900",children:"AI Analysis"}),v.jsxs("div",{className:"flex items-center gap-2",children:[l(o(n[t]).authenticity),v.jsx("span",{className:on("text-sm font-medium capitalize",o(n[t]).authenticity==="verified"&&"text-success-600",o(n[t]).authenticity==="suspicious"&&"text-danger-600",o(n[t]).authenticity==="unverified"&&"text-neutral-500"),children:o(n[t]).authenticity}),v.jsxs("span",{className:"text-sm text-neutral-500",children:["(",o(n[t]).confidenceScore,"% confidence)"]})]})]}),v.jsx("ul",{className:"space-y-1",children:o(n[t]).findings.map((u,h)=>v.jsxs("li",{className:"text-sm text-neutral-600 flex items-start gap-2",children:[v.jsx("span",{className:"text-primary-500 mt-1",children:""}),u]},h))})]}),v.jsxs("p",{className:"text-center text-white/70 text-sm",children:[t+1," of ",n.length]})]},t)]})})]})}function zv({verdict:n,compact:e=!1}){const t=o=>o>=70?"text-success-600":o>=40?"text-warning-600":"text-neutral-500",i=o=>o==="tenant"?"bg-primary-500":o==="landlord"?"bg-accent-500":"bg-neutral-400";return v.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:on("rounded-xl border bg-gradient-to-br from-neutral-50 to-white",e?"p-4":"p-6"),children:[v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[v.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-accent-100",children:v.jsx(Lg,{className:"h-5 w-5 text-accent-600"})}),v.jsxs("div",{children:[v.jsx("h3",{className:on("font-semibold text-neutral-900",e?"text-sm":"text-base"),children:"AI Verdict Summary"}),v.jsxs("p",{className:"text-xs text-neutral-500",children:["Generated ",new Date(n.generatedAt).toLocaleDateString()]})]})]}),v.jsxs("div",{className:"space-y-3 mb-4",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-1",children:[v.jsx("span",{className:"text-sm text-neutral-600",children:"Tenant Confidence"}),v.jsxs("span",{className:on("text-sm font-semibold",t(n.tenantConfidence)),children:[n.tenantConfidence,"%"]})]}),v.jsx("div",{className:"h-2 bg-neutral-100 rounded-full overflow-hidden",children:v.jsx(gt.div,{initial:{width:0},animate:{width:`${n.tenantConfidence}%`},transition:{duration:.5,delay:.1},className:on("h-full rounded-full",i("tenant"))})})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-1",children:[v.jsx("span",{className:"text-sm text-neutral-600",children:"Landlord Confidence"}),v.jsxs("span",{className:on("text-sm font-semibold",t(n.landlordConfidence)),children:[n.landlordConfidence,"%"]})]}),v.jsx("div",{className:"h-2 bg-neutral-100 rounded-full overflow-hidden",children:v.jsx(gt.div,{initial:{width:0},animate:{width:`${n.landlordConfidence}%`},transition:{duration:.5,delay:.2},className:on("h-full rounded-full",i("landlord"))})})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-1",children:[v.jsx("span",{className:"text-sm text-neutral-600",children:"Neutral/Uncertain"}),v.jsxs("span",{className:"text-sm font-semibold text-neutral-500",children:[n.neutralConfidence,"%"]})]}),v.jsx("div",{className:"h-2 bg-neutral-100 rounded-full overflow-hidden",children:v.jsx(gt.div,{initial:{width:0},animate:{width:`${n.neutralConfidence}%`},transition:{duration:.5,delay:.3},className:on("h-full rounded-full",i("neutral"))})})]})]}),v.jsx("div",{className:on("rounded-lg bg-primary-50 border border-primary-100 p-3 mb-4",e&&"p-2"),children:v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx(df,{className:"h-4 w-4 text-primary-600 mt-0.5 flex-shrink-0"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs font-medium text-primary-600 uppercase tracking-wide mb-1",children:"Recommended Action"}),v.jsx("p",{className:on("text-primary-800",e?"text-xs":"text-sm"),children:n.recommendedAction})]})]})}),!e&&v.jsxs("div",{className:"mb-4",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx(hf,{className:"h-4 w-4 text-neutral-500"}),v.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"AI Reasoning"})]}),v.jsx("p",{className:"text-sm text-neutral-600 leading-relaxed",children:n.reasoning})]}),n.redFlags.length>0&&v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx(Wa,{className:"h-4 w-4 text-danger-500"}),v.jsxs("span",{className:on("font-medium text-danger-700",e?"text-xs":"text-sm"),children:["Red Flags (",n.redFlags.length,")"]})]}),v.jsx("ul",{className:"space-y-1.5",children:n.redFlags.map((o,l)=>v.jsxs("li",{className:on("flex items-start gap-2 rounded-lg bg-danger-50 border border-danger-100 p-2",e&&"p-1.5"),children:[v.jsx("span",{className:"text-danger-400 mt-0.5",children:""}),v.jsx("span",{className:on("text-danger-700",e?"text-xs":"text-sm"),children:o})]},l))})]}),n.redFlags.length===0&&v.jsxs("div",{className:"flex items-center gap-2 text-success-600",children:[v.jsx(Wo,{className:"h-4 w-4"}),v.jsx("span",{className:on(e?"text-xs":"text-sm"),children:"No red flags identified"})]})]})}const rB=[{label:"Total Reports",value:"4",icon:Sv,color:"text-violet-400"},{label:"In Progress",value:"2",icon:Zs,color:"text-amber-400"},{label:"Resolved",value:"1",icon:hf,color:"text-lime-400"},{label:"Escalated",value:"1",icon:uf,color:"text-red-400"}];function sB(){const[n,e]=ne.useState([]),[t,i]=ne.useState(!0),[o,l]=ne.useState("all");ne.useEffect(()=>{(async()=>{try{const f=await Ci.issues.getByTenantId("tenant-1");e(f)}finally{i(!1)}})()},[]);const u=n.filter(h=>o==="active"?!["resolved","dismissed"].includes(h.status):o==="resolved"?["resolved","dismissed"].includes(h.status):!0);return v.jsxs("div",{className:"min-h-screen bg-neutral-950 selection:bg-lime-500/30",children:[v.jsx(ms,{}),v.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[v.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-violet-600/20 rounded-full blur-[120px] mix-blend-screen"}),v.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-lime-500/10 rounded-full blur-[120px] mix-blend-screen"})]}),v.jsx("main",{className:"pt-24 pb-16 relative z-10",children:v.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[v.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-3xl font-display font-bold text-white",children:"Tenant Dashboard"}),v.jsx("p",{className:"text-neutral-400 mt-1",children:"Track your housing issues and get fair resolutions."})]}),v.jsxs(Ot,{to:"/tenant/report",className:"inline-flex items-center gap-2 rounded-lg bg-lime-400 px-4 py-2 text-sm font-semibold text-neutral-900 hover:bg-lime-300 transition-colors",children:[v.jsx(lS,{className:"h-4 w-4"}),"Report New Issue"]})]}),v.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:rB.map((h,f)=>v.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:f*.1},className:"bg-neutral-900/50 backdrop-blur-md border border-neutral-800 p-4 rounded-xl",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center bg-neutral-800/50 ${h.color}`,children:v.jsx(h.icon,{className:"h-5 w-5"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-2xl font-bold text-white",children:h.value}),v.jsx("p",{className:"text-xs text-neutral-400",children:h.label})]})]})},h.label))}),v.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-violet-900/20 to-lime-900/20 rounded-xl p-4 border border-violet-500/20 mb-8 backdrop-blur-md",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("div",{className:"h-10 w-10 rounded-lg bg-violet-500/20 flex items-center justify-center flex-shrink-0 border border-violet-500/30",children:v.jsx(ic,{className:"h-5 w-5 text-violet-300"})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-semibold text-white",children:"Your Identity is Protected"}),v.jsx("p",{className:"text-sm text-neutral-400 mt-1",children:"All your reports are anonymized. Landlords and DAO members cannot see your personal information unless you explicitly grant access. Your reputation and housing history remain private."})]})]})}),v.jsxs("div",{className:"bg-neutral-900/50 backdrop-blur-md border border-neutral-800 rounded-xl overflow-hidden",children:[v.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-neutral-800",children:[v.jsx("h2",{className:"font-semibold text-white",children:"Your Issues"}),v.jsx("div",{className:"flex-1"}),v.jsx("div",{className:"flex items-center gap-2",children:["all","active","resolved"].map(h=>v.jsx("button",{onClick:()=>l(h),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${o===h?"bg-lime-400/10 text-lime-400 border border-lime-400/20":"text-neutral-400 hover:bg-neutral-800 hover:text-neutral-200"}`,children:h.charAt(0).toUpperCase()+h.slice(1)},h))})]}),v.jsx("div",{className:"divide-y divide-neutral-800",children:t?v.jsxs("div",{className:"p-8 text-center",children:[v.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-lime-400 border-t-transparent rounded-full mx-auto"}),v.jsx("p",{className:"mt-2 text-sm text-neutral-500",children:"Loading issues..."})]}):u.length===0?v.jsxs("div",{className:"p-8 text-center",children:[v.jsx(Sv,{className:"h-12 w-12 text-neutral-700 mx-auto mb-3"}),v.jsx("p",{className:"text-neutral-500",children:"No issues found"}),v.jsxs(Ot,{to:"/tenant/report",className:"inline-flex items-center gap-2 mt-4 text-lime-400 hover:text-lime-300 font-medium",children:[v.jsx(lS,{className:"h-4 w-4"}),"Report Your First Issue"]})]}):u.map(h=>v.jsx("div",{className:"p-4 hover:bg-neutral-800/30 transition-colors",children:v.jsx(FM,{issue:h,variant:"compact",linkPrefix:"/tenant/issue"})},h.id))})]}),v.jsxs("div",{className:"mt-8",children:[v.jsx("h3",{className:"font-semibold text-white mb-4",children:"Recent Activity"}),v.jsx("div",{className:"bg-neutral-900/50 backdrop-blur-md border border-neutral-800 p-4 rounded-xl",children:v.jsx("div",{className:"space-y-4",children:n.slice(0,3).flatMap(h=>h.timeline.slice(-2).map(f=>v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("div",{className:"h-2 w-2 rounded-full bg-lime-500 mt-2 shadow-[0_0_8px_rgba(132,204,22,0.5)]"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:"text-sm text-neutral-300",children:f.message}),v.jsxs("p",{className:"text-xs text-neutral-500 mt-0.5",children:[h.title,"  ",new Date(f.createdAt).toLocaleDateString()]})]}),v.jsx(qo,{status:h.status,size:"sm"})]},f.id)))})})]})]})}),v.jsx(xc,{})]})}const oB=[{id:"maintenance",label:"Maintenance",icon:"",description:"Repairs, broken appliances, structural issues"},{id:"safety",label:"Safety Hazard",icon:"",description:"Fire hazards, unsafe conditions, security"},{id:"pest",label:"Pest Infestation",icon:"",description:"Insects, rodents, other pests"},{id:"noise",label:"Noise Issue",icon:"",description:"Excessive noise, disturbances"},{id:"lease-violation",label:"Lease Violation",icon:"",description:"Contract breaches, illegal terms"},{id:"utilities",label:"Utilities",icon:"",description:"Water, electricity, gas, heating/cooling"},{id:"security-deposit",label:"Security Deposit",icon:"",description:"Unfair deductions, refund issues"},{id:"other",label:"Other",icon:"",description:"Other housing issues"}],cg=[{id:1,title:"Property Address",icon:mc},{id:2,title:"Issue Category",icon:DN},{id:3,title:"Description",icon:Sv},{id:4,title:"Evidence Upload",icon:L1},{id:5,title:"Confirmation",icon:Wo}];function aB(){const[n,e]=ne.useState(1),[t,i]=ne.useState(!1),[o,l]=ne.useState({propertyAddress:"",category:"",description:"",images:[]}),[u,h]=ne.useState([]),f=()=>{n<5&&e(n+1)},m=()=>{n>1&&e(n-1)},_=A=>{const P=A.target.files;if(P){const b=Array.from(P);l({...o,images:[...o.images,...b]}),b.forEach(M=>{const O=new FileReader;O.onload=U=>{var k;(k=U.target)!=null&&k.result&&h(B=>[...B,U.target.result])},O.readAsDataURL(M)})}},x=A=>{l({...o,images:o.images.filter((P,b)=>b!==A)}),h(u.filter((P,b)=>b!==A))},w=async()=>{i(!0);try{await Ci.issues.create(o),e(5)}catch(A){console.error("Failed to submit issue:",A)}finally{i(!1)}},E=()=>{switch(n){case 1:return o.propertyAddress.length>10;case 2:return o.category!=="";case 3:return o.description.length>20;case 4:return!0;default:return!1}};return v.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[v.jsx(ms,{}),v.jsx("main",{className:"pt-24 pb-16",children:v.jsxs("div",{className:"mx-auto max-w-2xl px-4 sm:px-6 lg:px-8",children:[v.jsxs(Ot,{to:"/tenant/dashboard",className:"inline-flex items-center gap-2 text-sm text-neutral-600 hover:text-neutral-900 mb-6 transition-colors",children:[v.jsx(nc,{className:"h-4 w-4"}),"Back to Dashboard"]}),v.jsxs("div",{className:"mb-8",children:[v.jsx("div",{className:"flex items-center justify-between",children:cg.map((A,P)=>v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:`flex items-center justify-center h-10 w-10 rounded-full border-2 transition-colors ${n>=A.id?"bg-primary-600 border-primary-600 text-white":"border-neutral-300 text-neutral-400"}`,children:n>A.id?v.jsx(Wo,{className:"h-5 w-5"}):v.jsx(A.icon,{className:"h-5 w-5"})}),P<cg.length-1&&v.jsx("div",{className:`hidden sm:block w-12 lg:w-24 h-0.5 mx-2 ${n>A.id?"bg-primary-600":"bg-neutral-200"}`})]},A.id))}),v.jsxs("div",{className:"mt-4",children:[v.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:cg[n-1].title}),v.jsxs("p",{className:"text-sm text-neutral-500",children:["Step ",n," of 5"]})]})]}),v.jsxs("div",{className:"card p-6",children:[v.jsxs(Sf,{mode:"wait",children:[n===1&&v.jsx(gt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:v.jsxs("div",{children:[v.jsx("label",{htmlFor:"address",className:"label",children:"Property Address"}),v.jsx("input",{id:"address",type:"text",value:o.propertyAddress,onChange:A=>l({...o,propertyAddress:A.target.value}),className:"input-field",placeholder:"123 Main St, Apt 4B, San Francisco, CA 94102"}),v.jsx("p",{className:"mt-1.5 text-xs text-neutral-500",children:"Enter the full address including apartment/unit number"})]})},"step1"),n===2&&v.jsxs(gt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[v.jsx("p",{className:"text-sm text-neutral-600 mb-4",children:"Select the category that best describes your issue"}),v.jsx("div",{className:"grid grid-cols-2 gap-3",children:oB.map(A=>v.jsxs("button",{onClick:()=>l({...o,category:A.id}),className:`p-4 rounded-xl border-2 text-left transition-all ${o.category===A.id?"border-primary-600 bg-primary-50":"border-neutral-200 hover:border-neutral-300"}`,children:[v.jsx("span",{className:"text-2xl",children:A.icon}),v.jsx("p",{className:"font-medium text-neutral-900 mt-2",children:A.label}),v.jsx("p",{className:"text-xs text-neutral-500 mt-0.5",children:A.description})]},A.id))})]},"step2"),n===3&&v.jsxs(gt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"description",className:"label",children:"Describe the Issue"}),v.jsx("textarea",{id:"description",value:o.description,onChange:A=>l({...o,description:A.target.value}),className:"input-field min-h-[200px]",placeholder:"Please provide detailed information about the issue. Include when it started, how it affects you, and any previous attempts to resolve it with your landlord."}),v.jsx("p",{className:"mt-1.5 text-xs text-neutral-500",children:"Minimum 20 characters. Be as detailed as possible."})]}),v.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-warning-50 border border-warning-100",children:[v.jsx(Wa,{className:"h-4 w-4 text-warning-600 mt-0.5 flex-shrink-0"}),v.jsx("p",{className:"text-xs text-warning-700",children:"Avoid including personal identifying information of others. Your own identity is protected."})]})]},"step3"),n===4&&v.jsxs(gt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"label",children:"Upload Evidence (Optional)"}),v.jsxs("div",{className:"border-2 border-dashed border-neutral-300 rounded-xl p-6 text-center hover:border-primary-500 transition-colors",children:[v.jsx("input",{type:"file",id:"images",multiple:!0,accept:"image/*",onChange:_,className:"hidden"}),v.jsxs("label",{htmlFor:"images",className:"cursor-pointer",children:[v.jsx(L1,{className:"h-10 w-10 text-neutral-400 mx-auto mb-3"}),v.jsxs("p",{className:"text-sm text-neutral-600",children:[v.jsx("span",{className:"text-primary-600 font-medium",children:"Click to upload"})," or drag and drop"]}),v.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"PNG, JPG, HEIC up to 10MB each"})]})]})]}),u.length>0&&v.jsx("div",{className:"grid grid-cols-3 gap-3",children:u.map((A,P)=>v.jsxs("div",{className:"relative group aspect-square",children:[v.jsx("img",{src:A,alt:`Preview ${P+1}`,className:"w-full h-full object-cover rounded-lg"}),v.jsx("button",{onClick:()=>x(P),className:"absolute top-2 right-2 p-1 rounded-full bg-neutral-900/70 text-white opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx(wv,{className:"h-4 w-4"})})]},P))}),v.jsx("p",{className:"text-xs text-neutral-500",children:"Photos will be analyzed by our AI for authenticity and relevant details. EXIF metadata will be verified but kept private."})]},"step4"),n===5&&v.jsxs(gt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-8",children:[v.jsx("div",{className:"h-16 w-16 rounded-full bg-success-100 flex items-center justify-center mx-auto mb-4",children:v.jsx(Wo,{className:"h-8 w-8 text-success-600"})}),v.jsx("h3",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"Issue Submitted Successfully!"}),v.jsx("p",{className:"text-neutral-600 mb-6",children:"Your issue has been submitted and is being processed. Our AI will analyze your evidence shortly."}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[v.jsx(Ot,{to:"/tenant/dashboard",className:"btn-primary",children:"View Dashboard"}),v.jsx("button",{onClick:()=>{e(1),l({propertyAddress:"",category:"",description:"",images:[]}),h([])},className:"btn-secondary",children:"Report Another Issue"})]})]},"step5")]}),n<5&&v.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-neutral-100",children:[v.jsxs("button",{onClick:m,disabled:n===1,className:"btn-secondary disabled:opacity-50",children:[v.jsx(nc,{className:"h-4 w-4 mr-2"}),"Back"]}),n<4?v.jsxs("button",{onClick:f,disabled:!E(),className:"btn-primary disabled:opacity-50",children:["Continue",v.jsx(Wh,{className:"h-4 w-4 ml-2"})]}):v.jsx("button",{onClick:w,disabled:t,className:"btn-primary",children:t?v.jsxs(v.Fragment,{children:[v.jsx(Pf,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):v.jsxs(v.Fragment,{children:["Submit Issue",v.jsx(Wo,{className:"h-4 w-4 ml-2"})]})})]})]})]})})]})}const lB={maintenance:"Maintenance",safety:"Safety Hazard",pest:"Pest Infestation",noise:"Noise Issue","lease-violation":"Lease Violation",utilities:"Utilities","security-deposit":"Security Deposit",other:"Other"};function cB(){const{id:n}=F0(),[e,t]=ne.useState(null),[i,o]=ne.useState(null),[l,u]=ne.useState(!0);return ne.useEffect(()=>{(async()=>{if(n)try{const[f,m]=await Promise.all([Ci.issues.getById(n),Ci.ai.getVerdict(n)]);t(f),o(m)}finally{u(!1)}})()},[n]),l?v.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:v.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-600 border-t-transparent rounded-full"})}):e?v.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[v.jsx(ms,{}),v.jsx("main",{className:"pt-24 pb-16",children:v.jsxs("div",{className:"mx-auto max-w-4xl px-4 sm:px-6 lg:px-8",children:[v.jsxs(Ot,{to:"/tenant/dashboard",className:"inline-flex items-center gap-2 text-sm text-neutral-600 hover:text-neutral-900 mb-6 transition-colors",children:[v.jsx(nc,{className:"h-4 w-4"}),"Back to Dashboard"]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx("span",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider",children:lB[e.category]}),v.jsx(qo,{status:e.status})]}),v.jsx("h1",{className:"text-xl font-bold text-neutral-900",children:e.title})]}),v.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium px-2 py-1 rounded-full bg-danger-50 text-danger-700",children:[v.jsx(Wa,{className:"h-3 w-3"}),e.severity,"/10"]})]}),v.jsx("div",{className:"flex items-center gap-4 text-sm text-neutral-500 mb-4",children:v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(mc,{className:"h-4 w-4"}),e.propertyAddress]})}),v.jsx("p",{className:"text-neutral-700 leading-relaxed",children:e.description}),v.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-neutral-100 text-xs text-neutral-500",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(Zs,{className:"h-3.5 w-3.5"}),"Created ",Va(e.createdAt)]}),v.jsx("span",{children:""}),v.jsxs("span",{children:["Updated ",Va(e.updatedAt)]})]})]}),v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",children:[v.jsxs("h2",{className:"font-semibold text-neutral-900 mb-4 flex items-center gap-2",children:["Evidence (",e.images.length,")"]}),v.jsx(Bv,{images:e.images,analysis:i==null?void 0:i.evidenceAnalysis})]}),v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:[v.jsxs("h2",{className:"font-semibold text-neutral-900 mb-4 flex items-center gap-2",children:[v.jsx(Dg,{className:"h-4 w-4"}),"Activity Timeline"]}),v.jsx("div",{className:"space-y-4",children:e.timeline.map((h,f)=>v.jsxs("div",{className:"flex gap-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:`h-3 w-3 rounded-full mt-1.5 ${h.type==="resolved"?"bg-success-500":h.type==="escalated"?"bg-danger-500":"bg-primary-500"}`}),f<e.timeline.length-1&&v.jsx("div",{className:"absolute top-4 left-1.5 w-0.5 h-full -translate-x-1/2 bg-neutral-200"})]}),v.jsxs("div",{className:"flex-1 pb-4",children:[v.jsx("p",{className:"text-sm text-neutral-900",children:h.message}),v.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-neutral-500",children:[v.jsx("span",{className:"capitalize",children:h.actorRole}),v.jsx("span",{children:""}),v.jsx("span",{children:Va(h.createdAt)})]})]})]},h.id))})]})]}),v.jsxs("div",{className:"space-y-6",children:[i&&v.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:v.jsx(zv,{verdict:i,compact:!0})}),v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:[v.jsx("h3",{className:"font-semibold text-neutral-900 mb-4",children:"Quick Actions"}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("button",{className:"btn-secondary w-full text-sm",children:"Add More Evidence"}),v.jsx("button",{className:"btn-secondary w-full text-sm",children:"Request Escalation"}),v.jsx("button",{className:"btn-secondary w-full text-sm text-danger-600 border-danger-200 hover:bg-danger-50",children:"Withdraw Issue"})]})]})]})]})]})}),v.jsx(xc,{})]}):v.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[v.jsx(ms,{}),v.jsx("main",{className:"pt-24 pb-16",children:v.jsxs("div",{className:"mx-auto max-w-4xl px-4 text-center",children:[v.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Issue Not Found"}),v.jsx(Ot,{to:"/tenant/dashboard",className:"btn-primary mt-4 inline-flex",children:"Back to Dashboard"})]})})]})}function uB(){const[n,e]=ne.useState([]),[t,i]=ne.useState(null),[o,l]=ne.useState(!0);ne.useEffect(()=>{(async()=>{try{const[f,m]=await Promise.all([Ci.issues.getByLandlordId("landlord-1"),Ci.landlord.getStats("landlord-1")]);e(f),i(m)}finally{l(!1)}})()},[]);const u=n.filter(h=>h.status==="pending"||h.status==="in-review");return v.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[v.jsx(ms,{}),v.jsx("main",{className:"pt-24 pb-16",children:v.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[v.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"h-12 w-12 rounded-xl bg-accent-100 flex items-center justify-center",children:v.jsx(R1,{className:"h-6 w-6 text-accent-600"})}),v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-900",children:"Landlord Dashboard"}),v.jsx("p",{className:"text-neutral-600",children:"Manage complaints and maintain your reputation."})]})]})}),t&&v.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[v.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-4",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary-100 flex items-center justify-center text-primary-600",children:v.jsx(Dg,{className:"h-5 w-5"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:t.totalComplaints}),v.jsx("p",{className:"text-xs text-neutral-500",children:"Total Complaints"})]})]})}),v.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card p-4 border-warning-200 bg-warning-50",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"h-10 w-10 rounded-lg bg-warning-100 flex items-center justify-center text-warning-600",children:v.jsx(uf,{className:"h-5 w-5"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-2xl font-bold text-warning-700",children:t.pendingResponses}),v.jsx("p",{className:"text-xs text-warning-600",children:"Pending Responses"})]})]})}),v.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card p-4",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${t.reputationScore>=70?"bg-success-100 text-success-600":t.reputationScore>=50?"bg-warning-100 text-warning-600":"bg-danger-100 text-danger-600"}`,children:v.jsx(LN,{className:"h-5 w-5"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:t.reputationScore}),v.jsx("p",{className:"text-xs text-neutral-500",children:"Reputation Score"})]})]})}),v.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card p-4",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"h-10 w-10 rounded-lg bg-success-100 flex items-center justify-center text-success-600",children:v.jsx(hf,{className:"h-5 w-5"})}),v.jsxs("div",{children:[v.jsxs("p",{className:"text-2xl font-bold text-neutral-900",children:[t.responseRate,"%"]}),v.jsx("p",{className:"text-xs text-neutral-500",children:"Response Rate"})]})]})}),v.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card p-4",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"h-10 w-10 rounded-lg bg-neutral-100 flex items-center justify-center text-neutral-600",children:v.jsx(Zs,{className:"h-5 w-5"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:t.averageResponseTime}),v.jsx("p",{className:"text-xs text-neutral-500",children:"Avg Response"})]})]})})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsx("div",{className:"lg:col-span-2",children:v.jsxs("div",{className:"card p-0 overflow-hidden",children:[v.jsxs("div",{className:"p-4 border-b border-neutral-100 flex items-center justify-between",children:[v.jsx("h2",{className:"font-semibold text-neutral-900",children:"Active Complaints"}),v.jsx(Ot,{to:"#",className:"text-sm text-primary-600 hover:text-primary-700",children:"View All"})]}),o?v.jsx("div",{className:"p-8 text-center",children:v.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-600 border-t-transparent rounded-full mx-auto"})}):n.length===0?v.jsxs("div",{className:"p-8 text-center",children:[v.jsx(Dg,{className:"h-12 w-12 text-neutral-300 mx-auto mb-3"}),v.jsx("p",{className:"text-neutral-500",children:"No active complaints"})]}):v.jsx("div",{className:"divide-y divide-neutral-100",children:n.map(h=>v.jsx("div",{className:"p-4",children:v.jsx(FM,{issue:h,variant:"compact",linkPrefix:"/landlord/issue",showSeverity:!0})},h.id))})]})}),v.jsxs("div",{className:"space-y-6",children:[u.length>0&&v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card border-warning-200 bg-gradient-to-br from-warning-50 to-white",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[v.jsx(uf,{className:"h-5 w-5 text-warning-600"}),v.jsx("h3",{className:"font-semibold text-warning-700",children:"Response Needed"})]}),v.jsx("div",{className:"space-y-3",children:u.slice(0,3).map(h=>v.jsxs(Ot,{to:`/landlord/issue/${h.id}`,className:"block p-3 rounded-lg bg-white border border-warning-100 hover:border-warning-300 transition-colors",children:[v.jsx("p",{className:"text-sm font-medium text-neutral-900 mb-1",children:h.title}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx(qo,{status:h.status,size:"sm"}),v.jsx("span",{className:"text-xs text-neutral-500",children:Cf(h.createdAt)})]})]},h.id))})]}),t&&v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",children:[v.jsx("h3",{className:"font-semibold text-neutral-900 mb-4",children:"Reputation Overview"}),v.jsxs("div",{className:"relative h-32 flex items-center justify-center mb-4",children:[v.jsxs("svg",{className:"w-32 h-32 transform -rotate-90",viewBox:"0 0 100 100",children:[v.jsx("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:"#e4e4e7",strokeWidth:"10"}),v.jsx("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:t.reputationScore>=70?"#10b981":t.reputationScore>=50?"#f59e0b":"#ef4444",strokeWidth:"10",strokeLinecap:"round",strokeDasharray:`${t.reputationScore/100*264} 264`})]}),v.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[v.jsx("span",{className:"text-3xl font-bold text-neutral-900",children:t.reputationScore}),v.jsx("span",{className:"text-xs text-neutral-500",children:"/ 100"})]})]}),v.jsxs("div",{className:"space-y-2 text-sm",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-neutral-600",children:"Response Rate"}),v.jsxs("span",{className:"font-medium text-neutral-900",children:[t.responseRate,"%"]})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-neutral-600",children:"Avg Response Time"}),v.jsx("span",{className:"font-medium text-neutral-900",children:t.averageResponseTime})]})]}),v.jsx("div",{className:"mt-4 p-3 rounded-lg bg-neutral-50",children:v.jsxs("div",{className:"flex items-start gap-2",children:[t.reputationScore>=70?v.jsx(hf,{className:"h-4 w-4 text-success-500 mt-0.5"}):v.jsx(IN,{className:"h-4 w-4 text-danger-500 mt-0.5"}),v.jsx("p",{className:"text-xs text-neutral-600",children:t.reputationScore>=70?"Great work! Your reputation is in good standing.":"Respond to pending issues promptly to improve your score."})]})})]})]})]})]})}),v.jsx(xc,{})]})}const dB={maintenance:"Maintenance",safety:"Safety Hazard",pest:"Pest Infestation",noise:"Noise Issue","lease-violation":"Lease Violation",utilities:"Utilities","security-deposit":"Security Deposit",other:"Other"};function hB(){const{id:n}=F0(),[e,t]=ne.useState(null),[i,o]=ne.useState(!0),[l,u]=ne.useState(""),[h,f]=ne.useState(!1),[m,_]=ne.useState(!1);ne.useEffect(()=>{(async()=>{if(n)try{const A=await Ci.issues.getById(n);t(A)}finally{o(!1)}})()},[n]);const x=async()=>{if(!(!n||!l.trim())){f(!0);try{await Ci.issues.respondToIssue(n,l),_(!0),u("")}finally{f(!1)}}};if(i)return v.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:v.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-600 border-t-transparent rounded-full"})});if(!e)return v.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[v.jsx(ms,{}),v.jsx("main",{className:"pt-24 pb-16",children:v.jsxs("div",{className:"mx-auto max-w-4xl px-4 text-center",children:[v.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Issue Not Found"}),v.jsx(Ot,{to:"/landlord/dashboard",className:"btn-primary mt-4 inline-flex",children:"Back to Dashboard"})]})})]});const w=["pending","in-review"].includes(e.status);return v.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[v.jsx(ms,{}),v.jsx("main",{className:"pt-24 pb-16",children:v.jsxs("div",{className:"mx-auto max-w-4xl px-4 sm:px-6 lg:px-8",children:[v.jsxs(Ot,{to:"/landlord/dashboard",className:"inline-flex items-center gap-2 text-sm text-neutral-600 hover:text-neutral-900 mb-6 transition-colors",children:[v.jsx(nc,{className:"h-4 w-4"}),"Back to Dashboard"]}),w&&v.jsx(gt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-warning-50 border border-warning-200 rounded-xl p-4 mb-6",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(Wa,{className:"h-5 w-5 text-warning-600"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-warning-800",children:"Response Required"}),v.jsxs("p",{className:"text-sm text-warning-600",children:["This complaint was filed ",Cf(e.createdAt),". Please respond promptly to maintain your reputation."]})]})]})}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx("span",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider",children:dB[e.category]}),v.jsx(qo,{status:e.status})]}),v.jsx("h1",{className:"text-xl font-bold text-neutral-900",children:e.title})]}),v.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium px-2 py-1 rounded-full bg-danger-50 text-danger-700",children:[v.jsx(Wa,{className:"h-3 w-3"}),"Severity: ",e.severity,"/10"]})]}),v.jsx("div",{className:"flex items-center gap-4 text-sm text-neutral-500 mb-4",children:v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(mc,{className:"h-4 w-4"}),e.propertyAddress]})}),v.jsx("p",{className:"text-neutral-700 leading-relaxed",children:e.description}),v.jsx("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-neutral-100 text-xs text-neutral-500",children:v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(Zs,{className:"h-3.5 w-3.5"}),"Reported ",Va(e.createdAt)]})})]}),v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",children:[v.jsxs("h2",{className:"font-semibold text-neutral-900 mb-4",children:["Tenant Evidence (",e.images.length,")"]}),v.jsx(Bv,{images:e.images})]}),v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:[v.jsx("h2",{className:"font-semibold text-neutral-900 mb-4",children:"Your Response"}),m?v.jsxs("div",{className:"text-center py-6",children:[v.jsx("div",{className:"h-12 w-12 rounded-full bg-success-100 flex items-center justify-center mx-auto mb-3",children:v.jsx(cS,{className:"h-6 w-6 text-success-600"})}),v.jsx("p",{className:"text-success-700 font-medium",children:"Response Submitted"}),v.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"Your response has been recorded and the tenant has been notified."})]}):v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"response",className:"label",children:"Write your response"}),v.jsx("textarea",{id:"response",value:l,onChange:E=>u(E.target.value),className:"input-field min-h-[150px]",placeholder:"Explain your position, provide context, or describe actions you're taking to resolve the issue..."})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("p",{className:"text-xs text-neutral-500",children:"Your response will be visible to the tenant and DAO reviewers."}),v.jsx("button",{onClick:x,disabled:h||!l.trim(),className:"btn-primary",children:h?v.jsxs(v.Fragment,{children:[v.jsx(Pf,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending..."]}):v.jsxs(v.Fragment,{children:[v.jsx(cS,{className:"h-4 w-4 mr-2"}),"Submit Response"]})})]})]})]})]}),v.jsxs("div",{className:"space-y-6",children:[v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[v.jsx("h3",{className:"font-semibold text-neutral-900 mb-4",children:"Timeline"}),v.jsx("div",{className:"space-y-3",children:e.timeline.map((E,A)=>v.jsxs("div",{className:"flex gap-3",children:[v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:`h-2.5 w-2.5 rounded-full mt-1.5 ${E.actorRole==="landlord"?"bg-accent-500":E.actorRole==="tenant"?"bg-primary-500":"bg-neutral-400"}`}),A<e.timeline.length-1&&v.jsx("div",{className:"absolute top-3 left-1 w-0.5 h-full bg-neutral-200"})]}),v.jsxs("div",{className:"flex-1 pb-3",children:[v.jsx("p",{className:"text-sm text-neutral-900",children:E.message}),v.jsx("p",{className:"text-xs text-neutral-500 mt-0.5",children:Va(E.createdAt)})]})]},E.id))})]}),v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",children:[v.jsx("h3",{className:"font-semibold text-neutral-900 mb-4",children:"Quick Actions"}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("button",{className:"btn-secondary w-full text-sm",children:"Request More Details"}),v.jsx("button",{className:"btn-secondary w-full text-sm",children:"Propose Resolution"}),v.jsx("button",{className:"btn-secondary w-full text-sm text-danger-600 border-danger-200 hover:bg-danger-50",children:"Dispute Claim"})]})]})]})]})]})}),v.jsx(xc,{})]})}function fB(){const[n,e]=ne.useState([]),[t,i]=ne.useState(null),[o,l]=ne.useState(!0);ne.useEffect(()=>{(async()=>{try{const f=await Ci.dao.getPendingCases();e(f),f.length>0&&i(f[0])}finally{l(!1)}})()},[]);const u=h=>{const f={"favor-tenant":0,"favor-landlord":0,"request-more-context":0};return h.votes.forEach(m=>{f[m.option]++}),f};return v.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[v.jsx(ms,{}),v.jsx("main",{className:"pt-24 pb-16",children:v.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[v.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-success-500 to-accent-600 flex items-center justify-center",children:v.jsx(df,{className:"h-6 w-6 text-white"})}),v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-900",children:"DAO Dashboard"}),v.jsx("p",{className:"text-neutral-600",children:"Review cases and vote on tenant-landlord disputes."})]})]}),v.jsx("div",{className:"flex items-center gap-4 text-sm",children:v.jsxs("div",{className:"flex items-center gap-2 text-neutral-600",children:[v.jsx(Rf,{className:"h-4 w-4"}),v.jsx("span",{children:"127 Active Jurors"})]})})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[v.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-4",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"h-10 w-10 rounded-lg bg-warning-100 flex items-center justify-center text-warning-600",children:v.jsx(Zs,{className:"h-5 w-5"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:n.length}),v.jsx("p",{className:"text-xs text-neutral-500",children:"Pending Cases"})]})]})}),v.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card p-4",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"h-10 w-10 rounded-lg bg-success-100 flex items-center justify-center text-success-600",children:v.jsx(Wo,{className:"h-5 w-5"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:"24"}),v.jsx("p",{className:"text-xs text-neutral-500",children:"Your Votes This Month"})]})]})}),v.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card p-4",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"h-10 w-10 rounded-lg bg-accent-100 flex items-center justify-center text-accent-600",children:v.jsx(Lg,{className:"h-5 w-5"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:"89%"}),v.jsx("p",{className:"text-xs text-neutral-500",children:"AI Agreement Rate"})]})]})})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[v.jsx("div",{className:"lg:col-span-3",children:v.jsxs("div",{className:"card p-0 overflow-hidden",children:[v.jsx("div",{className:"p-4 border-b border-neutral-100",children:v.jsx("h2",{className:"font-semibold text-neutral-900",children:"Pending Cases"})}),o?v.jsx("div",{className:"p-8 text-center",children:v.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-primary-600 border-t-transparent rounded-full mx-auto"})}):v.jsx("div",{className:"divide-y divide-neutral-100 max-h-[600px] overflow-y-auto scrollbar-thin",children:n.map(h=>v.jsxs("button",{onClick:()=>i(h),className:`w-full p-4 text-left transition-colors ${(t==null?void 0:t.id)===h.id?"bg-primary-50 border-l-2 border-primary-600":"hover:bg-neutral-50"}`,children:[v.jsxs("div",{className:"flex items-start justify-between gap-2",children:[v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:"text-sm font-medium text-neutral-900 truncate",children:h.issue.title}),v.jsx("p",{className:"text-xs text-neutral-500 mt-0.5",children:Cf(h.createdAt)})]}),v.jsx(qo,{status:h.status,size:"sm",showDot:!1})]}),v.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[v.jsxs("span",{className:"text-xs text-neutral-500",children:[h.votes.length," votes"]}),v.jsx("span",{className:"text-xs text-neutral-400",children:""}),v.jsxs("span",{className:"text-xs text-neutral-500",children:["Severity ",h.issue.severity,"/10"]})]})]},h.id))})]})}),v.jsx("div",{className:"lg:col-span-5",children:t?v.jsxs(gt.div,{initial:{opacity:0},animate:{opacity:1},className:"card",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[v.jsxs("span",{className:"text-xs text-neutral-500 uppercase tracking-wider",children:["Case #",t.id]}),v.jsx(qo,{status:t.status,size:"sm"})]}),v.jsx("h2",{className:"text-lg font-bold text-neutral-900",children:t.issue.title})]}),v.jsxs(Ot,{to:`/dao/case/${t.id}`,className:"btn-secondary text-xs py-1.5 px-3",children:["Full View",v.jsx(yv,{className:"h-3 w-3 ml-1"})]})]}),v.jsx("p",{className:"text-sm text-neutral-600 mb-4",children:Ng(t.issue.description,200)}),t.issue.images.length>0&&v.jsxs("div",{className:"mb-4",children:[v.jsx("p",{className:"text-xs font-medium text-neutral-500 mb-2",children:"Evidence"}),v.jsx("div",{className:"flex gap-2",children:t.issue.images.slice(0,4).map((h,f)=>v.jsx("div",{className:"h-16 w-16 rounded-lg overflow-hidden bg-neutral-100",children:v.jsx("img",{src:h,alt:"",className:"h-full w-full object-cover"})},f))})]}),v.jsxs("div",{className:"p-4 rounded-lg bg-neutral-50 mb-4",children:[v.jsx("p",{className:"text-xs font-medium text-neutral-500 mb-3",children:"Current Votes (Blind)"}),v.jsx("div",{className:"grid grid-cols-3 gap-3",children:Object.entries(u(t)).map(([h,f])=>v.jsxs("div",{className:"text-center p-2 rounded-lg bg-white border border-neutral-200",children:[v.jsx("p",{className:"text-lg font-bold text-neutral-900",children:f}),v.jsx("p",{className:"text-xs text-neutral-500 capitalize",children:h.replace(/-/g," ")})]},h))})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("p",{className:"text-xs font-medium text-neutral-500 mb-2",children:"Cast Your Vote"}),v.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[v.jsx("button",{className:"py-3 rounded-lg bg-primary-100 text-primary-700 text-sm font-medium hover:bg-primary-200 transition-colors",children:"Favor Tenant"}),v.jsx("button",{className:"py-3 rounded-lg bg-accent-100 text-accent-700 text-sm font-medium hover:bg-accent-200 transition-colors",children:"Favor Landlord"}),v.jsx("button",{className:"py-3 rounded-lg bg-neutral-100 text-neutral-700 text-sm font-medium hover:bg-neutral-200 transition-colors",children:"More Context"})]})]}),v.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-neutral-100 text-xs text-neutral-500",children:[v.jsx(Zs,{className:"h-3.5 w-3.5"}),v.jsxs("span",{children:["Voting deadline: ",new Date(t.deadline).toLocaleDateString()]})]})]},t.id):v.jsxs("div",{className:"card text-center py-12",children:[v.jsx(df,{className:"h-12 w-12 text-neutral-300 mx-auto mb-3"}),v.jsx("p",{className:"text-neutral-500",children:"Select a case to review"})]})}),v.jsxs("div",{className:"lg:col-span-4",children:[t!=null&&t.aiVerdict?v.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},children:v.jsx(zv,{verdict:t.aiVerdict})},t.id+"-verdict"):v.jsxs("div",{className:"card text-center py-12",children:[v.jsx(Lg,{className:"h-12 w-12 text-neutral-300 mx-auto mb-3"}),v.jsx("p",{className:"text-neutral-500",children:"AI analysis will appear here"})]}),v.jsxs("div",{className:"card mt-6",children:[v.jsxs("h3",{className:"font-semibold text-neutral-900 mb-3 flex items-center gap-2",children:[v.jsx(Wa,{className:"h-4 w-4 text-warning-500"}),"Voting Guidelines"]}),v.jsxs("ul",{className:"space-y-2 text-sm text-neutral-600",children:[v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"text-primary-500 mt-1",children:""}),"Review all evidence before voting"]}),v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"text-primary-500 mt-1",children:""}),"Consider AI analysis but use your judgment"]}),v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"text-primary-500 mt-1",children:""}),"Votes are blind until deadline passes"]}),v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"text-primary-500 mt-1",children:""}),"Request more context if evidence is unclear"]})]})]})]})]})]})}),v.jsx(xc,{})]})}const pB=[{id:"favor-tenant",label:"Favor Tenant",color:"bg-primary-600 hover:bg-primary-700",description:"Evidence supports tenant claims. Landlord should take action."},{id:"favor-landlord",label:"Favor Landlord",color:"bg-accent-600 hover:bg-accent-700",description:"Evidence does not sufficiently support tenant claims."},{id:"request-more-context",label:"Request More Context",color:"bg-neutral-600 hover:bg-neutral-700",description:"More information needed before making a decision."}];function mB(){const{id:n}=F0(),[e,t]=ne.useState(null),[i,o]=ne.useState(!0),[l,u]=ne.useState(null),[h,f]=ne.useState(!1),[m,_]=ne.useState(!1);ne.useEffect(()=>{(async()=>{if(n)try{const P=await Ci.dao.getCaseById(n);t(P)}finally{o(!1)}})()},[n]);const x=async()=>{if(!(!l||!n)){f(!0);try{await Ci.dao.vote(n,l),_(!0)}finally{f(!1)}}};if(i)return v.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:v.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-600 border-t-transparent rounded-full"})});if(!e)return v.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[v.jsx(ms,{}),v.jsx("main",{className:"pt-24 pb-16",children:v.jsxs("div",{className:"mx-auto max-w-4xl px-4 text-center",children:[v.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Case Not Found"}),v.jsx(Ot,{to:"/dao/dashboard",className:"btn-primary mt-4 inline-flex",children:"Back to Dashboard"})]})})]});const{issue:w,aiVerdict:E}=e;return v.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[v.jsx(ms,{}),v.jsx("main",{className:"pt-24 pb-16",children:v.jsxs("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8",children:[v.jsxs(Ot,{to:"/dao/dashboard",className:"inline-flex items-center gap-2 text-sm text-neutral-600 hover:text-neutral-900 mb-6 transition-colors",children:[v.jsx(nc,{className:"h-4 w-4"}),"Back to Dashboard"]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[v.jsx("div",{className:"flex items-start justify-between mb-4",children:v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsxs("span",{className:"text-xs font-medium text-neutral-500",children:["Case #",e.id]}),v.jsx(qo,{status:e.status})]}),v.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:w.title})]})}),v.jsxs("div",{className:"flex items-center gap-4 text-sm text-neutral-500 mb-4",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(mc,{className:"h-4 w-4"}),w.propertyAddress]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(Zs,{className:"h-4 w-4"}),"Created ",Va(w.createdAt)]})]}),v.jsxs("div",{className:"p-4 rounded-lg bg-neutral-50 mb-4",children:[v.jsx("h3",{className:"text-sm font-medium text-neutral-700 mb-2",children:"Issue Description"}),v.jsx("p",{className:"text-neutral-600 leading-relaxed",children:w.description})]}),v.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(Rf,{className:"h-4 w-4 text-neutral-400"}),v.jsxs("span",{className:"text-neutral-600",children:[v.jsx("strong",{children:e.votes.length})," votes cast"]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(Zs,{className:"h-4 w-4 text-warning-500"}),v.jsxs("span",{className:"text-warning-600",children:["Deadline: ",new Date(e.deadline).toLocaleDateString()]})]})]})]}),v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",children:[v.jsxs("h2",{className:"font-semibold text-neutral-900 mb-4",children:["Evidence (",w.images.length," items)"]}),v.jsx(Bv,{images:w.images,analysis:E==null?void 0:E.evidenceAnalysis})]}),v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:[v.jsx("h2",{className:"font-semibold text-neutral-900 mb-4",children:"Case Timeline"}),v.jsx("div",{className:"space-y-4",children:w.timeline.map((A,P)=>v.jsxs("div",{className:"flex gap-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:`h-3 w-3 rounded-full mt-1.5 ${A.type==="resolved"?"bg-success-500":A.type==="escalated"?"bg-accent-500":"bg-primary-500"}`}),P<w.timeline.length-1&&v.jsx("div",{className:"absolute top-4 left-1.5 w-0.5 h-full -translate-x-1/2 bg-neutral-200"})]}),v.jsxs("div",{className:"flex-1 pb-4",children:[v.jsx("p",{className:"text-sm text-neutral-900",children:A.message}),v.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-neutral-500",children:[v.jsx("span",{className:"capitalize",children:A.actorRole}),v.jsx("span",{children:""}),v.jsx("span",{children:Va(A.createdAt)})]})]})]},A.id))})]})]}),v.jsxs("div",{className:"space-y-6",children:[E&&v.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:v.jsx(zv,{verdict:E})}),v.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[v.jsx(ON,{className:"h-5 w-5 text-accent-600"}),v.jsx("h3",{className:"font-semibold text-neutral-900",children:"Cast Your Vote"})]}),m?v.jsxs("div",{className:"text-center py-6",children:[v.jsx("div",{className:"h-12 w-12 rounded-full bg-success-100 flex items-center justify-center mx-auto mb-3",children:v.jsx(Wo,{className:"h-6 w-6 text-success-600"})}),v.jsx("p",{className:"font-medium text-success-700",children:"Vote Recorded"}),v.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"Your vote will remain anonymous until the deadline."})]}):v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"space-y-3 mb-4",children:pB.map(A=>v.jsxs("button",{onClick:()=>u(A.id),className:`w-full p-4 rounded-lg border-2 text-left transition-all ${l===A.id?"border-primary-600 bg-primary-50":"border-neutral-200 hover:border-neutral-300"}`,children:[v.jsx("p",{className:"font-medium text-neutral-900",children:A.label}),v.jsx("p",{className:"text-xs text-neutral-500 mt-0.5",children:A.description})]},A.id))}),v.jsx("button",{onClick:x,disabled:!l||h,className:"btn-primary w-full",children:h?v.jsxs(v.Fragment,{children:[v.jsx(Pf,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):"Submit Vote"}),v.jsx("p",{className:"text-xs text-neutral-500 text-center mt-3",children:"Votes are blind until the deadline passes."})]})]})]})]})]})}),v.jsx(xc,{})]})}function gB(){return v.jsxs(ST,{children:[v.jsx(ns,{path:"/",element:v.jsx(pF,{})}),v.jsx(ns,{path:"/login",element:v.jsx(Qk,{})}),v.jsx(ns,{path:"/tenant/dashboard",element:v.jsx(sB,{})}),v.jsx(ns,{path:"/tenant/report",element:v.jsx(aB,{})}),v.jsx(ns,{path:"/tenant/issue/:id",element:v.jsx(cB,{})}),v.jsx(ns,{path:"/landlord/dashboard",element:v.jsx(uB,{})}),v.jsx(ns,{path:"/landlord/issue/:id",element:v.jsx(hB,{})}),v.jsx(ns,{path:"/dao/dashboard",element:v.jsx(fB,{})}),v.jsx(ns,{path:"/dao/case/:id",element:v.jsx(mB,{})})]})}PE.createRoot(document.getElementById("root")).render(v.jsx(ne.StrictMode,{children:v.jsx(CT,{children:v.jsx(gB,{})})}));
